<!DOCTYPE HTML>
<html lang="en" class="coal sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>VellumFE Documentation</title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->

        <meta name="description" content="Comprehensive documentation for VellumFE, a modern multi-frontend client for GemStone IV">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon-de23e50b.svg">
        <link rel="shortcut icon" href="favicon-8114d1fc.png">
        <link rel="stylesheet" href="css/variables-8adf115d.css">
        <link rel="stylesheet" href="css/general-2459343d.css">
        <link rel="stylesheet" href="css/chrome-ae938929.css">
        <link rel="stylesheet" href="css/print-9e4910d8.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="fonts/fonts-9644e21d.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="mdbook-highlight-css" href="highlight-493f70e1.css">
        <link rel="stylesheet" id="mdbook-tomorrow-night-css" href="tomorrow-night-4c0ae647.css">
        <link rel="stylesheet" id="mdbook-ayu-highlight-css" href="ayu-highlight-3fdfc3ac.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "";
            const default_light_theme = "coal";
            const default_dark_theme = "coal";
            window.path_to_searchindex_js = "searchindex-ad3aee19.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc-25e7f624.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="mdbook-body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('coal')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="mdbook-sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("mdbook-sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="mdbook-sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="mdbook-sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="mdbook-page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="mdbook-menu-bar-hover-placeholder"></div>
                <div id="mdbook-menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="mdbook-sidebar-toggle" class="icon-button" for="mdbook-sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="mdbook-sidebar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"/></svg></span>
                        </label>
                        <button id="mdbook-theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="mdbook-theme-list">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M371.3 367.1c27.3-3.9 51.9-19.4 67.2-42.9L600.2 74.1c12.6-19.5 9.4-45.3-7.6-61.2S549.7-4.4 531.1 9.6L294.4 187.2c-24 18-38.2 46.1-38.4 76.1L371.3 367.1zm-19.6 25.4l-116-104.4C175.9 290.3 128 339.6 128 400c0 3.9 .2 7.8 .6 11.6c1.8 17.5-10.2 36.4-27.8 36.4H96c-17.7 0-32 14.3-32 32s14.3 32 32 32H240c61.9 0 112-50.1 112-112c0-2.5-.1-5-.2-7.5z"/></svg></span>
                        </button>
                        <ul id="mdbook-theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-ayu">Ayu</button></li>
                        </ul>
                        <button id="mdbook-search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="mdbook-searchbar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352c79.5 0 144-64.5 144-144s-64.5-144-144-144S64 128.5 64 208s64.5 144 144 144z"/></svg></span>
                        </button>
                    </div>

                    <h1 class="menu-title">VellumFE Documentation</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <span class=fa-svg id="print-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M128 0C92.7 0 64 28.7 64 64v96h64V64H354.7L384 93.3V160h64V93.3c0-17-6.7-33.3-18.7-45.3L400 18.7C388 6.7 371.7 0 354.7 0H128zM384 352v32 64H128V384 368 352H384zm64 32h32c17.7 0 32-14.3 32-32V256c0-35.3-28.7-64-64-64H64c-35.3 0-64 28.7-64 64v96c0 17.7 14.3 32 32 32H64v64c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V384zm-16-88c-13.3 0-24-10.7-24-24s10.7-24 24-24s24 10.7 24 24s-10.7 24-24 24z"/></svg></span>
                        </a>
                        <a href="https://github.com/nisugi/vellum-fe" title="Git repository" aria-label="Git repository">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span>
                        </a>

                    </div>
                </div>

                <div id="mdbook-search-wrapper" class="hidden">
                    <form id="mdbook-searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="mdbook-searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="mdbook-searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <span class=fa-svg id="fa-spin"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M304 48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zm0 416c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM48 304c26.5 0 48-21.5 48-48s-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48zm464-48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM142.9 437c18.7-18.7 18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zm0-294.2c18.7-18.7 18.7-49.1 0-67.9S93.7 56.2 75 75s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zM369.1 437c18.7 18.7 49.1 18.7 67.9 0s18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9z"/></svg></span>
                            </div>
                        </div>
                    </form>
                    <div id="mdbook-searchresults-outer" class="searchresults-outer hidden">
                        <div id="mdbook-searchresults-header" class="searchresults-header"></div>
                        <ul id="mdbook-searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('mdbook-sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('mdbook-sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#mdbook-sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="mdbook-content" class="content">
                    <main>
                        <h1 id="vellum-fe"><a class="header" href="#vellum-fe">VellumFE</a></h1>
<p><strong>A modern, high-performance multi-frontend client for GemStone IV</strong></p>
<hr>
<h2 id="what-is-vellum-fe"><a class="header" href="#what-is-vellum-fe">What is VellumFE?</a></h2>
<p>VellumFE is a feature-rich terminal client designed specifically for <a href="https://www.play.net/gs4/">GemStone IV</a>, the legendary text-based MMORPG by Simutronics. Built from the ground up in Rust, VellumFE delivers:</p>
<ul>
<li><strong>60+ FPS rendering</strong> with sub-millisecond event processing</li>
<li><strong>Fully customizable layouts</strong> with pixel-perfect window positioning</li>
<li><strong>Rich theming support</strong> with 24-bit true color</li>
<li><strong>Multiple connection modes</strong> (Lich proxy or direct eAccess authentication)</li>
<li><strong>Modern TUI</strong> built on ratatui with planned GUI support via egui</li>
</ul>
<pre><code>┌─────────────────────────────────────────────────────────────────────────┐
│                              VellumFE                                    │
│                                                                          │
│  ┌─────────────────────────┐  ┌────────────────────────────────────┐   │
│  │      Main Window        │  │         Room Description           │   │
│  │                         │  │  [Obvious exits: north, east, out] │   │
│  │  A goblin attacks!      │  └────────────────────────────────────┘   │
│  │  &gt; attack goblin        │  ┌──────────┐  ┌──────────┐              │
│  │  You swing at a goblin! │  │ ◄ N ►    │  │ HP: 100% │              │
│  │                         │  │   S      │  │ MP:  87% │              │
│  └─────────────────────────┘  └──────────┘  └──────────┘              │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │ &gt;                                                                │   │
│  └─────────────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────────────┘
</code></pre>
<h2 id="philosophy"><a class="header" href="#philosophy">Philosophy</a></h2>
<p>VellumFE is built on these core principles:</p>
<h3 id="1-performance-first"><a class="header" href="#1-performance-first">1. Performance First</a></h3>
<p>Every design decision prioritizes smooth, responsive gameplay. Generation-based change detection, lazy text wrapping, and efficient memory management ensure VellumFE never gets in your way.</p>
<h3 id="2-customization-without-limits"><a class="header" href="#2-customization-without-limits">2. Customization Without Limits</a></h3>
<p>Your client should look and behave exactly how you want. Every window can be positioned, sized, styled, and configured independently. Create layouts for hunting, merchanting, roleplaying, or anything else.</p>
<h3 id="3-modern-architecture"><a class="header" href="#3-modern-architecture">3. Modern Architecture</a></h3>
<p>A clean separation between Core (game logic), Data (state), and Frontend (rendering) allows for multiple frontends (TUI today, GUI tomorrow) while keeping the codebase maintainable.</p>
<h3 id="4-developer-friendly"><a class="header" href="#4-developer-friendly">4. Developer Friendly</a></h3>
<p>Written in idiomatic Rust with comprehensive documentation. Want to add a new widget type? Extend the parser? Create a custom browser? The architecture supports it.</p>
<h2 id="feature-highlights"><a class="header" href="#feature-highlights">Feature Highlights</a></h2>
<h3 id="layouts"><a class="header" href="#layouts">Layouts</a></h3>
<p>Design your perfect interface with TOML-based layout files. Position windows by row/column or pixel coordinates. Nest windows, create tabs, configure borders and colors per-window.</p>
<h3 id="highlights"><a class="header" href="#highlights">Highlights</a></h3>
<p>Apply colors and styles to game text with regex patterns. Highlight creature names, player speech, spell effects, or anything else. Fast literal matching via Aho-Corasick for high-frequency patterns.</p>
<h3 id="keybinds"><a class="header" href="#keybinds">Keybinds</a></h3>
<p>Bind any key combination to game commands, client actions, or macros. Full modifier support (Ctrl, Alt, Shift). Action-based system supports scrolling, navigation, text editing, and custom commands.</p>
<h3 id="themes"><a class="header" href="#themes">Themes</a></h3>
<p>Complete color control with presets, palettes, and per-widget overrides. Ship with dark and light themes, or create your own.</p>
<h3 id="sound"><a class="header" href="#sound">Sound</a></h3>
<p>Audio alerts for game events with configurable triggers. Text-to-speech support for accessibility.</p>
<h3 id="connection-modes"><a class="header" href="#connection-modes">Connection Modes</a></h3>
<p>Connect via Lich for scripting integration, or directly authenticate with eAccess for standalone operation.</p>
<h2 id="quick-start"><a class="header" href="#quick-start">Quick Start</a></h2>
<pre><code class="language-bash"># Via Lich (default)
vellum-fe --port 8000

# Direct connection
vellum-fe --direct --account YOUR_ACCOUNT --character CharName
</code></pre>
<p>See <a href="#installation">Installation</a> for detailed setup instructions.</p>
<h2 id="documentation-structure"><a class="header" href="#documentation-structure">Documentation Structure</a></h2>
<p>This documentation is organized for multiple audiences:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Section</th><th>Audience</th><th>Purpose</th></tr>
</thead>
<tbody>
<tr><td><a href="getting-started/README.html">Getting Started</a></td><td>New users</td><td>Installation, first launch, quick tour</td></tr>
<tr><td><a href="configuration/README.html">Configuration</a></td><td>All users</td><td>Config file reference</td></tr>
<tr><td><a href="widgets/README.html">Widgets</a></td><td>All users</td><td>Widget types and properties</td></tr>
<tr><td><a href="customization/README.html">Customization</a></td><td>Power users</td><td>Layouts, themes, highlights</td></tr>
<tr><td><a href="tutorials/README.html">Tutorials</a></td><td>All users</td><td>Step-by-step guides</td></tr>
<tr><td><a href="cookbook/README.html">Cookbook</a></td><td>Power users</td><td>Quick recipes for specific tasks</td></tr>
<tr><td><a href="architecture/README.html">Architecture</a></td><td>Developers</td><td>System design and internals</td></tr>
<tr><td><a href="development/README.html">Development</a></td><td>Contributors</td><td>Building, testing, contributing</td></tr>
<tr><td><a href="reference/README.html">Reference</a></td><td>All users</td><td>Complete reference tables</td></tr>
</tbody>
</table>
</div>
<h2 id="getting-help"><a class="header" href="#getting-help">Getting Help</a></h2>
<ul>
<li><strong>Issues</strong>: <a href="https://github.com/nisugi/vellum-fe/issues">GitHub Issues</a></li>
<li><strong>Discussions</strong>: <a href="https://github.com/nisugi/vellum-fe/discussions">GitHub Discussions</a></li>
<li><strong>In-Game</strong>: Find us on the amunet channel</li>
</ul>
<h2 id="license"><a class="header" href="#license">License</a></h2>
<p>VellumFE is open source software. See the repository for license details.</p>
<hr>
<p><em>Ready to dive in? Start with <a href="#installation">Installation</a>.</em></p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="getting-started"><a class="header" href="#getting-started">Getting Started</a></h1>
<p>Welcome to VellumFE! This section will guide you from installation to your first game session.</p>
<h2 id="overview"><a class="header" href="#overview">Overview</a></h2>
<p>Getting VellumFE running involves three steps:</p>
<ol>
<li><strong><a href="#installation">Installation</a></strong> - Download or build VellumFE for your platform</li>
<li><strong><a href="#first-launch">First Launch</a></strong> - Connect to GemStone IV</li>
<li><strong><a href="#quick-tour">Quick Tour</a></strong> - Learn the essential controls</li>
</ol>
<h2 id="prerequisites"><a class="header" href="#prerequisites">Prerequisites</a></h2>
<p>Before you begin, ensure you have:</p>
<ul>
<li><strong>A GemStone IV Account</strong>: <a href="https://www.play.net/gs4/">Create one at play.net</a></li>
<li><strong>A Modern Terminal</strong>: Windows Terminal, iTerm2, or any terminal with 256+ color support</li>
<li><strong>Optional: Lich</strong>: For scripting support, <a href="https://lichproject.org/">install Lich</a></li>
</ul>
<h2 id="connection-modes-1"><a class="header" href="#connection-modes-1">Connection Modes</a></h2>
<p>VellumFE offers two ways to connect:</p>
<h3 id="lich-proxy-mode-recommended-for-script-users"><a class="header" href="#lich-proxy-mode-recommended-for-script-users">Lich Proxy Mode (Recommended for Script Users)</a></h3>
<pre><code class="language-bash"># Start Lich with your character, then:
vellum-fe --port 8000
</code></pre>
<ul>
<li>Full Lich script compatibility</li>
<li>Scripting and automation support</li>
<li>Most users choose this option</li>
</ul>
<h3 id="direct-mode-standalone"><a class="header" href="#direct-mode-standalone">Direct Mode (Standalone)</a></h3>
<pre><code class="language-bash">vellum-fe --direct --account YOUR_ACCOUNT --character CharName --game prime
</code></pre>
<ul>
<li>No Lich dependency</li>
<li>Authenticates directly with eAccess</li>
<li>Ideal for lightweight setups</li>
</ul>
<h2 id="whats-next"><a class="header" href="#whats-next">What’s Next?</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Page</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><a href="#installation">Installation</a></td><td>Platform-specific setup instructions</td></tr>
<tr><td><a href="#first-launch">First Launch</a></td><td>Connecting and initial configuration</td></tr>
<tr><td><a href="#quick-tour">Quick Tour</a></td><td>Essential keyboard shortcuts and navigation</td></tr>
<tr><td><a href="#upgrading">Upgrading</a></td><td>Updating to new versions</td></tr>
</tbody>
</table>
</div>
<hr>
<p><em>Ready to install? Continue to <a href="#installation">Installation</a>.</em></p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="installation"><a class="header" href="#installation">Installation</a></h1>
<p>This guide covers installing VellumFE on all supported platforms.</p>
<h2 id="quick-install"><a class="header" href="#quick-install">Quick Install</a></h2>
<h3 id="pre-built-binaries"><a class="header" href="#pre-built-binaries">Pre-built Binaries</a></h3>
<p>Download the latest release for your platform from <a href="https://github.com/nisugi/vellum-fe/releases">GitHub Releases</a>:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Platform</th><th>Download</th></tr>
</thead>
<tbody>
<tr><td>Windows (x64)</td><td><code>vellum-fe-windows-x64.zip</code></td></tr>
<tr><td>Linux (x64)</td><td><code>vellum-fe-linux-x64.tar.gz</code></td></tr>
<tr><td>macOS (Intel)</td><td><code>vellum-fe-macos-x64.tar.gz</code></td></tr>
<tr><td>macOS (Apple Silicon)</td><td><code>vellum-fe-macos-arm64.tar.gz</code></td></tr>
</tbody>
</table>
</div>
<h3 id="extract-and-run"><a class="header" href="#extract-and-run">Extract and Run</a></h3>
<p><strong>Windows:</strong></p>
<pre><code class="language-powershell"># Extract to a folder
Expand-Archive vellum-fe-windows-x64.zip -DestinationPath C:\vellum-fe

# Run
C:\vellum-fe\vellum-fe.exe
</code></pre>
<p><strong>Linux/macOS:</strong></p>
<pre><code class="language-bash"># Extract
tar xzf vellum-fe-linux-x64.tar.gz

# Make executable
chmod +x vellum-fe

# Run
./vellum-fe
</code></pre>
<hr>
<h2 id="building-from-source"><a class="header" href="#building-from-source">Building from Source</a></h2>
<p>For the latest features or unsupported platforms, build from source.</p>
<h3 id="prerequisites-1"><a class="header" href="#prerequisites-1">Prerequisites</a></h3>
<ol>
<li>
<p><strong>Rust Toolchain</strong> (1.70+)</p>
<pre><code class="language-bash">curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
</code></pre>
</li>
<li>
<p><strong>Platform-Specific Dependencies</strong></p>
<p><strong>Windows:</strong></p>
<ul>
<li>Visual Studio Build Tools</li>
<li>vcpkg with OpenSSL:
<pre><code class="language-powershell">git clone https://github.com/microsoft/vcpkg.git C:\vcpkg
cd C:\vcpkg
.\bootstrap-vcpkg.bat
.\vcpkg install openssl:x64-windows
$env:VCPKG_ROOT = "C:\vcpkg"
</code></pre>
</li>
</ul>
<p><strong>Linux (Debian/Ubuntu):</strong></p>
<pre><code class="language-bash">sudo apt install build-essential pkg-config libssl-dev libasound2-dev
</code></pre>
<p><strong>Linux (Fedora/RHEL):</strong></p>
<pre><code class="language-bash">sudo dnf install gcc pkg-config openssl-devel alsa-lib-devel
</code></pre>
<p><strong>macOS:</strong></p>
<pre><code class="language-bash">xcode-select --install
# OpenSSL usually provided by system
</code></pre>
</li>
</ol>
<h3 id="build-steps"><a class="header" href="#build-steps">Build Steps</a></h3>
<pre><code class="language-bash"># Clone repository
git clone https://github.com/nisugi/vellum-fe.git
cd vellum-fe

# Build release version
cargo build --release

# Binary is at target/release/vellum-fe
</code></pre>
<h3 id="build-options"><a class="header" href="#build-options">Build Options</a></h3>
<pre><code class="language-bash"># Build without sound support (smaller binary)
cargo build --release --no-default-features

# Build with all features
cargo build --release --features sound
</code></pre>
<hr>
<h2 id="data-directory"><a class="header" href="#data-directory">Data Directory</a></h2>
<p>VellumFE stores configuration in a data directory:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Platform</th><th>Default Location</th></tr>
</thead>
<tbody>
<tr><td>Windows</td><td><code>%USERPROFILE%\.vellum-fe\</code></td></tr>
<tr><td>Linux</td><td><code>~/.vellum-fe/</code></td></tr>
<tr><td>macOS</td><td><code>~/.vellum-fe/</code></td></tr>
</tbody>
</table>
</div>
<h3 id="structure"><a class="header" href="#structure">Structure</a></h3>
<pre><code>~/.vellum-fe/
├── config.toml          # Main configuration
├── layout.toml          # Window layout
├── keybinds.toml        # Key bindings
├── highlights.toml      # Text highlighting
├── colors.toml          # Color theme
├── simu.pem             # eAccess certificate (auto-downloaded)
├── vellum-fe.log         # Debug log
└── profiles/            # Per-character profiles
    └── CharName/
        ├── layout.toml
        └── highlights.toml
</code></pre>
<h3 id="custom-data-directory"><a class="header" href="#custom-data-directory">Custom Data Directory</a></h3>
<p>Override the default location:</p>
<pre><code class="language-bash"># Via command line
vellum-fe --data-dir /path/to/custom/dir

# Via environment variable
export VELLUM_FE_DIR=/path/to/custom/dir
vellum-fe
</code></pre>
<hr>
<h2 id="verifying-installation"><a class="header" href="#verifying-installation">Verifying Installation</a></h2>
<ol>
<li>
<p><strong>Check version:</strong></p>
<pre><code class="language-bash">vellum-fe --version
</code></pre>
</li>
<li>
<p><strong>View help:</strong></p>
<pre><code class="language-bash">vellum-fe --help
</code></pre>
</li>
<li>
<p><strong>Test terminal colors:</strong>
Launch VellumFE and check if colors display correctly. If colors look wrong:</p>
<pre><code class="language-bash"># Set truecolor support
export COLORTERM=truecolor
vellum-fe
</code></pre>
</li>
</ol>
<hr>
<h2 id="troubleshooting-installation"><a class="header" href="#troubleshooting-installation">Troubleshooting Installation</a></h2>
<h3 id="windows-vcruntime140dll-not-found"><a class="header" href="#windows-vcruntime140dll-not-found">Windows: “vcruntime140.dll not found”</a></h3>
<p>Install the <a href="https://aka.ms/vs/17/release/vc_redist.x64.exe">Visual C++ Redistributable</a>.</p>
<h3 id="windows-openssl-errors"><a class="header" href="#windows-openssl-errors">Windows: OpenSSL errors</a></h3>
<p>Ensure <code>VCPKG_ROOT</code> is set and OpenSSL is installed via vcpkg.</p>
<h3 id="linux-libasoundso-not-found"><a class="header" href="#linux-libasoundso-not-found">Linux: “libasound.so not found”</a></h3>
<p>Install ALSA library:</p>
<pre><code class="language-bash"># Debian/Ubuntu
sudo apt install libasound2

# Fedora
sudo dnf install alsa-lib
</code></pre>
<h3 id="macos-cannot-be-opened-because-the-developer-cannot-be-verified"><a class="header" href="#macos-cannot-be-opened-because-the-developer-cannot-be-verified">macOS: “cannot be opened because the developer cannot be verified”</a></h3>
<p>Right-click the binary, select “Open”, then click “Open” in the dialog.</p>
<h3 id="all-platforms-colors-not-working"><a class="header" href="#all-platforms-colors-not-working">All Platforms: Colors not working</a></h3>
<ol>
<li>Use a modern terminal (Windows Terminal, iTerm2, etc.)</li>
<li>Set <code>COLORTERM=truecolor</code> environment variable</li>
<li>Ensure your terminal supports 24-bit color</li>
</ol>
<hr>
<h2 id="next-steps"><a class="header" href="#next-steps">Next Steps</a></h2>
<p>With VellumFE installed, continue to <a href="#first-launch">First Launch</a> to connect to the game.</p>
<hr>
<h2 id="see-also"><a class="header" href="#see-also">See Also</a></h2>
<ul>
<li><a href="#building-from-source-2">Building from Source</a> - Detailed build guide for developers</li>
<li><a href="configuration/README.html">Configuration Reference</a> - Config file documentation</li>
<li><a href="troubleshooting/README.html">Troubleshooting</a> - Common issues and solutions</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="first-launch"><a class="header" href="#first-launch">First Launch</a></h1>
<p>This guide walks you through connecting to GemStone IV for the first time.</p>
<h2 id="choose-your-connection-mode"><a class="header" href="#choose-your-connection-mode">Choose Your Connection Mode</a></h2>
<p>VellumFE supports two connection methods:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Mode</th><th>Best For</th><th>Requirements</th></tr>
</thead>
<tbody>
<tr><td><strong>Lich Proxy</strong></td><td>Script users, most players</td><td>Lich running</td></tr>
<tr><td><strong>Direct</strong></td><td>Standalone use, lightweight</td><td>Account credentials</td></tr>
</tbody>
</table>
</div>
<hr>
<h2 id="option-a-lich-proxy-mode"><a class="header" href="#option-a-lich-proxy-mode">Option A: Lich Proxy Mode</a></h2>
<h3 id="step-1-start-lich"><a class="header" href="#step-1-start-lich">Step 1: Start Lich</a></h3>
<p>Launch Lich with your character. If you’re new to Lich, see the <a href="https://lichproject.org/">Lich documentation</a>.</p>
<pre><code class="language-bash"># Example Lich launch (varies by setup)
ruby lich.rb --login CharacterName
</code></pre>
<p>Lich will start listening on a port (default: 8000).</p>
<h3 id="step-2-launch-vellum-fe"><a class="header" href="#step-2-launch-vellum-fe">Step 2: Launch VellumFE</a></h3>
<pre><code class="language-bash"># Connect to Lich on default port
vellum-fe

# Or specify a different port
vellum-fe --port 8001
</code></pre>
<h3 id="step-3-verify-connection"><a class="header" href="#step-3-verify-connection">Step 3: Verify Connection</a></h3>
<p>You should see:</p>
<ol>
<li>VellumFE window appears</li>
<li>Game output starts flowing</li>
<li>Prompt (“&gt;”) is visible</li>
</ol>
<p>If the connection fails:</p>
<ul>
<li>Ensure Lich is running and logged in</li>
<li>Check the port number matches</li>
<li>See <a href="#connection-issues-1">Connection Troubleshooting</a></li>
</ul>
<hr>
<h2 id="option-b-direct-mode"><a class="header" href="#option-b-direct-mode">Option B: Direct Mode</a></h2>
<p>Direct mode connects without Lich, authenticating directly with Simutronics.</p>
<h3 id="step-1-launch-with-credentials"><a class="header" href="#step-1-launch-with-credentials">Step 1: Launch with Credentials</a></h3>
<pre><code class="language-bash"># Minimal command (will prompt for password)
vellum-fe --direct --account YOUR_ACCOUNT --character CharName

# Specify game world
vellum-fe --direct --account YOUR_ACCOUNT --character CharName --game prime
</code></pre>
<h3 id="game-worlds"><a class="header" href="#game-worlds">Game Worlds</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>World</th><th>Flag</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>Prime</td><td><code>--game prime</code></td><td>Main GemStone IV server</td></tr>
<tr><td>Platinum</td><td><code>--game platinum</code></td><td>Premium subscription server</td></tr>
<tr><td>Shattered</td><td><code>--game shattered</code></td><td>Test/development server</td></tr>
</tbody>
</table>
</div>
<h3 id="step-2-enter-password"><a class="header" href="#step-2-enter-password">Step 2: Enter Password</a></h3>
<p>When prompted, enter your account password. The password is not echoed for security.</p>
<pre><code>Password for account YOUR_ACCOUNT: ********
</code></pre>
<h3 id="step-3-verify-connection-1"><a class="header" href="#step-3-verify-connection-1">Step 3: Verify Connection</a></h3>
<p>VellumFE will:</p>
<ol>
<li>Authenticate with eAccess servers</li>
<li>Download/verify the server certificate (first time only)</li>
<li>Connect to the game server</li>
<li>Display game output</li>
</ol>
<hr>
<h2 id="initial-configuration"><a class="header" href="#initial-configuration">Initial Configuration</a></h2>
<p>On first launch, VellumFE creates default configuration files:</p>
<pre><code>~/.vellum-fe/
├── config.toml      # Created with defaults
├── layout.toml      # Default window layout
├── keybinds.toml    # Default keybindings
├── highlights.toml  # Default highlights
└── colors.toml      # Default color theme
</code></pre>
<h3 id="character-profiles"><a class="header" href="#character-profiles">Character Profiles</a></h3>
<p>To use per-character settings:</p>
<pre><code class="language-bash">vellum-fe --character CharName
</code></pre>
<p>This loads settings from <code>~/.vellum-fe/profiles/CharName/</code> if they exist, falling back to defaults.</p>
<hr>
<h2 id="essential-first-steps"><a class="header" href="#essential-first-steps">Essential First Steps</a></h2>
<p>Once connected, try these:</p>
<h3 id="1-test-commands"><a class="header" href="#1-test-commands">1. Test Commands</a></h3>
<p>Type a game command and press Enter:</p>
<pre><code>look
</code></pre>
<h3 id="2-test-scrolling"><a class="header" href="#2-test-scrolling">2. Test Scrolling</a></h3>
<p>Use Page Up/Down or scroll wheel to navigate history.</p>
<h3 id="3-open-the-menu"><a class="header" href="#3-open-the-menu">3. Open the Menu</a></h3>
<p>Press <code>Ctrl+M</code> to open the main menu. Navigate with arrow keys.</p>
<h3 id="4-check-keybinds"><a class="header" href="#4-check-keybinds">4. Check Keybinds</a></h3>
<p>Press <code>Ctrl+?</code> to view current keybindings.</p>
<hr>
<h2 id="first-launch-checklist"><a class="header" href="#first-launch-checklist">First Launch Checklist</a></h2>
<ul>
<li><input disabled="" type="checkbox"> Connected successfully</li>
<li><input disabled="" type="checkbox"> Game output appears</li>
<li><input disabled="" type="checkbox"> Commands work</li>
<li><input disabled="" type="checkbox"> Colors display correctly</li>
<li><input disabled="" type="checkbox"> Menu opens with Ctrl+M</li>
</ul>
<hr>
<h2 id="common-first-launch-issues"><a class="header" href="#common-first-launch-issues">Common First-Launch Issues</a></h2>
<h3 id="connection-refused"><a class="header" href="#connection-refused">“Connection refused”</a></h3>
<ul>
<li><strong>Lich mode</strong>: Ensure Lich is running and logged in</li>
<li><strong>Direct mode</strong>: Check internet connection</li>
</ul>
<h3 id="no-output-appears"><a class="header" href="#no-output-appears">No output appears</a></h3>
<ul>
<li>Check that you’re connected to the right port</li>
<li>Ensure Lich/game is actually sending data</li>
</ul>
<h3 id="colors-look-wrong"><a class="header" href="#colors-look-wrong">Colors look wrong</a></h3>
<ul>
<li>Set <code>COLORTERM=truecolor</code> in your terminal</li>
<li>Use Windows Terminal (not CMD) on Windows</li>
</ul>
<h3 id="password-not-accepted-direct-mode"><a class="header" href="#password-not-accepted-direct-mode">Password not accepted (Direct mode)</a></h3>
<ul>
<li>Verify account name and password</li>
<li>Try logging in via the official client first</li>
<li>Delete <code>~/.vellum-fe/simu.pem</code> and retry</li>
</ul>
<hr>
<h2 id="next-steps-1"><a class="header" href="#next-steps-1">Next Steps</a></h2>
<p>Now that you’re connected, take a <a href="#quick-tour">Quick Tour</a> to learn the essential controls.</p>
<hr>
<h2 id="see-also-1"><a class="header" href="#see-also-1">See Also</a></h2>
<ul>
<li><a href="#quick-tour">Quick Tour</a> - Essential keyboard shortcuts</li>
<li><a href="configuration/README.html">Configuration</a> - Customize your setup</li>
<li><a href="#connection-issues-1">Connection Troubleshooting</a> - Detailed connection help</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="quick-tour"><a class="header" href="#quick-tour">Quick Tour</a></h1>
<p>A 5-minute introduction to VellumFE’s essential controls and features.</p>
<h2 id="the-interface"><a class="header" href="#the-interface">The Interface</a></h2>
<pre><code>┌─────────────────────────────────────────────────────────────────────────┐
│ VellumFE v0.1.0                                                    [?]  │
├─────────────────────────────────────────────────────────────────────────┤
│ ┌─ Main ───────────────────────────┐ ┌─ Room ─────────────────────────┐ │
│ │                                  │ │ Town Square Central            │ │
│ │ A goblin attacks you!            │ │ This is the heart of the town. │ │
│ │ You swing your sword at goblin!  │ │ Obvious paths: n, e, s, w, out │ │
│ │ You hit for 45 damage!           │ │                                │ │
│ │ The goblin falls dead!           │ └────────────────────────────────┘ │
│ │                                  │ ┌─ Vitals ───┐ ┌─ Compass ──────┐ │
│ │ &gt;                                │ │ HP ████████│ │     [N]        │ │
│ │                                  │ │ MP ██████░░│ │  [W] + [E]     │ │
│ │                                  │ │ ST ████████│ │     [S]        │ │
│ └──────────────────────────────────┘ └────────────┘ └────────────────┘ │
│ ┌─ Input ──────────────────────────────────────────────────────────────┐│
│ │ &gt; attack goblin                                                      ││
│ └──────────────────────────────────────────────────────────────────────┘│
└─────────────────────────────────────────────────────────────────────────┘
</code></pre>
<hr>
<h2 id="essential-keybinds"><a class="header" href="#essential-keybinds">Essential Keybinds</a></h2>
<h3 id="navigation"><a class="header" href="#navigation">Navigation</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Key</th><th>Action</th></tr>
</thead>
<tbody>
<tr><td><code>Page Up</code> / <code>Page Down</code></td><td>Scroll main window</td></tr>
<tr><td><code>Home</code> / <code>End</code></td><td>Jump to top/bottom</td></tr>
<tr><td><code>Scroll Wheel</code></td><td>Scroll focused window</td></tr>
<tr><td><code>Ctrl+Tab</code></td><td>Cycle through windows</td></tr>
<tr><td><code>Tab</code></td><td>Focus next tabbed window</td></tr>
</tbody>
</table>
</div>
<h3 id="input"><a class="header" href="#input">Input</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Key</th><th>Action</th></tr>
</thead>
<tbody>
<tr><td><code>Enter</code></td><td>Send command</td></tr>
<tr><td><code>Up</code> / <code>Down</code></td><td>Command history</td></tr>
<tr><td><code>Ctrl+C</code></td><td>Copy selection</td></tr>
<tr><td><code>Ctrl+V</code></td><td>Paste</td></tr>
<tr><td><code>Escape</code></td><td>Clear input / Cancel</td></tr>
</tbody>
</table>
</div>
<h3 id="menus--popups"><a class="header" href="#menus--popups">Menus &amp; Popups</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Key</th><th>Action</th></tr>
</thead>
<tbody>
<tr><td><code>Ctrl+M</code></td><td>Open main menu</td></tr>
<tr><td><code>Ctrl+H</code></td><td>Open highlight browser</td></tr>
<tr><td><code>Ctrl+K</code></td><td>Open keybind browser</td></tr>
<tr><td><code>Ctrl+E</code></td><td>Open window editor</td></tr>
<tr><td><code>Ctrl+?</code></td><td>Show keybind help</td></tr>
<tr><td><code>Escape</code></td><td>Close popup</td></tr>
</tbody>
</table>
</div>
<h3 id="client-control"><a class="header" href="#client-control">Client Control</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Key</th><th>Action</th></tr>
</thead>
<tbody>
<tr><td><code>Ctrl+Q</code></td><td>Quit VellumFE</td></tr>
<tr><td><code>F5</code></td><td>Reload configuration</td></tr>
<tr><td><code>Ctrl+L</code></td><td>Clear main window</td></tr>
</tbody>
</table>
</div>
<hr>
<h2 id="try-it-now"><a class="header" href="#try-it-now">Try It Now</a></h2>
<h3 id="1-send-a-command"><a class="header" href="#1-send-a-command">1. Send a Command</a></h3>
<p>Type <code>look</code> and press Enter. The room description appears in the main window.</p>
<h3 id="2-scroll-history"><a class="header" href="#2-scroll-history">2. Scroll History</a></h3>
<p>Press <code>Page Up</code> to scroll back through game output. Press <code>End</code> to return to the bottom.</p>
<h3 id="3-use-command-history"><a class="header" href="#3-use-command-history">3. Use Command History</a></h3>
<p>Press <code>Up Arrow</code> to recall your previous command. Press <code>Down Arrow</code> to go forward.</p>
<h3 id="4-open-the-menu"><a class="header" href="#4-open-the-menu">4. Open the Menu</a></h3>
<p>Press <code>Ctrl+M</code>. Use arrow keys to navigate, Enter to select, Escape to close.</p>
<h3 id="5-focus-a-window"><a class="header" href="#5-focus-a-window">5. Focus a Window</a></h3>
<p>Click on a window or use <code>Ctrl+Tab</code> to cycle focus. The focused window has a highlighted border.</p>
<hr>
<h2 id="window-types"><a class="header" href="#window-types">Window Types</a></h2>
<p>VellumFE displays several types of windows:</p>
<h3 id="text-windows"><a class="header" href="#text-windows">Text Windows</a></h3>
<p>Scrollable text output (main game feed, thoughts, speech).</p>
<p><strong>Controls:</strong></p>
<ul>
<li>Scroll with Page Up/Down or mouse wheel</li>
<li>Select text by clicking and dragging</li>
<li>Copy selection with Ctrl+C</li>
</ul>
<h3 id="progress-bars"><a class="header" href="#progress-bars">Progress Bars</a></h3>
<p>Visual health, mana, stamina, etc.</p>
<p><strong>Display:</strong></p>
<pre><code>HP ████████████████ 100%
MP ██████████░░░░░░  67%
</code></pre>
<h3 id="compass"><a class="header" href="#compass">Compass</a></h3>
<p>Shows available exits with directional indicators.</p>
<h3 id="hands"><a class="header" href="#hands">Hands</a></h3>
<p>Displays items in your left/right hands and prepared spell.</p>
<h3 id="indicators"><a class="header" href="#indicators">Indicators</a></h3>
<p>Status icons for conditions (stunned, hidden, etc.).</p>
<hr>
<h2 id="the-main-menu"><a class="header" href="#the-main-menu">The Main Menu</a></h2>
<p>Press <code>Ctrl+M</code> to access:</p>
<pre><code>┌─ Main Menu ────────────────────────┐
│ ► Window Editor                    │
│   Highlight Browser                │
│   Keybind Browser                  │
│   Color Browser                    │
│   ─────────────────────────        │
│   Reload Configuration             │
│   ─────────────────────────        │
│   Quit                             │
└────────────────────────────────────┘
</code></pre>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Option</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>Window Editor</td><td>Modify window positions, sizes, styles</td></tr>
<tr><td>Highlight Browser</td><td>View and edit text highlighting rules</td></tr>
<tr><td>Keybind Browser</td><td>View and edit keybindings</td></tr>
<tr><td>Color Browser</td><td>View and edit color settings</td></tr>
<tr><td>Reload Configuration</td><td>Apply changes from config files</td></tr>
<tr><td>Quit</td><td>Exit VellumFE</td></tr>
</tbody>
</table>
</div>
<hr>
<h2 id="quick-customization"><a class="header" href="#quick-customization">Quick Customization</a></h2>
<h3 id="change-a-keybind"><a class="header" href="#change-a-keybind">Change a Keybind</a></h3>
<ol>
<li>Press <code>Ctrl+K</code> to open the keybind browser</li>
<li>Navigate to the keybind you want to change</li>
<li>Press Enter to edit</li>
<li>Press the new key combination</li>
<li>Press Escape to close</li>
</ol>
<h3 id="edit-highlights"><a class="header" href="#edit-highlights">Edit Highlights</a></h3>
<ol>
<li>Press <code>Ctrl+H</code> to open the highlight browser</li>
<li>Find an existing highlight or add a new one</li>
<li>Edit the pattern, colors, or conditions</li>
<li>Changes take effect immediately</li>
</ol>
<h3 id="adjust-a-window"><a class="header" href="#adjust-a-window">Adjust a Window</a></h3>
<ol>
<li>Press <code>Ctrl+E</code> to open the window editor</li>
<li>Select a window from the list</li>
<li>Modify position, size, border, colors</li>
<li>Press Escape to close (changes auto-save)</li>
</ol>
<hr>
<h2 id="keyboard-reference-card"><a class="header" href="#keyboard-reference-card">Keyboard Reference Card</a></h2>
<p>Print this for quick reference:</p>
<pre><code>┌─────────────────────────────────────────────────────────────┐
│                  VELLUM-FE QUICK REFERENCE                    │
├─────────────────────────────────────────────────────────────┤
│ NAVIGATION          │ MENUS              │ INPUT             │
│ PgUp/PgDn  Scroll   │ Ctrl+M  Main Menu  │ Enter   Send      │
│ Home/End   Top/Bot  │ Ctrl+H  Highlights │ Up/Down History   │
│ Ctrl+Tab   Windows  │ Ctrl+K  Keybinds   │ Ctrl+C  Copy      │
│ Tab        Tabs     │ Ctrl+E  Editor     │ Ctrl+V  Paste     │
│                     │ Escape  Close      │ Escape  Clear     │
├─────────────────────┴────────────────────┴───────────────────┤
│ F5 = Reload Config    Ctrl+L = Clear    Ctrl+Q = Quit       │
└─────────────────────────────────────────────────────────────┘
</code></pre>
<hr>
<h2 id="next-steps-2"><a class="header" href="#next-steps-2">Next Steps</a></h2>
<p>Now that you know the basics:</p>
<ol>
<li><strong><a href="#creating-layouts">Customize Your Layout</a></strong> - Make it yours</li>
<li><strong><a href="#highlight-patterns">Set Up Highlights</a></strong> - Color your world</li>
<li><strong><a href="#keybind-actions">Configure Keybinds</a></strong> - Optimize your workflow</li>
<li><strong><a href="widgets/README.html">Explore Widgets</a></strong> - Learn all widget types</li>
</ol>
<hr>
<h2 id="see-also-2"><a class="header" href="#see-also-2">See Also</a></h2>
<ul>
<li><a href="#keybind-actions-1">Keybind Actions Reference</a> - Complete keybind list</li>
<li><a href="configuration/README.html">Configuration Guide</a> - Config file details</li>
<li><a href="tutorials/README.html">Tutorials</a> - Step-by-step guides</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="upgrading"><a class="header" href="#upgrading">Upgrading</a></h1>
<p>How to update VellumFE to newer versions while preserving your configuration.</p>
<h2 id="before-upgrading"><a class="header" href="#before-upgrading">Before Upgrading</a></h2>
<h3 id="1-backup-your-configuration"><a class="header" href="#1-backup-your-configuration">1. Backup Your Configuration</a></h3>
<p>Your configuration files are precious. Back them up:</p>
<pre><code class="language-bash"># Linux/macOS
cp -r ~/.vellum-fe ~/.vellum-fe.backup

# Windows (PowerShell)
Copy-Item -Recurse $env:USERPROFILE\.vellum-fe $env:USERPROFILE\.vellum-fe.backup
</code></pre>
<h3 id="2-check-the-changelog"><a class="header" href="#2-check-the-changelog">2. Check the Changelog</a></h3>
<p>Review <a href="#version-history-1">Version History</a> for:</p>
<ul>
<li>Breaking changes</li>
<li>New features</li>
<li>Deprecated settings</li>
<li>Migration requirements</li>
</ul>
<hr>
<h2 id="upgrade-methods"><a class="header" href="#upgrade-methods">Upgrade Methods</a></h2>
<h3 id="pre-built-binaries-1"><a class="header" href="#pre-built-binaries-1">Pre-built Binaries</a></h3>
<ol>
<li>Download the new version from <a href="https://github.com/nisugi/vellum-fe/releases">GitHub Releases</a></li>
<li>Replace the old binary with the new one</li>
<li>Launch VellumFE</li>
</ol>
<p>Your configuration files in <code>~/.vellum-fe/</code> are preserved automatically.</p>
<h3 id="building-from-source-1"><a class="header" href="#building-from-source-1">Building from Source</a></h3>
<pre><code class="language-bash">cd vellum-fe

# Pull latest changes
git pull origin master

# Rebuild
cargo build --release

# New binary is at target/release/vellum-fe
</code></pre>
<hr>
<h2 id="configuration-compatibility"><a class="header" href="#configuration-compatibility">Configuration Compatibility</a></h2>
<h3 id="automatic-migration"><a class="header" href="#automatic-migration">Automatic Migration</a></h3>
<p>VellumFE attempts to handle configuration changes automatically:</p>
<ul>
<li>Missing keys use default values</li>
<li>Deprecated keys are ignored with warnings</li>
<li>New features are disabled until configured</li>
</ul>
<h3 id="manual-migration"><a class="header" href="#manual-migration">Manual Migration</a></h3>
<p>For breaking changes, you may need to update config files manually. Check the version-specific notes below.</p>
<hr>
<h2 id="version-specific-upgrade-notes"><a class="header" href="#version-specific-upgrade-notes">Version-Specific Upgrade Notes</a></h2>
<h3 id="v01x--v02x"><a class="header" href="#v01x--v02x">v0.1.x → v0.2.x</a></h3>
<p><em>No breaking changes expected during alpha.</em></p>
<h3 id="future-versions"><a class="header" href="#future-versions">Future Versions</a></h3>
<p>Check <a href="#version-history-1">Version History</a> for detailed migration guides when released.</p>
<hr>
<h2 id="troubleshooting-upgrades"><a class="header" href="#troubleshooting-upgrades">Troubleshooting Upgrades</a></h2>
<h3 id="config-file-errors-after-upgrade"><a class="header" href="#config-file-errors-after-upgrade">Config file errors after upgrade</a></h3>
<ol>
<li>Check the error message for the problematic key</li>
<li>Compare your config with the <a href="#default-files-1">default files</a></li>
<li>Update or remove the problematic setting</li>
</ol>
<h3 id="reset-to-defaults"><a class="header" href="#reset-to-defaults">Reset to defaults</a></h3>
<p>If needed, reset configuration:</p>
<pre><code class="language-bash"># Backup first!
cp -r ~/.vellum-fe ~/.vellum-fe.backup

# Remove old config (keeps profiles)
rm ~/.vellum-fe/*.toml

# Launch VellumFE to regenerate defaults
vellum-fe
</code></pre>
<h3 id="partial-reset"><a class="header" href="#partial-reset">Partial reset</a></h3>
<p>Reset specific files:</p>
<pre><code class="language-bash"># Reset just keybinds
rm ~/.vellum-fe/keybinds.toml
vellum-fe  # Regenerates default keybinds
</code></pre>
<hr>
<h2 id="downgrading"><a class="header" href="#downgrading">Downgrading</a></h2>
<p>To revert to an older version:</p>
<ol>
<li>Download the older release</li>
<li>Replace the binary</li>
<li>Restore your backed-up configuration if needed</li>
</ol>
<p><strong>Note:</strong> Config files from newer versions may not work with older versions. Use your backup.</p>
<hr>
<h2 id="see-also-3"><a class="header" href="#see-also-3">See Also</a></h2>
<ul>
<li><a href="#version-history-1">Version History</a> - Changelog and migration guides</li>
<li><a href="#default-files-1">Default Files</a> - Default configuration reference</li>
<li><a href="troubleshooting/README.html">Troubleshooting</a> - General troubleshooting</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="configuration"><a class="header" href="#configuration">Configuration</a></h1>
<p>VellumFE uses TOML files for all configuration. This section provides complete documentation for each configuration file.</p>
<h2 id="configuration-files"><a class="header" href="#configuration-files">Configuration Files</a></h2>
<p>VellumFE loads configuration from these files in your data directory (<code>~/.vellum-fe/</code>):</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>File</th><th>Purpose</th><th>Hot Reload</th></tr>
</thead>
<tbody>
<tr><td><a href="#configtoml-reference">config.toml</a></td><td>Main settings, connection, behavior</td><td>Yes</td></tr>
<tr><td><a href="#layouttoml-reference">layout.toml</a></td><td>Window positions, sizes, arrangement</td><td>Yes</td></tr>
<tr><td><a href="#keybindstoml-reference">keybinds.toml</a></td><td>Keyboard shortcuts and actions</td><td>Yes</td></tr>
<tr><td><a href="#highlightstoml-reference">highlights.toml</a></td><td>Text highlighting patterns</td><td>Yes</td></tr>
<tr><td><a href="#colorstoml-reference">colors.toml</a></td><td>Color theme, presets, palettes</td><td>Yes</td></tr>
</tbody>
</table>
</div>
<p><strong>Hot Reload</strong>: Press <code>F5</code> to reload all configuration without restarting.</p>
<hr>
<h2 id="file-locations"><a class="header" href="#file-locations">File Locations</a></h2>
<h3 id="default-location"><a class="header" href="#default-location">Default Location</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Platform</th><th>Path</th></tr>
</thead>
<tbody>
<tr><td>Windows</td><td><code>%USERPROFILE%\.vellum-fe\</code></td></tr>
<tr><td>Linux</td><td><code>~/.vellum-fe/</code></td></tr>
<tr><td>macOS</td><td><code>~/.vellum-fe/</code></td></tr>
</tbody>
</table>
</div>
<h3 id="custom-location"><a class="header" href="#custom-location">Custom Location</a></h3>
<p>Override with <code>--data-dir</code> or <code>VELLUM_FE_DIR</code>:</p>
<pre><code class="language-bash"># Command line
vellum-fe --data-dir /custom/path

# Environment variable
export VELLUM_FE_DIR=/custom/path
</code></pre>
<hr>
<h2 id="character-profiles-1"><a class="header" href="#character-profiles-1">Character Profiles</a></h2>
<p>Per-character configuration lives in <code>~/.vellum-fe/profiles/&lt;CharName&gt;/</code>:</p>
<pre><code>~/.vellum-fe/
├── config.toml           # Global defaults
├── layout.toml
├── keybinds.toml
├── highlights.toml
├── colors.toml
└── profiles/
    ├── Warrior/          # Character-specific overrides
    │   ├── layout.toml
    │   └── highlights.toml
    └── Wizard/
        ├── layout.toml
        └── highlights.toml
</code></pre>
<h3 id="loading-order"><a class="header" href="#loading-order">Loading Order</a></h3>
<ol>
<li>Load global defaults from <code>~/.vellum-fe/</code></li>
<li>If <code>--character</code> specified, overlay from <code>profiles/&lt;CharName&gt;/</code></li>
<li>Character files only need to contain overrides, not complete configs</li>
</ol>
<h3 id="usage"><a class="header" href="#usage">Usage</a></h3>
<pre><code class="language-bash"># Load Warrior's profile
vellum-fe --character Warrior
</code></pre>
<hr>
<h2 id="configuration-syntax"><a class="header" href="#configuration-syntax">Configuration Syntax</a></h2>
<p>All config files use <a href="https://toml.io/">TOML</a> syntax:</p>
<pre><code class="language-toml"># Comments start with #

# Simple key-value
setting = "value"
number = 42
enabled = true

# Nested tables
[section]
key = "value"

# Inline tables
point = { x = 10, y = 20 }

# Arrays
list = ["one", "two", "three"]

# Array of tables
[[items]]
name = "first"

[[items]]
name = "second"
</code></pre>
<h3 id="color-values"><a class="header" href="#color-values">Color Values</a></h3>
<p>Colors can be specified as:</p>
<pre><code class="language-toml"># Hex RGB
color = "#FF5500"

# Hex RRGGBB (same as above)
color = "#ff5500"

# Named color (from palette)
color = "bright_red"

# Preset reference
color = "@speech"  # Uses the 'speech' preset color
</code></pre>
<h3 id="size-values"><a class="header" href="#size-values">Size Values</a></h3>
<pre><code class="language-toml"># Fixed pixels
width = 40

# Percentage of parent
width = "50%"
</code></pre>
<hr>
<h2 id="default-files"><a class="header" href="#default-files">Default Files</a></h2>
<p>VellumFE ships with sensible defaults embedded in the binary. On first run, these are written to your data directory if the files don’t exist.</p>
<p>See <a href="#default-files-1">Default Files Reference</a> for complete default content.</p>
<hr>
<h2 id="validation"><a class="header" href="#validation">Validation</a></h2>
<p>VellumFE validates configuration on load:</p>
<ul>
<li><strong>Errors</strong>: Invalid syntax or required fields prevent loading</li>
<li><strong>Warnings</strong>: Unknown keys or deprecated settings log warnings but allow loading</li>
<li><strong>Missing files</strong>: Created from defaults</li>
</ul>
<p>Check <code>~/.vellum-fe/vellum-fe.log</code> for configuration warnings.</p>
<hr>
<h2 id="quick-reference"><a class="header" href="#quick-reference">Quick Reference</a></h2>
<h3 id="most-common-settings"><a class="header" href="#most-common-settings">Most Common Settings</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Setting</th><th>File</th><th>Key</th></tr>
</thead>
<tbody>
<tr><td>Connection port</td><td>config.toml</td><td><code>connection.port</code></td></tr>
<tr><td>Default character</td><td>config.toml</td><td><code>connection.character</code></td></tr>
<tr><td>Main window size</td><td>layout.toml</td><td><code>[[windows]]</code> with <code>name = "main"</code></td></tr>
<tr><td>Monsterbold color</td><td>colors.toml</td><td><code>[presets.monsterbold]</code></td></tr>
<tr><td>Attack keybind</td><td>keybinds.toml</td><td>Entry with <code>action = "send"</code></td></tr>
</tbody>
</table>
</div>
<h3 id="reload-configuration"><a class="header" href="#reload-configuration">Reload Configuration</a></h3>
<ul>
<li><strong>F5</strong>: Reload all config files</li>
<li><strong>Ctrl+M → Reload</strong>: Same via menu</li>
<li><strong>Restart</strong>: Always picks up changes</li>
</ul>
<hr>
<h2 id="file-reference"><a class="header" href="#file-reference">File Reference</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Page</th><th>Contents</th></tr>
</thead>
<tbody>
<tr><td><a href="#configtoml-reference">config.toml</a></td><td>Connection, sound, TTS, general behavior</td></tr>
<tr><td><a href="#layouttoml-reference">layout.toml</a></td><td>Window definitions, positions, sizes</td></tr>
<tr><td><a href="#keybindstoml-reference">keybinds.toml</a></td><td>Key mappings, actions, modifiers</td></tr>
<tr><td><a href="#highlightstoml-reference">highlights.toml</a></td><td>Pattern matching, colors, conditions</td></tr>
<tr><td><a href="#colorstoml-reference">colors.toml</a></td><td>Theme colors, presets, UI styling</td></tr>
<tr><td><a href="#character-profiles-2">profiles.md</a></td><td>Per-character configuration</td></tr>
</tbody>
</table>
</div>
<hr>
<h2 id="see-also-4"><a class="header" href="#see-also-4">See Also</a></h2>
<ul>
<li><a href="#creating-layouts">Creating Layouts</a> - Layout design guide</li>
<li><a href="#creating-themes">Creating Themes</a> - Theme authoring</li>
<li><a href="#default-files-1">Default Files</a> - Built-in defaults</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="configtoml-reference"><a class="header" href="#configtoml-reference">config.toml Reference</a></h1>
<p>The main configuration file controlling VellumFE’s behavior, connection settings, and general preferences.</p>
<h2 id="location"><a class="header" href="#location">Location</a></h2>
<p><code>~/.vellum-fe/config.toml</code></p>
<hr>
<h2 id="complete-reference"><a class="header" href="#complete-reference">Complete Reference</a></h2>
<pre><code class="language-toml">#
# VellumFE Configuration
#

[connection]
# Default host for Lich proxy mode
host = "127.0.0.1"

# Default port for Lich proxy mode
port = 8000

# Default character name (used for profile loading)
character = ""

# Timeout for connection attempts (seconds)
timeout = 30

[interface]
# Enable clickable links in game text
links = true

# Show window borders by default
show_borders = true

# Default border style: "plain", "rounded", "double", "thick"
border_style = "rounded"

# Mouse support
mouse = true

# Scroll speed (lines per scroll event)
scroll_speed = 3

# Command history size
history_size = 1000

[sound]
# Enable sound effects
enabled = true

# Master volume (0.0 - 1.0)
volume = 0.8

# Play startup music
startup_music = true

# Sound file paths (relative to data dir or absolute)
# alert_sound = "sounds/alert.wav"

[tts]
# Enable text-to-speech
enabled = false

# TTS rate (words per minute, platform dependent)
rate = 150

# Which streams to speak
streams = ["main"]

# Speak room descriptions
speak_rooms = true

# Speak player speech
speak_speech = true

[logging]
# Log level: "error", "warn", "info", "debug", "trace"
level = "warn"

# Log file path (relative to data dir)
file = "vellum-fe.log"

# Log to console (for debugging)
console = false

[behavior]
# Auto-scroll to bottom on new text
auto_scroll = true

# Flash window on important events
flash_on_alert = false

# Notification sound on important events
sound_on_alert = false

# Pause input during roundtime (experimental)
pause_on_rt = false

[performance]
# Maximum lines to buffer per text window
max_buffer_lines = 2000

# Frame rate target
target_fps = 60

# Enable performance metrics collection
collect_metrics = true
</code></pre>
<hr>
<h2 id="section-details"><a class="header" href="#section-details">Section Details</a></h2>
<h3 id="connection"><a class="header" href="#connection">[connection]</a></h3>
<p>Controls how VellumFE connects to the game.</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Key</th><th>Type</th><th>Default</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>host</code></td><td>string</td><td><code>"127.0.0.1"</code></td><td>Host for Lich proxy mode</td></tr>
<tr><td><code>port</code></td><td>integer</td><td><code>8000</code></td><td>Port for Lich proxy mode</td></tr>
<tr><td><code>character</code></td><td>string</td><td><code>""</code></td><td>Default character name for profiles</td></tr>
<tr><td><code>timeout</code></td><td>integer</td><td><code>30</code></td><td>Connection timeout in seconds</td></tr>
</tbody>
</table>
</div>
<p><strong>Note</strong>: Direct mode (<code>--direct</code>) ignores these settings and uses command-line credentials.</p>
<h3 id="interface"><a class="header" href="#interface">[interface]</a></h3>
<p>Visual and interaction settings.</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Key</th><th>Type</th><th>Default</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>links</code></td><td>boolean</td><td><code>true</code></td><td>Enable clickable game links</td></tr>
<tr><td><code>show_borders</code></td><td>boolean</td><td><code>true</code></td><td>Show window borders by default</td></tr>
<tr><td><code>border_style</code></td><td>string</td><td><code>"rounded"</code></td><td>Default border style</td></tr>
<tr><td><code>mouse</code></td><td>boolean</td><td><code>true</code></td><td>Enable mouse support</td></tr>
<tr><td><code>scroll_speed</code></td><td>integer</td><td><code>3</code></td><td>Lines scrolled per mouse wheel tick</td></tr>
<tr><td><code>history_size</code></td><td>integer</td><td><code>1000</code></td><td>Command history entries to remember</td></tr>
</tbody>
</table>
</div>
<p><strong>Border styles:</strong></p>
<ul>
<li><code>"plain"</code> - Single line: <code>─│─│┌┐└┘</code></li>
<li><code>"rounded"</code> - Rounded corners: <code>─│─│╭╮╰╯</code></li>
<li><code>"double"</code> - Double line: <code>═║═║╔╗╚╝</code></li>
<li><code>"thick"</code> - Thick line: <code>━┃━┃┏┓┗┛</code></li>
</ul>
<h3 id="sound-1"><a class="header" href="#sound-1">[sound]</a></h3>
<p>Audio settings.</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Key</th><th>Type</th><th>Default</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>enabled</code></td><td>boolean</td><td><code>true</code></td><td>Master sound toggle</td></tr>
<tr><td><code>volume</code></td><td>float</td><td><code>0.8</code></td><td>Master volume (0.0 to 1.0)</td></tr>
<tr><td><code>startup_music</code></td><td>boolean</td><td><code>true</code></td><td>Play music on launch</td></tr>
</tbody>
</table>
</div>
<p><strong>Note</strong>: Requires the <code>sound</code> feature to be compiled in.</p>
<h3 id="tts"><a class="header" href="#tts">[tts]</a></h3>
<p>Text-to-speech accessibility features.</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Key</th><th>Type</th><th>Default</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>enabled</code></td><td>boolean</td><td><code>false</code></td><td>Enable TTS</td></tr>
<tr><td><code>rate</code></td><td>integer</td><td><code>150</code></td><td>Speech rate (WPM)</td></tr>
<tr><td><code>streams</code></td><td>array</td><td><code>["main"]</code></td><td>Streams to speak</td></tr>
<tr><td><code>speak_rooms</code></td><td>boolean</td><td><code>true</code></td><td>Speak room descriptions</td></tr>
<tr><td><code>speak_speech</code></td><td>boolean</td><td><code>true</code></td><td>Speak player dialogue</td></tr>
</tbody>
</table>
</div>
<p><strong>Supported streams:</strong> <code>"main"</code>, <code>"speech"</code>, <code>"thoughts"</code>, <code>"combat"</code></p>
<h3 id="logging"><a class="header" href="#logging">[logging]</a></h3>
<p>Diagnostic logging configuration.</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Key</th><th>Type</th><th>Default</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>level</code></td><td>string</td><td><code>"warn"</code></td><td>Minimum log level</td></tr>
<tr><td><code>file</code></td><td>string</td><td><code>"vellum-fe.log"</code></td><td>Log file path</td></tr>
<tr><td><code>console</code></td><td>boolean</td><td><code>false</code></td><td>Also log to console</td></tr>
</tbody>
</table>
</div>
<p><strong>Log levels</strong> (from least to most verbose):</p>
<ul>
<li><code>"error"</code> - Only errors</li>
<li><code>"warn"</code> - Errors and warnings</li>
<li><code>"info"</code> - Normal operation info</li>
<li><code>"debug"</code> - Debugging details</li>
<li><code>"trace"</code> - Very verbose tracing</li>
</ul>
<h3 id="behavior"><a class="header" href="#behavior">[behavior]</a></h3>
<p>Client behavior tweaks.</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Key</th><th>Type</th><th>Default</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>auto_scroll</code></td><td>boolean</td><td><code>true</code></td><td>Auto-scroll on new text</td></tr>
<tr><td><code>flash_on_alert</code></td><td>boolean</td><td><code>false</code></td><td>Flash window on alerts</td></tr>
<tr><td><code>sound_on_alert</code></td><td>boolean</td><td><code>false</code></td><td>Play sound on alerts</td></tr>
<tr><td><code>pause_on_rt</code></td><td>boolean</td><td><code>false</code></td><td>Pause input during RT</td></tr>
</tbody>
</table>
</div>
<h3 id="performance"><a class="header" href="#performance">[performance]</a></h3>
<p>Performance tuning.</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Key</th><th>Type</th><th>Default</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>max_buffer_lines</code></td><td>integer</td><td><code>2000</code></td><td>Max lines per text window</td></tr>
<tr><td><code>target_fps</code></td><td>integer</td><td><code>60</code></td><td>Target frame rate</td></tr>
<tr><td><code>collect_metrics</code></td><td>boolean</td><td><code>true</code></td><td>Enable performance stats</td></tr>
</tbody>
</table>
</div>
<hr>
<h2 id="examples"><a class="header" href="#examples">Examples</a></h2>
<h3 id="minimal-config"><a class="header" href="#minimal-config">Minimal Config</a></h3>
<pre><code class="language-toml">[connection]
port = 8000
character = "MyCharacter"
</code></pre>
<h3 id="high-performance-config"><a class="header" href="#high-performance-config">High-Performance Config</a></h3>
<pre><code class="language-toml">[performance]
max_buffer_lines = 1000
target_fps = 120
collect_metrics = false

[interface]
links = false  # Disable link parsing for speed
</code></pre>
<h3 id="accessibility-config"><a class="header" href="#accessibility-config">Accessibility Config</a></h3>
<pre><code class="language-toml">[tts]
enabled = true
rate = 175
streams = ["main", "speech"]
speak_rooms = true
speak_speech = true

[interface]
scroll_speed = 5
</code></pre>
<hr>
<h2 id="environment-variable-overrides"><a class="header" href="#environment-variable-overrides">Environment Variable Overrides</a></h2>
<p>Some settings can be overridden via environment variables:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Variable</th><th>Overrides</th></tr>
</thead>
<tbody>
<tr><td><code>VELLUM_FE_DIR</code></td><td>Data directory location</td></tr>
<tr><td><code>RUST_LOG</code></td><td>Logging level</td></tr>
<tr><td><code>COLORTERM</code></td><td>Terminal color support</td></tr>
</tbody>
</table>
</div>
<hr>
<h2 id="see-also-5"><a class="header" href="#see-also-5">See Also</a></h2>
<ul>
<li><a href="#layouttoml-reference">layout.toml</a> - Window layout configuration</li>
<li><a href="#character-profiles-2">Character Profiles</a> - Per-character settings</li>
<li><a href="#environment-variables-1">Environment Variables</a> - All environment variables</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="layouttoml-reference"><a class="header" href="#layouttoml-reference">layout.toml Reference</a></h1>
<p>The layout configuration file defines all windows, their positions, sizes, and visual properties.</p>
<h2 id="location-1"><a class="header" href="#location-1">Location</a></h2>
<p><code>~/.vellum-fe/layout.toml</code></p>
<hr>
<h2 id="structure-overview"><a class="header" href="#structure-overview">Structure Overview</a></h2>
<pre><code class="language-toml"># Global layout settings
[layout]
columns = 120
rows = 40

# Window definitions
[[windows]]
name = "main"
type = "text"
# ... window properties

[[windows]]
name = "room"
type = "room"
# ... window properties
</code></pre>
<hr>
<h2 id="layout-section"><a class="header" href="#layout-section">[layout] Section</a></h2>
<p>Global layout dimensions and defaults.</p>
<pre><code class="language-toml">[layout]
# Terminal grid size
columns = 120        # Total columns
rows = 40            # Total rows

# Default window settings
default_border = true
default_border_style = "rounded"
</code></pre>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Key</th><th>Type</th><th>Default</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>columns</code></td><td>integer</td><td><code>120</code></td><td>Layout width in columns</td></tr>
<tr><td><code>rows</code></td><td>integer</td><td><code>40</code></td><td>Layout height in rows</td></tr>
<tr><td><code>default_border</code></td><td>boolean</td><td><code>true</code></td><td>Default border visibility</td></tr>
<tr><td><code>default_border_style</code></td><td>string</td><td><code>"rounded"</code></td><td>Default border style</td></tr>
</tbody>
</table>
</div>
<hr>
<h2 id="windows-array"><a class="header" href="#windows-array">[[windows]] Array</a></h2>
<p>Each <code>[[windows]]</code> entry defines a single window.</p>
<h3 id="common-properties"><a class="header" href="#common-properties">Common Properties</a></h3>
<p>These properties apply to all window types:</p>
<pre><code class="language-toml">[[windows]]
# Identity
name = "main"              # Unique identifier (required)
type = "text"              # Widget type (required)

# Position (choose one method)
row = 0                    # Row position
col = 0                    # Column position
# OR
x = 0                      # Pixel X position
y = 0                      # Pixel Y position

# Size
width = 80                 # Width in columns
height = 30                # Height in rows
# OR percentage
width = "60%"              # Percentage of parent width
height = "80%"             # Percentage of parent height

# Visual
show_border = true         # Show window border
border_style = "rounded"   # Border style
border_sides = "all"       # Which sides have borders
show_title = true          # Show title bar
title = "Main Window"      # Custom title (default: name)
transparent_background = false  # Transparent background

# Colors (override theme)
border_color = "#5588AA"   # Border color
background_color = "#000000"  # Background color
text_color = "#CCCCCC"     # Text color
</code></pre>
<h3 id="position-properties"><a class="header" href="#position-properties">Position Properties</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Key</th><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>row</code></td><td>integer</td><td>Row position (0 = top)</td></tr>
<tr><td><code>col</code></td><td>integer</td><td>Column position (0 = left)</td></tr>
<tr><td><code>x</code></td><td>integer</td><td>Pixel X position</td></tr>
<tr><td><code>y</code></td><td>integer</td><td>Pixel Y position</td></tr>
</tbody>
</table>
</div>
<p><strong>Note</strong>: Use <code>row</code>/<code>col</code> for grid-based layouts, <code>x</code>/<code>y</code> for pixel-precise positioning.</p>
<h3 id="size-properties"><a class="header" href="#size-properties">Size Properties</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Key</th><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>width</code></td><td>integer or string</td><td>Width in columns or percentage</td></tr>
<tr><td><code>height</code></td><td>integer or string</td><td>Height in rows or percentage</td></tr>
</tbody>
</table>
</div>
<p><strong>Percentage sizing:</strong></p>
<pre><code class="language-toml">width = "50%"    # 50% of layout width
height = "100%"  # Full layout height
</code></pre>
<h3 id="border-properties"><a class="header" href="#border-properties">Border Properties</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Key</th><th>Type</th><th>Default</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>show_border</code></td><td>boolean</td><td><code>true</code></td><td>Show border</td></tr>
<tr><td><code>border_style</code></td><td>string</td><td><code>"rounded"</code></td><td>Border style</td></tr>
<tr><td><code>border_sides</code></td><td>string</td><td><code>"all"</code></td><td>Which sides</td></tr>
<tr><td><code>border_color</code></td><td>string</td><td>theme</td><td>Border color</td></tr>
</tbody>
</table>
</div>
<p><strong>Border sides:</strong></p>
<ul>
<li><code>"all"</code> - All four sides</li>
<li><code>"none"</code> - No borders</li>
<li><code>"top"</code> - Top only</li>
<li><code>"bottom"</code> - Bottom only</li>
<li><code>"left"</code> - Left only</li>
<li><code>"right"</code> - Right only</li>
<li><code>"top,bottom"</code> - Specific sides (comma-separated)</li>
<li><code>"horizontal"</code> - Top and bottom</li>
<li><code>"vertical"</code> - Left and right</li>
</ul>
<hr>
<h2 id="window-types-1"><a class="header" href="#window-types-1">Window Types</a></h2>
<h3 id="text-window"><a class="header" href="#text-window">Text Window</a></h3>
<p>Scrollable text display for game output.</p>
<pre><code class="language-toml">[[windows]]
name = "main"
type = "text"
row = 0
col = 0
width = 80
height = 30

# Text-specific options
stream = "main"           # Game stream to display
buffer_size = 2000        # Maximum lines to buffer
word_wrap = true          # Enable word wrapping
</code></pre>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Key</th><th>Type</th><th>Default</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>stream</code></td><td>string</td><td>same as name</td><td>Game stream to display</td></tr>
<tr><td><code>buffer_size</code></td><td>integer</td><td><code>2000</code></td><td>Max buffered lines</td></tr>
<tr><td><code>word_wrap</code></td><td>boolean</td><td><code>true</code></td><td>Enable word wrap</td></tr>
</tbody>
</table>
</div>
<p><strong>Common streams:</strong> <code>main</code>, <code>speech</code>, <code>thoughts</code>, <code>combat</code>, <code>death</code>, <code>logons</code>, <code>familiar</code>, <code>group</code></p>
<h3 id="tabbed-text-window"><a class="header" href="#tabbed-text-window">Tabbed Text Window</a></h3>
<p>Multiple streams in tabbed interface.</p>
<pre><code class="language-toml">[[windows]]
name = "channels"
type = "tabbed_text"
row = 0
col = 80
width = 40
height = 30

# Tab configuration
tabs = ["speech", "thoughts", "combat"]
default_tab = "speech"
show_tab_bar = true
</code></pre>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Key</th><th>Type</th><th>Default</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>tabs</code></td><td>array</td><td><code>[]</code></td><td>List of stream names</td></tr>
<tr><td><code>default_tab</code></td><td>string</td><td>first tab</td><td>Initially active tab</td></tr>
<tr><td><code>show_tab_bar</code></td><td>boolean</td><td><code>true</code></td><td>Show tab headers</td></tr>
</tbody>
</table>
</div>
<h3 id="command-input"><a class="header" href="#command-input">Command Input</a></h3>
<p>Text input field for commands.</p>
<pre><code class="language-toml">[[windows]]
name = "input"
type = "command_input"
row = 38
col = 0
width = 120
height = 2

# Input-specific options
prompt = "&gt; "
history = true
</code></pre>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Key</th><th>Type</th><th>Default</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>prompt</code></td><td>string</td><td><code>"&gt; "</code></td><td>Input prompt</td></tr>
<tr><td><code>history</code></td><td>boolean</td><td><code>true</code></td><td>Enable command history</td></tr>
</tbody>
</table>
</div>
<h3 id="progress-bar"><a class="header" href="#progress-bar">Progress Bar</a></h3>
<p>Displays a value as a filled bar.</p>
<pre><code class="language-toml">[[windows]]
name = "health"
type = "progress"
row = 0
col = 80
width = 20
height = 1

# Progress-specific options
stat = "health"           # Stat to track
show_value = true         # Show "425/500"
show_percentage = false   # Show "85%"
bar_color = "#00FF00"     # Bar fill color
</code></pre>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Key</th><th>Type</th><th>Default</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>stat</code></td><td>string</td><td>required</td><td>Stat ID (<code>health</code>, <code>mana</code>, etc.)</td></tr>
<tr><td><code>show_value</code></td><td>boolean</td><td><code>true</code></td><td>Show numeric value</td></tr>
<tr><td><code>show_percentage</code></td><td>boolean</td><td><code>false</code></td><td>Show percentage</td></tr>
<tr><td><code>bar_color</code></td><td>string</td><td>theme</td><td>Bar fill color</td></tr>
</tbody>
</table>
</div>
<p><strong>Stat IDs:</strong> <code>health</code>, <code>mana</code>, <code>spirit</code>, <code>stamina</code>, <code>encumbrance</code></p>
<h3 id="countdown"><a class="header" href="#countdown">Countdown</a></h3>
<p>Countdown timer display.</p>
<pre><code class="language-toml">[[windows]]
name = "roundtime"
type = "countdown"
row = 2
col = 80
width = 20
height = 1

# Countdown-specific options
countdown_type = "roundtime"  # "roundtime" or "casttime"
show_seconds = true
icon = "⏱"
</code></pre>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Key</th><th>Type</th><th>Default</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>countdown_type</code></td><td>string</td><td>required</td><td><code>roundtime</code> or <code>casttime</code></td></tr>
<tr><td><code>show_seconds</code></td><td>boolean</td><td><code>true</code></td><td>Show remaining seconds</td></tr>
<tr><td><code>icon</code></td><td>string</td><td><code>""</code></td><td>Icon to display</td></tr>
</tbody>
</table>
</div>
<h3 id="compass-1"><a class="header" href="#compass-1">Compass</a></h3>
<p>Directional compass display.</p>
<pre><code class="language-toml">[[windows]]
name = "compass"
type = "compass"
row = 5
col = 100
width = 10
height = 5

# Compass-specific options
style = "graphical"       # "graphical" or "text"
show_labels = true        # Show N/S/E/W labels
</code></pre>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Key</th><th>Type</th><th>Default</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>style</code></td><td>string</td><td><code>"graphical"</code></td><td>Display style</td></tr>
<tr><td><code>show_labels</code></td><td>boolean</td><td><code>true</code></td><td>Show direction labels</td></tr>
</tbody>
</table>
</div>
<h3 id="hand"><a class="header" href="#hand">Hand</a></h3>
<p>Left/right hand or spell display.</p>
<pre><code class="language-toml">[[windows]]
name = "right_hand"
type = "hand"
row = 10
col = 100
width = 15
height = 1

# Hand-specific options
hand_type = "right"       # "left", "right", or "spell"
icon = "🤚"
</code></pre>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Key</th><th>Type</th><th>Default</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>hand_type</code></td><td>string</td><td>required</td><td><code>left</code>, <code>right</code>, or <code>spell</code></td></tr>
<tr><td><code>icon</code></td><td>string</td><td><code>""</code></td><td>Icon to display</td></tr>
</tbody>
</table>
</div>
<h3 id="indicator"><a class="header" href="#indicator">Indicator</a></h3>
<p>Status indicator widget.</p>
<pre><code class="language-toml">[[windows]]
name = "status"
type = "indicator"
row = 12
col = 100
width = 20
height = 1

# Indicator-specific options
indicators = ["stunned", "hidden", "poisoned"]
style = "icons"           # "icons" or "text"
</code></pre>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Key</th><th>Type</th><th>Default</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>indicators</code></td><td>array</td><td>all</td><td>Which indicators to show</td></tr>
<tr><td><code>style</code></td><td>string</td><td><code>"icons"</code></td><td>Display style</td></tr>
</tbody>
</table>
</div>
<p><strong>Indicator IDs:</strong> <code>stunned</code>, <code>hidden</code>, <code>webbed</code>, <code>poisoned</code>, <code>diseased</code>, <code>bleeding</code>, <code>prone</code>, <code>kneeling</code>, <code>sitting</code></p>
<h3 id="room-window"><a class="header" href="#room-window">Room Window</a></h3>
<p>Room description display.</p>
<pre><code class="language-toml">[[windows]]
name = "room"
type = "room"
row = 0
col = 80
width = 40
height = 10

# Room-specific options
show_title = true         # Show room name
show_description = true   # Show room desc
show_exits = true         # Show obvious exits
show_objects = true       # Show items/creatures
show_players = true       # Show other players
</code></pre>
<h3 id="injury-doll"><a class="header" href="#injury-doll">Injury Doll</a></h3>
<p>Body injury display.</p>
<pre><code class="language-toml">[[windows]]
name = "injuries"
type = "injury_doll"
row = 15
col = 100
width = 15
height = 10

# Injury-specific options
show_labels = true
compact = false
</code></pre>
<h3 id="performance-monitor"><a class="header" href="#performance-monitor">Performance Monitor</a></h3>
<p>Performance metrics display.</p>
<pre><code class="language-toml">[[windows]]
name = "performance"
type = "performance"
row = 0
col = 0
width = 30
height = 15

# Which metrics to show
show_fps = true
show_frame_times = true
show_render_times = true
show_net = true
show_parse = true
show_memory = true
show_lines = true
show_uptime = true
</code></pre>
<hr>
<h2 id="layout-examples"><a class="header" href="#layout-examples">Layout Examples</a></h2>
<h3 id="basic-two-column-layout"><a class="header" href="#basic-two-column-layout">Basic Two-Column Layout</a></h3>
<pre><code class="language-toml">[layout]
columns = 120
rows = 40

[[windows]]
name = "main"
type = "text"
row = 0
col = 0
width = 80
height = 38

[[windows]]
name = "room"
type = "room"
row = 0
col = 80
width = 40
height = 15

[[windows]]
name = "vitals"
type = "progress"
stat = "health"
row = 15
col = 80
width = 40
height = 1

[[windows]]
name = "input"
type = "command_input"
row = 38
col = 0
width = 120
height = 2
</code></pre>
<h3 id="hunting-layout"><a class="header" href="#hunting-layout">Hunting Layout</a></h3>
<p>See <a href="#hunting-setup-1">Hunting Setup Tutorial</a> for a complete example.</p>
<h3 id="minimal-layout"><a class="header" href="#minimal-layout">Minimal Layout</a></h3>
<pre><code class="language-toml">[layout]
columns = 80
rows = 24

[[windows]]
name = "main"
type = "text"
row = 0
col = 0
width = 80
height = 22
show_border = false

[[windows]]
name = "input"
type = "command_input"
row = 22
col = 0
width = 80
height = 2
show_border = false
</code></pre>
<hr>
<h2 id="see-also-6"><a class="header" href="#see-also-6">See Also</a></h2>
<ul>
<li><a href="#creating-layouts">Creating Layouts</a> - Layout design guide</li>
<li><a href="widgets/README.html">Widget Reference</a> - Detailed widget documentation</li>
<li><a href="tutorials/README.html">Tutorials</a> - Complete layout examples</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="keybindstoml-reference"><a class="header" href="#keybindstoml-reference">keybinds.toml Reference</a></h1>
<p>The keybinds configuration file maps keyboard shortcuts to actions.</p>
<h2 id="location-2"><a class="header" href="#location-2">Location</a></h2>
<p><code>~/.vellum-fe/keybinds.toml</code></p>
<hr>
<h2 id="structure-overview-1"><a class="header" href="#structure-overview-1">Structure Overview</a></h2>
<pre><code class="language-toml">[[keybinds]]
key = "Enter"
action = "send"

[[keybinds]]
key = "Ctrl+Q"
action = "quit"

[[keybinds]]
key = "F1"
action = "send"
argument = "look"
</code></pre>
<hr>
<h2 id="keybind-properties"><a class="header" href="#keybind-properties">Keybind Properties</a></h2>
<p>Each <code>[[keybinds]]</code> entry defines one key mapping:</p>
<pre><code class="language-toml">[[keybinds]]
# Required
key = "Ctrl+S"            # Key combination
action = "send"           # Action to perform

# Optional
argument = "save"         # Action argument
description = "Save game" # Description for help
context = "input"         # When this binding is active
</code></pre>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Property</th><th>Type</th><th>Required</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>key</code></td><td>string</td><td>yes</td><td>Key combination</td></tr>
<tr><td><code>action</code></td><td>string</td><td>yes</td><td>Action name</td></tr>
<tr><td><code>argument</code></td><td>string</td><td>no</td><td>Action argument</td></tr>
<tr><td><code>description</code></td><td>string</td><td>no</td><td>Help text</td></tr>
<tr><td><code>context</code></td><td>string</td><td>no</td><td>Active context</td></tr>
</tbody>
</table>
</div>
<hr>
<h2 id="key-syntax"><a class="header" href="#key-syntax">Key Syntax</a></h2>
<h3 id="basic-keys"><a class="header" href="#basic-keys">Basic Keys</a></h3>
<pre><code class="language-toml">key = "A"         # Letter A
key = "1"         # Number 1
key = "F1"        # Function key
key = "Enter"     # Enter key
key = "Space"     # Space bar
key = "Tab"       # Tab key
key = "Escape"    # Escape key
</code></pre>
<h3 id="modifier-keys"><a class="header" href="#modifier-keys">Modifier Keys</a></h3>
<p>Combine modifiers with <code>+</code>:</p>
<pre><code class="language-toml">key = "Ctrl+S"          # Ctrl + S
key = "Alt+F4"          # Alt + F4
key = "Shift+Tab"       # Shift + Tab
key = "Ctrl+Shift+Z"    # Ctrl + Shift + Z
key = "Ctrl+Alt+Delete" # Multiple modifiers
</code></pre>
<p><strong>Available modifiers:</strong></p>
<ul>
<li><code>Ctrl</code> - Control key</li>
<li><code>Alt</code> - Alt key</li>
<li><code>Shift</code> - Shift key</li>
</ul>
<h3 id="special-keys"><a class="header" href="#special-keys">Special Keys</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Key Name</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>Enter</code></td><td>Enter/Return</td></tr>
<tr><td><code>Space</code></td><td>Space bar</td></tr>
<tr><td><code>Tab</code></td><td>Tab key</td></tr>
<tr><td><code>Escape</code></td><td>Escape key</td></tr>
<tr><td><code>Backspace</code></td><td>Backspace</td></tr>
<tr><td><code>Delete</code></td><td>Delete key</td></tr>
<tr><td><code>Insert</code></td><td>Insert key</td></tr>
<tr><td><code>Home</code></td><td>Home key</td></tr>
<tr><td><code>End</code></td><td>End key</td></tr>
<tr><td><code>PageUp</code></td><td>Page Up</td></tr>
<tr><td><code>PageDown</code></td><td>Page Down</td></tr>
<tr><td><code>Up</code></td><td>Up arrow</td></tr>
<tr><td><code>Down</code></td><td>Down arrow</td></tr>
<tr><td><code>Left</code></td><td>Left arrow</td></tr>
<tr><td><code>Right</code></td><td>Right arrow</td></tr>
<tr><td><code>F1</code> - <code>F12</code></td><td>Function keys</td></tr>
</tbody>
</table>
</div>
<h3 id="numpad-keys"><a class="header" href="#numpad-keys">Numpad Keys</a></h3>
<pre><code class="language-toml">key = "Numpad0"   # Numpad 0
key = "Numpad+"   # Numpad plus
key = "Numpad*"   # Numpad multiply
key = "NumpadEnter"  # Numpad enter
</code></pre>
<hr>
<h2 id="actions"><a class="header" href="#actions">Actions</a></h2>
<h3 id="input-actions"><a class="header" href="#input-actions">Input Actions</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Action</th><th>Argument</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>send</code></td><td>command</td><td>Send command to game</td></tr>
<tr><td><code>send_silent</code></td><td>command</td><td>Send without echo</td></tr>
<tr><td><code>insert</code></td><td>text</td><td>Insert text at cursor</td></tr>
<tr><td><code>clear_input</code></td><td>-</td><td>Clear input field</td></tr>
<tr><td><code>history_prev</code></td><td>-</td><td>Previous command</td></tr>
<tr><td><code>history_next</code></td><td>-</td><td>Next command</td></tr>
</tbody>
</table>
</div>
<p><strong>Examples:</strong></p>
<pre><code class="language-toml">[[keybinds]]
key = "Enter"
action = "send"

[[keybinds]]
key = "F1"
action = "send"
argument = "attack"

[[keybinds]]
key = "Ctrl+K"
action = "clear_input"
</code></pre>
<h3 id="navigation-actions"><a class="header" href="#navigation-actions">Navigation Actions</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Action</th><th>Argument</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>scroll_up</code></td><td>lines</td><td>Scroll up</td></tr>
<tr><td><code>scroll_down</code></td><td>lines</td><td>Scroll down</td></tr>
<tr><td><code>scroll_page_up</code></td><td>-</td><td>Page up</td></tr>
<tr><td><code>scroll_page_down</code></td><td>-</td><td>Page down</td></tr>
<tr><td><code>scroll_top</code></td><td>-</td><td>Jump to top</td></tr>
<tr><td><code>scroll_bottom</code></td><td>-</td><td>Jump to bottom</td></tr>
<tr><td><code>focus_next</code></td><td>-</td><td>Focus next window</td></tr>
<tr><td><code>focus_prev</code></td><td>-</td><td>Focus previous window</td></tr>
<tr><td><code>focus_window</code></td><td>name</td><td>Focus specific window</td></tr>
</tbody>
</table>
</div>
<p><strong>Examples:</strong></p>
<pre><code class="language-toml">[[keybinds]]
key = "PageUp"
action = "scroll_page_up"

[[keybinds]]
key = "Ctrl+Tab"
action = "focus_next"

[[keybinds]]
key = "Ctrl+1"
action = "focus_window"
argument = "main"
</code></pre>
<h3 id="menu-actions"><a class="header" href="#menu-actions">Menu Actions</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Action</th><th>Argument</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>open_menu</code></td><td>-</td><td>Open main menu</td></tr>
<tr><td><code>open_highlight_browser</code></td><td>-</td><td>Open highlight editor</td></tr>
<tr><td><code>open_keybind_browser</code></td><td>-</td><td>Open keybind editor</td></tr>
<tr><td><code>open_color_browser</code></td><td>-</td><td>Open color editor</td></tr>
<tr><td><code>open_window_editor</code></td><td>-</td><td>Open window editor</td></tr>
<tr><td><code>close_popup</code></td><td>-</td><td>Close current popup</td></tr>
</tbody>
</table>
</div>
<p><strong>Examples:</strong></p>
<pre><code class="language-toml">[[keybinds]]
key = "Ctrl+M"
action = "open_menu"

[[keybinds]]
key = "Ctrl+H"
action = "open_highlight_browser"

[[keybinds]]
key = "Escape"
action = "close_popup"
</code></pre>
<h3 id="client-actions"><a class="header" href="#client-actions">Client Actions</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Action</th><th>Argument</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>quit</code></td><td>-</td><td>Exit VellumFE</td></tr>
<tr><td><code>reload_config</code></td><td>-</td><td>Reload configuration</td></tr>
<tr><td><code>clear_window</code></td><td>name</td><td>Clear window content</td></tr>
<tr><td><code>toggle_links</code></td><td>-</td><td>Toggle clickable links</td></tr>
<tr><td><code>toggle_border</code></td><td>name</td><td>Toggle window border</td></tr>
<tr><td><code>copy</code></td><td>-</td><td>Copy selection</td></tr>
<tr><td><code>paste</code></td><td>-</td><td>Paste clipboard</td></tr>
</tbody>
</table>
</div>
<p><strong>Examples:</strong></p>
<pre><code class="language-toml">[[keybinds]]
key = "Ctrl+Q"
action = "quit"

[[keybinds]]
key = "F5"
action = "reload_config"

[[keybinds]]
key = "Ctrl+L"
action = "clear_window"
argument = "main"
</code></pre>
<h3 id="game-actions"><a class="header" href="#game-actions">Game Actions</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Action</th><th>Argument</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>move</code></td><td>direction</td><td>Move in direction</td></tr>
<tr><td><code>look</code></td><td>-</td><td>Look around</td></tr>
<tr><td><code>inventory</code></td><td>-</td><td>Check inventory</td></tr>
</tbody>
</table>
</div>
<p><strong>Examples:</strong></p>
<pre><code class="language-toml">[[keybinds]]
key = "Numpad8"
action = "move"
argument = "north"

[[keybinds]]
key = "Numpad2"
action = "move"
argument = "south"
</code></pre>
<hr>
<h2 id="contexts"><a class="header" href="#contexts">Contexts</a></h2>
<p>Keybinds can be limited to specific contexts:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Context</th><th>Active When</th></tr>
</thead>
<tbody>
<tr><td><code>global</code></td><td>Always (default)</td></tr>
<tr><td><code>input</code></td><td>Input field focused</td></tr>
<tr><td><code>menu</code></td><td>Menu/popup open</td></tr>
<tr><td><code>browser</code></td><td>Browser popup open</td></tr>
<tr><td><code>editor</code></td><td>Editor popup open</td></tr>
</tbody>
</table>
</div>
<p><strong>Examples:</strong></p>
<pre><code class="language-toml"># Only active when input is focused
[[keybinds]]
key = "Tab"
action = "autocomplete"
context = "input"

# Only active in menus
[[keybinds]]
key = "Enter"
action = "select"
context = "menu"
</code></pre>
<hr>
<h2 id="default-keybinds"><a class="header" href="#default-keybinds">Default Keybinds</a></h2>
<p>VellumFE ships with these defaults:</p>
<h3 id="navigation-1"><a class="header" href="#navigation-1">Navigation</a></h3>
<pre><code class="language-toml">[[keybinds]]
key = "PageUp"
action = "scroll_page_up"

[[keybinds]]
key = "PageDown"
action = "scroll_page_down"

[[keybinds]]
key = "Home"
action = "scroll_top"

[[keybinds]]
key = "End"
action = "scroll_bottom"

[[keybinds]]
key = "Ctrl+Tab"
action = "focus_next"
</code></pre>
<h3 id="input-1"><a class="header" href="#input-1">Input</a></h3>
<pre><code class="language-toml">[[keybinds]]
key = "Enter"
action = "send"

[[keybinds]]
key = "Up"
action = "history_prev"

[[keybinds]]
key = "Down"
action = "history_next"

[[keybinds]]
key = "Ctrl+C"
action = "copy"

[[keybinds]]
key = "Ctrl+V"
action = "paste"
</code></pre>
<h3 id="menus"><a class="header" href="#menus">Menus</a></h3>
<pre><code class="language-toml">[[keybinds]]
key = "Ctrl+M"
action = "open_menu"

[[keybinds]]
key = "Ctrl+H"
action = "open_highlight_browser"

[[keybinds]]
key = "Ctrl+K"
action = "open_keybind_browser"

[[keybinds]]
key = "Ctrl+E"
action = "open_window_editor"

[[keybinds]]
key = "Escape"
action = "close_popup"
</code></pre>
<h3 id="client"><a class="header" href="#client">Client</a></h3>
<pre><code class="language-toml">[[keybinds]]
key = "Ctrl+Q"
action = "quit"

[[keybinds]]
key = "F5"
action = "reload_config"

[[keybinds]]
key = "Ctrl+L"
action = "clear_window"
argument = "main"
</code></pre>
<hr>
<h2 id="example-configurations"><a class="header" href="#example-configurations">Example Configurations</a></h2>
<h3 id="numpad-movement"><a class="header" href="#numpad-movement">Numpad Movement</a></h3>
<pre><code class="language-toml">[[keybinds]]
key = "Numpad8"
action = "send"
argument = "north"
description = "Move north"

[[keybinds]]
key = "Numpad2"
action = "send"
argument = "south"

[[keybinds]]
key = "Numpad4"
action = "send"
argument = "west"

[[keybinds]]
key = "Numpad6"
action = "send"
argument = "east"

[[keybinds]]
key = "Numpad7"
action = "send"
argument = "northwest"

[[keybinds]]
key = "Numpad9"
action = "send"
argument = "northeast"

[[keybinds]]
key = "Numpad1"
action = "send"
argument = "southwest"

[[keybinds]]
key = "Numpad3"
action = "send"
argument = "southeast"

[[keybinds]]
key = "Numpad5"
action = "send"
argument = "out"
</code></pre>
<h3 id="combat-macros"><a class="header" href="#combat-macros">Combat Macros</a></h3>
<pre><code class="language-toml">[[keybinds]]
key = "F1"
action = "send"
argument = "attack"
description = "Basic attack"

[[keybinds]]
key = "F2"
action = "send"
argument = "incant 101"
description = "Cast Spirit Warding I"

[[keybinds]]
key = "F3"
action = "send"
argument = "stance defensive"
description = "Defensive stance"
</code></pre>
<hr>
<h2 id="see-also-7"><a class="header" href="#see-also-7">See Also</a></h2>
<ul>
<li><a href="#keybind-actions-1">Keybind Actions Reference</a> - Complete action list</li>
<li><a href="#quick-tour">Quick Tour</a> - Default keybinds</li>
<li><a href="#keybind-actions">Customization</a> - Keybind customization guide</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="highlightstoml-reference"><a class="header" href="#highlightstoml-reference">highlights.toml Reference</a></h1>
<p>The highlights configuration file defines text patterns and their visual styling.</p>
<h2 id="location-3"><a class="header" href="#location-3">Location</a></h2>
<p><code>~/.vellum-fe/highlights.toml</code></p>
<hr>
<h2 id="structure-overview-2"><a class="header" href="#structure-overview-2">Structure Overview</a></h2>
<pre><code class="language-toml">[[highlights]]
name = "creatures"
pattern = "(goblin|orc|troll)"
fg = "#FF0000"
bold = true

[[highlights]]
name = "player_speech"
pattern = '^\w+ (says|asks|exclaims),'
fg = "#00FF00"
stream = "main"
</code></pre>
<hr>
<h2 id="highlight-properties"><a class="header" href="#highlight-properties">Highlight Properties</a></h2>
<p>Each <code>[[highlights]]</code> entry defines one highlighting rule:</p>
<pre><code class="language-toml">[[highlights]]
# Identity
name = "my_highlight"       # Unique name (required)
pattern = "text to match"   # Regex pattern (required)

# Colors
fg = "#FF0000"              # Foreground color
bg = "#000000"              # Background color

# Styling
bold = false                # Bold text
italic = false              # Italic text
underline = false           # Underlined text

# Scope
stream = "main"             # Limit to stream (optional)
span_type = "Normal"        # Only match span type (optional)

# Performance
fast_parse = false          # Use literal matching
enabled = true              # Enable/disable
priority = 0                # Match priority (higher = first)
</code></pre>
<h3 id="required-properties"><a class="header" href="#required-properties">Required Properties</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Property</th><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>name</code></td><td>string</td><td>Unique identifier</td></tr>
<tr><td><code>pattern</code></td><td>string</td><td>Regex pattern to match</td></tr>
</tbody>
</table>
</div>
<h3 id="color-properties"><a class="header" href="#color-properties">Color Properties</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Property</th><th>Type</th><th>Default</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>fg</code></td><td>string</td><td>-</td><td>Foreground color</td></tr>
<tr><td><code>bg</code></td><td>string</td><td>-</td><td>Background color</td></tr>
</tbody>
</table>
</div>
<p><strong>Color formats:</strong></p>
<pre><code class="language-toml">fg = "#FF5500"        # Hex RGB
fg = "bright_red"     # Palette name
fg = "@speech"        # Preset reference
</code></pre>
<h3 id="style-properties"><a class="header" href="#style-properties">Style Properties</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Property</th><th>Type</th><th>Default</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>bold</code></td><td>boolean</td><td><code>false</code></td><td>Bold text</td></tr>
<tr><td><code>italic</code></td><td>boolean</td><td><code>false</code></td><td>Italic text</td></tr>
<tr><td><code>underline</code></td><td>boolean</td><td><code>false</code></td><td>Underline text</td></tr>
</tbody>
</table>
</div>
<h3 id="scope-properties"><a class="header" href="#scope-properties">Scope Properties</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Property</th><th>Type</th><th>Default</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>stream</code></td><td>string</td><td>all</td><td>Limit to specific stream</td></tr>
<tr><td><code>span_type</code></td><td>string</td><td>all</td><td>Only match span type</td></tr>
</tbody>
</table>
</div>
<p><strong>Stream values:</strong> <code>main</code>, <code>speech</code>, <code>thoughts</code>, <code>combat</code>, etc.</p>
<p><strong>Span types:</strong></p>
<ul>
<li><code>Normal</code> - Regular text</li>
<li><code>Link</code> - Clickable links</li>
<li><code>Monsterbold</code> - Creature names</li>
<li><code>Speech</code> - Player dialogue</li>
<li><code>Spell</code> - Spell names</li>
</ul>
<h3 id="performance-properties"><a class="header" href="#performance-properties">Performance Properties</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Property</th><th>Type</th><th>Default</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>fast_parse</code></td><td>boolean</td><td><code>false</code></td><td>Use Aho-Corasick</td></tr>
<tr><td><code>enabled</code></td><td>boolean</td><td><code>true</code></td><td>Enable this highlight</td></tr>
<tr><td><code>priority</code></td><td>integer</td><td><code>0</code></td><td>Match order (higher first)</td></tr>
</tbody>
</table>
</div>
<hr>
<h2 id="pattern-syntax"><a class="header" href="#pattern-syntax">Pattern Syntax</a></h2>
<p>Highlights use Rust regex syntax. Key features:</p>
<h3 id="basic-patterns"><a class="header" href="#basic-patterns">Basic Patterns</a></h3>
<pre><code class="language-toml"># Literal text
pattern = "goblin"

# Case insensitive
pattern = "(?i)goblin"

# Word boundaries
pattern = "\\bgoblin\\b"

# Multiple words
pattern = "goblin|orc|troll"
</code></pre>
<h3 id="character-classes"><a class="header" href="#character-classes">Character Classes</a></h3>
<pre><code class="language-toml"># Any digit
pattern = "\\d+"

# Any word character
pattern = "\\w+"

# Any whitespace
pattern = "\\s+"

# Custom class
pattern = "[A-Z][a-z]+"
</code></pre>
<h3 id="anchors"><a class="header" href="#anchors">Anchors</a></h3>
<pre><code class="language-toml"># Start of line
pattern = "^You attack"

# End of line
pattern = "falls dead!$"

# Word boundary
pattern = "\\bgoblin\\b"
</code></pre>
<h3 id="groups-and-captures"><a class="header" href="#groups-and-captures">Groups and Captures</a></h3>
<pre><code class="language-toml"># Non-capturing group
pattern = "(?:goblin|orc)"

# Capturing group (for future use)
pattern = "(\\w+) says,"
</code></pre>
<h3 id="escaping-special-characters"><a class="header" href="#escaping-special-characters">Escaping Special Characters</a></h3>
<p>These characters must be escaped with <code>\\</code>:</p>
<pre><code>. * + ? ^ $ { } [ ] ( ) | \
</code></pre>
<pre><code class="language-toml"># Match literal period
pattern = "Mr\\. Smith"

# Match literal asterisk
pattern = "\\*\\*emphasis\\*\\*"
</code></pre>
<hr>
<h2 id="fast-parse-mode"><a class="header" href="#fast-parse-mode">Fast Parse Mode</a></h2>
<p>For simple literal patterns, <code>fast_parse = true</code> uses Aho-Corasick algorithm:</p>
<pre><code class="language-toml">[[highlights]]
name = "names"
pattern = "Bob|Alice|Charlie"
fg = "#FFFF00"
fast_parse = true
</code></pre>
<p><strong>When to use fast_parse:</strong></p>
<ul>
<li>Pattern is literal strings (no regex)</li>
<li>Pattern has many alternatives (names, items)</li>
<li>High-frequency matching needed</li>
</ul>
<p><strong>When NOT to use fast_parse:</strong></p>
<ul>
<li>Pattern uses regex features</li>
<li>Pattern needs word boundaries</li>
<li>Pattern uses anchors (^, $)</li>
</ul>
<hr>
<h2 id="priority-system"><a class="header" href="#priority-system">Priority System</a></h2>
<p>When multiple highlights match, priority determines which wins:</p>
<pre><code class="language-toml"># Higher priority wins
[[highlights]]
name = "important"
pattern = "critical"
fg = "#FF0000"
priority = 100

# Lower priority, same match
[[highlights]]
name = "general"
pattern = ".*"
fg = "#808080"
priority = 0
</code></pre>
<p><strong>Default priorities:</strong></p>
<ul>
<li>Monsterbold spans: Highest</li>
<li>Link spans: High</li>
<li>User highlights: Medium (configurable)</li>
<li>Preset colors: Low</li>
</ul>
<hr>
<h2 id="stream-filtering"><a class="header" href="#stream-filtering">Stream Filtering</a></h2>
<p>Limit highlights to specific streams:</p>
<pre><code class="language-toml"># Only in main window
[[highlights]]
name = "combat"
pattern = "You (hit|miss)"
fg = "#FF0000"
stream = "main"

# Only in thoughts
[[highlights]]
name = "esp"
pattern = "\\[ESP\\]"
fg = "#00FFFF"
stream = "thoughts"
</code></pre>
<hr>
<h2 id="common-patterns"><a class="header" href="#common-patterns">Common Patterns</a></h2>
<h3 id="creature-names"><a class="header" href="#creature-names">Creature Names</a></h3>
<pre><code class="language-toml">[[highlights]]
name = "creatures"
pattern = "(?i)\\b(goblin|orc|troll|kobold|giant)s?\\b"
fg = "#FF6600"
bold = true
</code></pre>
<h3 id="player-speech"><a class="header" href="#player-speech">Player Speech</a></h3>
<pre><code class="language-toml">[[highlights]]
name = "speech"
pattern = '^(\\w+) (says|asks|exclaims|whispers),'
fg = "#00FF00"
</code></pre>
<h3 id="your-character-name"><a class="header" href="#your-character-name">Your Character Name</a></h3>
<pre><code class="language-toml">[[highlights]]
name = "my_name"
pattern = "\\bYourCharacterName\\b"
fg = "#FFFF00"
bold = true
</code></pre>
<h3 id="damage-numbers"><a class="header" href="#damage-numbers">Damage Numbers</a></h3>
<pre><code class="language-toml">[[highlights]]
name = "damage"
pattern = "\\b\\d+\\s+points?\\s+of\\s+damage"
fg = "#FF0000"
bold = true
</code></pre>
<h3 id="silvergold"><a class="header" href="#silvergold">Silver/Gold</a></h3>
<pre><code class="language-toml">[[highlights]]
name = "silver"
pattern = "\\d+\\s+silver"
fg = "#C0C0C0"
bold = true

[[highlights]]
name = "gold"
pattern = "\\d+\\s+gold"
fg = "#FFD700"
bold = true
</code></pre>
<h3 id="room-exits"><a class="header" href="#room-exits">Room Exits</a></h3>
<pre><code class="language-toml">[[highlights]]
name = "exits"
pattern = "Obvious (paths|exits):"
fg = "#00FFFF"
</code></pre>
<h3 id="espthoughts"><a class="header" href="#espthoughts">ESP/Thoughts</a></h3>
<pre><code class="language-toml">[[highlights]]
name = "esp"
pattern = "^\\[.*?\\]"
fg = "#FF00FF"
stream = "thoughts"
</code></pre>
<hr>
<h2 id="complete-example"><a class="header" href="#complete-example">Complete Example</a></h2>
<pre><code class="language-toml"># VellumFE Highlights Configuration

# Creature highlighting
[[highlights]]
name = "creatures"
pattern = "(?i)\\b(goblin|orc|troll|kobold|giant rat|wolf|bear)s?\\b"
fg = "#FF6600"
bold = true
priority = 50

# Player names (customize this list)
[[highlights]]
name = "friends"
pattern = "\\b(Alice|Bob|Charlie)\\b"
fg = "#00FF00"
fast_parse = true
priority = 60

# Damage taken
[[highlights]]
name = "damage_taken"
pattern = "strikes you|hits you|bites you"
fg = "#FF0000"
bold = true
priority = 70

# Damage dealt
[[highlights]]
name = "damage_dealt"
pattern = "You (hit|strike|slash)"
fg = "#00FF00"
priority = 70

# Currency
[[highlights]]
name = "silver"
pattern = "\\d+\\s+silvers?"
fg = "#C0C0C0"

[[highlights]]
name = "gold"
pattern = "\\b(gold|golden)\\b"
fg = "#FFD700"

# Important messages
[[highlights]]
name = "roundtime"
pattern = "Roundtime:"
fg = "#FF00FF"
bold = true

[[highlights]]
name = "death"
pattern = "You have died|DEAD"
fg = "#FF0000"
bg = "#400000"
bold = true
priority = 100
</code></pre>
<hr>
<h2 id="see-also-8"><a class="header" href="#see-also-8">See Also</a></h2>
<ul>
<li><a href="#highlight-patterns">Highlight Patterns Guide</a> - Advanced patterns</li>
<li><a href="#colorstoml-reference">Colors Reference</a> - Color values and palettes</li>
<li><a href="#performance-optimization">Performance</a> - Highlight optimization</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="colorstoml-reference"><a class="header" href="#colorstoml-reference">colors.toml Reference</a></h1>
<p>The colors configuration file defines the visual theme including presets, palettes, and UI colors.</p>
<h2 id="location-4"><a class="header" href="#location-4">Location</a></h2>
<p><code>~/.vellum-fe/colors.toml</code></p>
<hr>
<h2 id="structure-overview-3"><a class="header" href="#structure-overview-3">Structure Overview</a></h2>
<pre><code class="language-toml"># Named presets (game text styling)
[presets]
speech = { fg = "#53a684" }
monsterbold = { fg = "#a29900" }

# Color palette (named colors)
[palette]
bright_red = "#FF5555"
bright_green = "#55FF55"

# UI element colors
[ui]
border = "#5588AA"
background = "#000000"

# Prompt colors
[prompt]
default = "#808080"
</code></pre>
<hr>
<h2 id="presets-section"><a class="header" href="#presets-section">[presets] Section</a></h2>
<p>Presets define colors for game text elements:</p>
<pre><code class="language-toml">[presets]
# Speech/dialogue
speech = { fg = "#53a684" }

# Creature names (monsterbold)
monsterbold = { fg = "#a29900" }

# Clickable links
links = { fg = "#477ab3" }

# Command echoes
commands = { fg = "#477ab3" }

# Whispers
whisper = { fg = "#4682B4" }

# Room name
roomName = { fg = "#9BA2B2", bg = "#395573" }

# Room description
roomDesc = { fg = "#CCCCCC" }

# Thoughts/ESP
thought = { fg = "#FF00FF" }

# Combat messages
combat = { fg = "#FF6600" }
</code></pre>
<h3 id="preset-format"><a class="header" href="#preset-format">Preset Format</a></h3>
<p>Each preset can have:</p>
<pre><code class="language-toml">[presets]
name = { fg = "#RRGGBB", bg = "#RRGGBB", bold = true }
</code></pre>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Property</th><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>fg</code></td><td>string</td><td>Foreground color</td></tr>
<tr><td><code>bg</code></td><td>string</td><td>Background color</td></tr>
<tr><td><code>bold</code></td><td>boolean</td><td>Bold styling</td></tr>
</tbody>
</table>
</div>
<h3 id="standard-presets"><a class="header" href="#standard-presets">Standard Presets</a></h3>
<p>These presets are used by the game protocol:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Preset</th><th>Used For</th></tr>
</thead>
<tbody>
<tr><td><code>speech</code></td><td>Player dialogue</td></tr>
<tr><td><code>monsterbold</code></td><td>Creature names</td></tr>
<tr><td><code>links</code></td><td>Clickable game objects</td></tr>
<tr><td><code>commands</code></td><td>Command echoes</td></tr>
<tr><td><code>whisper</code></td><td>Whispered text</td></tr>
<tr><td><code>roomName</code></td><td>Room titles</td></tr>
<tr><td><code>roomDesc</code></td><td>Room descriptions</td></tr>
<tr><td><code>thought</code></td><td>ESP/thoughts stream</td></tr>
</tbody>
</table>
</div>
<hr>
<h2 id="palette-section"><a class="header" href="#palette-section">[palette] Section</a></h2>
<p>Named colors for use elsewhere in configuration:</p>
<pre><code class="language-toml">[palette]
# Base colors
black = "#000000"
white = "#FFFFFF"
red = "#AA0000"
green = "#00AA00"
blue = "#0000AA"
yellow = "#AAAA00"
cyan = "#00AAAA"
magenta = "#AA00AA"

# Bright variants
bright_black = "#555555"
bright_white = "#FFFFFF"
bright_red = "#FF5555"
bright_green = "#55FF55"
bright_blue = "#5555FF"
bright_yellow = "#FFFF55"
bright_cyan = "#55FFFF"
bright_magenta = "#FF55FF"

# Custom colors
health_high = "#00FF00"
health_mid = "#FFFF00"
health_low = "#FF0000"
mana_color = "#0088FF"
</code></pre>
<h3 id="using-palette-colors"><a class="header" href="#using-palette-colors">Using Palette Colors</a></h3>
<p>Reference palette colors in other config files:</p>
<pre><code class="language-toml"># In highlights.toml
[[highlights]]
name = "damage"
pattern = "damage"
fg = "bright_red"  # Uses palette.bright_red

# In layout.toml
[[windows]]
name = "health"
type = "progress"
bar_color = "health_high"  # Uses palette.health_high
</code></pre>
<hr>
<h2 id="ui-section"><a class="header" href="#ui-section">[ui] Section</a></h2>
<p>Colors for UI elements:</p>
<pre><code class="language-toml">[ui]
# Borders
border = "#5588AA"
border_focused = "#88AACC"

# Backgrounds
background = "#000000"
window_background = "#0A0A0A"

# Text
text = "#CCCCCC"
text_dim = "#808080"
text_highlight = "#FFFFFF"

# Selection
selection_bg = "#264F78"
selection_fg = "#FFFFFF"

# Scrollbar
scrollbar_track = "#1A1A1A"
scrollbar_thumb = "#404040"

# Menu
menu_bg = "#1A1A1A"
menu_fg = "#CCCCCC"
menu_selected_bg = "#264F78"
menu_selected_fg = "#FFFFFF"

# Input
input_bg = "#0A0A0A"
input_fg = "#FFFFFF"
input_cursor = "#FFFFFF"
</code></pre>
<h3 id="ui-color-reference"><a class="header" href="#ui-color-reference">UI Color Reference</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Color</th><th>Used For</th></tr>
</thead>
<tbody>
<tr><td><code>border</code></td><td>Window borders</td></tr>
<tr><td><code>border_focused</code></td><td>Focused window border</td></tr>
<tr><td><code>background</code></td><td>Global background</td></tr>
<tr><td><code>window_background</code></td><td>Window backgrounds</td></tr>
<tr><td><code>text</code></td><td>Default text</td></tr>
<tr><td><code>text_dim</code></td><td>Dimmed/secondary text</td></tr>
<tr><td><code>text_highlight</code></td><td>Highlighted text</td></tr>
<tr><td><code>selection_bg</code></td><td>Selection background</td></tr>
<tr><td><code>selection_fg</code></td><td>Selection foreground</td></tr>
</tbody>
</table>
</div>
<hr>
<h2 id="prompt-section"><a class="header" href="#prompt-section">[prompt] Section</a></h2>
<p>Colors for the game prompt:</p>
<pre><code class="language-toml">[prompt]
# Default prompt color
default = "#808080"

# Combat/RT prompt
combat = "#FF0000"

# Safe prompt
safe = "#00FF00"
</code></pre>
<hr>
<h2 id="spell-section"><a class="header" href="#spell-section">[spell] Section</a></h2>
<p>Colors for spell circle indicators:</p>
<pre><code class="language-toml">[spell]
# Major Elemental
major_elemental = "#FF6600"

# Minor Elemental
minor_elemental = "#FFAA00"

# Major Spiritual
major_spiritual = "#00AAFF"

# Minor Spiritual
minor_spiritual = "#0066FF"

# Bard
bard = "#FF00FF"

# Wizard
wizard = "#AA00FF"

# Sorcerer
sorcerer = "#660066"

# Ranger
ranger = "#00AA00"

# Paladin
paladin = "#FFFF00"

# Cleric
cleric = "#FFFFFF"

# Empath
empath = "#00FFAA"
</code></pre>
<hr>
<h2 id="color-formats"><a class="header" href="#color-formats">Color Formats</a></h2>
<h3 id="hex-rgb"><a class="header" href="#hex-rgb">Hex RGB</a></h3>
<pre><code class="language-toml">color = "#FF5500"    # 6-digit hex
color = "#F50"       # 3-digit hex (expanded to #FF5500)
</code></pre>
<h3 id="named-colors"><a class="header" href="#named-colors">Named Colors</a></h3>
<p>Reference palette entries:</p>
<pre><code class="language-toml">color = "bright_red"     # From [palette]
color = "health_high"    # Custom palette entry
</code></pre>
<h3 id="preset-references"><a class="header" href="#preset-references">Preset References</a></h3>
<p>Reference preset colors with <code>@</code>:</p>
<pre><code class="language-toml">color = "@speech"        # Uses presets.speech.fg
color = "@monsterbold"   # Uses presets.monsterbold.fg
</code></pre>
<hr>
<h2 id="complete-theme-example"><a class="header" href="#complete-theme-example">Complete Theme Example</a></h2>
<pre><code class="language-toml"># VellumFE Dark Theme

[presets]
speech = { fg = "#53a684" }
monsterbold = { fg = "#e8b923", bold = true }
links = { fg = "#477ab3" }
commands = { fg = "#477ab3" }
whisper = { fg = "#4682B4" }
roomName = { fg = "#9BA2B2", bg = "#395573" }
roomDesc = { fg = "#B0B0B0" }
thought = { fg = "#DA70D6" }

[palette]
# Base colors
black = "#000000"
white = "#FFFFFF"
red = "#CC0000"
green = "#00CC00"
blue = "#0066CC"
yellow = "#CCCC00"
cyan = "#00CCCC"
magenta = "#CC00CC"

# Bright variants
bright_red = "#FF5555"
bright_green = "#55FF55"
bright_blue = "#5588FF"
bright_yellow = "#FFFF55"
bright_cyan = "#55FFFF"
bright_magenta = "#FF55FF"

# Custom
health = "#00FF00"
mana = "#0088FF"
spirit = "#00FFFF"
stamina = "#FFFF00"

[ui]
border = "#3A5F7A"
border_focused = "#5588AA"
background = "#0A0A0A"
window_background = "#0F0F0F"
text = "#CCCCCC"
text_dim = "#666666"
text_highlight = "#FFFFFF"
selection_bg = "#264F78"
selection_fg = "#FFFFFF"
menu_bg = "#1A1A1A"
menu_fg = "#CCCCCC"
menu_selected_bg = "#264F78"
menu_selected_fg = "#FFFFFF"

[prompt]
default = "#666666"
combat = "#FF4444"
safe = "#44FF44"
</code></pre>
<hr>
<h2 id="theme-switching"><a class="header" href="#theme-switching">Theme Switching</a></h2>
<p>VellumFE supports hot theme switching:</p>
<ol>
<li>Edit <code>colors.toml</code></li>
<li>Press <code>F5</code> to reload</li>
<li>New colors apply immediately</li>
</ol>
<p>Or create multiple theme files and switch by copying:</p>
<pre><code class="language-bash">cp themes/solarized.toml ~/.vellum-fe/colors.toml
# Then press F5 in VellumFE
</code></pre>
<hr>
<h2 id="see-also-9"><a class="header" href="#see-also-9">See Also</a></h2>
<ul>
<li><a href="#creating-themes">Creating Themes</a> - Theme authoring guide</li>
<li><a href="#preset-colors">Preset Colors Reference</a> - All preset names</li>
<li><a href="#color-codes-reference">Color Codes</a> - Hex color reference</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="character-profiles-2"><a class="header" href="#character-profiles-2">Character Profiles</a></h1>
<p>VellumFE supports per-character configuration through profiles, allowing different layouts, highlights, and settings for each character.</p>
<h2 id="overview-1"><a class="header" href="#overview-1">Overview</a></h2>
<p>Profiles let you:</p>
<ul>
<li>Use different layouts for different playstyles (hunting warrior vs. merchant)</li>
<li>Customize highlights per character (different friend lists, creature lists)</li>
<li>Override any global setting on a per-character basis</li>
</ul>
<hr>
<h2 id="profile-structure"><a class="header" href="#profile-structure">Profile Structure</a></h2>
<p>Profiles are stored in <code>~/.vellum-fe/profiles/&lt;CharacterName&gt;/</code>:</p>
<pre><code>~/.vellum-fe/
├── config.toml           # Global defaults
├── layout.toml           # Global layout
├── keybinds.toml         # Global keybinds
├── highlights.toml       # Global highlights
├── colors.toml           # Global colors
│
└── profiles/
    ├── Warrior/          # Warrior's profile
    │   ├── layout.toml   # Warrior's layout
    │   └── highlights.toml
    │
    ├── Wizard/           # Wizard's profile
    │   ├── layout.toml
    │   ├── highlights.toml
    │   └── keybinds.toml
    │
    └── Merchant/         # Merchant's profile
        └── layout.toml
</code></pre>
<hr>
<h2 id="using-profiles"><a class="header" href="#using-profiles">Using Profiles</a></h2>
<h3 id="loading-a-profile"><a class="header" href="#loading-a-profile">Loading a Profile</a></h3>
<p>Specify the character name when launching:</p>
<pre><code class="language-bash">vellum-fe --character Warrior
</code></pre>
<p>Or set a default in <code>config.toml</code>:</p>
<pre><code class="language-toml">[connection]
character = "Warrior"
</code></pre>
<h3 id="profile-loading-order"><a class="header" href="#profile-loading-order">Profile Loading Order</a></h3>
<ol>
<li><strong>Load global config</strong> from <code>~/.vellum-fe/</code></li>
<li><strong>If profile exists</strong>, overlay files from <code>profiles/&lt;CharName&gt;/</code></li>
<li><strong>Missing profile files</strong> fall back to global</li>
</ol>
<p><strong>Example flow for <code>--character Warrior</code>:</strong></p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>File</th><th>Source</th></tr>
</thead>
<tbody>
<tr><td>config.toml</td><td>Global (no profile override)</td></tr>
<tr><td>layout.toml</td><td><code>profiles/Warrior/layout.toml</code></td></tr>
<tr><td>keybinds.toml</td><td>Global (no profile override)</td></tr>
<tr><td>highlights.toml</td><td><code>profiles/Warrior/highlights.toml</code></td></tr>
<tr><td>colors.toml</td><td>Global (no profile override)</td></tr>
</tbody>
</table>
</div>
<hr>
<h2 id="creating-a-profile"><a class="header" href="#creating-a-profile">Creating a Profile</a></h2>
<h3 id="method-1-manual-creation"><a class="header" href="#method-1-manual-creation">Method 1: Manual Creation</a></h3>
<pre><code class="language-bash"># Create profile directory
mkdir -p ~/.vellum-fe/profiles/MyCharacter

# Copy files you want to customize
cp ~/.vellum-fe/layout.toml ~/.vellum-fe/profiles/MyCharacter/
cp ~/.vellum-fe/highlights.toml ~/.vellum-fe/profiles/MyCharacter/

# Edit the copies
vim ~/.vellum-fe/profiles/MyCharacter/layout.toml
</code></pre>
<h3 id="method-2-start-from-defaults"><a class="header" href="#method-2-start-from-defaults">Method 2: Start from Defaults</a></h3>
<p>Launch with a new character name:</p>
<pre><code class="language-bash">vellum-fe --character NewCharacter
</code></pre>
<p>VellumFE uses global defaults. Then copy and customize as needed.</p>
<hr>
<h2 id="profile-specific-settings"><a class="header" href="#profile-specific-settings">Profile-Specific Settings</a></h2>
<h3 id="layout-differences"><a class="header" href="#layout-differences">Layout Differences</a></h3>
<p>A warrior might want:</p>
<pre><code class="language-toml"># profiles/Warrior/layout.toml

[[windows]]
name = "main"
type = "text"
width = "70%"
height = "80%"

# Large status area for combat
[[windows]]
name = "vitals"
type = "dashboard"
width = "30%"
height = "40%"
</code></pre>
<p>A merchant might prefer:</p>
<pre><code class="language-toml"># profiles/Merchant/layout.toml

[[windows]]
name = "main"
type = "text"
width = "100%"
height = "90%"

# No combat widgets, maximize text area
</code></pre>
<h3 id="highlight-differences"><a class="header" href="#highlight-differences">Highlight Differences</a></h3>
<p>Warrior with creature highlights:</p>
<pre><code class="language-toml"># profiles/Warrior/highlights.toml

[[highlights]]
name = "hunting_targets"
pattern = "(?i)\\b(goblin|orc|troll|giant)s?\\b"
fg = "#FF6600"
bold = true
</code></pre>
<p>Merchant with item highlights:</p>
<pre><code class="language-toml"># profiles/Merchant/highlights.toml

[[highlights]]
name = "valuable_items"
pattern = "(?i)\\b(gold|silver|gem|diamond)s?\\b"
fg = "#FFD700"
bold = true

[[highlights]]
name = "materials"
pattern = "(?i)\\b(leather|silk|velvet|mithril)\\b"
fg = "#00FFFF"
</code></pre>
<h3 id="keybind-differences"><a class="header" href="#keybind-differences">Keybind Differences</a></h3>
<p>Combat character:</p>
<pre><code class="language-toml"># profiles/Warrior/keybinds.toml

[[keybinds]]
key = "F1"
action = "send"
argument = "attack"

[[keybinds]]
key = "F2"
action = "send"
argument = "feint"
</code></pre>
<p>Spellcaster:</p>
<pre><code class="language-toml"># profiles/Wizard/keybinds.toml

[[keybinds]]
key = "F1"
action = "send"
argument = "incant 901"

[[keybinds]]
key = "F2"
action = "send"
argument = "incant 903"
</code></pre>
<hr>
<h2 id="shared-vs-profile-specific"><a class="header" href="#shared-vs-profile-specific">Shared vs. Profile-Specific</a></h2>
<h3 id="keep-global-shared"><a class="header" href="#keep-global-shared">Keep Global (Shared)</a></h3>
<ul>
<li><strong>colors.toml</strong> - Usually same theme everywhere</li>
<li><strong>config.toml</strong> - Connection settings shared</li>
</ul>
<h3 id="make-profile-specific"><a class="header" href="#make-profile-specific">Make Profile-Specific</a></h3>
<ul>
<li><strong>layout.toml</strong> - Different layouts per playstyle</li>
<li><strong>highlights.toml</strong> - Different creatures/items/friends</li>
<li><strong>keybinds.toml</strong> - Different combat macros</li>
</ul>
<hr>
<h2 id="profile-tips"><a class="header" href="#profile-tips">Profile Tips</a></h2>
<h3 id="1-start-simple"><a class="header" href="#1-start-simple">1. Start Simple</a></h3>
<p>Only create profile overrides for files you need to change. Let others fall back to global.</p>
<h3 id="2-use-consistent-names"><a class="header" href="#2-use-consistent-names">2. Use Consistent Names</a></h3>
<p>Match your character name exactly (case-sensitive on some systems):</p>
<pre><code class="language-bash"># Good
--character Nisugi
~/.vellum-fe/profiles/Nisugi/

# May not work
--character nisugi
~/.vellum-fe/profiles/Nisugi/  # Case mismatch!
</code></pre>
<h3 id="3-share-common-elements"><a class="header" href="#3-share-common-elements">3. Share Common Elements</a></h3>
<p>For settings shared across some (but not all) characters, create a “base” profile and copy from it:</p>
<pre><code class="language-bash"># Create a hunting base
cp -r ~/.vellum-fe/profiles/Warrior ~/.vellum-fe/profiles/hunting-base

# New hunting character
cp -r ~/.vellum-fe/profiles/hunting-base ~/.vellum-fe/profiles/NewHunter
</code></pre>
<h3 id="4-version-control"><a class="header" href="#4-version-control">4. Version Control</a></h3>
<p>Consider version controlling your profiles:</p>
<pre><code class="language-bash">cd ~/.vellum-fe
git init
git add .
git commit -m "Initial VellumFE configuration"
</code></pre>
<hr>
<h2 id="troubleshooting-profiles"><a class="header" href="#troubleshooting-profiles">Troubleshooting Profiles</a></h2>
<h3 id="profile-not-loading"><a class="header" href="#profile-not-loading">Profile Not Loading</a></h3>
<ol>
<li>Check character name spelling (case-sensitive)</li>
<li>Verify directory exists: <code>ls ~/.vellum-fe/profiles/</code></li>
<li>Check file permissions</li>
<li>Look for errors in <code>~/.vellum-fe/vellum-fe.log</code></li>
</ol>
<h3 id="wrong-settings-applied"><a class="header" href="#wrong-settings-applied">Wrong Settings Applied</a></h3>
<ol>
<li>Check which profile is loaded (shown on startup)</li>
<li>Verify the file exists in the profile directory</li>
<li>Check for syntax errors in the profile file</li>
</ol>
<h3 id="resetting-a-profile"><a class="header" href="#resetting-a-profile">Resetting a Profile</a></h3>
<pre><code class="language-bash"># Remove profile to use global defaults
rm -rf ~/.vellum-fe/profiles/CharName/

# Or reset specific file
rm ~/.vellum-fe/profiles/CharName/layout.toml
</code></pre>
<hr>
<h2 id="example-multi-character-setup"><a class="header" href="#example-multi-character-setup">Example: Multi-Character Setup</a></h2>
<pre><code>~/.vellum-fe/
├── config.toml
├── layout.toml           # Balanced default layout
├── keybinds.toml         # Common keybinds
├── highlights.toml       # Common highlights
├── colors.toml           # Dark theme for all
│
└── profiles/
    ├── Ranger/
    │   ├── layout.toml   # Compact hunting layout
    │   ├── highlights.toml # Creature + foraging
    │   └── keybinds.toml # Ranged combat macros
    │
    ├── Empath/
    │   ├── layout.toml   # Group-focused layout
    │   └── highlights.toml # Wounds + group members
    │
    └── Bard/
        ├── layout.toml   # RP-friendly layout
        └── highlights.toml # Song + speech focus
</code></pre>
<hr>
<h2 id="see-also-10"><a class="header" href="#see-also-10">See Also</a></h2>
<ul>
<li><a href="configuration/README.html">Configuration Overview</a> - All config files</li>
<li><a href="#creating-layouts">Creating Layouts</a> - Layout design</li>
<li><a href="tutorials/README.html">Tutorials</a> - Complete setup examples</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="widgets"><a class="header" href="#widgets">Widgets</a></h1>
<p>Widgets are the visual building blocks of VellumFE. Each widget type displays a specific kind of game information.</p>
<h2 id="overview-2"><a class="header" href="#overview-2">Overview</a></h2>
<p>VellumFE provides these widget types:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Widget</th><th>Type</th><th>Purpose</th></tr>
</thead>
<tbody>
<tr><td><a href="#text-windows-1">Text Window</a></td><td><code>text</code></td><td>Scrollable game text</td></tr>
<tr><td><a href="#tabbed-text-windows">Tabbed Text</a></td><td><code>tabbed_text</code></td><td>Multiple streams in tabs</td></tr>
<tr><td><a href="#command-input-1">Command Input</a></td><td><code>command_input</code></td><td>Command entry field</td></tr>
<tr><td><a href="#progress-bars-1">Progress Bar</a></td><td><code>progress</code></td><td>Health, mana, etc.</td></tr>
<tr><td><a href="#countdowns">Countdown</a></td><td><code>countdown</code></td><td>RT, cast time</td></tr>
<tr><td><a href="#compass-2">Compass</a></td><td><code>compass</code></td><td>Available exits</td></tr>
<tr><td><a href="#hands-1">Hand</a></td><td><code>hand</code></td><td>Items in hands</td></tr>
<tr><td><a href="#status-indicators">Indicator</a></td><td><code>indicator</code></td><td>Status conditions</td></tr>
<tr><td><a href="#injury-doll-1">Injury Doll</a></td><td><code>injury_doll</code></td><td>Body injuries</td></tr>
<tr><td><a href="#active-effects">Active Effects</a></td><td><code>active_effects</code></td><td>Buffs/debuffs</td></tr>
<tr><td><a href="#room-window-1">Room Window</a></td><td><code>room</code></td><td>Room description</td></tr>
<tr><td><a href="#inventory-widget">Inventory</a></td><td><code>inventory</code></td><td>Item list</td></tr>
<tr><td><a href="#spells-widget">Spells</a></td><td><code>spells</code></td><td>Known spells</td></tr>
<tr><td><a href="#dashboard-widget">Dashboard</a></td><td><code>dashboard</code></td><td>Composite status</td></tr>
<tr><td><a href="#performance-monitor-1">Performance</a></td><td><code>performance</code></td><td>Debug metrics</td></tr>
</tbody>
</table>
</div>
<hr>
<h2 id="common-properties-1"><a class="header" href="#common-properties-1">Common Properties</a></h2>
<p>All widgets share these properties in <code>layout.toml</code>:</p>
<h3 id="identity"><a class="header" href="#identity">Identity</a></h3>
<pre><code class="language-toml">[[windows]]
name = "my_widget"     # Unique identifier (required)
type = "text"          # Widget type (required)
</code></pre>
<h3 id="position"><a class="header" href="#position">Position</a></h3>
<pre><code class="language-toml"># Grid-based positioning
row = 0                # Row (0 = top)
col = 0                # Column (0 = left)

# OR pixel positioning
x = 100                # X coordinate
y = 50                 # Y coordinate
</code></pre>
<h3 id="size"><a class="header" href="#size">Size</a></h3>
<pre><code class="language-toml"># Fixed size
width = 40             # Columns wide
height = 10            # Rows tall

# OR percentage
width = "50%"          # Half of layout width
height = "100%"        # Full layout height
</code></pre>
<h3 id="borders"><a class="header" href="#borders">Borders</a></h3>
<pre><code class="language-toml">show_border = true           # Display border
border_style = "rounded"     # Style: plain, rounded, double, thick
border_sides = "all"         # Which sides: all, none, top, bottom, etc.
border_color = "#5588AA"     # Border color
</code></pre>
<h3 id="title"><a class="header" href="#title">Title</a></h3>
<pre><code class="language-toml">show_title = true            # Show title bar
title = "Custom Title"       # Override default title
</code></pre>
<h3 id="colors"><a class="header" href="#colors">Colors</a></h3>
<pre><code class="language-toml">background_color = "#000000" # Background
text_color = "#CCCCCC"       # Default text
transparent_background = false  # See-through background
</code></pre>
<hr>
<h2 id="widget-categories"><a class="header" href="#widget-categories">Widget Categories</a></h2>
<h3 id="text-displays"><a class="header" href="#text-displays">Text Displays</a></h3>
<p>Widgets that show game text:</p>
<ul>
<li><strong>Text Window</strong> - Main game output, speech, thoughts</li>
<li><strong>Tabbed Text</strong> - Multiple streams in one widget</li>
<li><strong>Room Window</strong> - Room name, description, exits</li>
</ul>
<h3 id="status-displays"><a class="header" href="#status-displays">Status Displays</a></h3>
<p>Widgets that show character status:</p>
<ul>
<li><strong>Progress Bar</strong> - Health, mana, stamina, spirit</li>
<li><strong>Countdown</strong> - Roundtime, cast time</li>
<li><strong>Hand</strong> - Left hand, right hand, spell</li>
<li><strong>Indicator</strong> - Stunned, hidden, webbed, etc.</li>
<li><strong>Injury Doll</strong> - Body part injuries</li>
<li><strong>Active Effects</strong> - Spells, buffs, cooldowns</li>
</ul>
<h3 id="navigation-2"><a class="header" href="#navigation-2">Navigation</a></h3>
<p>Widgets for game navigation:</p>
<ul>
<li><strong>Compass</strong> - Available exits with directions</li>
</ul>
<h3 id="lists"><a class="header" href="#lists">Lists</a></h3>
<p>Widgets that display lists:</p>
<ul>
<li><strong>Inventory</strong> - Items carried</li>
<li><strong>Spells</strong> - Known spells</li>
</ul>
<h3 id="composite"><a class="header" href="#composite">Composite</a></h3>
<p>Widgets combining multiple elements:</p>
<ul>
<li><strong>Dashboard</strong> - Configurable status panel</li>
</ul>
<h3 id="debug"><a class="header" href="#debug">Debug</a></h3>
<p>Developer/debugging widgets:</p>
<ul>
<li><strong>Performance</strong> - Frame rate, memory, network stats</li>
</ul>
<hr>
<h2 id="stream-mapping"><a class="header" href="#stream-mapping">Stream Mapping</a></h2>
<p>Text-based widgets receive data from game streams:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Stream</th><th>Content</th><th>Default Widget</th></tr>
</thead>
<tbody>
<tr><td><code>main</code></td><td>Primary game output</td><td>Main text window</td></tr>
<tr><td><code>speech</code></td><td>Player dialogue</td><td>Speech tab/window</td></tr>
<tr><td><code>thoughts</code></td><td>ESP/telepathy</td><td>Thoughts tab/window</td></tr>
<tr><td><code>combat</code></td><td>Combat messages</td><td>Combat tab/window</td></tr>
<tr><td><code>death</code></td><td>Death messages</td><td>Death window</td></tr>
<tr><td><code>logons</code></td><td>Login/logout</td><td>Arrivals window</td></tr>
<tr><td><code>familiar</code></td><td>Familiar messages</td><td>Familiar window</td></tr>
<tr><td><code>group</code></td><td>Group information</td><td>Group window</td></tr>
<tr><td><code>room</code></td><td>Room data</td><td>Room window</td></tr>
<tr><td><code>inv</code></td><td>Inventory data</td><td>Inventory window</td></tr>
</tbody>
</table>
</div>
<p>Configure stream mapping in layout:</p>
<pre><code class="language-toml">[[windows]]
name = "my_window"
type = "text"
stream = "speech"    # Display speech stream
</code></pre>
<hr>
<h2 id="creating-custom-layouts"><a class="header" href="#creating-custom-layouts">Creating Custom Layouts</a></h2>
<p>Combine widgets to create your ideal interface:</p>
<pre><code class="language-toml">[layout]
columns = 120
rows = 40

# Main game text (left side)
[[windows]]
name = "main"
type = "text"
row = 0
col = 0
width = 80
height = 35

# Channels on right
[[windows]]
name = "channels"
type = "tabbed_text"
tabs = ["speech", "thoughts", "combat"]
row = 0
col = 80
width = 40
height = 20

# Status area
[[windows]]
name = "health"
type = "progress"
stat = "health"
row = 20
col = 80
width = 40
height = 1

# Command input at bottom
[[windows]]
name = "input"
type = "command_input"
row = 38
col = 0
width = 120
height = 2
</code></pre>
<hr>
<h2 id="widget-interaction"><a class="header" href="#widget-interaction">Widget Interaction</a></h2>
<h3 id="focus"><a class="header" href="#focus">Focus</a></h3>
<ul>
<li>Click a widget to focus it</li>
<li>Use <code>Ctrl+Tab</code> to cycle focus</li>
<li>Focused widget has highlighted border</li>
</ul>
<h3 id="scrolling"><a class="header" href="#scrolling">Scrolling</a></h3>
<ul>
<li><code>Page Up</code> / <code>Page Down</code> - Scroll focused text widget</li>
<li>Mouse wheel - Scroll widget under cursor</li>
<li><code>Home</code> / <code>End</code> - Jump to top/bottom</li>
</ul>
<h3 id="selection"><a class="header" href="#selection">Selection</a></h3>
<ul>
<li>Click and drag to select text</li>
<li><code>Ctrl+C</code> to copy selection</li>
<li>Double-click to select word</li>
</ul>
<h3 id="links"><a class="header" href="#links">Links</a></h3>
<p>If <code>links = true</code> in config:</p>
<ul>
<li>Click game objects to interact</li>
<li>Right-click for context menu</li>
</ul>
<hr>
<h2 id="performance-considerations"><a class="header" href="#performance-considerations">Performance Considerations</a></h2>
<h3 id="buffer-sizes"><a class="header" href="#buffer-sizes">Buffer Sizes</a></h3>
<p>Text widgets buffer a limited number of lines:</p>
<pre><code class="language-toml">[[windows]]
name = "main"
type = "text"
buffer_size = 2000    # Max lines (default)
</code></pre>
<p>Larger buffers use more memory. Reduce for secondary windows.</p>
<h3 id="widget-count"><a class="header" href="#widget-count">Widget Count</a></h3>
<p>Each widget has rendering overhead. For performance:</p>
<ul>
<li>Use tabbed windows instead of multiple text windows</li>
<li>Disable unused widgets</li>
<li>Reduce buffer sizes on secondary windows</li>
</ul>
<hr>
<h2 id="see-also-11"><a class="header" href="#see-also-11">See Also</a></h2>
<ul>
<li><a href="#layouttoml-reference">layout.toml Reference</a> - Layout syntax</li>
<li><a href="#creating-layouts">Creating Layouts</a> - Design guide</li>
<li><a href="#performance-optimization">Performance</a> - Optimization tips</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="text-windows-1"><a class="header" href="#text-windows-1">Text Windows</a></h1>
<p>Text windows display scrollable game text. They’re the primary widgets for viewing game output.</p>
<h2 id="overview-3"><a class="header" href="#overview-3">Overview</a></h2>
<p>Text windows:</p>
<ul>
<li>Display one game stream (main, speech, thoughts, etc.)</li>
<li>Support scrolling through history</li>
<li>Apply highlights and colors</li>
<li>Handle clickable links</li>
<li>Buffer a configurable number of lines</li>
</ul>
<h2 id="configuration-1"><a class="header" href="#configuration-1">Configuration</a></h2>
<pre><code class="language-toml">[[windows]]
name = "main"
type = "text"

# Position and size
row = 0
col = 0
width = 80
height = 30

# Text-specific options
stream = "main"           # Game stream to display
buffer_size = 2000        # Maximum lines to keep
word_wrap = true          # Enable word wrapping

# Visual options
show_border = true
border_style = "rounded"
show_title = true
title = "Game"            # Custom title
background_color = "#000000"
text_color = "#CCCCCC"
</code></pre>
<h2 id="properties"><a class="header" href="#properties">Properties</a></h2>
<h3 id="stream"><a class="header" href="#stream">stream</a></h3>
<p>The game stream to display:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Stream</th><th>Content</th></tr>
</thead>
<tbody>
<tr><td><code>main</code></td><td>Primary game output</td></tr>
<tr><td><code>speech</code></td><td>Player dialogue</td></tr>
<tr><td><code>thoughts</code></td><td>ESP/telepathy</td></tr>
<tr><td><code>combat</code></td><td>Combat messages</td></tr>
<tr><td><code>death</code></td><td>Death messages</td></tr>
<tr><td><code>logons</code></td><td>Arrivals/departures</td></tr>
<tr><td><code>familiar</code></td><td>Familiar messages</td></tr>
<tr><td><code>group</code></td><td>Group info</td></tr>
</tbody>
</table>
</div>
<p>If not specified, defaults to the widget name.</p>
<h3 id="buffer_size"><a class="header" href="#buffer_size">buffer_size</a></h3>
<p>Maximum lines to keep in memory:</p>
<pre><code class="language-toml">buffer_size = 2000    # Default
buffer_size = 500     # Smaller for secondary windows
buffer_size = 5000    # Large for main window
</code></pre>
<p>Older lines are removed when the buffer fills. Larger buffers use more memory.</p>
<h3 id="word_wrap"><a class="header" href="#word_wrap">word_wrap</a></h3>
<p>Whether to wrap long lines:</p>
<pre><code class="language-toml">word_wrap = true      # Wrap at window width (default)
word_wrap = false     # Allow horizontal scrolling
</code></pre>
<h2 id="interaction"><a class="header" href="#interaction">Interaction</a></h2>
<h3 id="scrolling-1"><a class="header" href="#scrolling-1">Scrolling</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Input</th><th>Action</th></tr>
</thead>
<tbody>
<tr><td><code>Page Up</code></td><td>Scroll up one page</td></tr>
<tr><td><code>Page Down</code></td><td>Scroll down one page</td></tr>
<tr><td><code>Home</code></td><td>Jump to oldest line</td></tr>
<tr><td><code>End</code></td><td>Jump to newest line</td></tr>
<tr><td>Mouse wheel</td><td>Scroll up/down</td></tr>
<tr><td><code>Ctrl+Up</code></td><td>Scroll up one line</td></tr>
<tr><td><code>Ctrl+Down</code></td><td>Scroll down one line</td></tr>
</tbody>
</table>
</div>
<h3 id="selection-1"><a class="header" href="#selection-1">Selection</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Input</th><th>Action</th></tr>
</thead>
<tbody>
<tr><td>Click + drag</td><td>Select text</td></tr>
<tr><td>Double-click</td><td>Select word</td></tr>
<tr><td>Triple-click</td><td>Select line</td></tr>
<tr><td><code>Ctrl+C</code></td><td>Copy selection</td></tr>
<tr><td><code>Ctrl+A</code></td><td>Select all</td></tr>
</tbody>
</table>
</div>
<h3 id="links-1"><a class="header" href="#links-1">Links</a></h3>
<p>When <code>links = true</code> in config.toml:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Input</th><th>Action</th></tr>
</thead>
<tbody>
<tr><td>Click link</td><td>Primary action (look/get)</td></tr>
<tr><td>Right-click</td><td>Context menu</td></tr>
<tr><td>Ctrl+click</td><td>Alternative action</td></tr>
</tbody>
</table>
</div>
<h2 id="text-styling"><a class="header" href="#text-styling">Text Styling</a></h2>
<h3 id="game-colors"><a class="header" href="#game-colors">Game Colors</a></h3>
<p>The server sends color information through the XML protocol:</p>
<ul>
<li><code>&lt;color fg='...' bg='...'&gt;</code> - Explicit colors</li>
<li><code>&lt;preset id='...'&gt;</code> - Named presets (speech, monsterbold)</li>
<li><code>&lt;pushBold/&gt;&lt;popBold/&gt;</code> - Bold/monsterbold</li>
</ul>
<h3 id="highlights-1"><a class="header" href="#highlights-1">Highlights</a></h3>
<p>Your <code>highlights.toml</code> patterns are applied after game colors:</p>
<pre><code class="language-toml">[[highlights]]
name = "creatures"
pattern = "goblin|orc"
fg = "#FF6600"
bold = true
</code></pre>
<h3 id="priority"><a class="header" href="#priority">Priority</a></h3>
<p>Color priority (highest to lowest):</p>
<ol>
<li>Explicit <code>&lt;color&gt;</code> tags</li>
<li>Monsterbold (<code>&lt;pushBold/&gt;</code>)</li>
<li>User highlights</li>
<li>Preset colors</li>
<li>Default text color</li>
</ol>
<h2 id="auto-scroll-behavior"><a class="header" href="#auto-scroll-behavior">Auto-Scroll Behavior</a></h2>
<p>Text windows auto-scroll to show new content when:</p>
<ul>
<li>Window is scrolled to the bottom</li>
<li>New text arrives</li>
</ul>
<p>Auto-scroll pauses when:</p>
<ul>
<li>User scrolls up</li>
<li>Window is not at bottom</li>
</ul>
<p>To resume auto-scroll:</p>
<ul>
<li>Press <code>End</code> to jump to bottom</li>
<li>Scroll to the bottom manually</li>
</ul>
<p>Configure in config.toml:</p>
<pre><code class="language-toml">[behavior]
auto_scroll = true    # Default
</code></pre>
<h2 id="memory-management"><a class="header" href="#memory-management">Memory Management</a></h2>
<p>Text windows use generation-based change detection for efficient updates:</p>
<ol>
<li>Each <code>add_line()</code> increments a generation counter</li>
<li>Sync only copies lines newer than last sync</li>
<li>Buffer trimming removes oldest lines when full</li>
</ol>
<p>This enables smooth performance even with high text throughput.</p>
<h2 id="examples-1"><a class="header" href="#examples-1">Examples</a></h2>
<h3 id="main-game-window"><a class="header" href="#main-game-window">Main Game Window</a></h3>
<pre><code class="language-toml">[[windows]]
name = "main"
type = "text"
stream = "main"
row = 0
col = 0
width = "70%"
height = "90%"
buffer_size = 3000
show_title = false
border_style = "rounded"
</code></pre>
<h3 id="speech-window"><a class="header" href="#speech-window">Speech Window</a></h3>
<pre><code class="language-toml">[[windows]]
name = "speech"
type = "text"
stream = "speech"
row = 0
col = 85
width = 35
height = 15
buffer_size = 500
title = "Speech"
</code></pre>
<h3 id="thoughts-window"><a class="header" href="#thoughts-window">Thoughts Window</a></h3>
<pre><code class="language-toml">[[windows]]
name = "thoughts"
type = "text"
stream = "thoughts"
row = 15
col = 85
width = 35
height = 15
buffer_size = 500
title = "Thoughts"
</code></pre>
<h3 id="minimal-no-border"><a class="header" href="#minimal-no-border">Minimal (No Border)</a></h3>
<pre><code class="language-toml">[[windows]]
name = "main"
type = "text"
row = 0
col = 0
width = "100%"
height = "100%"
show_border = false
show_title = false
transparent_background = true
</code></pre>
<h2 id="troubleshooting"><a class="header" href="#troubleshooting">Troubleshooting</a></h2>
<h3 id="text-not-appearing"><a class="header" href="#text-not-appearing">Text not appearing</a></h3>
<ol>
<li>Check <code>stream</code> matches intended source</li>
<li>Verify window is within layout bounds</li>
<li>Check <code>enabled = true</code> (default)</li>
</ol>
<h3 id="colors-wrong"><a class="header" href="#colors-wrong">Colors wrong</a></h3>
<ol>
<li>Verify <code>COLORTERM=truecolor</code> is set</li>
<li>Check highlights aren’t overriding game colors</li>
<li>Review preset colors in <code>colors.toml</code></li>
</ol>
<h3 id="performance-issues"><a class="header" href="#performance-issues">Performance issues</a></h3>
<ol>
<li>Reduce <code>buffer_size</code> on secondary windows</li>
<li>Reduce number of highlight patterns</li>
<li>Use <code>fast_parse = true</code> for literal patterns</li>
</ol>
<h2 id="see-also-12"><a class="header" href="#see-also-12">See Also</a></h2>
<ul>
<li><a href="#tabbed-text-windows">Tabbed Text Windows</a> - Multiple streams in tabs</li>
<li><a href="#highlight-patterns">Highlight Patterns</a> - Text styling</li>
<li><a href="#stream-ids">Stream Reference</a> - All streams</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="tabbed-text-windows"><a class="header" href="#tabbed-text-windows">Tabbed Text Windows</a></h1>
<p>Tabbed text windows combine multiple game streams into a single widget with selectable tabs.</p>
<h2 id="overview-4"><a class="header" href="#overview-4">Overview</a></h2>
<p>Tabbed text windows:</p>
<ul>
<li>Display multiple streams in one widget</li>
<li>Switch between tabs to view different content</li>
<li>Share a single buffer per tab</li>
<li>Save screen space vs. multiple windows</li>
</ul>
<h2 id="configuration-2"><a class="header" href="#configuration-2">Configuration</a></h2>
<pre><code class="language-toml">[[windows]]
name = "channels"
type = "tabbed_text"

# Position and size
row = 0
col = 80
width = 40
height = 20

# Tab configuration
tabs = ["speech", "thoughts", "combat"]
default_tab = "speech"
show_tab_bar = true

# Visual options
tab_bar_position = "top"    # "top" or "bottom"
buffer_size = 1000          # Per-tab buffer
</code></pre>
<h2 id="properties-1"><a class="header" href="#properties-1">Properties</a></h2>
<h3 id="tabs-required"><a class="header" href="#tabs-required">tabs (required)</a></h3>
<p>List of streams to display as tabs:</p>
<pre><code class="language-toml">tabs = ["speech", "thoughts", "combat"]
</code></pre>
<p>Each tab shows content from the named stream.</p>
<h3 id="default_tab"><a class="header" href="#default_tab">default_tab</a></h3>
<p>Initially selected tab:</p>
<pre><code class="language-toml">default_tab = "speech"    # Open to speech tab
</code></pre>
<p>If not specified, opens to first tab.</p>
<h3 id="show_tab_bar"><a class="header" href="#show_tab_bar">show_tab_bar</a></h3>
<p>Whether to display the tab bar:</p>
<pre><code class="language-toml">show_tab_bar = true     # Show tabs (default)
show_tab_bar = false    # Hide tab bar
</code></pre>
<h3 id="tab_bar_position"><a class="header" href="#tab_bar_position">tab_bar_position</a></h3>
<p>Position of the tab bar:</p>
<pre><code class="language-toml">tab_bar_position = "top"      # Tabs at top (default)
tab_bar_position = "bottom"   # Tabs at bottom
</code></pre>
<h3 id="buffer_size-1"><a class="header" href="#buffer_size-1">buffer_size</a></h3>
<p>Lines to buffer per tab:</p>
<pre><code class="language-toml">buffer_size = 1000    # Default per tab
</code></pre>
<h2 id="tab-bar-display"><a class="header" href="#tab-bar-display">Tab Bar Display</a></h2>
<pre><code>┌─ Channels ──────────────────────────┐
│ [Speech] [Thoughts] [Combat]        │
├─────────────────────────────────────┤
│ Alice says, "Hello everyone!"       │
│ Bob asks, "How are you?"            │
│ Charlie exclaims, "Great day!"      │
│                                     │
└─────────────────────────────────────┘
</code></pre>
<p>Active tab is highlighted, inactive tabs are dimmed.</p>
<h2 id="interaction-1"><a class="header" href="#interaction-1">Interaction</a></h2>
<h3 id="tab-navigation"><a class="header" href="#tab-navigation">Tab Navigation</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Input</th><th>Action</th></tr>
</thead>
<tbody>
<tr><td><code>Tab</code></td><td>Next tab</td></tr>
<tr><td><code>Shift+Tab</code></td><td>Previous tab</td></tr>
<tr><td>Click tab</td><td>Select tab</td></tr>
<tr><td><code>1-9</code></td><td>Select tab by number</td></tr>
</tbody>
</table>
</div>
<h3 id="content-navigation"><a class="header" href="#content-navigation">Content Navigation</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Input</th><th>Action</th></tr>
</thead>
<tbody>
<tr><td><code>Page Up/Down</code></td><td>Scroll current tab</td></tr>
<tr><td><code>Home/End</code></td><td>Top/bottom of current tab</td></tr>
<tr><td>Mouse wheel</td><td>Scroll current tab</td></tr>
</tbody>
</table>
</div>
<h3 id="text-operations"><a class="header" href="#text-operations">Text Operations</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Input</th><th>Action</th></tr>
</thead>
<tbody>
<tr><td>Click+drag</td><td>Select text</td></tr>
<tr><td><code>Ctrl+C</code></td><td>Copy selection</td></tr>
</tbody>
</table>
</div>
<h2 id="examples-2"><a class="header" href="#examples-2">Examples</a></h2>
<h3 id="communication-channels"><a class="header" href="#communication-channels">Communication Channels</a></h3>
<pre><code class="language-toml">[[windows]]
name = "channels"
type = "tabbed_text"
tabs = ["speech", "thoughts", "whisper"]
default_tab = "speech"
row = 0
col = 80
width = 40
height = 20
title = "Channels"
</code></pre>
<h3 id="combat-and-notifications"><a class="header" href="#combat-and-notifications">Combat and Notifications</a></h3>
<pre><code class="language-toml">[[windows]]
name = "alerts"
type = "tabbed_text"
tabs = ["combat", "death", "logons"]
default_tab = "combat"
row = 20
col = 80
width = 40
height = 15
title = "Alerts"
</code></pre>
<h3 id="all-streams"><a class="header" href="#all-streams">All Streams</a></h3>
<pre><code class="language-toml">[[windows]]
name = "all_streams"
type = "tabbed_text"
tabs = ["speech", "thoughts", "combat", "death", "logons", "familiar", "group"]
default_tab = "speech"
row = 0
col = 80
width = 40
height = 35
buffer_size = 500    # Smaller buffer for many tabs
</code></pre>
<h3 id="hidden-tab-bar"><a class="header" href="#hidden-tab-bar">Hidden Tab Bar</a></h3>
<pre><code class="language-toml">[[windows]]
name = "hidden_tabs"
type = "tabbed_text"
tabs = ["speech", "thoughts"]
show_tab_bar = false
row = 0
col = 80
width = 40
height = 20
</code></pre>
<p>Use keybinds to switch tabs when bar is hidden.</p>
<h2 id="tab-indicators"><a class="header" href="#tab-indicators">Tab Indicators</a></h2>
<h3 id="unread-content"><a class="header" href="#unread-content">Unread Content</a></h3>
<p>Tabs with new unread content show an indicator:</p>
<pre><code>[Speech*] [Thoughts] [Combat]
</code></pre>
<p>The <code>*</code> indicates unread content in that tab.</p>
<h3 id="activity-highlighting"><a class="header" href="#activity-highlighting">Activity Highlighting</a></h3>
<p>Active tabs can use different colors:</p>
<pre><code class="language-toml">active_tab_color = "#FFFFFF"
inactive_tab_color = "#808080"
unread_tab_color = "#FFFF00"
</code></pre>
<h2 id="memory-considerations"><a class="header" href="#memory-considerations">Memory Considerations</a></h2>
<p>Each tab maintains its own buffer:</p>
<pre><code>Total memory ≈ buffer_size × number_of_tabs × line_size
</code></pre>
<p>For many tabs, reduce buffer_size:</p>
<pre><code class="language-toml"># 7 tabs × 500 lines = 3500 lines total
tabs = ["speech", "thoughts", "combat", "death", "logons", "familiar", "group"]
buffer_size = 500
</code></pre>
<h2 id="stream-reference"><a class="header" href="#stream-reference">Stream Reference</a></h2>
<p>Common streams for tabs:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Stream</th><th>Content</th></tr>
</thead>
<tbody>
<tr><td><code>speech</code></td><td>Player dialogue</td></tr>
<tr><td><code>thoughts</code></td><td>ESP/telepathy</td></tr>
<tr><td><code>combat</code></td><td>Combat messages</td></tr>
<tr><td><code>death</code></td><td>Death notifications</td></tr>
<tr><td><code>logons</code></td><td>Arrivals/departures</td></tr>
<tr><td><code>familiar</code></td><td>Familiar messages</td></tr>
<tr><td><code>group</code></td><td>Group information</td></tr>
<tr><td><code>whisper</code></td><td>Private whispers</td></tr>
</tbody>
</table>
</div>
<h2 id="troubleshooting-1"><a class="header" href="#troubleshooting-1">Troubleshooting</a></h2>
<h3 id="tab-not-receiving-content"><a class="header" href="#tab-not-receiving-content">Tab not receiving content</a></h3>
<ol>
<li>Verify stream name is correct</li>
<li>Check game is sending that stream</li>
<li>Some streams require game features</li>
</ol>
<h3 id="tabs-not-switching"><a class="header" href="#tabs-not-switching">Tabs not switching</a></h3>
<ol>
<li>Ensure widget has focus</li>
<li>Check keybinds for conflicts</li>
<li>Try clicking tabs directly</li>
</ol>
<h3 id="memory-issues-with-many-tabs"><a class="header" href="#memory-issues-with-many-tabs">Memory issues with many tabs</a></h3>
<ol>
<li>Reduce <code>buffer_size</code></li>
<li>Use fewer tabs</li>
<li>Remove unused streams</li>
</ol>
<h2 id="see-also-13"><a class="header" href="#see-also-13">See Also</a></h2>
<ul>
<li><a href="#text-windows-1">Text Windows</a> - Single stream windows</li>
<li><a href="#stream-ids">Stream Reference</a> - All streams</li>
<li><a href="#keybindstoml-reference">Keybinds</a> - Tab navigation keys</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="command-input-1"><a class="header" href="#command-input-1">Command Input</a></h1>
<p>The command input widget provides the text entry field for sending commands to the game.</p>
<h2 id="overview-5"><a class="header" href="#overview-5">Overview</a></h2>
<p>The command input:</p>
<ul>
<li>Accepts keyboard input for game commands</li>
<li>Maintains command history</li>
<li>Supports editing operations (cut, copy, paste)</li>
<li>Can display a custom prompt</li>
</ul>
<h2 id="configuration-3"><a class="header" href="#configuration-3">Configuration</a></h2>
<pre><code class="language-toml">[[windows]]
name = "input"
type = "command_input"

# Position and size
row = 38
col = 0
width = 120
height = 2

# Input-specific options
prompt = "&gt; "             # Input prompt
history = true            # Enable command history
history_size = 1000       # Commands to remember

# Visual options
show_border = true
border_style = "rounded"
background_color = "#0A0A0A"
text_color = "#FFFFFF"
cursor_color = "#FFFFFF"
</code></pre>
<h2 id="properties-2"><a class="header" href="#properties-2">Properties</a></h2>
<h3 id="prompt"><a class="header" href="#prompt">prompt</a></h3>
<p>The prompt displayed before input:</p>
<pre><code class="language-toml">prompt = "&gt; "         # Default
prompt = "&gt;&gt; "        # Double arrow
prompt = "[cmd] "     # Custom label
prompt = ""           # No prompt
</code></pre>
<h3 id="history"><a class="header" href="#history">history</a></h3>
<p>Enable command history:</p>
<pre><code class="language-toml">history = true        # Enable (default)
history = false       # Disable
</code></pre>
<h3 id="history_size"><a class="header" href="#history_size">history_size</a></h3>
<p>Number of commands to remember:</p>
<pre><code class="language-toml">history_size = 1000   # Default
history_size = 100    # Smaller history
history_size = 5000   # Large history
</code></pre>
<h2 id="input-operations"><a class="header" href="#input-operations">Input Operations</a></h2>
<h3 id="basic-input"><a class="header" href="#basic-input">Basic Input</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Key</th><th>Action</th></tr>
</thead>
<tbody>
<tr><td><code>Enter</code></td><td>Send command</td></tr>
<tr><td><code>Escape</code></td><td>Clear input</td></tr>
<tr><td>Any text</td><td>Insert at cursor</td></tr>
</tbody>
</table>
</div>
<h3 id="cursor-movement"><a class="header" href="#cursor-movement">Cursor Movement</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Key</th><th>Action</th></tr>
</thead>
<tbody>
<tr><td><code>Left</code></td><td>Move cursor left</td></tr>
<tr><td><code>Right</code></td><td>Move cursor right</td></tr>
<tr><td><code>Home</code></td><td>Move to start</td></tr>
<tr><td><code>End</code></td><td>Move to end</td></tr>
<tr><td><code>Ctrl+Left</code></td><td>Previous word</td></tr>
<tr><td><code>Ctrl+Right</code></td><td>Next word</td></tr>
</tbody>
</table>
</div>
<h3 id="editing"><a class="header" href="#editing">Editing</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Key</th><th>Action</th></tr>
</thead>
<tbody>
<tr><td><code>Backspace</code></td><td>Delete before cursor</td></tr>
<tr><td><code>Delete</code></td><td>Delete at cursor</td></tr>
<tr><td><code>Ctrl+Backspace</code></td><td>Delete word before</td></tr>
<tr><td><code>Ctrl+Delete</code></td><td>Delete word after</td></tr>
<tr><td><code>Ctrl+U</code></td><td>Clear line</td></tr>
<tr><td><code>Ctrl+K</code></td><td>Delete to end</td></tr>
</tbody>
</table>
</div>
<h3 id="clipboard"><a class="header" href="#clipboard">Clipboard</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Key</th><th>Action</th></tr>
</thead>
<tbody>
<tr><td><code>Ctrl+C</code></td><td>Copy selection</td></tr>
<tr><td><code>Ctrl+X</code></td><td>Cut selection</td></tr>
<tr><td><code>Ctrl+V</code></td><td>Paste</td></tr>
<tr><td><code>Ctrl+A</code></td><td>Select all</td></tr>
</tbody>
</table>
</div>
<h3 id="history-1"><a class="header" href="#history-1">History</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Key</th><th>Action</th></tr>
</thead>
<tbody>
<tr><td><code>Up</code></td><td>Previous command</td></tr>
<tr><td><code>Down</code></td><td>Next command</td></tr>
<tr><td><code>Ctrl+R</code></td><td>Search history (if supported)</td></tr>
</tbody>
</table>
</div>
<h2 id="display"><a class="header" href="#display">Display</a></h2>
<h3 id="single-line"><a class="header" href="#single-line">Single Line</a></h3>
<pre><code>&gt; look
</code></pre>
<p>Standard single-line input.</p>
<h3 id="multi-line"><a class="header" href="#multi-line">Multi-Line</a></h3>
<pre><code class="language-toml">[[windows]]
name = "input"
type = "command_input"
height = 3    # Multiple lines visible
</code></pre>
<p>Shows more context:</p>
<pre><code>┌─ Input ────────────────────────────┐
│ &gt; look                             │
│                                    │
└────────────────────────────────────┘
</code></pre>
<h3 id="no-border"><a class="header" href="#no-border">No Border</a></h3>
<pre><code class="language-toml">[[windows]]
name = "input"
type = "command_input"
show_border = false
show_title = false
height = 1
</code></pre>
<p>Minimal footprint:</p>
<pre><code>&gt; look█
</code></pre>
<h2 id="examples-3"><a class="header" href="#examples-3">Examples</a></h2>
<h3 id="standard-input"><a class="header" href="#standard-input">Standard Input</a></h3>
<pre><code class="language-toml">[[windows]]
name = "input"
type = "command_input"
row = 38
col = 0
width = 120
height = 2
prompt = "&gt; "
history = true
show_border = true
border_style = "rounded"
title = "Command"
</code></pre>
<h3 id="full-width-minimal"><a class="header" href="#full-width-minimal">Full-Width Minimal</a></h3>
<pre><code class="language-toml">[[windows]]
name = "input"
type = "command_input"
row = 39
col = 0
width = "100%"
height = 1
show_border = false
background_color = "#0A0A0A"
</code></pre>
<h3 id="centered-input"><a class="header" href="#centered-input">Centered Input</a></h3>
<pre><code class="language-toml">[[windows]]
name = "input"
type = "command_input"
row = 38
col = 20
width = 80
height = 2
prompt = "&gt;&gt; "
border_style = "double"
</code></pre>
<h2 id="command-processing"><a class="header" href="#command-processing">Command Processing</a></h2>
<h3 id="command-flow"><a class="header" href="#command-flow">Command Flow</a></h3>
<ol>
<li>User types command</li>
<li>User presses Enter</li>
<li>Command added to history</li>
<li>Command sent to game server</li>
<li>Input cleared for next command</li>
</ol>
<h3 id="special-commands"><a class="header" href="#special-commands">Special Commands</a></h3>
<p>VellumFE intercepts some commands:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Command</th><th>Action</th></tr>
</thead>
<tbody>
<tr><td><code>;command</code></td><td>Client command (not sent to game)</td></tr>
<tr><td><code>/quit</code></td><td>Exit VellumFE</td></tr>
<tr><td><code>/reload</code></td><td>Reload configuration</td></tr>
</tbody>
</table>
</div>
<h2 id="history-features"><a class="header" href="#history-features">History Features</a></h2>
<h3 id="navigation-3"><a class="header" href="#navigation-3">Navigation</a></h3>
<ul>
<li><code>Up</code> cycles through older commands</li>
<li><code>Down</code> cycles through newer commands</li>
<li>Current input is preserved when browsing</li>
</ul>
<h3 id="persistence"><a class="header" href="#persistence">Persistence</a></h3>
<p>Command history is saved between sessions in:</p>
<pre><code>~/.vellum-fe/history
</code></pre>
<h3 id="duplicate-handling"><a class="header" href="#duplicate-handling">Duplicate Handling</a></h3>
<p>Consecutive duplicate commands are not added to history.</p>
<h2 id="focus-behavior"><a class="header" href="#focus-behavior">Focus Behavior</a></h2>
<p>The command input:</p>
<ul>
<li>Automatically receives focus on startup</li>
<li>Maintains focus during normal gameplay</li>
<li>Returns focus when popups close</li>
<li>Can be focused with <code>Ctrl+I</code> or clicking</li>
</ul>
<h2 id="troubleshooting-2"><a class="header" href="#troubleshooting-2">Troubleshooting</a></h2>
<h3 id="commands-not-sending"><a class="header" href="#commands-not-sending">Commands not sending</a></h3>
<ol>
<li>Check input has focus (cursor visible)</li>
<li>Verify connection is active</li>
<li>Check for keybind conflicts with Enter</li>
</ol>
<h3 id="history-not-working"><a class="header" href="#history-not-working">History not working</a></h3>
<ol>
<li>Verify <code>history = true</code></li>
<li>Check <code>history_size</code> &gt; 0</li>
<li>Check file permissions on history file</li>
</ol>
<h3 id="cursor-not-visible"><a class="header" href="#cursor-not-visible">Cursor not visible</a></h3>
<ol>
<li>Check <code>cursor_color</code> is visible</li>
<li>Verify widget has focus</li>
<li>Check width is sufficient</li>
</ol>
<h2 id="see-also-14"><a class="header" href="#see-also-14">See Also</a></h2>
<ul>
<li><a href="#keybindstoml-reference">Keybinds Configuration</a> - Input shortcuts</li>
<li><a href="#quick-tour">Quick Tour</a> - Basic usage</li>
<li><a href="automation/README.html">Automation</a> - Command automation</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="progress-bars-1"><a class="header" href="#progress-bars-1">Progress Bars</a></h1>
<p>Progress bars display character statistics as visual bars with optional numeric values.</p>
<h2 id="overview-6"><a class="header" href="#overview-6">Overview</a></h2>
<p>Progress bars:</p>
<ul>
<li>Show health, mana, stamina, spirit, encumbrance</li>
<li>Update automatically from game data</li>
<li>Support custom colors and styling</li>
<li>Can show value, percentage, or both</li>
</ul>
<h2 id="configuration-4"><a class="header" href="#configuration-4">Configuration</a></h2>
<pre><code class="language-toml">[[windows]]
name = "health"
type = "progress"

# Position and size
row = 0
col = 80
width = 30
height = 1

# Progress-specific options
stat = "health"           # Stat to track (required)
show_value = true         # Show "425/500"
show_percentage = false   # Show "85%"
show_label = true         # Show stat name

# Colors
bar_color = "#00FF00"     # Bar fill color
bar_empty_color = "#333333"  # Empty portion
text_color = "#FFFFFF"    # Text color
</code></pre>
<h2 id="properties-3"><a class="header" href="#properties-3">Properties</a></h2>
<h3 id="stat-required"><a class="header" href="#stat-required">stat (required)</a></h3>
<p>The character statistic to display:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Stat</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>health</code></td><td>Health points</td></tr>
<tr><td><code>mana</code></td><td>Mana points</td></tr>
<tr><td><code>spirit</code></td><td>Spirit points</td></tr>
<tr><td><code>stamina</code></td><td>Stamina points</td></tr>
<tr><td><code>encumbrance</code></td><td>Encumbrance level</td></tr>
</tbody>
</table>
</div>
<h3 id="show_value"><a class="header" href="#show_value">show_value</a></h3>
<p>Display the numeric value:</p>
<pre><code class="language-toml">show_value = true     # Shows "425/500"
show_value = false    # Bar only
</code></pre>
<h3 id="show_percentage"><a class="header" href="#show_percentage">show_percentage</a></h3>
<p>Display percentage instead of/with value:</p>
<pre><code class="language-toml">show_percentage = true    # Shows "85%"
show_percentage = false   # Shows value or nothing
</code></pre>
<h3 id="show_label"><a class="header" href="#show_label">show_label</a></h3>
<p>Display the stat name:</p>
<pre><code class="language-toml">show_label = true     # Shows "HP: 425/500"
show_label = false    # Shows "425/500"
</code></pre>
<h3 id="bar_color"><a class="header" href="#bar_color">bar_color</a></h3>
<p>Color of the filled portion:</p>
<pre><code class="language-toml">bar_color = "#00FF00"     # Green
bar_color = "health"      # From palette
bar_color = "@health"     # From preset
</code></pre>
<h3 id="dynamic-colors"><a class="header" href="#dynamic-colors">Dynamic Colors</a></h3>
<p>Use different colors based on value:</p>
<pre><code class="language-toml">[[windows]]
name = "health"
type = "progress"
stat = "health"

# Color thresholds (checked in order)
[windows.color_thresholds]
75 = "#00FF00"    # Green above 75%
50 = "#FFFF00"    # Yellow 50-75%
25 = "#FF8800"    # Orange 25-50%
0 = "#FF0000"     # Red below 25%
</code></pre>
<h2 id="display-formats"><a class="header" href="#display-formats">Display Formats</a></h2>
<h3 id="compact-1-row"><a class="header" href="#compact-1-row">Compact (1 row)</a></h3>
<pre><code class="language-toml">[[windows]]
name = "health"
type = "progress"
stat = "health"
width = 20
height = 1
show_label = true
show_value = true
</code></pre>
<p>Result: <code>HP ████████░░ 80%</code></p>
<h3 id="minimal-bar-only"><a class="header" href="#minimal-bar-only">Minimal (Bar only)</a></h3>
<pre><code class="language-toml">[[windows]]
name = "health"
type = "progress"
stat = "health"
width = 15
height = 1
show_label = false
show_value = false
</code></pre>
<p>Result: <code>████████████░░░</code></p>
<h3 id="vertical-bar"><a class="header" href="#vertical-bar">Vertical Bar</a></h3>
<pre><code class="language-toml">[[windows]]
name = "health"
type = "progress"
stat = "health"
width = 3
height = 10
orientation = "vertical"
</code></pre>
<h2 id="examples-4"><a class="header" href="#examples-4">Examples</a></h2>
<h3 id="health-bar-green"><a class="header" href="#health-bar-green">Health Bar (Green)</a></h3>
<pre><code class="language-toml">[[windows]]
name = "health"
type = "progress"
stat = "health"
row = 0
col = 80
width = 25
height = 1
bar_color = "#00FF00"
show_value = true
</code></pre>
<h3 id="mana-bar-blue"><a class="header" href="#mana-bar-blue">Mana Bar (Blue)</a></h3>
<pre><code class="language-toml">[[windows]]
name = "mana"
type = "progress"
stat = "mana"
row = 1
col = 80
width = 25
height = 1
bar_color = "#0088FF"
show_value = true
</code></pre>
<h3 id="spirit-bar-cyan"><a class="header" href="#spirit-bar-cyan">Spirit Bar (Cyan)</a></h3>
<pre><code class="language-toml">[[windows]]
name = "spirit"
type = "progress"
stat = "spirit"
row = 2
col = 80
width = 25
height = 1
bar_color = "#00FFFF"
show_value = true
</code></pre>
<h3 id="stamina-bar-yellow"><a class="header" href="#stamina-bar-yellow">Stamina Bar (Yellow)</a></h3>
<pre><code class="language-toml">[[windows]]
name = "stamina"
type = "progress"
stat = "stamina"
row = 3
col = 80
width = 25
height = 1
bar_color = "#FFFF00"
show_value = true
</code></pre>
<h3 id="encumbrance-bar"><a class="header" href="#encumbrance-bar">Encumbrance Bar</a></h3>
<pre><code class="language-toml">[[windows]]
name = "encumbrance"
type = "progress"
stat = "encumbrance"
row = 4
col = 80
width = 25
height = 1
bar_color = "#888888"
show_percentage = true
</code></pre>
<h3 id="stacked-vitals"><a class="header" href="#stacked-vitals">Stacked Vitals</a></h3>
<pre><code class="language-toml"># All vitals in one area
[[windows]]
name = "health"
type = "progress"
stat = "health"
row = 0
col = 100
width = 20
height = 1

[[windows]]
name = "mana"
type = "progress"
stat = "mana"
row = 1
col = 100
width = 20
height = 1

[[windows]]
name = "spirit"
type = "progress"
stat = "spirit"
row = 2
col = 100
width = 20
height = 1

[[windows]]
name = "stamina"
type = "progress"
stat = "stamina"
row = 3
col = 100
width = 20
height = 1
</code></pre>
<h2 id="data-source"><a class="header" href="#data-source">Data Source</a></h2>
<p>Progress bars receive data from <code>&lt;progressBar&gt;</code> XML elements:</p>
<pre><code class="language-xml">&lt;progressBar id='health' value='85' text='health 425/500' /&gt;
</code></pre>
<p>The parser extracts:</p>
<ul>
<li><code>id</code>: Stat type</li>
<li><code>value</code>: Percentage (0-100)</li>
<li><code>text</code>: Parse current/max values</li>
</ul>
<h2 id="troubleshooting-3"><a class="header" href="#troubleshooting-3">Troubleshooting</a></h2>
<h3 id="bar-not-updating"><a class="header" href="#bar-not-updating">Bar not updating</a></h3>
<ol>
<li>Verify <code>stat</code> matches a valid stat ID</li>
<li>Check game is sending progress bar data</li>
<li>Ensure widget is enabled</li>
</ol>
<h3 id="wrong-colors"><a class="header" href="#wrong-colors">Wrong colors</a></h3>
<ol>
<li>Check <code>bar_color</code> syntax</li>
<li>Verify palette/preset references exist</li>
<li>Check color threshold order</li>
</ol>
<h3 id="value-display-issues"><a class="header" href="#value-display-issues">Value display issues</a></h3>
<ol>
<li>Ensure <code>show_value</code> or <code>show_percentage</code> is true</li>
<li>Check width is sufficient for text</li>
<li>Verify text_color is visible against background</li>
</ol>
<h2 id="see-also-15"><a class="header" href="#see-also-15">See Also</a></h2>
<ul>
<li><a href="#dashboard-widget">Dashboard</a> - Composite status widget</li>
<li><a href="#countdowns">Countdowns</a> - RT/cast time display</li>
<li><a href="#colorstoml-reference">Color Configuration</a> - Color settings</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="countdowns"><a class="header" href="#countdowns">Countdowns</a></h1>
<p>Countdown widgets display roundtime and cast time remaining.</p>
<h2 id="overview-7"><a class="header" href="#overview-7">Overview</a></h2>
<p>Countdown widgets:</p>
<ul>
<li>Show remaining seconds for roundtime or cast time</li>
<li>Update every second automatically</li>
<li>Support visual bar and numeric display</li>
<li>Customize icons and colors</li>
</ul>
<h2 id="configuration-5"><a class="header" href="#configuration-5">Configuration</a></h2>
<pre><code class="language-toml">[[windows]]
name = "roundtime"
type = "countdown"

# Position and size
row = 5
col = 80
width = 15
height = 1

# Countdown-specific options
countdown_type = "roundtime"  # "roundtime" or "casttime"
show_bar = true               # Show progress bar
show_seconds = true           # Show numeric seconds
icon = "⏱"                    # Icon prefix

# Colors
bar_color = "#FF0000"         # Progress bar color
text_color = "#FFFFFF"        # Seconds text color
background_color = "#000000"
</code></pre>
<h2 id="properties-4"><a class="header" href="#properties-4">Properties</a></h2>
<h3 id="countdown_type-required"><a class="header" href="#countdown_type-required">countdown_type (required)</a></h3>
<p>Which countdown to display:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>roundtime</code></td><td>Combat/action roundtime</td></tr>
<tr><td><code>casttime</code></td><td>Spell casting time</td></tr>
</tbody>
</table>
</div>
<h3 id="show_bar"><a class="header" href="#show_bar">show_bar</a></h3>
<p>Display a progress bar:</p>
<pre><code class="language-toml">show_bar = true       # Show visual bar (default)
show_bar = false      # Numbers only
</code></pre>
<h3 id="show_seconds"><a class="header" href="#show_seconds">show_seconds</a></h3>
<p>Display numeric seconds remaining:</p>
<pre><code class="language-toml">show_seconds = true   # Show "5s" (default)
show_seconds = false  # Bar only
</code></pre>
<h3 id="icon"><a class="header" href="#icon">icon</a></h3>
<p>Icon displayed before countdown:</p>
<pre><code class="language-toml">icon = "⏱"        # Timer emoji
icon = "RT:"       # Text prefix
icon = ""          # No icon
</code></pre>
<h2 id="display-modes"><a class="header" href="#display-modes">Display Modes</a></h2>
<h3 id="bar-with-seconds"><a class="header" href="#bar-with-seconds">Bar with Seconds</a></h3>
<pre><code>⏱ ██████░░░░ 6s
</code></pre>
<p>Shows visual progress and numeric value.</p>
<h3 id="bar-only"><a class="header" href="#bar-only">Bar Only</a></h3>
<pre><code>██████████░░░░░░░░░░
</code></pre>
<p>Clean visual indicator.</p>
<h3 id="seconds-only"><a class="header" href="#seconds-only">Seconds Only</a></h3>
<pre><code>RT: 6
</code></pre>
<p>Minimal numeric display.</p>
<h3 id="compact"><a class="header" href="#compact">Compact</a></h3>
<pre><code class="language-toml">width = 8
height = 1
show_bar = false
icon = ""
</code></pre>
<p>Result: <code>6s</code></p>
<h2 id="visual-behavior"><a class="header" href="#visual-behavior">Visual Behavior</a></h2>
<h3 id="active-countdown"><a class="header" href="#active-countdown">Active Countdown</a></h3>
<p>When time is remaining:</p>
<ul>
<li>Bar fills proportionally</li>
<li>Seconds count down</li>
<li>Color indicates urgency</li>
</ul>
<h3 id="zeroexpired"><a class="header" href="#zeroexpired">Zero/Expired</a></h3>
<p>When countdown reaches zero:</p>
<ul>
<li>Bar empty or hidden</li>
<li>Shows “0” or disappears</li>
<li>Can trigger alert</li>
</ul>
<h3 id="color-progression"><a class="header" href="#color-progression">Color Progression</a></h3>
<p>Optional color changes based on time:</p>
<pre><code class="language-toml"># High time (&gt;5s)
high_color = "#00FF00"

# Medium time (2-5s)
medium_color = "#FFFF00"

# Low time (&lt;2s)
low_color = "#FF0000"
</code></pre>
<h2 id="examples-5"><a class="header" href="#examples-5">Examples</a></h2>
<h3 id="standard-roundtime"><a class="header" href="#standard-roundtime">Standard Roundtime</a></h3>
<pre><code class="language-toml">[[windows]]
name = "roundtime"
type = "countdown"
countdown_type = "roundtime"
row = 5
col = 80
width = 20
height = 1
icon = "RT:"
show_bar = true
show_seconds = true
bar_color = "#FF4444"
</code></pre>
<h3 id="cast-time"><a class="header" href="#cast-time">Cast Time</a></h3>
<pre><code class="language-toml">[[windows]]
name = "casttime"
type = "countdown"
countdown_type = "casttime"
row = 6
col = 80
width = 20
height = 1
icon = "CT:"
show_bar = true
show_seconds = true
bar_color = "#4444FF"
</code></pre>
<h3 id="minimal-rt"><a class="header" href="#minimal-rt">Minimal RT</a></h3>
<pre><code class="language-toml">[[windows]]
name = "rt"
type = "countdown"
countdown_type = "roundtime"
row = 0
col = 0
width = 5
height = 1
icon = ""
show_bar = false
show_border = false
text_color = "#FF0000"
</code></pre>
<h3 id="dual-countdowns"><a class="header" href="#dual-countdowns">Dual Countdowns</a></h3>
<pre><code class="language-toml"># Side by side
[[windows]]
name = "roundtime"
type = "countdown"
countdown_type = "roundtime"
row = 10
col = 80
width = 15
height = 1
icon = "RT"
bar_color = "#FF0000"

[[windows]]
name = "casttime"
type = "countdown"
countdown_type = "casttime"
row = 10
col = 96
width = 15
height = 1
icon = "CT"
bar_color = "#0088FF"
</code></pre>
<h3 id="progress-bar-style"><a class="header" href="#progress-bar-style">Progress Bar Style</a></h3>
<pre><code class="language-toml">[[windows]]
name = "roundtime"
type = "countdown"
countdown_type = "roundtime"
row = 15
col = 80
width = 30
height = 1
show_seconds = false
show_border = false
bar_color = "#FF6600"
transparent_background = true
</code></pre>
<h2 id="data-source-1"><a class="header" href="#data-source-1">Data Source</a></h2>
<p>Countdown widgets receive data from XML elements:</p>
<pre><code class="language-xml">&lt;roundTime value='1234567890'/&gt;
&lt;castTime value='1234567895'/&gt;
</code></pre>
<p>The <code>value</code> is a Unix timestamp when the countdown ends. VellumFE calculates remaining seconds.</p>
<h2 id="accuracy"><a class="header" href="#accuracy">Accuracy</a></h2>
<p>Countdowns update based on:</p>
<ul>
<li>Game server timestamps</li>
<li>Local system clock</li>
<li>~1 second precision</li>
</ul>
<p>Minor drift from game may occur due to network latency.</p>
<h2 id="alerts"><a class="header" href="#alerts">Alerts</a></h2>
<p>Configure alerts when countdown ends:</p>
<pre><code class="language-toml"># In config.toml
[alerts]
roundtime_end_sound = "sounds/ding.wav"
roundtime_end_flash = true
</code></pre>
<h2 id="troubleshooting-4"><a class="header" href="#troubleshooting-4">Troubleshooting</a></h2>
<h3 id="countdown-not-appearing"><a class="header" href="#countdown-not-appearing">Countdown not appearing</a></h3>
<ol>
<li>Check <code>countdown_type</code> is correct</li>
<li>Verify game is sending countdown data</li>
<li>Actions must trigger roundtime</li>
</ol>
<h3 id="time-seems-wrong"><a class="header" href="#time-seems-wrong">Time seems wrong</a></h3>
<ol>
<li>Check system clock accuracy</li>
<li>Network latency can cause slight drift</li>
<li>Verify countdown is for expected action</li>
</ol>
<h3 id="bar-not-showing"><a class="header" href="#bar-not-showing">Bar not showing</a></h3>
<ol>
<li>Check <code>show_bar = true</code></li>
<li>Verify <code>width</code> is sufficient</li>
<li>Check <code>bar_color</code> is visible</li>
</ol>
<h2 id="see-also-16"><a class="header" href="#see-also-16">See Also</a></h2>
<ul>
<li><a href="#progress-bars-1">Progress Bars</a> - Static progress display</li>
<li><a href="#status-indicators">Indicators</a> - Status indicators</li>
<li><a href="#sound-alerts">Sound Alerts</a> - Alert configuration</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="compass-2"><a class="header" href="#compass-2">Compass</a></h1>
<p>The compass widget displays available room exits as directional indicators.</p>
<h2 id="overview-8"><a class="header" href="#overview-8">Overview</a></h2>
<p>The compass:</p>
<ul>
<li>Shows all available exits from current room</li>
<li>Updates automatically when you move</li>
<li>Supports graphical and text display modes</li>
<li>Highlights cardinal and special directions</li>
</ul>
<h2 id="configuration-6"><a class="header" href="#configuration-6">Configuration</a></h2>
<pre><code class="language-toml">[[windows]]
name = "compass"
type = "compass"

# Position and size
row = 0
col = 100
width = 11
height = 5

# Compass-specific options
style = "graphical"       # "graphical" or "text"
show_labels = true        # Show N/S/E/W labels
compact = false           # Compact display mode

# Colors
active_color = "#FFFFFF"  # Available exit color
inactive_color = "#333333"  # Unavailable direction
special_color = "#00FFFF" # Special exits (out, up, down)
</code></pre>
<h2 id="properties-5"><a class="header" href="#properties-5">Properties</a></h2>
<h3 id="style"><a class="header" href="#style">style</a></h3>
<p>Display style:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Style</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>graphical</code></td><td>Visual compass rose</td></tr>
<tr><td><code>text</code></td><td>Text list of exits</td></tr>
</tbody>
</table>
</div>
<h3 id="show_labels"><a class="header" href="#show_labels">show_labels</a></h3>
<p>Show direction labels:</p>
<pre><code class="language-toml">show_labels = true    # Shows N, S, E, W, etc.
show_labels = false   # Icons/indicators only
</code></pre>
<h3 id="compact-1"><a class="header" href="#compact-1">compact</a></h3>
<p>Use compact layout:</p>
<pre><code class="language-toml">compact = false   # Full 5x11 compass (default)
compact = true    # Smaller 3x7 compass
</code></pre>
<h2 id="direction-mapping"><a class="header" href="#direction-mapping">Direction Mapping</a></h2>
<p>The compass recognizes these directions:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Direction</th><th>Abbreviation</th><th>Position</th></tr>
</thead>
<tbody>
<tr><td>north</td><td>n</td><td>Top center</td></tr>
<tr><td>south</td><td>s</td><td>Bottom center</td></tr>
<tr><td>east</td><td>e</td><td>Right center</td></tr>
<tr><td>west</td><td>w</td><td>Left center</td></tr>
<tr><td>northeast</td><td>ne</td><td>Top right</td></tr>
<tr><td>northwest</td><td>nw</td><td>Top left</td></tr>
<tr><td>southeast</td><td>se</td><td>Bottom right</td></tr>
<tr><td>southwest</td><td>sw</td><td>Bottom left</td></tr>
<tr><td>up</td><td>u</td><td>Top (special)</td></tr>
<tr><td>down</td><td>d</td><td>Bottom (special)</td></tr>
<tr><td>out</td><td>out</td><td>Center or special</td></tr>
</tbody>
</table>
</div>
<h2 id="display-modes-1"><a class="header" href="#display-modes-1">Display Modes</a></h2>
<h3 id="graphical-mode-default"><a class="header" href="#graphical-mode-default">Graphical Mode (Default)</a></h3>
<pre><code>    [N]
[NW]   [NE]
[W]  +  [E]
[SW]   [SE]
    [S]
</code></pre>
<p>Available exits are highlighted, unavailable are dimmed.</p>
<h3 id="text-mode"><a class="header" href="#text-mode">Text Mode</a></h3>
<pre><code>Exits: n, e, sw, out
</code></pre>
<p>Simple text list of available directions.</p>
<h3 id="compact-mode"><a class="header" href="#compact-mode">Compact Mode</a></h3>
<pre><code> N
W+E
 S
</code></pre>
<p>Smaller footprint, cardinal directions only.</p>
<h2 id="examples-6"><a class="header" href="#examples-6">Examples</a></h2>
<h3 id="standard-compass"><a class="header" href="#standard-compass">Standard Compass</a></h3>
<pre><code class="language-toml">[[windows]]
name = "compass"
type = "compass"
row = 5
col = 100
width = 11
height = 5
style = "graphical"
show_labels = true
border_style = "rounded"
title = "Exits"
</code></pre>
<h3 id="compact-compass"><a class="header" href="#compact-compass">Compact Compass</a></h3>
<pre><code class="language-toml">[[windows]]
name = "compass"
type = "compass"
row = 0
col = 110
width = 7
height = 3
style = "graphical"
compact = true
show_border = false
</code></pre>
<h3 id="text-list"><a class="header" href="#text-list">Text List</a></h3>
<pre><code class="language-toml">[[windows]]
name = "exits"
type = "compass"
row = 10
col = 80
width = 25
height = 1
style = "text"
show_border = false
</code></pre>
<h3 id="colored-compass"><a class="header" href="#colored-compass">Colored Compass</a></h3>
<pre><code class="language-toml">[[windows]]
name = "compass"
type = "compass"
row = 5
col = 100
width = 11
height = 5
active_color = "#00FF00"      # Green for available
inactive_color = "#1A1A1A"    # Very dark for unavailable
special_color = "#FFFF00"     # Yellow for up/down/out
</code></pre>
<h2 id="interaction-2"><a class="header" href="#interaction-2">Interaction</a></h2>
<p>The compass is display-only by default. With <code>links = true</code>:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Input</th><th>Action</th></tr>
</thead>
<tbody>
<tr><td>Click direction</td><td>Move that direction</td></tr>
<tr><td>Hover</td><td>Highlight direction</td></tr>
</tbody>
</table>
</div>
<h2 id="data-source-2"><a class="header" href="#data-source-2">Data Source</a></h2>
<p>The compass receives data from <code>&lt;compass&gt;</code> XML elements:</p>
<pre><code class="language-xml">&lt;compass&gt;
  &lt;dir value="n"/&gt;
  &lt;dir value="e"/&gt;
  &lt;dir value="out"/&gt;
&lt;/compass&gt;
</code></pre>
<p>The <code>&lt;nav&gt;</code> element provides additional room information:</p>
<pre><code class="language-xml">&lt;nav rm='123456'/&gt;
</code></pre>
<h2 id="troubleshooting-5"><a class="header" href="#troubleshooting-5">Troubleshooting</a></h2>
<h3 id="compass-not-updating"><a class="header" href="#compass-not-updating">Compass not updating</a></h3>
<ol>
<li>Verify you’re receiving compass data (check main window)</li>
<li>Some areas don’t send compass info</li>
<li>Check widget is properly configured</li>
</ol>
<h3 id="exits-showing-incorrectly"><a class="header" href="#exits-showing-incorrectly">Exits showing incorrectly</a></h3>
<ol>
<li>The game controls compass data</li>
<li>Some rooms have unusual exit names</li>
<li>Special exits may not appear in compass</li>
</ol>
<h3 id="display-issues"><a class="header" href="#display-issues">Display issues</a></h3>
<ol>
<li>Check <code>width</code> and <code>height</code> are sufficient</li>
<li>Verify style matches your preference</li>
<li>Check colors are visible against background</li>
</ol>
<h2 id="see-also-17"><a class="header" href="#see-also-17">See Also</a></h2>
<ul>
<li><a href="#room-window-1">Room Window</a> - Full room information</li>
<li><a href="#layouttoml-reference">layout.toml Reference</a> - Layout syntax</li>
<li><a href="#your-first-layout-1">Navigation Tutorial</a> - Layout examples</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="hands-1"><a class="header" href="#hands-1">Hands</a></h1>
<p>Hand widgets display items held in your character’s hands and prepared spells.</p>
<h2 id="overview-9"><a class="header" href="#overview-9">Overview</a></h2>
<p>Hand widgets:</p>
<ul>
<li>Show left hand, right hand, or spell contents</li>
<li>Update automatically when items change</li>
<li>Support clickable links to items</li>
<li>Display custom icons</li>
</ul>
<h2 id="configuration-7"><a class="header" href="#configuration-7">Configuration</a></h2>
<pre><code class="language-toml">[[windows]]
name = "right_hand"
type = "hand"

# Position and size
row = 10
col = 100
width = 20
height = 1

# Hand-specific options
hand_type = "right"       # "left", "right", or "spell"

# Display options
icon = "🤚"               # Icon before text
icon_color = "#FFFFFF"    # Icon color
text_color = "#CCCCCC"    # Item text color

# Visual options
show_border = true
border_style = "rounded"
</code></pre>
<h2 id="properties-6"><a class="header" href="#properties-6">Properties</a></h2>
<h3 id="hand_type-required"><a class="header" href="#hand_type-required">hand_type (required)</a></h3>
<p>Which hand/slot to display:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Type</th><th>Content</th></tr>
</thead>
<tbody>
<tr><td><code>left</code></td><td>Left hand item</td></tr>
<tr><td><code>right</code></td><td>Right hand item</td></tr>
<tr><td><code>spell</code></td><td>Prepared spell</td></tr>
</tbody>
</table>
</div>
<h3 id="icon-1"><a class="header" href="#icon-1">icon</a></h3>
<p>Icon displayed before content:</p>
<pre><code class="language-toml"># Hand icons
icon = "🤚"       # Generic hand
icon = "👋"       # Wave (left)
icon = "✋"       # Palm (right)
icon = "✨"       # Sparkle (spell)

# Text icons
icon = "[L]"      # Left bracket
icon = "[R]"      # Right bracket
icon = "[S]"      # Spell bracket

# No icon
icon = ""
</code></pre>
<h3 id="icon_color"><a class="header" href="#icon_color">icon_color</a></h3>
<p>Color of the icon:</p>
<pre><code class="language-toml">icon_color = "#FFFFFF"    # White
icon_color = "bright_cyan"  # Palette color
icon_color = "@links"     # Preset color
</code></pre>
<h3 id="text_color"><a class="header" href="#text_color">text_color</a></h3>
<p>Color of the item text:</p>
<pre><code class="language-toml">text_color = "#CCCCCC"    # Default gray
text_color = "@links"     # Link color from presets
</code></pre>
<h2 id="display-modes-2"><a class="header" href="#display-modes-2">Display Modes</a></h2>
<h3 id="with-icon"><a class="header" href="#with-icon">With Icon</a></h3>
<pre><code>🤚 a gleaming vultite sword
</code></pre>
<h3 id="text-only"><a class="header" href="#text-only">Text Only</a></h3>
<pre><code>[R] a gleaming vultite sword
</code></pre>
<h3 id="compact-2"><a class="header" href="#compact-2">Compact</a></h3>
<pre><code class="language-toml">show_border = false
icon = ""
width = 25
height = 1
</code></pre>
<p>Result: <code>a gleaming vultite sword</code></p>
<h2 id="interaction-3"><a class="header" href="#interaction-3">Interaction</a></h2>
<p>With <code>links = true</code> in config.toml:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Input</th><th>Action</th></tr>
</thead>
<tbody>
<tr><td>Click item</td><td>Primary action</td></tr>
<tr><td>Right-click</td><td>Context menu</td></tr>
</tbody>
</table>
</div>
<p>Actions depend on the item type:</p>
<ul>
<li>Weapons: Attack commands</li>
<li>Containers: Open/search</li>
<li>General: Look/inspect</li>
</ul>
<h2 id="examples-7"><a class="header" href="#examples-7">Examples</a></h2>
<h3 id="right-hand"><a class="header" href="#right-hand">Right Hand</a></h3>
<pre><code class="language-toml">[[windows]]
name = "right_hand"
type = "hand"
hand_type = "right"
row = 5
col = 80
width = 25
height = 1
icon = "✋"
icon_color = "#AAAAAA"
title = "Right"
</code></pre>
<h3 id="left-hand"><a class="header" href="#left-hand">Left Hand</a></h3>
<pre><code class="language-toml">[[windows]]
name = "left_hand"
type = "hand"
hand_type = "left"
row = 6
col = 80
width = 25
height = 1
icon = "🤚"
icon_color = "#AAAAAA"
title = "Left"
</code></pre>
<h3 id="spell-hand"><a class="header" href="#spell-hand">Spell Hand</a></h3>
<pre><code class="language-toml">[[windows]]
name = "spell"
type = "hand"
hand_type = "spell"
row = 7
col = 80
width = 25
height = 1
icon = "✨"
icon_color = "#FFFF00"
title = "Spell"
text_color = "#FF88FF"
</code></pre>
<h3 id="stacked-hands"><a class="header" href="#stacked-hands">Stacked Hands</a></h3>
<pre><code class="language-toml"># All three hands vertically
[[windows]]
name = "right_hand"
type = "hand"
hand_type = "right"
row = 10
col = 100
width = 20
height = 1
icon = "R:"
show_border = false

[[windows]]
name = "left_hand"
type = "hand"
hand_type = "left"
row = 11
col = 100
width = 20
height = 1
icon = "L:"
show_border = false

[[windows]]
name = "spell"
type = "hand"
hand_type = "spell"
row = 12
col = 100
width = 20
height = 1
icon = "S:"
show_border = false
</code></pre>
<h3 id="bordered-group"><a class="header" href="#bordered-group">Bordered Group</a></h3>
<pre><code class="language-toml">[[windows]]
name = "hands"
type = "container"
row = 10
col = 100
width = 22
height = 5
title = "Hands"
border_style = "rounded"

[[windows]]
name = "right_hand"
type = "hand"
hand_type = "right"
row = 11
col = 101
width = 20
height = 1
show_border = false

[[windows]]
name = "left_hand"
type = "hand"
hand_type = "left"
row = 12
col = 101
width = 20
height = 1
show_border = false

[[windows]]
name = "spell"
type = "hand"
hand_type = "spell"
row = 13
col = 101
width = 20
height = 1
show_border = false
</code></pre>
<h2 id="data-source-3"><a class="header" href="#data-source-3">Data Source</a></h2>
<p>Hand widgets receive data from XML elements:</p>
<pre><code class="language-xml">&lt;right exist="123456" noun="sword"&gt;a gleaming vultite sword&lt;/right&gt;
&lt;left exist="789012" noun="shield"&gt;a battered wooden shield&lt;/left&gt;
&lt;spell&gt;Minor Sanctuary&lt;/spell&gt;
</code></pre>
<p>The <code>exist</code> and <code>noun</code> attributes enable link functionality.</p>
<h2 id="empty-hands"><a class="header" href="#empty-hands">Empty Hands</a></h2>
<p>When a hand is empty:</p>
<ul>
<li>Display shows “Empty” or nothing</li>
<li>Configure empty display:</li>
</ul>
<pre><code class="language-toml">empty_text = "Empty"      # Show "Empty"
empty_text = "-"          # Show dash
empty_text = ""           # Show nothing
</code></pre>
<h2 id="troubleshooting-6"><a class="header" href="#troubleshooting-6">Troubleshooting</a></h2>
<h3 id="hand-not-updating"><a class="header" href="#hand-not-updating">Hand not updating</a></h3>
<ol>
<li>Check <code>hand_type</code> is correct</li>
<li>Verify game is sending hand data</li>
<li>Check widget is positioned correctly</li>
</ol>
<h3 id="links-not-working"><a class="header" href="#links-not-working">Links not working</a></h3>
<ol>
<li>Enable <code>links = true</code> in config.toml</li>
<li>Verify item has exist ID</li>
<li>Check for click handler conflicts</li>
</ol>
<h3 id="text-truncated"><a class="header" href="#text-truncated">Text truncated</a></h3>
<ol>
<li>Increase widget <code>width</code></li>
<li>Remove icon to save space</li>
<li>Use smaller font if available</li>
</ol>
<h2 id="see-also-18"><a class="header" href="#see-also-18">See Also</a></h2>
<ul>
<li><a href="#status-indicators">Indicators</a> - Status indicators</li>
<li><a href="#dashboard-widget">Dashboard</a> - Composite status</li>
<li><a href="#configtoml-reference">Link Configuration</a> - Link settings</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="status-indicators"><a class="header" href="#status-indicators">Status Indicators</a></h1>
<p>Status indicator widgets display active character conditions like stunned, hidden, poisoned, etc.</p>
<h2 id="overview-10"><a class="header" href="#overview-10">Overview</a></h2>
<p>Indicator widgets:</p>
<ul>
<li>Show active status conditions</li>
<li>Update automatically when conditions change</li>
<li>Support icon or text display modes</li>
<li>Can show multiple conditions</li>
</ul>
<h2 id="configuration-8"><a class="header" href="#configuration-8">Configuration</a></h2>
<pre><code class="language-toml">[[windows]]
name = "status"
type = "indicator"

# Position and size
row = 8
col = 100
width = 20
height = 3

# Indicator-specific options
indicators = ["stunned", "hidden", "webbed", "poisoned"]
style = "icons"           # "icons" or "text"
layout = "horizontal"     # "horizontal" or "vertical"
show_inactive = false     # Show inactive indicators dimmed

# Colors
active_color = "#FF0000"
inactive_color = "#333333"
</code></pre>
<h2 id="properties-7"><a class="header" href="#properties-7">Properties</a></h2>
<h3 id="indicators-1"><a class="header" href="#indicators-1">indicators</a></h3>
<p>Which conditions to display:</p>
<pre><code class="language-toml"># Show specific indicators
indicators = ["stunned", "hidden", "poisoned"]

# Show all indicators
indicators = "all"
</code></pre>
<p>Available indicators:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>ID</th><th>Condition</th></tr>
</thead>
<tbody>
<tr><td><code>stunned</code></td><td>Character stunned</td></tr>
<tr><td><code>hidden</code></td><td>Character hidden</td></tr>
<tr><td><code>webbed</code></td><td>Caught in web</td></tr>
<tr><td><code>poisoned</code></td><td>Poisoned</td></tr>
<tr><td><code>diseased</code></td><td>Diseased</td></tr>
<tr><td><code>bleeding</code></td><td>Bleeding wound</td></tr>
<tr><td><code>prone</code></td><td>Lying down</td></tr>
<tr><td><code>kneeling</code></td><td>Kneeling</td></tr>
<tr><td><code>sitting</code></td><td>Sitting</td></tr>
<tr><td><code>dead</code></td><td>Dead</td></tr>
</tbody>
</table>
</div>
<h3 id="style-1"><a class="header" href="#style-1">style</a></h3>
<p>Display style:</p>
<pre><code class="language-toml">style = "icons"     # Show icons (default)
style = "text"      # Show text labels
style = "both"      # Icon and text
</code></pre>
<h3 id="layout"><a class="header" href="#layout">layout</a></h3>
<p>Indicator arrangement:</p>
<pre><code class="language-toml">layout = "horizontal"   # Side by side (default)
layout = "vertical"     # Stacked
layout = "grid"         # Grid layout
</code></pre>
<h3 id="show_inactive"><a class="header" href="#show_inactive">show_inactive</a></h3>
<p>Whether to show inactive indicators:</p>
<pre><code class="language-toml">show_inactive = false   # Hide inactive (default)
show_inactive = true    # Show dimmed
</code></pre>
<h2 id="display-modes-3"><a class="header" href="#display-modes-3">Display Modes</a></h2>
<h3 id="icons-only"><a class="header" href="#icons-only">Icons Only</a></h3>
<pre><code>⚡ 🕸️ ☠️
</code></pre>
<p>Compact, visual indicators.</p>
<h3 id="text-only-1"><a class="header" href="#text-only-1">Text Only</a></h3>
<pre><code>STUNNED  WEBBED  POISONED
</code></pre>
<p>Clear text labels.</p>
<h3 id="icons-with-text"><a class="header" href="#icons-with-text">Icons with Text</a></h3>
<pre><code>⚡ Stunned  🕸️ Webbed
</code></pre>
<p>Combined display.</p>
<h3 id="vertical"><a class="header" href="#vertical">Vertical</a></h3>
<pre><code>⚡ Stunned
🕸️ Webbed
☠️ Poisoned
</code></pre>
<p>Stacked layout.</p>
<h2 id="indicator-icons"><a class="header" href="#indicator-icons">Indicator Icons</a></h2>
<p>Default icons for each condition:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Condition</th><th>Icon</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>stunned</td><td>⚡</td><td>Lightning bolt</td></tr>
<tr><td>hidden</td><td>👁️</td><td>Eye</td></tr>
<tr><td>webbed</td><td>🕸️</td><td>Spider web</td></tr>
<tr><td>poisoned</td><td>☠️</td><td>Skull</td></tr>
<tr><td>diseased</td><td>🦠</td><td>Microbe</td></tr>
<tr><td>bleeding</td><td>🩸</td><td>Blood drop</td></tr>
<tr><td>prone</td><td>⬇️</td><td>Down arrow</td></tr>
<tr><td>kneeling</td><td>🧎</td><td>Kneeling</td></tr>
<tr><td>sitting</td><td>🪑</td><td>Chair</td></tr>
<tr><td>dead</td><td>💀</td><td>Skull</td></tr>
</tbody>
</table>
</div>
<h3 id="custom-icons"><a class="header" href="#custom-icons">Custom Icons</a></h3>
<p>Override default icons:</p>
<pre><code class="language-toml">[indicator_icons]
stunned = "STUN"
hidden = "HIDE"
poisoned = "POIS"
</code></pre>
<h2 id="examples-8"><a class="header" href="#examples-8">Examples</a></h2>
<h3 id="combat-status-bar"><a class="header" href="#combat-status-bar">Combat Status Bar</a></h3>
<pre><code class="language-toml">[[windows]]
name = "combat_status"
type = "indicator"
indicators = ["stunned", "prone", "webbed"]
row = 0
col = 80
width = 30
height = 1
style = "icons"
layout = "horizontal"
active_color = "#FF4444"
</code></pre>
<h3 id="full-status-panel"><a class="header" href="#full-status-panel">Full Status Panel</a></h3>
<pre><code class="language-toml">[[windows]]
name = "status"
type = "indicator"
indicators = "all"
row = 10
col = 100
width = 15
height = 10
style = "text"
layout = "vertical"
show_inactive = true
active_color = "#FF0000"
inactive_color = "#333333"
</code></pre>
<h3 id="compact-icons"><a class="header" href="#compact-icons">Compact Icons</a></h3>
<pre><code class="language-toml">[[windows]]
name = "status_icons"
type = "indicator"
indicators = ["stunned", "hidden", "poisoned", "diseased"]
row = 5
col = 110
width = 10
height = 1
style = "icons"
show_border = false
</code></pre>
<h3 id="health-conditions"><a class="header" href="#health-conditions">Health Conditions</a></h3>
<pre><code class="language-toml">[[windows]]
name = "health_status"
type = "indicator"
indicators = ["poisoned", "diseased", "bleeding"]
row = 4
col = 80
width = 20
height = 1
style = "both"
active_color = "#FF8800"
title = "Conditions"
</code></pre>
<h2 id="condition-colors"><a class="header" href="#condition-colors">Condition Colors</a></h2>
<p>Different colors for different severity:</p>
<pre><code class="language-toml">[indicator_colors]
# Immediate threats (red)
stunned = "#FF0000"
prone = "#FF0000"

# Combat conditions (orange)
webbed = "#FF8800"
bleeding = "#FF8800"

# Health conditions (yellow)
poisoned = "#FFFF00"
diseased = "#FFFF00"

# Status (blue)
hidden = "#0088FF"
kneeling = "#0088FF"
sitting = "#0088FF"
</code></pre>
<h2 id="animation"><a class="header" href="#animation">Animation</a></h2>
<p>Indicators can flash or pulse:</p>
<pre><code class="language-toml"># Flash active indicators
flash_active = true
flash_rate = 500        # Milliseconds

# Pulse critical conditions
pulse_critical = true
critical_indicators = ["stunned", "dead"]
</code></pre>
<h2 id="data-source-4"><a class="header" href="#data-source-4">Data Source</a></h2>
<p>Indicators receive data from XML elements:</p>
<pre><code class="language-xml">&lt;indicator id="IconSTUNNED" visible="y"/&gt;
&lt;indicator id="IconHIDDEN" visible="n"/&gt;
&lt;indicator id="IconPOISONED" visible="y"/&gt;
</code></pre>
<p>The <code>visible</code> attribute determines active state.</p>
<h2 id="troubleshooting-7"><a class="header" href="#troubleshooting-7">Troubleshooting</a></h2>
<h3 id="indicators-not-showing"><a class="header" href="#indicators-not-showing">Indicators not showing</a></h3>
<ol>
<li>Verify condition is actually active</li>
<li>Check <code>indicators</code> list includes the condition</li>
<li>Ensure <code>show_inactive = false</code> isn’t hiding it</li>
</ol>
<h3 id="wrong-icons"><a class="header" href="#wrong-icons">Wrong icons</a></h3>
<ol>
<li>Check <code>style</code> setting</li>
<li>Verify icon font support in terminal</li>
<li>Use text fallbacks if needed</li>
</ol>
<h3 id="layout-issues"><a class="header" href="#layout-issues">Layout issues</a></h3>
<ol>
<li>Adjust <code>width</code> and <code>height</code></li>
<li>Change <code>layout</code> mode</li>
<li>Reduce number of indicators</li>
</ol>
<h2 id="see-also-19"><a class="header" href="#see-also-19">See Also</a></h2>
<ul>
<li><a href="#injury-doll-1">Injury Doll</a> - Body injury display</li>
<li><a href="#active-effects">Active Effects</a> - Buff/debuff display</li>
<li><a href="#progress-bars-1">Progress Bars</a> - Health status</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="injury-doll-1"><a class="header" href="#injury-doll-1">Injury Doll</a></h1>
<p>The injury doll widget displays a visual representation of injuries to different body parts.</p>
<h2 id="overview-11"><a class="header" href="#overview-11">Overview</a></h2>
<p>Injury doll widgets:</p>
<ul>
<li>Show body part injury severity visually</li>
<li>Display wounds, scars, and blood loss</li>
<li>Update as injuries change</li>
<li>Support multiple display styles</li>
</ul>
<h2 id="configuration-9"><a class="header" href="#configuration-9">Configuration</a></h2>
<pre><code class="language-toml">[[windows]]
name = "injuries"
type = "injury_doll"

# Position and size
row = 0
col = 100
width = 20
height = 12

# Injury-specific options
style = "ascii"           # "ascii", "simple", "detailed"
show_labels = true        # Show body part names
show_severity = true      # Show injury level numbers
orientation = "vertical"  # "vertical" or "horizontal"

# Colors by severity
healthy_color = "#00FF00"
minor_color = "#FFFF00"
moderate_color = "#FF8800"
severe_color = "#FF0000"
critical_color = "#FF0000"
</code></pre>
<h2 id="properties-8"><a class="header" href="#properties-8">Properties</a></h2>
<h3 id="style-2"><a class="header" href="#style-2">style</a></h3>
<p>Display style for the injury doll:</p>
<pre><code class="language-toml">style = "ascii"      # ASCII art body (default)
style = "simple"     # Text list only
style = "detailed"   # Full visual with numbers
</code></pre>
<h3 id="show_labels-1"><a class="header" href="#show_labels-1">show_labels</a></h3>
<p>Display body part names:</p>
<pre><code class="language-toml">show_labels = true    # Show "Head", "Chest", etc.
show_labels = false   # Visual only
</code></pre>
<h3 id="show_severity"><a class="header" href="#show_severity">show_severity</a></h3>
<p>Display injury severity numbers:</p>
<pre><code class="language-toml">show_severity = true    # Show severity level (1-4)
show_severity = false   # Color-coded only
</code></pre>
<h3 id="orientation"><a class="header" href="#orientation">orientation</a></h3>
<p>Layout orientation:</p>
<pre><code class="language-toml">orientation = "vertical"    # Tall layout (default)
orientation = "horizontal"  # Wide layout
</code></pre>
<h2 id="body-parts"><a class="header" href="#body-parts">Body Parts</a></h2>
<p>The injury doll tracks these body parts:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Part</th><th>XML ID</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>Head</td><td><code>head</code></td><td>Head injuries</td></tr>
<tr><td>Neck</td><td><code>neck</code></td><td>Neck injuries</td></tr>
<tr><td>Chest</td><td><code>chest</code></td><td>Chest/torso</td></tr>
<tr><td>Abdomen</td><td><code>abdomen</code></td><td>Stomach area</td></tr>
<tr><td>Back</td><td><code>back</code></td><td>Back injuries</td></tr>
<tr><td>Left Arm</td><td><code>leftArm</code></td><td>Left arm</td></tr>
<tr><td>Right Arm</td><td><code>rightArm</code></td><td>Right arm</td></tr>
<tr><td>Left Hand</td><td><code>leftHand</code></td><td>Left hand</td></tr>
<tr><td>Right Hand</td><td><code>rightHand</code></td><td>Right hand</td></tr>
<tr><td>Left Leg</td><td><code>leftLeg</code></td><td>Left leg</td></tr>
<tr><td>Right Leg</td><td><code>rightLeg</code></td><td>Right leg</td></tr>
<tr><td>Left Eye</td><td><code>leftEye</code></td><td>Left eye</td></tr>
<tr><td>Right Eye</td><td><code>rightEye</code></td><td>Right eye</td></tr>
<tr><td>Nerves</td><td><code>nsys</code></td><td>Nervous system</td></tr>
</tbody>
</table>
</div>
<h2 id="severity-levels"><a class="header" href="#severity-levels">Severity Levels</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Level</th><th>Name</th><th>Color (default)</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>0</td><td>Healthy</td><td>Green</td><td>No injury</td></tr>
<tr><td>1</td><td>Minor</td><td>Yellow</td><td>Minor wound</td></tr>
<tr><td>2</td><td>Moderate</td><td>Orange</td><td>Moderate injury</td></tr>
<tr><td>3</td><td>Severe</td><td>Red</td><td>Severe wound</td></tr>
<tr><td>4</td><td>Critical</td><td>Bright Red</td><td>Critical injury</td></tr>
</tbody>
</table>
</div>
<h2 id="display-styles"><a class="header" href="#display-styles">Display Styles</a></h2>
<h3 id="ascii-art-style"><a class="header" href="#ascii-art-style">ASCII Art Style</a></h3>
<pre><code>┌─ Injuries ───────────┐
│       ( o o )        │
│         ─┬─          │
│        ──┼──         │
│          │           │
│         / \          │
│        /   \         │
└──────────────────────┘
</code></pre>
<p>Body parts are colored by severity.</p>
<h3 id="simple-text-style"><a class="header" href="#simple-text-style">Simple Text Style</a></h3>
<pre><code>┌─ Injuries ───────────┐
│ Head: Minor          │
│ Chest: Moderate      │
│ Right Arm: Severe    │
│ Left Leg: Minor      │
└──────────────────────┘
</code></pre>
<h3 id="detailed-style"><a class="header" href="#detailed-style">Detailed Style</a></h3>
<pre><code>┌─ Injuries ───────────┐
│ HEAD     [████░░] 2  │
│ CHEST    [██████] 3  │
│ R.ARM    [████████] 4│
│ L.LEG    [██░░░░] 1  │
│ BACK     [░░░░░░] 0  │
└──────────────────────┘
</code></pre>
<h2 id="examples-9"><a class="header" href="#examples-9">Examples</a></h2>
<h3 id="standard-injury-doll"><a class="header" href="#standard-injury-doll">Standard Injury Doll</a></h3>
<pre><code class="language-toml">[[windows]]
name = "injuries"
type = "injury_doll"
row = 0
col = 100
width = 20
height = 12
style = "ascii"
show_labels = true
show_severity = true
border_style = "rounded"
</code></pre>
<h3 id="compact-text-list"><a class="header" href="#compact-text-list">Compact Text List</a></h3>
<pre><code class="language-toml">[[windows]]
name = "injury_list"
type = "injury_doll"
row = 0
col = 100
width = 25
height = 8
style = "simple"
show_severity = true
title = "Wounds"
</code></pre>
<h3 id="minimal-status"><a class="header" href="#minimal-status">Minimal Status</a></h3>
<pre><code class="language-toml">[[windows]]
name = "injury_mini"
type = "injury_doll"
row = 0
col = 100
width = 15
height = 5
style = "simple"
show_labels = false
show_severity = false
show_border = false
</code></pre>
<h3 id="wide-layout"><a class="header" href="#wide-layout">Wide Layout</a></h3>
<pre><code class="language-toml">[[windows]]
name = "injuries_wide"
type = "injury_doll"
row = 20
col = 0
width = 60
height = 5
style = "detailed"
orientation = "horizontal"
</code></pre>
<h2 id="severity-colors"><a class="header" href="#severity-colors">Severity Colors</a></h2>
<p>Customize colors for each severity level:</p>
<pre><code class="language-toml">[[windows]]
name = "injuries"
type = "injury_doll"

# Custom severity colors
[windows.colors]
healthy = "#00FF00"    # Green
minor = "#FFFF00"      # Yellow
moderate = "#FF8800"   # Orange
severe = "#FF4444"     # Red
critical = "#FF0000"   # Bright red
bleeding = "#880000"   # Dark red for blood
scarred = "#808080"    # Gray for scars
</code></pre>
<h2 id="wound-types"><a class="header" href="#wound-types">Wound Types</a></h2>
<p>Different wound states may display differently:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>State</th><th>Visual</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>Fresh wound</td><td>Bright color</td><td>Recent injury</td></tr>
<tr><td>Bleeding</td><td>Pulsing/dark</td><td>Active bleeding</td></tr>
<tr><td>Scarred</td><td>Gray</td><td>Old injury</td></tr>
<tr><td>Healing</td><td>Fading</td><td>Being healed</td></tr>
</tbody>
</table>
</div>
<h2 id="animation-1"><a class="header" href="#animation-1">Animation</a></h2>
<p>Injuries can animate to draw attention:</p>
<pre><code class="language-toml"># Flash critical injuries
flash_critical = true
flash_rate = 500        # Milliseconds

# Pulse bleeding wounds
pulse_bleeding = true
</code></pre>
<h2 id="data-source-5"><a class="header" href="#data-source-5">Data Source</a></h2>
<p>Injury data comes from XML elements:</p>
<pre><code class="language-xml">&lt;indicator id="IconBLEEDING" visible="y"/&gt;
&lt;body&gt;
  &lt;part id="head" value="0"/&gt;
  &lt;part id="chest" value="2"/&gt;
  &lt;part id="rightArm" value="3"/&gt;
&lt;/body&gt;
</code></pre>
<p>The <code>value</code> attribute indicates severity (0-4).</p>
<h2 id="integration-with-other-widgets"><a class="header" href="#integration-with-other-widgets">Integration with Other Widgets</a></h2>
<h3 id="combined-with-health-bars"><a class="header" href="#combined-with-health-bars">Combined with Health Bars</a></h3>
<pre><code class="language-toml"># Health bar
[[windows]]
name = "health"
type = "progress"
source = "health"
row = 0
col = 80
width = 20
height = 1

# Injury doll below
[[windows]]
name = "injuries"
type = "injury_doll"
row = 1
col = 80
width = 20
height = 10
</code></pre>
<h3 id="part-of-status-panel"><a class="header" href="#part-of-status-panel">Part of Status Panel</a></h3>
<pre><code class="language-toml"># Status indicators
[[windows]]
name = "status"
type = "indicator"
row = 0
col = 100
width = 20
height = 2

# Injuries below status
[[windows]]
name = "injuries"
type = "injury_doll"
row = 2
col = 100
width = 20
height = 10
</code></pre>
<h2 id="troubleshooting-8"><a class="header" href="#troubleshooting-8">Troubleshooting</a></h2>
<h3 id="injuries-not-updating"><a class="header" href="#injuries-not-updating">Injuries not updating</a></h3>
<ol>
<li>Verify receiving body data from game</li>
<li>Check window is using correct type</li>
<li>Ensure body part IDs match XML</li>
</ol>
<h3 id="wrong-colors-1"><a class="header" href="#wrong-colors-1">Wrong colors</a></h3>
<ol>
<li>Check severity color configuration</li>
<li>Verify theme colors aren’t overriding</li>
<li>Test with default colors first</li>
</ol>
<h3 id="display-too-small"><a class="header" href="#display-too-small">Display too small</a></h3>
<ol>
<li>Increase width and height</li>
<li>Try “simple” style for compact spaces</li>
<li>Adjust orientation for available space</li>
</ol>
<h2 id="see-also-20"><a class="header" href="#see-also-20">See Also</a></h2>
<ul>
<li><a href="#status-indicators">Status Indicators</a> - Status condition display</li>
<li><a href="#progress-bars-1">Progress Bars</a> - Health/vitals display</li>
<li><a href="#active-effects">Active Effects</a> - Buff/debuff display</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="active-effects"><a class="header" href="#active-effects">Active Effects</a></h1>
<p>The active effects widget displays current buffs, debuffs, spells, and other timed effects on your character.</p>
<h2 id="overview-12"><a class="header" href="#overview-12">Overview</a></h2>
<p>Active effects widgets:</p>
<ul>
<li>Show currently active spells and abilities</li>
<li>Display remaining duration</li>
<li>Track buff and debuff status</li>
<li>Update in real-time as effects expire</li>
</ul>
<h2 id="configuration-10"><a class="header" href="#configuration-10">Configuration</a></h2>
<pre><code class="language-toml">[[windows]]
name = "effects"
type = "active_effects"

# Position and size
row = 0
col = 100
width = 30
height = 15

# Effect display options
show_duration = true       # Show remaining time
show_icons = true          # Show effect icons
sort_by = "duration"       # "duration", "name", "type"
group_by_type = false      # Group buffs/debuffs

# Filter options
show_buffs = true
show_debuffs = true
show_spells = true
show_abilities = true

# Colors
buff_color = "#00FF00"
debuff_color = "#FF0000"
spell_color = "#00FFFF"
expiring_color = "#FFFF00"
</code></pre>
<h2 id="properties-9"><a class="header" href="#properties-9">Properties</a></h2>
<h3 id="show_duration"><a class="header" href="#show_duration">show_duration</a></h3>
<p>Display remaining time for effects:</p>
<pre><code class="language-toml">show_duration = true    # Show "Spirit Shield (2:45)"
show_duration = false   # Show "Spirit Shield" only
</code></pre>
<h3 id="show_icons"><a class="header" href="#show_icons">show_icons</a></h3>
<p>Display icons for effects:</p>
<pre><code class="language-toml">show_icons = true     # Show icons/symbols
show_icons = false    # Text only
</code></pre>
<h3 id="sort_by"><a class="header" href="#sort_by">sort_by</a></h3>
<p>How to sort the effect list:</p>
<pre><code class="language-toml">sort_by = "duration"   # Shortest remaining first
sort_by = "name"       # Alphabetical
sort_by = "type"       # Buffs, then debuffs, etc.
</code></pre>
<h3 id="group_by_type"><a class="header" href="#group_by_type">group_by_type</a></h3>
<p>Group effects by category:</p>
<pre><code class="language-toml">group_by_type = true    # Separate sections
group_by_type = false   # Single list (default)
</code></pre>
<h3 id="filter-options"><a class="header" href="#filter-options">Filter Options</a></h3>
<p>Control which effect types to display:</p>
<pre><code class="language-toml">show_buffs = true       # Beneficial effects
show_debuffs = true     # Harmful effects
show_spells = true      # Active spells
show_abilities = true   # Active abilities
</code></pre>
<h2 id="display-format"><a class="header" href="#display-format">Display Format</a></h2>
<h3 id="standard-list"><a class="header" href="#standard-list">Standard List</a></h3>
<pre><code>┌─ Active Effects ─────────────┐
│ ✦ Spirit Shield      (5:23)  │
│ ✦ Elemental Defense  (4:15)  │
│ ✦ Haste              (2:30)  │
│ ✧ Poison             (1:45)  │
│ ✦ Minor Sanctuary    (0:58)  │
└──────────────────────────────┘
</code></pre>
<ul>
<li>✦ = Buff (beneficial)</li>
<li>✧ = Debuff (harmful)</li>
</ul>
<h3 id="grouped-display"><a class="header" href="#grouped-display">Grouped Display</a></h3>
<pre><code>┌─ Active Effects ─────────────┐
│ BUFFS:                       │
│   Spirit Shield      (5:23)  │
│   Elemental Defense  (4:15)  │
│   Haste              (2:30)  │
│                              │
│ DEBUFFS:                     │
│   Poison             (1:45)  │
└──────────────────────────────┘
</code></pre>
<h3 id="compact-display"><a class="header" href="#compact-display">Compact Display</a></h3>
<pre><code>┌─ Effects ────────────────────┐
│ Shield:5:23 Defense:4:15     │
│ Haste:2:30 Poison:1:45       │
└──────────────────────────────┘
</code></pre>
<h2 id="effect-types"><a class="header" href="#effect-types">Effect Types</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Type</th><th>Description</th><th>Default Color</th></tr>
</thead>
<tbody>
<tr><td>Buff</td><td>Beneficial effect</td><td>Green</td></tr>
<tr><td>Debuff</td><td>Harmful effect</td><td>Red</td></tr>
<tr><td>Spell</td><td>Active spell</td><td>Cyan</td></tr>
<tr><td>Ability</td><td>Character ability</td><td>Blue</td></tr>
<tr><td>Item</td><td>Item effect</td><td>Purple</td></tr>
</tbody>
</table>
</div>
<h2 id="duration-display"><a class="header" href="#duration-display">Duration Display</a></h2>
<h3 id="time-formats"><a class="header" href="#time-formats">Time Formats</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Remaining</th><th>Display</th></tr>
</thead>
<tbody>
<tr><td>&gt; 1 hour</td><td>1:23:45</td></tr>
<tr><td>&gt; 1 minute</td><td>5:23</td></tr>
<tr><td>&lt; 1 minute</td><td>0:45</td></tr>
<tr><td>Expiring soon</td><td>Flashing</td></tr>
<tr><td>Permanent</td><td>∞ or –</td></tr>
</tbody>
</table>
</div>
<h3 id="expiring-warning"><a class="header" href="#expiring-warning">Expiring Warning</a></h3>
<p>Effects close to expiring can be highlighted:</p>
<pre><code class="language-toml">expiring_threshold = 30    # Seconds before expiring
expiring_color = "#FFFF00" # Yellow warning
expiring_flash = true      # Flash when expiring
</code></pre>
<h2 id="examples-10"><a class="header" href="#examples-10">Examples</a></h2>
<h3 id="full-effects-panel"><a class="header" href="#full-effects-panel">Full Effects Panel</a></h3>
<pre><code class="language-toml">[[windows]]
name = "effects"
type = "active_effects"
row = 0
col = 100
width = 30
height = 20
show_duration = true
show_icons = true
sort_by = "duration"
group_by_type = true
title = "Active Effects"
</code></pre>
<h3 id="buffs-only"><a class="header" href="#buffs-only">Buffs Only</a></h3>
<pre><code class="language-toml">[[windows]]
name = "buffs"
type = "active_effects"
row = 0
col = 100
width = 25
height = 10
show_buffs = true
show_debuffs = false
show_spells = true
buff_color = "#00FF00"
title = "Buffs"
</code></pre>
<h3 id="debuff-monitor"><a class="header" href="#debuff-monitor">Debuff Monitor</a></h3>
<pre><code class="language-toml">[[windows]]
name = "debuffs"
type = "active_effects"
row = 10
col = 100
width = 25
height = 8
show_buffs = false
show_debuffs = true
debuff_color = "#FF4444"
expiring_color = "#FFFF00"
title = "Debuffs"
</code></pre>
<h3 id="compact-status-bar"><a class="header" href="#compact-status-bar">Compact Status Bar</a></h3>
<pre><code class="language-toml">[[windows]]
name = "effect_bar"
type = "active_effects"
row = 0
col = 50
width = 50
height = 2
show_icons = true
show_duration = false
sort_by = "type"
show_border = false
</code></pre>
<h3 id="spell-timer"><a class="header" href="#spell-timer">Spell Timer</a></h3>
<pre><code class="language-toml">[[windows]]
name = "spells"
type = "active_effects"
row = 15
col = 100
width = 25
height = 12
show_buffs = false
show_debuffs = false
show_spells = true
sort_by = "duration"
title = "Active Spells"
</code></pre>
<h2 id="effect-colors"><a class="header" href="#effect-colors">Effect Colors</a></h2>
<p>Customize colors by effect type:</p>
<pre><code class="language-toml">[[windows]]
name = "effects"
type = "active_effects"

[windows.colors]
buff = "#00FF00"          # Green
debuff = "#FF0000"        # Red
spell = "#00FFFF"         # Cyan
ability = "#0088FF"       # Blue
item = "#FF00FF"          # Magenta
expiring = "#FFFF00"      # Yellow
permanent = "#FFFFFF"     # White
</code></pre>
<h3 id="severity-based-colors"><a class="header" href="#severity-based-colors">Severity-Based Colors</a></h3>
<p>For debuffs, color by severity:</p>
<pre><code class="language-toml">[windows.debuff_colors]
minor = "#FFFF00"      # Yellow
moderate = "#FF8800"   # Orange
severe = "#FF0000"     # Red
critical = "#FF0000"   # Bright red + flash
</code></pre>
<h2 id="animation-2"><a class="header" href="#animation-2">Animation</a></h2>
<h3 id="expiring-effects"><a class="header" href="#expiring-effects">Expiring Effects</a></h3>
<pre><code class="language-toml"># Flash effects about to expire
flash_expiring = true
flash_threshold = 30      # Seconds
flash_rate = 500          # Milliseconds

# Fade out expired effects
fade_on_expire = true
fade_duration = 1000      # Milliseconds
</code></pre>
<h3 id="new-effects"><a class="header" href="#new-effects">New Effects</a></h3>
<pre><code class="language-toml"># Highlight newly added effects
highlight_new = true
highlight_duration = 2000  # Milliseconds
highlight_color = "#FFFFFF"
</code></pre>
<h2 id="data-source-6"><a class="header" href="#data-source-6">Data Source</a></h2>
<p>Effects are tracked from multiple XML sources:</p>
<pre><code class="language-xml">&lt;spell&gt;Spirit Shield&lt;/spell&gt;
&lt;duration value="323"/&gt;

&lt;effect name="Poison" type="debuff" duration="105"/&gt;

&lt;component id="activeSpells"&gt;
  Spirit Shield, Elemental Defense
&lt;/component&gt;
</code></pre>
<h2 id="integration-examples"><a class="header" href="#integration-examples">Integration Examples</a></h2>
<h3 id="combined-with-spell-list"><a class="header" href="#combined-with-spell-list">Combined with Spell List</a></h3>
<pre><code class="language-toml"># Active effects
[[windows]]
name = "active"
type = "active_effects"
row = 0
col = 100
width = 25
height = 10

# Known spells below
[[windows]]
name = "spells"
type = "spells"
row = 10
col = 100
width = 25
height = 15
</code></pre>
<h3 id="part-of-combat-dashboard"><a class="header" href="#part-of-combat-dashboard">Part of Combat Dashboard</a></h3>
<pre><code class="language-toml"># Health/vitals
[[windows]]
name = "vitals"
type = "progress"
row = 0
col = 80
width = 40
height = 4

# Active effects
[[windows]]
name = "effects"
type = "active_effects"
row = 4
col = 80
width = 20
height = 8

# Debuff alerts
[[windows]]
name = "debuffs"
type = "active_effects"
row = 4
col = 100
width = 20
height = 8
show_buffs = false
show_debuffs = true
</code></pre>
<h2 id="troubleshooting-9"><a class="header" href="#troubleshooting-9">Troubleshooting</a></h2>
<h3 id="effects-not-showing"><a class="header" href="#effects-not-showing">Effects not showing</a></h3>
<ol>
<li>Verify game is sending effect data</li>
<li>Check filter settings (show_buffs, etc.)</li>
<li>Ensure correct widget type</li>
</ol>
<h3 id="duration-not-updating"><a class="header" href="#duration-not-updating">Duration not updating</a></h3>
<ol>
<li>Effects may not send duration updates</li>
<li>Check timer refresh rate</li>
<li>Some effects show as permanent</li>
</ol>
<h3 id="missing-effect-types"><a class="header" href="#missing-effect-types">Missing effect types</a></h3>
<ol>
<li>Enable all show_* options to test</li>
<li>Check if game sends that effect type</li>
<li>Verify effect parsing in logs</li>
</ol>
<h2 id="see-also-21"><a class="header" href="#see-also-21">See Also</a></h2>
<ul>
<li><a href="#spells-widget">Spells</a> - Known spell list</li>
<li><a href="#status-indicators">Status Indicators</a> - Status conditions</li>
<li><a href="#progress-bars-1">Progress Bars</a> - Vitals display</li>
<li><a href="#countdowns">Countdowns</a> - Timer display</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="room-window-1"><a class="header" href="#room-window-1">Room Window</a></h1>
<p>The room window displays current room information including name, description, exits, objects, and other players.</p>
<h2 id="overview-13"><a class="header" href="#overview-13">Overview</a></h2>
<p>Room windows:</p>
<ul>
<li>Show the current room name and description</li>
<li>Display obvious exits</li>
<li>List objects and creatures in the room</li>
<li>Show other players present</li>
<li>Update when you move</li>
</ul>
<h2 id="configuration-11"><a class="header" href="#configuration-11">Configuration</a></h2>
<pre><code class="language-toml">[[windows]]
name = "room"
type = "room"

# Position and size
row = 0
col = 80
width = 40
height = 15

# Room-specific options
show_title = true         # Show room name as title
show_description = true   # Show room description
show_exits = true         # Show obvious exits
show_objects = true       # Show items/creatures
show_players = true       # Show other players

# Visual options
title_color = "#FFFFFF"
description_color = "#CCCCCC"
exits_color = "#00FFFF"
objects_color = "#AAAAAA"
players_color = "#00FF00"
</code></pre>
<h2 id="properties-10"><a class="header" href="#properties-10">Properties</a></h2>
<h3 id="show_title"><a class="header" href="#show_title">show_title</a></h3>
<p>Display room name as widget title:</p>
<pre><code class="language-toml">show_title = true     # Room name in title bar
show_title = false    # No title/generic title
</code></pre>
<h3 id="show_description"><a class="header" href="#show_description">show_description</a></h3>
<p>Display the room description:</p>
<pre><code class="language-toml">show_description = true    # Full description
show_description = false   # Hide description
</code></pre>
<h3 id="show_exits"><a class="header" href="#show_exits">show_exits</a></h3>
<p>Display obvious exits:</p>
<pre><code class="language-toml">show_exits = true     # Show "Obvious exits: n, e, out"
show_exits = false    # Hide exits
</code></pre>
<h3 id="show_objects"><a class="header" href="#show_objects">show_objects</a></h3>
<p>Display items and creatures:</p>
<pre><code class="language-toml">show_objects = true   # Show objects in room
show_objects = false  # Hide objects
</code></pre>
<h3 id="show_players"><a class="header" href="#show_players">show_players</a></h3>
<p>Display other players:</p>
<pre><code class="language-toml">show_players = true   # Show player names
show_players = false  # Hide players
</code></pre>
<h2 id="display-layout"><a class="header" href="#display-layout">Display Layout</a></h2>
<pre><code>┌─ Town Square Central ───────────────┐
│ This is the heart of the town,      │
│ where merchants hawk their wares    │
│ and travelers gather to share news. │
│                                     │
│ You also see a wooden bench, a      │
│ town crier, and a young squire.     │
│                                     │
│ Also here: Adventurer, Merchant     │
│                                     │
│ Obvious paths: north, east, south,  │
│ west, out                           │
└─────────────────────────────────────┘
</code></pre>
<h2 id="component-colors"><a class="header" href="#component-colors">Component Colors</a></h2>
<p>Style each component separately:</p>
<pre><code class="language-toml">[[windows]]
name = "room"
type = "room"

# Component colors
[windows.colors]
title = "#9BA2B2"           # Room name
title_bg = "#395573"        # Room name background
description = "#B0B0B0"     # Description text
exits = "#00CCCC"           # Exit directions
objects = "#888888"         # Items/creatures
players = "#00FF00"         # Other players
creatures = "#FF6600"       # Hostile creatures
</code></pre>
<h2 id="examples-11"><a class="header" href="#examples-11">Examples</a></h2>
<h3 id="standard-room-window"><a class="header" href="#standard-room-window">Standard Room Window</a></h3>
<pre><code class="language-toml">[[windows]]
name = "room"
type = "room"
row = 0
col = 80
width = 40
height = 15
show_title = true
show_description = true
show_exits = true
show_objects = true
show_players = true
border_style = "rounded"
</code></pre>
<h3 id="compact-room-info"><a class="header" href="#compact-room-info">Compact Room Info</a></h3>
<pre><code class="language-toml">[[windows]]
name = "room"
type = "room"
row = 0
col = 80
width = 40
height = 5
show_description = false   # Hide description
show_objects = false       # Hide objects
show_title = true
show_exits = true
show_players = true
</code></pre>
<h3 id="full-width"><a class="header" href="#full-width">Full Width</a></h3>
<pre><code class="language-toml">[[windows]]
name = "room"
type = "room"
row = 0
col = 0
width = "100%"
height = 8
show_border = false
transparent_background = true
</code></pre>
<h3 id="description-only"><a class="header" href="#description-only">Description Only</a></h3>
<pre><code class="language-toml">[[windows]]
name = "room_desc"
type = "room"
row = 0
col = 80
width = 40
height = 10
show_description = true
show_exits = false
show_objects = false
show_players = false
title = "Description"
</code></pre>
<h3 id="exits-only"><a class="header" href="#exits-only">Exits Only</a></h3>
<pre><code class="language-toml">[[windows]]
name = "exits"
type = "room"
row = 10
col = 80
width = 40
height = 2
show_description = false
show_objects = false
show_players = false
show_exits = true
show_border = false
</code></pre>
<h2 id="room-components"><a class="header" href="#room-components">Room Components</a></h2>
<h3 id="room-name"><a class="header" href="#room-name">Room Name</a></h3>
<p>Set by <code>&lt;streamWindow id='room' subtitle='Room Name'/&gt;</code>:</p>
<pre><code class="language-toml">title_color = "#9BA2B2"
title_bg = "#395573"      # Distinct background
</code></pre>
<h3 id="description"><a class="header" href="#description">Description</a></h3>
<p>Set by <code>&lt;component id='room desc'&gt;</code>:</p>
<pre><code class="language-toml">description_color = "#B0B0B0"
word_wrap = true          # Wrap long descriptions
</code></pre>
<h3 id="exits"><a class="header" href="#exits">Exits</a></h3>
<p>Set by <code>&lt;compass&gt;</code> and displayed as text:</p>
<pre><code class="language-toml">exits_color = "#00CCCC"
exits_prefix = "Obvious paths: "
</code></pre>
<h3 id="objectscreatures"><a class="header" href="#objectscreatures">Objects/Creatures</a></h3>
<p>Set by <code>&lt;component id='room objs'&gt;</code>:</p>
<pre><code class="language-toml">objects_color = "#888888"
creature_highlight = true    # Highlight creatures
creature_color = "#FF6600"   # Creature color
</code></pre>
<h3 id="players"><a class="header" href="#players">Players</a></h3>
<p>Set by <code>&lt;component id='room players'&gt;</code>:</p>
<pre><code class="language-toml">players_color = "#00FF00"
players_prefix = "Also here: "
</code></pre>
<h2 id="interaction-4"><a class="header" href="#interaction-4">Interaction</a></h2>
<p>With <code>links = true</code>:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Input</th><th>Action</th></tr>
</thead>
<tbody>
<tr><td>Click object</td><td>Look/interact</td></tr>
<tr><td>Click player</td><td>Look at player</td></tr>
<tr><td>Click exit</td><td>Move that direction</td></tr>
<tr><td>Right-click</td><td>Context menu</td></tr>
</tbody>
</table>
</div>
<h2 id="data-source-7"><a class="header" href="#data-source-7">Data Source</a></h2>
<p>Room windows receive data from multiple XML elements:</p>
<pre><code class="language-xml">&lt;streamWindow id='room' subtitle='Town Square'/&gt;
&lt;component id='room desc'&gt;This is the description...&lt;/component&gt;
&lt;component id='room objs'&gt;You also see a bench...&lt;/component&gt;
&lt;component id='room players'&gt;Also here: Alice, Bob&lt;/component&gt;
&lt;compass&gt;&lt;dir value='n'/&gt;&lt;dir value='e'/&gt;&lt;/compass&gt;
</code></pre>
<h2 id="troubleshooting-10"><a class="header" href="#troubleshooting-10">Troubleshooting</a></h2>
<h3 id="room-not-updating"><a class="header" href="#room-not-updating">Room not updating</a></h3>
<ol>
<li>Check you’re receiving room data</li>
<li>Verify window stream is correct</li>
<li>Some areas suppress room info</li>
</ol>
<h3 id="missing-components"><a class="header" href="#missing-components">Missing components</a></h3>
<ol>
<li>Enable specific show_* options</li>
<li>Check game is sending that component</li>
<li>Verify component colors are visible</li>
</ol>
<h3 id="text-overflow"><a class="header" href="#text-overflow">Text overflow</a></h3>
<ol>
<li>Increase window height</li>
<li>Enable word wrap</li>
<li>Hide less important components</li>
</ol>
<h2 id="see-also-22"><a class="header" href="#see-also-22">See Also</a></h2>
<ul>
<li><a href="#compass-2">Compass</a> - Visual exit display</li>
<li><a href="#text-windows-1">Text Windows</a> - General text display</li>
<li><a href="#highlightstoml-reference">Highlights</a> - Text styling</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="inventory-widget"><a class="header" href="#inventory-widget">Inventory Widget</a></h1>
<p>The inventory widget displays your character’s carried items and container contents.</p>
<h2 id="overview-14"><a class="header" href="#overview-14">Overview</a></h2>
<p>Inventory widgets:</p>
<ul>
<li>Show items in containers (backpack, cloak, etc.)</li>
<li>Display item counts and descriptions</li>
<li>Support expandable container trees</li>
<li>Enable quick item access</li>
</ul>
<h2 id="configuration-12"><a class="header" href="#configuration-12">Configuration</a></h2>
<pre><code class="language-toml">[[windows]]
name = "inventory"
type = "inventory"

# Position and size
row = 0
col = 80
width = 40
height = 25

# Inventory-specific options
show_containers = true     # Show container hierarchy
expand_containers = false  # Auto-expand all containers
show_count = true          # Show item counts
show_weight = true         # Show weight (if available)
sort_by = "name"           # "name", "type", "none"

# Interaction
clickable = true           # Click to interact
double_click_action = "look"  # "look", "get", "open"
</code></pre>
<h2 id="properties-11"><a class="header" href="#properties-11">Properties</a></h2>
<h3 id="show_containers"><a class="header" href="#show_containers">show_containers</a></h3>
<p>Display container hierarchy:</p>
<pre><code class="language-toml">show_containers = true    # Show nested structure
show_containers = false   # Flat item list
</code></pre>
<h3 id="expand_containers"><a class="header" href="#expand_containers">expand_containers</a></h3>
<p>Auto-expand containers:</p>
<pre><code class="language-toml">expand_containers = false   # Collapsed by default
expand_containers = true    # All expanded
</code></pre>
<h3 id="show_count"><a class="header" href="#show_count">show_count</a></h3>
<p>Display item counts:</p>
<pre><code class="language-toml">show_count = true    # "5 silver coins"
show_count = false   # "silver coins"
</code></pre>
<h3 id="show_weight"><a class="header" href="#show_weight">show_weight</a></h3>
<p>Display item weight (if available):</p>
<pre><code class="language-toml">show_weight = true    # Show weight info
show_weight = false   # Hide weight
</code></pre>
<h3 id="sort_by-1"><a class="header" href="#sort_by-1">sort_by</a></h3>
<p>Item sort order:</p>
<pre><code class="language-toml">sort_by = "name"    # Alphabetical
sort_by = "type"    # By item type
sort_by = "none"    # Game order
</code></pre>
<h2 id="display-format-1"><a class="header" href="#display-format-1">Display Format</a></h2>
<h3 id="tree-view"><a class="header" href="#tree-view">Tree View</a></h3>
<pre><code>┌─ Inventory ────────────────────────┐
│ ▼ a leather backpack               │
│   ├─ some silver coins (23)        │
│   ├─ a healing potion              │
│   ├─ a bronze lockpick             │
│   └─ ▶ a small pouch               │
│                                    │
│ ▼ a dark cloak                     │
│   ├─ a silver dagger               │
│   └─ a vial of poison              │
│                                    │
│ a sturdy shield                    │
│ a steel longsword                  │
└────────────────────────────────────┘
</code></pre>
<ul>
<li>▼ = Expanded container</li>
<li>▶ = Collapsed container</li>
</ul>
<h3 id="flat-view"><a class="header" href="#flat-view">Flat View</a></h3>
<pre><code>┌─ Inventory ────────────────────────┐
│ some silver coins (23)             │
│ a healing potion                   │
│ a bronze lockpick                  │
│ a silver dagger                    │
│ a vial of poison                   │
│ a sturdy shield                    │
│ a steel longsword                  │
└────────────────────────────────────┘
</code></pre>
<h3 id="compact-view"><a class="header" href="#compact-view">Compact View</a></h3>
<pre><code>┌─ Items ───────────┐
│ coins(23) potion  │
│ lockpick dagger   │
│ poison shield     │
│ longsword         │
└───────────────────┘
</code></pre>
<h2 id="examples-12"><a class="header" href="#examples-12">Examples</a></h2>
<h3 id="full-inventory-panel"><a class="header" href="#full-inventory-panel">Full Inventory Panel</a></h3>
<pre><code class="language-toml">[[windows]]
name = "inventory"
type = "inventory"
row = 0
col = 80
width = 40
height = 30
show_containers = true
expand_containers = false
show_count = true
clickable = true
title = "Inventory"
border_style = "rounded"
</code></pre>
<h3 id="compact-item-list"><a class="header" href="#compact-item-list">Compact Item List</a></h3>
<pre><code class="language-toml">[[windows]]
name = "items"
type = "inventory"
row = 0
col = 100
width = 25
height = 15
show_containers = false
show_count = true
sort_by = "name"
title = "Items"
</code></pre>
<h3 id="container-focus"><a class="header" href="#container-focus">Container Focus</a></h3>
<pre><code class="language-toml">[[windows]]
name = "backpack"
type = "inventory"
row = 10
col = 80
width = 30
height = 15
container = "backpack"     # Focus on specific container
expand_containers = true
title = "Backpack"
</code></pre>
<h3 id="merchant-view"><a class="header" href="#merchant-view">Merchant View</a></h3>
<pre><code class="language-toml">[[windows]]
name = "merchant_inv"
type = "inventory"
row = 0
col = 60
width = 50
height = 35
show_containers = true
expand_containers = true
show_weight = true
sort_by = "type"
clickable = true
double_click_action = "look"
</code></pre>
<h2 id="item-interaction"><a class="header" href="#item-interaction">Item Interaction</a></h2>
<h3 id="click-actions"><a class="header" href="#click-actions">Click Actions</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Action</th><th>Result</th></tr>
</thead>
<tbody>
<tr><td>Single click</td><td>Select item</td></tr>
<tr><td>Double click</td><td>Configurable action</td></tr>
<tr><td>Right click</td><td>Context menu</td></tr>
</tbody>
</table>
</div>
<h3 id="context-menu-options"><a class="header" href="#context-menu-options">Context Menu Options</a></h3>
<pre><code>┌────────────────┐
│ Look           │
│ Get            │
│ Drop           │
│ Put in...      │
│ Give to...     │
│ ────────────── │
│ Examine        │
│ Appraise       │
└────────────────┘
</code></pre>
<h3 id="keyboard-navigation"><a class="header" href="#keyboard-navigation">Keyboard Navigation</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Key</th><th>Action</th></tr>
</thead>
<tbody>
<tr><td><code>↑/↓</code></td><td>Navigate items</td></tr>
<tr><td><code>Enter</code></td><td>Default action</td></tr>
<tr><td><code>Space</code></td><td>Expand/collapse</td></tr>
<tr><td><code>l</code></td><td>Look at item</td></tr>
<tr><td><code>g</code></td><td>Get item</td></tr>
<tr><td><code>d</code></td><td>Drop item</td></tr>
</tbody>
</table>
</div>
<h2 id="item-colors"><a class="header" href="#item-colors">Item Colors</a></h2>
<p>Color items by type or rarity:</p>
<pre><code class="language-toml">[[windows]]
name = "inventory"
type = "inventory"

[windows.item_colors]
weapon = "#FF8800"       # Orange
armor = "#888888"        # Gray
potion = "#00FF00"       # Green
scroll = "#FFFF00"       # Yellow
gem = "#FF00FF"          # Magenta
coin = "#FFD700"         # Gold
container = "#00FFFF"    # Cyan
default = "#FFFFFF"      # White
</code></pre>
<h3 id="rarity-colors"><a class="header" href="#rarity-colors">Rarity Colors</a></h3>
<pre><code class="language-toml">[windows.rarity_colors]
common = "#FFFFFF"       # White
uncommon = "#00FF00"     # Green
rare = "#0088FF"         # Blue
epic = "#FF00FF"         # Purple
legendary = "#FFD700"    # Gold
</code></pre>
<h2 id="container-options"><a class="header" href="#container-options">Container Options</a></h2>
<h3 id="specific-container"><a class="header" href="#specific-container">Specific Container</a></h3>
<p>Focus on a single container:</p>
<pre><code class="language-toml">container = "backpack"    # Only show backpack contents
container = "cloak"       # Only show cloak contents
</code></pre>
<h3 id="container-depth"><a class="header" href="#container-depth">Container Depth</a></h3>
<p>Limit nesting depth:</p>
<pre><code class="language-toml">max_depth = 2    # Only show 2 levels deep
max_depth = 0    # Show all levels (default)
</code></pre>
<h3 id="auto-refresh"><a class="header" href="#auto-refresh">Auto-Refresh</a></h3>
<pre><code class="language-toml">auto_refresh = true       # Update when inventory changes
refresh_rate = 1000       # Milliseconds (if polling)
</code></pre>
<h2 id="data-source-8"><a class="header" href="#data-source-8">Data Source</a></h2>
<p>Inventory data comes from XML elements:</p>
<pre><code class="language-xml">&lt;inv id="stow"&gt;
  &lt;item&gt;a leather backpack&lt;/item&gt;
  &lt;item&gt;a dark cloak&lt;/item&gt;
&lt;/inv&gt;

&lt;container id="backpack"&gt;
  &lt;item&gt;some silver coins&lt;/item&gt;
  &lt;item&gt;a healing potion&lt;/item&gt;
&lt;/container&gt;
</code></pre>
<h2 id="integration-examples-1"><a class="header" href="#integration-examples-1">Integration Examples</a></h2>
<h3 id="with-hands-display"><a class="header" href="#with-hands-display">With Hands Display</a></h3>
<pre><code class="language-toml"># What you're holding
[[windows]]
name = "hands"
type = "hand"
row = 0
col = 80
width = 30
height = 3

# Full inventory below
[[windows]]
name = "inventory"
type = "inventory"
row = 3
col = 80
width = 30
height = 20
</code></pre>
<h3 id="merchant-layout"><a class="header" href="#merchant-layout">Merchant Layout</a></h3>
<pre><code class="language-toml"># Your inventory (left)
[[windows]]
name = "my_items"
type = "inventory"
row = 0
col = 0
width = 40
height = 30
title = "Your Items"

# Merchant inventory (right)
[[windows]]
name = "merchant"
type = "text"
stream = "merchant"
row = 0
col = 50
width = 40
height = 30
title = "Merchant"
</code></pre>
<h3 id="quick-access-bar"><a class="header" href="#quick-access-bar">Quick Access Bar</a></h3>
<pre><code class="language-toml"># Horizontal quick items
[[windows]]
name = "quick_items"
type = "inventory"
row = 0
col = 0
width = 80
height = 3
show_containers = false
sort_by = "type"
layout = "horizontal"
</code></pre>
<h2 id="weight-tracking"><a class="header" href="#weight-tracking">Weight Tracking</a></h2>
<p>If weight tracking is enabled:</p>
<pre><code>┌─ Inventory ────────────────────────┐
│ Carried: 45.2 lbs / 100 lbs        │
│ ──────────────────────────────────│
│ ▼ leather backpack (12.5 lbs)      │
│   ├─ silver coins (2.3 lbs)        │
│   └─ healing potion (0.5 lbs)      │
└────────────────────────────────────┘
</code></pre>
<pre><code class="language-toml">show_weight = true
show_encumbrance = true
encumbrance_warning = 80    # Warn at 80% capacity
</code></pre>
<h2 id="troubleshooting-11"><a class="header" href="#troubleshooting-11">Troubleshooting</a></h2>
<h3 id="inventory-not-updating"><a class="header" href="#inventory-not-updating">Inventory not updating</a></h3>
<ol>
<li>Verify receiving inventory data</li>
<li>Check window is correct type</li>
<li>Try manual refresh command</li>
</ol>
<h3 id="containers-not-expanding"><a class="header" href="#containers-not-expanding">Containers not expanding</a></h3>
<ol>
<li>Check expand_containers setting</li>
<li>Verify container data is being sent</li>
<li>Click expand arrow manually</li>
</ol>
<h3 id="missing-items"><a class="header" href="#missing-items">Missing items</a></h3>
<ol>
<li>Check container filter settings</li>
<li>Verify all containers are included</li>
<li>Check item parsing in debug log</li>
</ol>
<h3 id="performance-with-large-inventory"><a class="header" href="#performance-with-large-inventory">Performance with large inventory</a></h3>
<ol>
<li>Set expand_containers = false</li>
<li>Reduce max_depth</li>
<li>Focus on specific containers</li>
</ol>
<h2 id="see-also-23"><a class="header" href="#see-also-23">See Also</a></h2>
<ul>
<li><a href="#hands-1">Hands</a> - Held items display</li>
<li><a href="#room-window-1">Room Window</a> - Room objects</li>
<li><a href="#text-windows-1">Text Windows</a> - General text display</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="spells-widget"><a class="header" href="#spells-widget">Spells Widget</a></h1>
<p>The spells widget displays your character’s known spells, spell preparation status, and casting availability.</p>
<h2 id="overview-15"><a class="header" href="#overview-15">Overview</a></h2>
<p>Spells widgets:</p>
<ul>
<li>List known spells and abilities</li>
<li>Show spell preparation status</li>
<li>Display mana costs and cooldowns</li>
<li>Enable quick spell casting</li>
</ul>
<h2 id="configuration-13"><a class="header" href="#configuration-13">Configuration</a></h2>
<pre><code class="language-toml">[[windows]]
name = "spells"
type = "spells"

# Position and size
row = 0
col = 100
width = 30
height = 20

# Spell display options
show_prepared = true       # Show preparation status
show_cost = true           # Show mana cost
show_circle = true         # Show spell circle
group_by_circle = true     # Group by spell circle
sort_by = "circle"         # "circle", "name", "cost"

# Interaction
clickable = true           # Click to cast
show_tooltip = true        # Show spell info on hover

# Colors
prepared_color = "#00FF00"
unprepared_color = "#808080"
unavailable_color = "#FF0000"
</code></pre>
<h2 id="properties-12"><a class="header" href="#properties-12">Properties</a></h2>
<h3 id="show_prepared"><a class="header" href="#show_prepared">show_prepared</a></h3>
<p>Display spell preparation status:</p>
<pre><code class="language-toml">show_prepared = true    # Show ✓/✗ for prepared
show_prepared = false   # List only
</code></pre>
<h3 id="show_cost"><a class="header" href="#show_cost">show_cost</a></h3>
<p>Display mana cost:</p>
<pre><code class="language-toml">show_cost = true     # Show "(5 mana)"
show_cost = false    # Name only
</code></pre>
<h3 id="show_circle"><a class="header" href="#show_circle">show_circle</a></h3>
<p>Display spell circle number:</p>
<pre><code class="language-toml">show_circle = true    # Show circle/level
show_circle = false   # Hide circle
</code></pre>
<h3 id="group_by_circle"><a class="header" href="#group_by_circle">group_by_circle</a></h3>
<p>Group spells by circle:</p>
<pre><code class="language-toml">group_by_circle = true    # Sections by circle
group_by_circle = false   # Single list
</code></pre>
<h3 id="sort_by-2"><a class="header" href="#sort_by-2">sort_by</a></h3>
<p>Sort order for spells:</p>
<pre><code class="language-toml">sort_by = "circle"   # By spell circle
sort_by = "name"     # Alphabetical
sort_by = "cost"     # By mana cost
</code></pre>
<h2 id="display-format-2"><a class="header" href="#display-format-2">Display Format</a></h2>
<h3 id="grouped-by-circle"><a class="header" href="#grouped-by-circle">Grouped by Circle</a></h3>
<pre><code>┌─ Spells ─────────────────────────┐
│ ─── Minor Spirit (100s) ───      │
│ ✓ Spirit Warding I        (1)    │
│ ✓ Spirit Defense II       (2)    │
│ ✗ Spirit Fog              (6)    │
│                                  │
│ ─── Major Spirit (200s) ───      │
│ ✓ Spirit Shield           (3)    │
│ ✗ Elemental Defense       (5)    │
└──────────────────────────────────┘
</code></pre>
<h3 id="simple-list"><a class="header" href="#simple-list">Simple List</a></h3>
<pre><code>┌─ Spells ─────────────────────────┐
│ ✓ Spirit Warding I        (1)    │
│ ✓ Spirit Defense II       (2)    │
│ ✓ Spirit Shield           (3)    │
│ ✗ Elemental Defense       (5)    │
│ ✗ Spirit Fog              (6)    │
└──────────────────────────────────┘
</code></pre>
<h3 id="compact-format"><a class="header" href="#compact-format">Compact Format</a></h3>
<pre><code>┌─ Spells ──────────────┐
│ 101✓ 102✓ 103✗ 104✓   │
│ 201✓ 202✗ 203✓ 204✗   │
└───────────────────────┘
</code></pre>
<h2 id="spell-status"><a class="header" href="#spell-status">Spell Status</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Symbol</th><th>Meaning</th><th>Color (default)</th></tr>
</thead>
<tbody>
<tr><td>✓</td><td>Prepared</td><td>Green</td></tr>
<tr><td>✗</td><td>Not prepared</td><td>Gray</td></tr>
<tr><td>◉</td><td>Currently casting</td><td>Cyan</td></tr>
<tr><td>⊘</td><td>Unavailable</td><td>Red</td></tr>
<tr><td>⏱</td><td>On cooldown</td><td>Yellow</td></tr>
</tbody>
</table>
</div>
<h2 id="examples-13"><a class="header" href="#examples-13">Examples</a></h2>
<h3 id="full-spell-panel"><a class="header" href="#full-spell-panel">Full Spell Panel</a></h3>
<pre><code class="language-toml">[[windows]]
name = "spells"
type = "spells"
row = 0
col = 100
width = 35
height = 25
show_prepared = true
show_cost = true
show_circle = true
group_by_circle = true
clickable = true
title = "Known Spells"
</code></pre>
<h3 id="compact-spell-bar"><a class="header" href="#compact-spell-bar">Compact Spell Bar</a></h3>
<pre><code class="language-toml">[[windows]]
name = "spell_bar"
type = "spells"
row = 0
col = 50
width = 40
height = 3
group_by_circle = false
show_cost = false
layout = "horizontal"
show_border = false
</code></pre>
<h3 id="prepared-spells-only"><a class="header" href="#prepared-spells-only">Prepared Spells Only</a></h3>
<pre><code class="language-toml">[[windows]]
name = "prepared"
type = "spells"
row = 10
col = 100
width = 25
height = 10
filter = "prepared"    # Only show prepared
show_prepared = false  # No status icon needed
title = "Ready Spells"
</code></pre>
<h3 id="quick-cast-panel"><a class="header" href="#quick-cast-panel">Quick Cast Panel</a></h3>
<pre><code class="language-toml">[[windows]]
name = "quick_cast"
type = "spells"
row = 0
col = 100
width = 20
height = 15
favorite_spells = [101, 103, 107, 201, 206]
clickable = true
double_click_action = "cast"
title = "Quick Cast"
</code></pre>
<h2 id="spell-interaction"><a class="header" href="#spell-interaction">Spell Interaction</a></h2>
<h3 id="click-actions-1"><a class="header" href="#click-actions-1">Click Actions</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Action</th><th>Result</th></tr>
</thead>
<tbody>
<tr><td>Single click</td><td>Select spell</td></tr>
<tr><td>Double click</td><td>Cast spell</td></tr>
<tr><td>Right click</td><td>Spell info menu</td></tr>
<tr><td>Shift+click</td><td>Prepare spell</td></tr>
</tbody>
</table>
</div>
<h3 id="context-menu"><a class="header" href="#context-menu">Context Menu</a></h3>
<pre><code>┌────────────────────┐
│ Cast               │
│ Prepare            │
│ ────────────────── │
│ Spell Info         │
│ Show Incantation   │
│ ────────────────── │
│ Add to Quick Cast  │
│ Set Hotkey         │
└────────────────────┘
</code></pre>
<h3 id="keyboard-shortcuts"><a class="header" href="#keyboard-shortcuts">Keyboard Shortcuts</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Key</th><th>Action</th></tr>
</thead>
<tbody>
<tr><td><code>↑/↓</code></td><td>Navigate spells</td></tr>
<tr><td><code>Enter</code></td><td>Cast selected</td></tr>
<tr><td><code>p</code></td><td>Prepare selected</td></tr>
<tr><td><code>i</code></td><td>Show info</td></tr>
<tr><td><code>1-9</code></td><td>Quick cast by position</td></tr>
</tbody>
</table>
</div>
<h2 id="spell-colors"><a class="header" href="#spell-colors">Spell Colors</a></h2>
<p>Color spells by type or circle:</p>
<pre><code class="language-toml">[[windows]]
name = "spells"
type = "spells"

[windows.spell_colors]
minor_spirit = "#00FFFF"    # Cyan (100s)
major_spirit = "#0088FF"    # Blue (200s)
cleric = "#FFFFFF"          # White (300s)
minor_elemental = "#FF8800" # Orange (400s)
major_elemental = "#FF0000" # Red (500s)
ranger = "#00FF00"          # Green (600s)
sorcerer = "#FF00FF"        # Purple (700s)
wizard = "#FFFF00"          # Yellow (900s)
</code></pre>
<h3 id="status-colors"><a class="header" href="#status-colors">Status Colors</a></h3>
<pre><code class="language-toml">[windows.status_colors]
prepared = "#00FF00"        # Green
unprepared = "#808080"      # Gray
casting = "#00FFFF"         # Cyan
cooldown = "#FFFF00"        # Yellow
unavailable = "#FF0000"     # Red
insufficient_mana = "#FF8800" # Orange
</code></pre>
<h2 id="mana-cost-display"><a class="header" href="#mana-cost-display">Mana Cost Display</a></h2>
<p>Show mana costs with current mana:</p>
<pre><code class="language-toml">show_cost = true
show_current_mana = true   # Show current/max
highlight_affordable = true # Dim unaffordable
</code></pre>
<pre><code>┌─ Spells ─────────────────────────┐
│ Mana: 45/100                     │
│ ──────────────────────────────── │
│ ✓ Spirit Shield           (3)   │
│ ✓ Elemental Defense       (5)   │
│ ✗ Major Sanctuary        (50)   │  ← Dimmed (can't afford)
└──────────────────────────────────┘
</code></pre>
<h2 id="cooldown-display"><a class="header" href="#cooldown-display">Cooldown Display</a></h2>
<p>Show cooldown timers:</p>
<pre><code class="language-toml">show_cooldowns = true
cooldown_format = "remaining"   # "remaining", "ready_at", "bar"
</code></pre>
<pre><code>┌─ Spells ─────────────────────────┐
│ ✓ Spirit Shield           Ready  │
│ ⏱ Mass Sanctuary         (0:45)  │
│ ⏱ Divine Intervention    (2:30)  │
└──────────────────────────────────┘
</code></pre>
<h2 id="data-source-9"><a class="header" href="#data-source-9">Data Source</a></h2>
<p>Spell data comes from XML elements:</p>
<pre><code class="language-xml">&lt;spellList&gt;
  &lt;spell id="101" name="Spirit Warding I" prepared="y"/&gt;
  &lt;spell id="102" name="Spirit Barrier" prepared="n"/&gt;
&lt;/spellList&gt;

&lt;spell&gt;Spirit Shield&lt;/spell&gt;
&lt;duration value="300"/&gt;
</code></pre>
<h2 id="integration-examples-2"><a class="header" href="#integration-examples-2">Integration Examples</a></h2>
<h3 id="with-active-effects"><a class="header" href="#with-active-effects">With Active Effects</a></h3>
<pre><code class="language-toml"># Active spells/effects
[[windows]]
name = "active"
type = "active_effects"
row = 0
col = 100
width = 25
height = 10
title = "Active"

# Known spells below
[[windows]]
name = "spells"
type = "spells"
row = 10
col = 100
width = 25
height = 20
title = "Spells"
</code></pre>
<h3 id="combat-spell-panel"><a class="header" href="#combat-spell-panel">Combat Spell Panel</a></h3>
<pre><code class="language-toml"># Mana bar
[[windows]]
name = "mana"
type = "progress"
source = "mana"
row = 0
col = 80
width = 30
height = 1

# Offensive spells
[[windows]]
name = "attack_spells"
type = "spells"
row = 1
col = 80
width = 15
height = 10
filter_circles = [400, 500, 700]
title = "Attack"

# Defensive spells
[[windows]]
name = "defense_spells"
type = "spells"
row = 1
col = 95
width = 15
height = 10
filter_circles = [100, 200, 300]
title = "Defense"
</code></pre>
<h2 id="troubleshooting-12"><a class="header" href="#troubleshooting-12">Troubleshooting</a></h2>
<h3 id="spells-not-showing"><a class="header" href="#spells-not-showing">Spells not showing</a></h3>
<ol>
<li>Verify spell list data is being received</li>
<li>Check filter settings</li>
<li>Ensure widget type is correct</li>
</ol>
<h3 id="preparation-status-wrong"><a class="header" href="#preparation-status-wrong">Preparation status wrong</a></h3>
<ol>
<li>Check game is sending status updates</li>
<li>Verify spell ID matching</li>
<li>Manual refresh may help</li>
</ol>
<h3 id="cant-click-to-cast"><a class="header" href="#cant-click-to-cast">Can’t click to cast</a></h3>
<ol>
<li>Verify clickable = true</li>
<li>Check double_click_action setting</li>
<li>Ensure widget has focus</li>
</ol>
<h3 id="missing-spell-circles"><a class="header" href="#missing-spell-circles">Missing spell circles</a></h3>
<ol>
<li>Check filter_circles setting</li>
<li>Verify all circles are enabled</li>
<li>Check data parsing</li>
</ol>
<h2 id="see-also-24"><a class="header" href="#see-also-24">See Also</a></h2>
<ul>
<li><a href="#active-effects">Active Effects</a> - Active spell display</li>
<li><a href="#progress-bars-1">Progress Bars</a> - Mana display</li>
<li><a href="#hands-1">Hands</a> - Spell hand display</li>
<li><a href="#countdowns">Countdowns</a> - Cast time display</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="dashboard-widget"><a class="header" href="#dashboard-widget">Dashboard Widget</a></h1>
<p>The dashboard widget combines multiple data displays into a single composite panel, providing an at-a-glance overview of character status.</p>
<h2 id="overview-16"><a class="header" href="#overview-16">Overview</a></h2>
<p>Dashboard widgets:</p>
<ul>
<li>Combine multiple metrics in one widget</li>
<li>Provide compact status overview</li>
<li>Reduce window count</li>
<li>Customizable component selection</li>
</ul>
<h2 id="configuration-14"><a class="header" href="#configuration-14">Configuration</a></h2>
<pre><code class="language-toml">[[windows]]
name = "dashboard"
type = "dashboard"

# Position and size
row = 0
col = 0
width = 40
height = 15

# Components to include
components = [
    "vitals",
    "experience",
    "stance",
    "encumbrance",
    "wounds"
]

# Layout
layout = "vertical"       # "vertical", "horizontal", "grid"
compact = false           # Condensed display

# Visual options
show_labels = true
show_dividers = true
</code></pre>
<h2 id="properties-13"><a class="header" href="#properties-13">Properties</a></h2>
<h3 id="components"><a class="header" href="#components">components</a></h3>
<p>Which status elements to display:</p>
<pre><code class="language-toml"># Full dashboard
components = [
    "vitals",       # Health, mana, stamina, spirit
    "experience",   # XP info
    "stance",       # Combat stance
    "encumbrance",  # Weight carried
    "wounds",       # Injury summary
    "status",       # Status indicators
    "wealth",       # Silver/gold
    "position"      # Standing/sitting/etc.
]

# Minimal dashboard
components = ["vitals", "stance"]
</code></pre>
<h3 id="layout-1"><a class="header" href="#layout-1">layout</a></h3>
<p>Component arrangement:</p>
<pre><code class="language-toml">layout = "vertical"     # Stacked top to bottom
layout = "horizontal"   # Side by side
layout = "grid"         # 2-column grid
</code></pre>
<h3 id="compact-3"><a class="header" href="#compact-3">compact</a></h3>
<p>Condensed display mode:</p>
<pre><code class="language-toml">compact = false   # Full labels and spacing
compact = true    # Minimal spacing, abbreviations
</code></pre>
<h3 id="show_labels-2"><a class="header" href="#show_labels-2">show_labels</a></h3>
<p>Display component labels:</p>
<pre><code class="language-toml">show_labels = true    # "Health: 100/100"
show_labels = false   # "100/100"
</code></pre>
<h3 id="show_dividers"><a class="header" href="#show_dividers">show_dividers</a></h3>
<p>Display lines between components:</p>
<pre><code class="language-toml">show_dividers = true    # Lines between sections
show_dividers = false   # No dividers
</code></pre>
<h2 id="available-components"><a class="header" href="#available-components">Available Components</a></h2>
<h3 id="vitals"><a class="header" href="#vitals">vitals</a></h3>
<p>Health, mana, stamina, spirit bars:</p>
<pre><code>Health:  [████████████████░░░░] 80%
Mana:    [████████████░░░░░░░░] 60%
Stamina: [██████████████████░░] 90%
Spirit:  [████████████████████] 100%
</code></pre>
<h3 id="experience"><a class="header" href="#experience">experience</a></h3>
<p>Experience and level info:</p>
<pre><code>Level: 42
Exp: 12,345,678 / 15,000,000
Mind: Clear
</code></pre>
<h3 id="stance"><a class="header" href="#stance">stance</a></h3>
<p>Combat stance display:</p>
<pre><code>Stance: Offensive (100/80)
</code></pre>
<h3 id="encumbrance"><a class="header" href="#encumbrance">encumbrance</a></h3>
<p>Weight and capacity:</p>
<pre><code>Encumbrance: 45.2 / 100 lbs (45%)
</code></pre>
<h3 id="wounds"><a class="header" href="#wounds">wounds</a></h3>
<p>Injury summary:</p>
<pre><code>Wounds: Head(1) Chest(2) RArm(3)
</code></pre>
<h3 id="status"><a class="header" href="#status">status</a></h3>
<p>Active status conditions:</p>
<pre><code>Status: Stunned, Poisoned
</code></pre>
<h3 id="wealth"><a class="header" href="#wealth">wealth</a></h3>
<p>Currency display:</p>
<pre><code>Silver: 12,345
</code></pre>
<h3 id="position-1"><a class="header" href="#position-1">position</a></h3>
<p>Character position:</p>
<pre><code>Position: Standing
</code></pre>
<h3 id="roundtime"><a class="header" href="#roundtime">roundtime</a></h3>
<p>Current roundtime:</p>
<pre><code>RT: 3 seconds
</code></pre>
<h3 id="target"><a class="header" href="#target">target</a></h3>
<p>Current target:</p>
<pre><code>Target: a massive troll
</code></pre>
<h2 id="display-formats-1"><a class="header" href="#display-formats-1">Display Formats</a></h2>
<h3 id="standard-vertical"><a class="header" href="#standard-vertical">Standard Vertical</a></h3>
<pre><code>┌─ Dashboard ──────────────────────┐
│ Health:  [████████░░] 80/100     │
│ Mana:    [██████░░░░] 60/100     │
│ Stamina: [█████████░] 90/100     │
│ ──────────────────────────────── │
│ Level 42 | Mind: Clear           │
│ Exp: 12.3M / 15M                 │
│ ──────────────────────────────── │
│ Stance: Offensive (100/80)       │
│ Position: Standing               │
│ ──────────────────────────────── │
│ Wounds: None                     │
│ Status: Clear                    │
└──────────────────────────────────┘
</code></pre>
<h3 id="compact-horizontal"><a class="header" href="#compact-horizontal">Compact Horizontal</a></h3>
<pre><code>┌─ Status ─────────────────────────────────────────────┐
│ HP:80% MP:60% ST:90% | L42 | Off(100/80) | Standing  │
└──────────────────────────────────────────────────────┘
</code></pre>
<h3 id="grid-layout"><a class="header" href="#grid-layout">Grid Layout</a></h3>
<pre><code>┌─ Dashboard ──────────────────────┐
│ Health:  80% │ Level: 42         │
│ Mana:    60% │ Mind: Clear       │
│ Stamina: 90% │ Exp: 12.3M        │
│ ─────────────┼────────────────── │
│ Stance: Off  │ Position: Stand   │
│ RT: 0        │ Silver: 12,345    │
└──────────────────────────────────┘
</code></pre>
<h2 id="examples-14"><a class="header" href="#examples-14">Examples</a></h2>
<h3 id="full-status-dashboard"><a class="header" href="#full-status-dashboard">Full Status Dashboard</a></h3>
<pre><code class="language-toml">[[windows]]
name = "dashboard"
type = "dashboard"
row = 0
col = 80
width = 40
height = 20
components = [
    "vitals",
    "experience",
    "stance",
    "encumbrance",
    "wounds",
    "status",
    "wealth",
    "position"
]
layout = "vertical"
show_dividers = true
title = "Character Status"
</code></pre>
<h3 id="combat-dashboard"><a class="header" href="#combat-dashboard">Combat Dashboard</a></h3>
<pre><code class="language-toml">[[windows]]
name = "combat_dash"
type = "dashboard"
row = 0
col = 80
width = 35
height = 12
components = [
    "vitals",
    "stance",
    "roundtime",
    "target",
    "wounds"
]
layout = "vertical"
compact = true
title = "Combat"
</code></pre>
<h3 id="minimal-status-bar"><a class="header" href="#minimal-status-bar">Minimal Status Bar</a></h3>
<pre><code class="language-toml">[[windows]]
name = "status_bar"
type = "dashboard"
row = 0
col = 0
width = 80
height = 2
components = ["vitals", "stance", "roundtime"]
layout = "horizontal"
compact = true
show_border = false
show_dividers = false
</code></pre>
<h3 id="experience-focus"><a class="header" href="#experience-focus">Experience Focus</a></h3>
<pre><code class="language-toml">[[windows]]
name = "exp_dash"
type = "dashboard"
row = 10
col = 100
width = 25
height = 8
components = ["experience", "wealth"]
layout = "vertical"
title = "Progress"
</code></pre>
<h3 id="hunting-dashboard"><a class="header" href="#hunting-dashboard">Hunting Dashboard</a></h3>
<pre><code class="language-toml">[[windows]]
name = "hunting"
type = "dashboard"
row = 0
col = 80
width = 40
height = 15
components = [
    "vitals",
    "stance",
    "wounds",
    "target",
    "roundtime",
    "encumbrance"
]
layout = "grid"
compact = false
title = "Hunting Status"
</code></pre>
<h2 id="component-colors-1"><a class="header" href="#component-colors-1">Component Colors</a></h2>
<p>Customize colors for each component:</p>
<pre><code class="language-toml">[[windows]]
name = "dashboard"
type = "dashboard"

[windows.colors]
# Vital bar colors
health = "#FF0000"
mana = "#0088FF"
stamina = "#00FF00"
spirit = "#FFFF00"

# Status colors
wounded = "#FF8800"
stunned = "#FF0000"
hidden = "#00FFFF"

# Text colors
labels = "#808080"
values = "#FFFFFF"
dividers = "#404040"
</code></pre>
<h3 id="threshold-colors"><a class="header" href="#threshold-colors">Threshold Colors</a></h3>
<p>Change colors based on values:</p>
<pre><code class="language-toml">[windows.health_thresholds]
high = "#00FF00"      # &gt; 75%
medium = "#FFFF00"    # 25-75%
low = "#FF8800"       # 10-25%
critical = "#FF0000"  # &lt; 10%
</code></pre>
<h2 id="data-sources"><a class="header" href="#data-sources">Data Sources</a></h2>
<p>Dashboard pulls from multiple XML sources:</p>
<pre><code class="language-xml">&lt;dialogData id="health" text="80/100"/&gt;
&lt;dialogData id="mana" text="60/100"/&gt;
&lt;dialogData id="stamina" text="90/100"/&gt;
&lt;dialogData id="spirit" text="100/100"/&gt;

&lt;dialogData id="stance" text="offensive"/&gt;
&lt;indicator id="IconSTANDING" visible="y"/&gt;

&lt;exp&gt;12345678&lt;/exp&gt;
&lt;nextExp&gt;15000000&lt;/nextExp&gt;
</code></pre>
<h2 id="building-custom-dashboards"><a class="header" href="#building-custom-dashboards">Building Custom Dashboards</a></h2>
<h3 id="selective-components"><a class="header" href="#selective-components">Selective Components</a></h3>
<p>Only include what you need:</p>
<pre><code class="language-toml"># Minimalist - just vitals
components = ["vitals"]

# Combat-focused
components = ["vitals", "stance", "wounds", "roundtime"]

# Exploration-focused
components = ["vitals", "encumbrance", "position"]

# Progression-focused
components = ["experience", "wealth"]
</code></pre>
<h3 id="multiple-dashboards"><a class="header" href="#multiple-dashboards">Multiple Dashboards</a></h3>
<p>Use different dashboards for different activities:</p>
<pre><code class="language-toml"># Main status (always visible)
[[windows]]
name = "main_dash"
type = "dashboard"
row = 0
col = 80
width = 40
height = 8
components = ["vitals", "stance"]

# Combat details (show during hunting)
[[windows]]
name = "combat_dash"
type = "dashboard"
row = 8
col = 80
width = 40
height = 10
components = ["wounds", "target", "roundtime"]
visible = false  # Toggle via keybind
</code></pre>
<h2 id="troubleshooting-13"><a class="header" href="#troubleshooting-13">Troubleshooting</a></h2>
<h3 id="components-not-showing"><a class="header" href="#components-not-showing">Components not showing</a></h3>
<ol>
<li>Verify component name is correct</li>
<li>Check game is sending that data</li>
<li>Ensure dashboard has sufficient size</li>
</ol>
<h3 id="layout-looks-wrong"><a class="header" href="#layout-looks-wrong">Layout looks wrong</a></h3>
<ol>
<li>Adjust width/height for layout type</li>
<li>Try different layout option</li>
<li>Enable/disable compact mode</li>
</ol>
<h3 id="data-not-updating"><a class="header" href="#data-not-updating">Data not updating</a></h3>
<ol>
<li>Verify XML data is being received</li>
<li>Check component is correctly configured</li>
<li>Test individual widgets for same data</li>
</ol>
<h3 id="performance-issues-1"><a class="header" href="#performance-issues-1">Performance issues</a></h3>
<ol>
<li>Reduce number of components</li>
<li>Use compact mode</li>
<li>Increase refresh interval</li>
</ol>
<h2 id="see-also-25"><a class="header" href="#see-also-25">See Also</a></h2>
<ul>
<li><a href="#progress-bars-1">Progress Bars</a> - Individual vital displays</li>
<li><a href="#status-indicators">Status Indicators</a> - Status condition display</li>
<li><a href="#injury-doll-1">Injury Doll</a> - Wound display</li>
<li><a href="#performance-monitor-1">Performance</a> - Performance metrics</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="performance-monitor-1"><a class="header" href="#performance-monitor-1">Performance Monitor</a></h1>
<p>The performance widget displays real-time performance metrics for debugging and optimization.</p>
<h2 id="overview-17"><a class="header" href="#overview-17">Overview</a></h2>
<p>The performance widget shows:</p>
<ul>
<li>Frame rate (FPS)</li>
<li>Frame timing statistics</li>
<li>Network throughput</li>
<li>Parser performance</li>
<li>Memory usage</li>
<li>Application uptime</li>
</ul>
<h2 id="configuration-15"><a class="header" href="#configuration-15">Configuration</a></h2>
<pre><code class="language-toml">[[windows]]
name = "performance"
type = "performance"

# Position and size
row = 0
col = 0
width = 35
height = 15

# Which metrics to display
show_fps = true
show_frame_times = true
show_render_times = true
show_ui_times = false
show_wrap_times = false
show_net = true
show_parse = true
show_events = false
show_memory = true
show_lines = true
show_uptime = true
show_jitter = false
show_frame_spikes = false
show_event_lag = false
show_memory_delta = false
</code></pre>
<h2 id="metric-options"><a class="header" href="#metric-options">Metric Options</a></h2>
<h3 id="frame-metrics"><a class="header" href="#frame-metrics">Frame Metrics</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Option</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>show_fps</code></td><td>Frames per second</td></tr>
<tr><td><code>show_frame_times</code></td><td>Frame time min/avg/max</td></tr>
<tr><td><code>show_jitter</code></td><td>Frame time variance</td></tr>
<tr><td><code>show_frame_spikes</code></td><td>Count of slow frames (&gt;33ms)</td></tr>
</tbody>
</table>
</div>
<h3 id="render-metrics"><a class="header" href="#render-metrics">Render Metrics</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Option</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>show_render_times</code></td><td>Total render duration</td></tr>
<tr><td><code>show_ui_times</code></td><td>UI widget render time</td></tr>
<tr><td><code>show_wrap_times</code></td><td>Text wrapping time</td></tr>
</tbody>
</table>
</div>
<h3 id="network-metrics"><a class="header" href="#network-metrics">Network Metrics</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Option</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>show_net</code></td><td>Bytes received/sent per second</td></tr>
</tbody>
</table>
</div>
<h3 id="parser-metrics"><a class="header" href="#parser-metrics">Parser Metrics</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Option</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>show_parse</code></td><td>Parse time and chunks/sec</td></tr>
</tbody>
</table>
</div>
<h3 id="event-metrics"><a class="header" href="#event-metrics">Event Metrics</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Option</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>show_events</code></td><td>Event processing time</td></tr>
<tr><td><code>show_event_lag</code></td><td>Time since last event</td></tr>
</tbody>
</table>
</div>
<h3 id="memory-metrics"><a class="header" href="#memory-metrics">Memory Metrics</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Option</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>show_memory</code></td><td>Estimated memory usage</td></tr>
<tr><td><code>show_lines</code></td><td>Total lines buffered</td></tr>
<tr><td><code>show_memory_delta</code></td><td>Memory change rate</td></tr>
</tbody>
</table>
</div>
<h3 id="general"><a class="header" href="#general">General</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Option</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>show_uptime</code></td><td>Application uptime</td></tr>
</tbody>
</table>
</div>
<h2 id="display-example"><a class="header" href="#display-example">Display Example</a></h2>
<pre><code>┌─ Performance ──────────────────────┐
│ FPS: 60.0                          │
│ Frame: 0.8/1.2/2.1 ms              │
│ Render: 0.6 ms                     │
│                                    │
│ Net In: 1.2 KB/s                   │
│ Net Out: 0.1 KB/s                  │
│                                    │
│ Parse: 45 µs (12/s)                │
│                                    │
│ Memory: ~2.4 MB                    │
│ Lines: 12,345                      │
│                                    │
│ Uptime: 01:23:45                   │
└────────────────────────────────────┘
</code></pre>
<h2 id="examples-15"><a class="header" href="#examples-15">Examples</a></h2>
<h3 id="full-metrics"><a class="header" href="#full-metrics">Full Metrics</a></h3>
<pre><code class="language-toml">[[windows]]
name = "performance"
type = "performance"
row = 0
col = 0
width = 35
height = 18
show_fps = true
show_frame_times = true
show_render_times = true
show_ui_times = true
show_wrap_times = true
show_net = true
show_parse = true
show_events = true
show_memory = true
show_lines = true
show_uptime = true
show_jitter = true
show_frame_spikes = true
</code></pre>
<h3 id="minimal-fps"><a class="header" href="#minimal-fps">Minimal FPS</a></h3>
<pre><code class="language-toml">[[windows]]
name = "fps"
type = "performance"
row = 0
col = 0
width = 15
height = 1
show_fps = true
show_frame_times = false
show_render_times = false
show_net = false
show_parse = false
show_memory = false
show_lines = false
show_uptime = false
show_border = false
</code></pre>
<h3 id="network-focus"><a class="header" href="#network-focus">Network Focus</a></h3>
<pre><code class="language-toml">[[windows]]
name = "network"
type = "performance"
row = 0
col = 100
width = 20
height = 5
show_fps = false
show_net = true
show_parse = true
show_memory = false
title = "Network"
</code></pre>
<h3 id="memory-focus"><a class="header" href="#memory-focus">Memory Focus</a></h3>
<pre><code class="language-toml">[[windows]]
name = "memory"
type = "performance"
row = 5
col = 100
width = 20
height = 5
show_fps = false
show_net = false
show_memory = true
show_lines = true
show_memory_delta = true
title = "Memory"
</code></pre>
<h2 id="metric-details"><a class="header" href="#metric-details">Metric Details</a></h2>
<h3 id="fps-frames-per-second"><a class="header" href="#fps-frames-per-second">FPS (Frames Per Second)</a></h3>
<pre><code>FPS: 60.0
</code></pre>
<p>Target is 60 FPS. Lower values indicate performance issues.</p>
<h3 id="frame-times"><a class="header" href="#frame-times">Frame Times</a></h3>
<pre><code>Frame: 0.8/1.2/2.1 ms
</code></pre>
<p>Shows min/avg/max frame time over recent samples. Lower is better.</p>
<h3 id="frame-jitter"><a class="header" href="#frame-jitter">Frame Jitter</a></h3>
<pre><code>Jitter: 0.3 ms
</code></pre>
<p>Standard deviation of frame times. Lower means smoother animation.</p>
<h3 id="frame-spikes"><a class="header" href="#frame-spikes">Frame Spikes</a></h3>
<pre><code>Spikes: 2
</code></pre>
<p>Count of frames taking &gt;33ms (below 30 FPS). Should be 0 or very low.</p>
<h3 id="render-time"><a class="header" href="#render-time">Render Time</a></h3>
<pre><code>Render: 0.6 ms
</code></pre>
<p>Time spent rendering all widgets. Should be well under 16ms.</p>
<h3 id="network"><a class="header" href="#network">Network</a></h3>
<pre><code>Net In: 1.2 KB/s
Net Out: 0.1 KB/s
</code></pre>
<p>Network throughput. High values during combat/activity are normal.</p>
<h3 id="parse-time"><a class="header" href="#parse-time">Parse Time</a></h3>
<pre><code>Parse: 45 µs (12/s)
</code></pre>
<p>Average XML parse time and chunks processed per second.</p>
<h3 id="memory"><a class="header" href="#memory">Memory</a></h3>
<pre><code>Memory: ~2.4 MB
Lines: 12,345
</code></pre>
<p>Estimated memory usage and total lines in all buffers.</p>
<h3 id="uptime"><a class="header" href="#uptime">Uptime</a></h3>
<pre><code>Uptime: 01:23:45
</code></pre>
<p>Time since VellumFE started (HH:MM:SS).</p>
<h2 id="performance-overhead"><a class="header" href="#performance-overhead">Performance Overhead</a></h2>
<p>The performance widget itself has minimal overhead:</p>
<ul>
<li>Only enabled metrics are collected</li>
<li>Collection can be disabled entirely</li>
</ul>
<pre><code class="language-toml"># In config.toml
[performance]
collect_metrics = false   # Disable all collection
</code></pre>
<h2 id="troubleshooting-performance"><a class="header" href="#troubleshooting-performance">Troubleshooting Performance</a></h2>
<h3 id="low-fps"><a class="header" href="#low-fps">Low FPS</a></h3>
<ol>
<li>Reduce buffer sizes in text windows</li>
<li>Disable unused widgets</li>
<li>Reduce highlight pattern count</li>
<li>Use <code>fast_parse = true</code> for highlights</li>
</ol>
<h3 id="high-memory"><a class="header" href="#high-memory">High Memory</a></h3>
<ol>
<li>Reduce <code>buffer_size</code> on windows</li>
<li>Close unused tabs</li>
<li>Check for memory leaks (rising delta)</li>
</ol>
<h3 id="network-issues"><a class="header" href="#network-issues">Network Issues</a></h3>
<ol>
<li>Check connection stability</li>
<li>Monitor for packet loss</li>
<li>Consider bandwidth limitations</li>
</ol>
<h2 id="see-also-26"><a class="header" href="#see-also-26">See Also</a></h2>
<ul>
<li><a href="#performance-optimization">Performance Optimization</a> - Optimization guide</li>
<li><a href="#configtoml-reference">Configuration</a> - Performance settings</li>
<li><a href="#performance-issues-3">Troubleshooting</a> - Performance fixes</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="customization-overview"><a class="header" href="#customization-overview">Customization Overview</a></h1>
<p>VellumFE is highly customizable, allowing you to tailor every aspect of your gameplay experience.</p>
<h2 id="customization-areas"><a class="header" href="#customization-areas">Customization Areas</a></h2>
<p>VellumFE can be customized in these areas:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Area</th><th>Purpose</th><th>Configuration</th></tr>
</thead>
<tbody>
<tr><td><strong>Layouts</strong></td><td>Window arrangement</td><td><code>layout.toml</code></td></tr>
<tr><td><strong>Themes</strong></td><td>Colors and styling</td><td><code>colors.toml</code></td></tr>
<tr><td><strong>Highlights</strong></td><td>Text pattern matching</td><td><code>highlights.toml</code></td></tr>
<tr><td><strong>Keybinds</strong></td><td>Keyboard shortcuts</td><td><code>keybinds.toml</code></td></tr>
<tr><td><strong>Sounds</strong></td><td>Audio alerts</td><td>Per-highlight</td></tr>
<tr><td><strong>TTS</strong></td><td>Text-to-speech</td><td><code>config.toml</code></td></tr>
</tbody>
</table>
</div>
<h2 id="quick-customization-commands"><a class="header" href="#quick-customization-commands">Quick Customization Commands</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Command</th><th>Opens</th></tr>
</thead>
<tbody>
<tr><td><code>.layout</code></td><td>Layout editor</td></tr>
<tr><td><code>.highlights</code></td><td>Highlight browser</td></tr>
<tr><td><code>.keybinds</code></td><td>Keybind browser</td></tr>
<tr><td><code>.colors</code></td><td>Color palette browser</td></tr>
<tr><td><code>.themes</code></td><td>Theme browser</td></tr>
<tr><td><code>.window &lt;name&gt;</code></td><td>Window editor</td></tr>
</tbody>
</table>
</div>
<h2 id="customization-guides"><a class="header" href="#customization-guides">Customization Guides</a></h2>
<p>This section covers:</p>
<ul>
<li><a href="#creating-layouts">Creating Layouts</a> - Design your window arrangement</li>
<li><a href="#creating-themes">Creating Themes</a> - Customize colors and styling</li>
<li><a href="#highlight-patterns">Highlight Patterns</a> - Advanced text matching</li>
<li><a href="#keybind-actions">Keybind Actions</a> - All available actions</li>
<li><a href="#sound-alerts">Sound Alerts</a> - Audio notifications</li>
<li><a href="#tts-setup">TTS Setup</a> - Text-to-speech configuration</li>
</ul>
<h2 id="per-character-customization"><a class="header" href="#per-character-customization">Per-Character Customization</a></h2>
<p>Each character can have unique settings:</p>
<pre><code>~/.vellum-fe/
├── config.toml              # Global defaults
├── layout.toml              # Default layout
├── colors.toml              # Default colors
├── highlights.toml          # Default highlights
├── keybinds.toml            # Default keybinds
└── characters/
    └── MyCharacter/
        ├── layout.toml      # Character-specific layout
        ├── colors.toml      # Character-specific colors
        ├── highlights.toml  # Character-specific highlights
        └── keybinds.toml    # Character-specific keybinds
</code></pre>
<h3 id="configuration-loading-order"><a class="header" href="#configuration-loading-order">Configuration Loading Order</a></h3>
<ol>
<li>Character-specific file (if exists)</li>
<li>Global file (fallback)</li>
<li>Embedded defaults (final fallback)</li>
</ol>
<h3 id="example-profession-based-layouts"><a class="header" href="#example-profession-based-layouts">Example: Profession-Based Layouts</a></h3>
<p>Create different layouts for different professions:</p>
<pre><code>~/.vellum-fe/characters/
├── Warrior/
│   └── layout.toml    # Combat-focused layout
├── Empath/
│   └── layout.toml    # Healing-focused layout
└── Wizard/
    └── layout.toml    # Spell-focused layout
</code></pre>
<h2 id="hot-reloading"><a class="header" href="#hot-reloading">Hot-Reloading</a></h2>
<p>Many settings can be reloaded without restarting:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Command</th><th>Reloads</th></tr>
</thead>
<tbody>
<tr><td><code>.reload colors</code></td><td>Color configuration</td></tr>
<tr><td><code>.reload highlights</code></td><td>Highlight patterns</td></tr>
<tr><td><code>.reload keybinds</code></td><td>Keyboard shortcuts</td></tr>
<tr><td><code>.reload layout</code></td><td>Window layout</td></tr>
<tr><td><code>.reload config</code></td><td>All configuration</td></tr>
</tbody>
</table>
</div>
<h2 id="backup-your-customizations"><a class="header" href="#backup-your-customizations">Backup Your Customizations</a></h2>
<p>Before major changes:</p>
<pre><code class="language-bash"># Backup all configuration
cp -r ~/.vellum-fe ~/.vellum-fe-backup

# Backup specific file
cp ~/.vellum-fe/layout.toml ~/.vellum-fe/layout.toml.bak
</code></pre>
<h2 id="sharing-customizations"><a class="header" href="#sharing-customizations">Sharing Customizations</a></h2>
<p>Share your configurations with others:</p>
<ol>
<li>Export relevant <code>.toml</code> files</li>
<li>Share via GitHub Gist, Discord, etc.</li>
<li>Others can copy to their <code>~/.vellum-fe/</code> directory</li>
</ol>
<h3 id="popular-layout-packs"><a class="header" href="#popular-layout-packs">Popular Layout Packs</a></h3>
<p>The VellumFE community shares layout packs:</p>
<ul>
<li>Hunting layouts</li>
<li>Merchant layouts</li>
<li>Roleplay layouts</li>
<li>Accessibility layouts</li>
</ul>
<h2 id="customization-tips"><a class="header" href="#customization-tips">Customization Tips</a></h2>
<h3 id="start-simple"><a class="header" href="#start-simple">Start Simple</a></h3>
<p>Begin with default settings and customize incrementally:</p>
<ol>
<li>Play with defaults for a few sessions</li>
<li>Identify pain points</li>
<li>Make one change at a time</li>
<li>Test each change before moving on</li>
</ol>
<h3 id="use-the-editors"><a class="header" href="#use-the-editors">Use the Editors</a></h3>
<p>The built-in editors are often easier than editing files:</p>
<pre><code>.layout          # Visual layout editor
.highlights      # Browse and edit highlights
.keybinds        # Browse and edit keybinds
.window main     # Edit main window properties
</code></pre>
<h3 id="keep-notes"><a class="header" href="#keep-notes">Keep Notes</a></h3>
<p>Document your customizations:</p>
<pre><code class="language-toml"># In any .toml file, add comments:

# Combat creature highlighting
# Red for dangerous, orange for normal
[creature_dangerous]
pattern = "(?i)\\b(dragon|lich|demon)\\b"
fg = "#FF0000"
</code></pre>
<h3 id="test-in-safe-areas"><a class="header" href="#test-in-safe-areas">Test in Safe Areas</a></h3>
<p>Test new configurations in safe game areas before combat:</p>
<ol>
<li>Make changes</li>
<li>Reload: <code>.reload highlights</code></li>
<li>Test with game output</li>
<li>Adjust as needed</li>
</ol>
<h2 id="see-also-27"><a class="header" href="#see-also-27">See Also</a></h2>
<ul>
<li><a href="configuration/README.html">Configuration Files</a> - File reference</li>
<li><a href="widgets/README.html">Widgets Reference</a> - Widget options</li>
<li><a href="tutorials/README.html">Tutorials</a> - Step-by-step guides</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="creating-layouts"><a class="header" href="#creating-layouts">Creating Layouts</a></h1>
<p>Layouts define the arrangement of widgets on your screen. This guide walks you through creating custom layouts.</p>
<h2 id="layout-basics"><a class="header" href="#layout-basics">Layout Basics</a></h2>
<p>A layout is a collection of window definitions in <code>layout.toml</code>:</p>
<pre><code class="language-toml">[[windows]]
name = "main"
type = "text"
row = 0
col = 0
width = 80
height = 40
streams = ["main", "death"]

[[windows]]
name = "health"
type = "progress"
source = "health"
row = 0
col = 80
width = 30
height = 1
</code></pre>
<h2 id="coordinate-system"><a class="header" href="#coordinate-system">Coordinate System</a></h2>
<p>VellumFE uses a row/column grid:</p>
<pre><code>(0,0)────────────────────────→ col
│
│    ┌─────────────┐
│    │  Widget     │
│    │  row=5      │
│    │  col=10     │
│    └─────────────┘
│
↓ row
</code></pre>
<ul>
<li><strong>row</strong> - Vertical position (0 = top)</li>
<li><strong>col</strong> - Horizontal position (0 = left)</li>
<li><strong>width</strong> - Widget width in columns</li>
<li><strong>height</strong> - Widget height in rows</li>
</ul>
<h2 id="percentage-based-sizing"><a class="header" href="#percentage-based-sizing">Percentage-Based Sizing</a></h2>
<p>Use percentages for responsive layouts:</p>
<pre><code class="language-toml">[[windows]]
name = "main"
type = "text"
row = 0
col = 0
width = "60%"    # 60% of screen width
height = "100%"  # Full screen height

[[windows]]
name = "sidebar"
type = "text"
row = 0
col = "60%"      # Start at 60% from left
width = "40%"    # Remaining 40%
height = "100%"
</code></pre>
<h2 id="layout-planning"><a class="header" href="#layout-planning">Layout Planning</a></h2>
<h3 id="step-1-sketch-your-layout"><a class="header" href="#step-1-sketch-your-layout">Step 1: Sketch Your Layout</a></h3>
<p>Draw your desired layout on paper or in a text editor:</p>
<pre><code>┌─────────────────────┬──────────────┐
│                     │   Health     │
│                     ├──────────────┤
│    Main Window      │   Mana       │
│                     ├──────────────┤
│                     │   Compass    │
│                     ├──────────────┤
│                     │   Room       │
├─────────────────────┴──────────────┤
│         Command Input              │
└────────────────────────────────────┘
</code></pre>
<h3 id="step-2-calculate-dimensions"><a class="header" href="#step-2-calculate-dimensions">Step 2: Calculate Dimensions</a></h3>
<p>Determine sizes based on your terminal:</p>
<pre><code>Terminal: 120 columns × 40 rows

Main window: 80 cols × 35 rows (0,0)
Sidebar: 40 cols × 35 rows (0,80)
Command: 120 cols × 5 rows (35,0)
</code></pre>
<h3 id="step-3-define-windows"><a class="header" href="#step-3-define-windows">Step 3: Define Windows</a></h3>
<p>Create <code>layout.toml</code>:</p>
<pre><code class="language-toml"># Main game window
[[windows]]
name = "main"
type = "text"
row = 0
col = 0
width = 80
height = 35
streams = ["main", "death"]
buffer_size = 2000

# Health bar
[[windows]]
name = "health"
type = "progress"
source = "health"
row = 0
col = 80
width = 40
height = 1

# Mana bar
[[windows]]
name = "mana"
type = "progress"
source = "mana"
row = 1
col = 80
width = 40
height = 1

# Compass
[[windows]]
name = "compass"
type = "compass"
row = 3
col = 80
width = 20
height = 5

# Room info
[[windows]]
name = "room"
type = "room"
row = 8
col = 80
width = 40
height = 15

# Command input
[[windows]]
name = "input"
type = "command_input"
row = 35
col = 0
width = 120
height = 5
</code></pre>
<h2 id="common-layout-patterns"><a class="header" href="#common-layout-patterns">Common Layout Patterns</a></h2>
<h3 id="full-width-main"><a class="header" href="#full-width-main">Full-Width Main</a></h3>
<pre><code class="language-toml">[[windows]]
name = "main"
type = "text"
row = 0
col = 0
width = "100%"
height = "90%"

[[windows]]
name = "input"
type = "command_input"
row = "90%"
col = 0
width = "100%"
height = "10%"
</code></pre>
<h3 id="side-panel"><a class="header" href="#side-panel">Side Panel</a></h3>
<pre><code class="language-toml">[[windows]]
name = "main"
type = "text"
row = 0
col = 0
width = "70%"
height = "100%"

[[windows]]
name = "sidebar"
type = "tabbed_text"
row = 0
col = "70%"
width = "30%"
height = "100%"
tabs = ["speech", "thoughts", "combat"]
</code></pre>
<h3 id="three-column"><a class="header" href="#three-column">Three-Column</a></h3>
<pre><code class="language-toml"># Left column - Status
[[windows]]
name = "status"
type = "dashboard"
row = 0
col = 0
width = "20%"
height = "100%"

# Center column - Main
[[windows]]
name = "main"
type = "text"
row = 0
col = "20%"
width = "50%"
height = "100%"

# Right column - Info
[[windows]]
name = "info"
type = "tabbed_text"
row = 0
col = "70%"
width = "30%"
height = "100%"
</code></pre>
<h3 id="topbottom-split"><a class="header" href="#topbottom-split">Top/Bottom Split</a></h3>
<pre><code class="language-toml"># Main game (top 70%)
[[windows]]
name = "main"
type = "text"
row = 0
col = 0
width = "100%"
height = "70%"

# Combat log (bottom 30%)
[[windows]]
name = "combat"
type = "text"
row = "70%"
col = 0
width = "100%"
height = "30%"
streams = ["combat"]
</code></pre>
<h2 id="widget-types"><a class="header" href="#widget-types">Widget Types</a></h2>
<p>Choose the right widget type for each purpose:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Type</th><th>Purpose</th><th>Example</th></tr>
</thead>
<tbody>
<tr><td><code>text</code></td><td>General text display</td><td>Main window, logs</td></tr>
<tr><td><code>tabbed_text</code></td><td>Multiple streams in tabs</td><td>Speech, thoughts</td></tr>
<tr><td><code>command_input</code></td><td>Command entry</td><td>Input bar</td></tr>
<tr><td><code>progress</code></td><td>Bars (health, mana)</td><td>Vitals</td></tr>
<tr><td><code>countdown</code></td><td>Timers (RT, cast)</td><td>Roundtime</td></tr>
<tr><td><code>compass</code></td><td>Navigation</td><td>Exits</td></tr>
<tr><td><code>room</code></td><td>Room information</td><td>Room panel</td></tr>
<tr><td><code>hand</code></td><td>Held items</td><td>Hands display</td></tr>
<tr><td><code>indicator</code></td><td>Status icons</td><td>Conditions</td></tr>
<tr><td><code>injury_doll</code></td><td>Body injuries</td><td>Wounds</td></tr>
<tr><td><code>active_effects</code></td><td>Buffs/debuffs</td><td>Spells</td></tr>
<tr><td><code>dashboard</code></td><td>Combined status</td><td>Status panel</td></tr>
<tr><td><code>performance</code></td><td>Debug metrics</td><td>FPS, memory</td></tr>
</tbody>
</table>
</div>
<h2 id="window-properties"><a class="header" href="#window-properties">Window Properties</a></h2>
<h3 id="common-properties-2"><a class="header" href="#common-properties-2">Common Properties</a></h3>
<pre><code class="language-toml">[[windows]]
name = "example"          # Unique name (required)
type = "text"             # Widget type (required)
row = 0                   # Position
col = 0
width = 40
height = 20

# Visual
title = "My Window"       # Custom title
show_title = true         # Show title bar
show_border = true        # Show border
border_style = "rounded"  # plain, rounded, double

# Colors
bg_color = "#000000"
text_color = "#FFFFFF"
border_color = "#00FFFF"

# Behavior
visible = true            # Initially visible
focusable = true          # Can receive focus
</code></pre>
<h3 id="text-window-properties"><a class="header" href="#text-window-properties">Text Window Properties</a></h3>
<pre><code class="language-toml">[[windows]]
name = "main"
type = "text"
streams = ["main"]        # Stream IDs to display
buffer_size = 1000        # Max lines to keep
wordwrap = true           # Wrap long lines
timestamps = false        # Show timestamps
</code></pre>
<h3 id="progress-bar-properties"><a class="header" href="#progress-bar-properties">Progress Bar Properties</a></h3>
<pre><code class="language-toml">[[windows]]
name = "health"
type = "progress"
source = "health"         # health, mana, spirit, stamina
show_label = true         # Show "Health"
show_numbers = true       # Show "85/100"
show_percent = false      # Show "85%"
bar_color = "#FF0000"
</code></pre>
<h2 id="using-the-layout-editor"><a class="header" href="#using-the-layout-editor">Using the Layout Editor</a></h2>
<p>The built-in editor is often easier:</p>
<pre><code>.layout
</code></pre>
<p>Features:</p>
<ul>
<li>Visual widget placement</li>
<li>Drag to reposition</li>
<li>Resize handles</li>
<li>Property editing</li>
<li>Live preview</li>
</ul>
<h2 id="testing-your-layout"><a class="header" href="#testing-your-layout">Testing Your Layout</a></h2>
<h3 id="quick-test"><a class="header" href="#quick-test">Quick Test</a></h3>
<ol>
<li>Save <code>layout.toml</code></li>
<li>Run <code>.reload layout</code></li>
<li>Check appearance</li>
<li>Adjust and repeat</li>
</ol>
<h3 id="terminal-size-testing"><a class="header" href="#terminal-size-testing">Terminal Size Testing</a></h3>
<p>Test at different sizes:</p>
<pre><code class="language-bash"># Resize terminal and reload
resize -s 30 80    # Small
.reload layout

resize -s 40 120   # Medium
.reload layout

resize -s 50 160   # Large
.reload layout
</code></pre>
<h2 id="troubleshooting-14"><a class="header" href="#troubleshooting-14">Troubleshooting</a></h2>
<h3 id="overlapping-windows"><a class="header" href="#overlapping-windows">Overlapping Windows</a></h3>
<p>Windows are drawn in order. Later windows cover earlier ones:</p>
<pre><code class="language-toml"># Background windows first
[[windows]]
name = "background"
# ...

# Foreground windows last
[[windows]]
name = "overlay"
# ...
</code></pre>
<h3 id="windows-cut-off"><a class="header" href="#windows-cut-off">Windows Cut Off</a></h3>
<p>Check terminal size vs layout dimensions:</p>
<pre><code class="language-toml"># Use percentages for safety
width = "50%"   # Instead of: width = 80

# Or check minimum sizes
min_width = 20
min_height = 5
</code></pre>
<h3 id="responsive-issues"><a class="header" href="#responsive-issues">Responsive Issues</a></h3>
<p>Test with percentages:</p>
<pre><code class="language-toml"># Good: Adapts to terminal size
row = 0
col = "60%"
width = "40%"
height = "100%"

# Risky: Fixed size may not fit
row = 0
col = 100
width = 60
height = 50
</code></pre>
<h2 id="layout-examples-1"><a class="header" href="#layout-examples-1">Layout Examples</a></h2>
<h3 id="minimalist"><a class="header" href="#minimalist">Minimalist</a></h3>
<pre><code class="language-toml">[[windows]]
name = "main"
type = "text"
row = 0
col = 0
width = "100%"
height = "95%"
show_border = false

[[windows]]
name = "input"
type = "command_input"
row = "95%"
col = 0
width = "100%"
height = "5%"
show_border = false
</code></pre>
<h3 id="information-dense"><a class="header" href="#information-dense">Information Dense</a></h3>
<p>See the <a href="#hunting-setup-1">Hunting Setup Tutorial</a> for a complex combat layout.</p>
<h3 id="roleplay-focused"><a class="header" href="#roleplay-focused">Roleplay Focused</a></h3>
<p>See the <a href="#roleplay-setup-1">Roleplay Setup Tutorial</a> for a communication-focused layout.</p>
<h2 id="see-also-28"><a class="header" href="#see-also-28">See Also</a></h2>
<ul>
<li><a href="#layouttoml-reference">Layout Configuration</a> - Full reference</li>
<li><a href="widgets/README.html">Widgets Reference</a> - All widget types</li>
<li><a href="#your-first-layout-1">Your First Layout</a> - Tutorial</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="creating-themes"><a class="header" href="#creating-themes">Creating Themes</a></h1>
<p>Themes control colors throughout VellumFE. This guide shows how to create custom color schemes.</p>
<h2 id="theme-basics"><a class="header" href="#theme-basics">Theme Basics</a></h2>
<p>Themes are defined in <code>colors.toml</code>:</p>
<pre><code class="language-toml"># UI Colors
[ui]
text_color = "#FFFFFF"
background_color = "#000000"
border_color = "#00FFFF"
focused_border_color = "#FFFF00"

# Text Presets
[presets.speech]
fg = "#53a684"

[presets.monsterbold]
fg = "#a29900"
</code></pre>
<h2 id="color-formats-1"><a class="header" href="#color-formats-1">Color Formats</a></h2>
<p>VellumFE supports multiple color formats:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Format</th><th>Example</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>Hex RGB</td><td><code>#FF5500</code></td><td>Standard hex</td></tr>
<tr><td>Named</td><td><code>crimson</code></td><td>From palette</td></tr>
<tr><td>Transparent</td><td><code>"-"</code></td><td>Clear background</td></tr>
</tbody>
</table>
</div>
<h2 id="ui-colors"><a class="header" href="#ui-colors">UI Colors</a></h2>
<h3 id="configuration-16"><a class="header" href="#configuration-16">Configuration</a></h3>
<pre><code class="language-toml">[ui]
# Text
text_color = "#FFFFFF"           # Default text
command_echo_color = "#FFFFFF"   # Command echo

# Backgrounds
background_color = "#000000"     # Widget background
textarea_background = "-"        # Input background ("-" = transparent)

# Borders
border_color = "#00FFFF"         # Unfocused borders
focused_border_color = "#FFFF00" # Focused border

# Selection
selection_bg_color = "#4a4a4a"   # Text selection
</code></pre>
<h3 id="example-dark-theme"><a class="header" href="#example-dark-theme">Example: Dark Theme</a></h3>
<pre><code class="language-toml">[ui]
text_color = "#E0E0E0"
background_color = "#1A1A1A"
border_color = "#333333"
focused_border_color = "#007ACC"
selection_bg_color = "#264F78"
</code></pre>
<h3 id="example-light-theme"><a class="header" href="#example-light-theme">Example: Light Theme</a></h3>
<pre><code class="language-toml">[ui]
text_color = "#333333"
background_color = "#FFFFFF"
border_color = "#CCCCCC"
focused_border_color = "#0066CC"
selection_bg_color = "#ADD6FF"
</code></pre>
<h2 id="text-presets"><a class="header" href="#text-presets">Text Presets</a></h2>
<p>Presets color semantic text types from the game:</p>
<h3 id="default-presets"><a class="header" href="#default-presets">Default Presets</a></h3>
<pre><code class="language-toml">[presets.speech]
fg = "#53a684"       # Player dialogue

[presets.monsterbold]
fg = "#a29900"       # Creature names

[presets.roomName]
fg = "#9BA2B2"
bg = "#395573"       # Room titles

[presets.links]
fg = "#477ab3"       # Clickable objects

[presets.whisper]
fg = "#60b4bf"       # Whispers

[presets.thought]
fg = "#FF8080"       # ESP/thoughts
</code></pre>
<h3 id="custom-preset"><a class="header" href="#custom-preset">Custom Preset</a></h3>
<pre><code class="language-toml">[presets.my_custom]
fg = "#FF6600"
bg = "#1A1A1A"
</code></pre>
<h2 id="prompt-colors"><a class="header" href="#prompt-colors">Prompt Colors</a></h2>
<p>Color individual prompt characters:</p>
<pre><code class="language-toml">[[prompt_colors]]
character = "R"         # Roundtime
color = "#FF0000"

[[prompt_colors]]
character = "S"         # Spell RT
color = "#FFFF00"

[[prompt_colors]]
character = "H"         # Hidden
color = "#9370DB"

[[prompt_colors]]
character = "&gt;"         # Ready
color = "#A9A9A9"
</code></pre>
<h2 id="spell-colors-1"><a class="header" href="#spell-colors-1">Spell Colors</a></h2>
<p>Color spell bars by spell number:</p>
<pre><code class="language-toml"># Minor Spirit (500s)
[[spell_colors]]
spells = [503, 506, 507, 508, 509]
color = "#5c0000"

# Major Spirit (900s)
[[spell_colors]]
spells = [905, 911, 913]
color = "#9370db"

# Ranger (600s)
[[spell_colors]]
spells = [601, 602, 604, 605]
color = "#1c731c"
</code></pre>
<h2 id="color-palette"><a class="header" href="#color-palette">Color Palette</a></h2>
<p>Define named colors for use in highlights:</p>
<pre><code class="language-toml">[[color_palette]]
name = "danger"
color = "#FF0000"
category = "custom"

[[color_palette]]
name = "warning"
color = "#FFA500"
category = "custom"

[[color_palette]]
name = "success"
color = "#00FF00"
category = "custom"
</code></pre>
<p>Use in highlights:</p>
<pre><code class="language-toml">[critical_hit]
pattern = "critical hit"
fg = "danger"      # Resolved from palette
</code></pre>
<h2 id="theme-design-tips"><a class="header" href="#theme-design-tips">Theme Design Tips</a></h2>
<h3 id="color-harmony"><a class="header" href="#color-harmony">Color Harmony</a></h3>
<p>Use complementary colors:</p>
<ul>
<li><strong>Analogous</strong>: Colors next to each other on wheel</li>
<li><strong>Complementary</strong>: Opposite colors</li>
<li><strong>Triadic</strong>: Three evenly spaced colors</li>
</ul>
<h3 id="contrast"><a class="header" href="#contrast">Contrast</a></h3>
<p>Ensure readable text:</p>
<ul>
<li>Light text on dark background</li>
<li>Dark text on light background</li>
<li>Minimum 4.5:1 contrast ratio</li>
</ul>
<h3 id="consistency"><a class="header" href="#consistency">Consistency</a></h3>
<p>Use a limited color palette:</p>
<ul>
<li>2-3 accent colors</li>
<li>Neutral backgrounds</li>
<li>Semantic colors (red=danger, green=success)</li>
</ul>
<h2 id="complete-theme-examples"><a class="header" href="#complete-theme-examples">Complete Theme Examples</a></h2>
<h3 id="nord-theme"><a class="header" href="#nord-theme">Nord Theme</a></h3>
<pre><code class="language-toml">[ui]
text_color = "#D8DEE9"
background_color = "#2E3440"
border_color = "#3B4252"
focused_border_color = "#88C0D0"
selection_bg_color = "#4C566A"

[presets.speech]
fg = "#A3BE8C"

[presets.monsterbold]
fg = "#D08770"

[presets.roomName]
fg = "#ECEFF4"
bg = "#434C5E"

[presets.links]
fg = "#81A1C1"

[presets.whisper]
fg = "#B48EAD"

[[prompt_colors]]
character = "R"
color = "#BF616A"

[[prompt_colors]]
character = "&gt;"
color = "#616E88"
</code></pre>
<h3 id="solarized-dark"><a class="header" href="#solarized-dark">Solarized Dark</a></h3>
<pre><code class="language-toml">[ui]
text_color = "#839496"
background_color = "#002B36"
border_color = "#073642"
focused_border_color = "#2AA198"
selection_bg_color = "#073642"

[presets.speech]
fg = "#859900"

[presets.monsterbold]
fg = "#CB4B16"

[presets.roomName]
fg = "#93A1A1"
bg = "#073642"

[presets.links]
fg = "#268BD2"

[[prompt_colors]]
character = "R"
color = "#DC322F"

[[prompt_colors]]
character = "&gt;"
color = "#586E75"
</code></pre>
<h3 id="high-contrast"><a class="header" href="#high-contrast">High Contrast</a></h3>
<pre><code class="language-toml">[ui]
text_color = "#FFFFFF"
background_color = "#000000"
border_color = "#FFFFFF"
focused_border_color = "#FFFF00"
selection_bg_color = "#0000FF"

[presets.speech]
fg = "#00FF00"

[presets.monsterbold]
fg = "#FF0000"

[presets.roomName]
fg = "#FFFFFF"
bg = "#0000AA"

[presets.links]
fg = "#00FFFF"

[[prompt_colors]]
character = "R"
color = "#FF0000"

[[prompt_colors]]
character = "&gt;"
color = "#FFFFFF"
</code></pre>
<h3 id="monokai"><a class="header" href="#monokai">Monokai</a></h3>
<pre><code class="language-toml">[ui]
text_color = "#F8F8F2"
background_color = "#272822"
border_color = "#49483E"
focused_border_color = "#F92672"
selection_bg_color = "#49483E"

[presets.speech]
fg = "#A6E22E"

[presets.monsterbold]
fg = "#FD971F"

[presets.roomName]
fg = "#F8F8F2"
bg = "#3E3D32"

[presets.links]
fg = "#66D9EF"

[[prompt_colors]]
character = "R"
color = "#F92672"

[[prompt_colors]]
character = "&gt;"
color = "#75715E"
</code></pre>
<h2 id="applying-themes"><a class="header" href="#applying-themes">Applying Themes</a></h2>
<h3 id="hot-reload"><a class="header" href="#hot-reload">Hot-Reload</a></h3>
<pre><code>.reload colors
</code></pre>
<h3 id="per-character"><a class="header" href="#per-character">Per-Character</a></h3>
<p>Place theme in character folder:</p>
<pre><code>~/.vellum-fe/characters/MyChar/colors.toml
</code></pre>
<h2 id="creating-variants"><a class="header" href="#creating-variants">Creating Variants</a></h2>
<h3 id="darklight-toggle"><a class="header" href="#darklight-toggle">Dark/Light Toggle</a></h3>
<p>Create two theme files:</p>
<pre><code>~/.vellum-fe/themes/dark.toml
~/.vellum-fe/themes/light.toml
</code></pre>
<p>Switch by copying:</p>
<pre><code class="language-bash">cp ~/.vellum-fe/themes/dark.toml ~/.vellum-fe/colors.toml
</code></pre>
<h3 id="profession-variants"><a class="header" href="#profession-variants">Profession Variants</a></h3>
<p>Create profession-specific themes:</p>
<pre><code>~/.vellum-fe/characters/Warrior/colors.toml   # Combat colors
~/.vellum-fe/characters/Empath/colors.toml    # Healing colors
</code></pre>
<h2 id="sharing-themes"><a class="header" href="#sharing-themes">Sharing Themes</a></h2>
<ol>
<li>Export your <code>colors.toml</code></li>
<li>Share via GitHub Gist, Discord, etc.</li>
<li>Others copy to their <code>~/.vellum-fe/</code> directory</li>
<li>Run <code>.reload colors</code></li>
</ol>
<h2 id="see-also-29"><a class="header" href="#see-also-29">See Also</a></h2>
<ul>
<li><a href="#colorstoml-reference">Colors Configuration</a> - Full reference</li>
<li><a href="#theme-system">Theme System Architecture</a> - How theming works</li>
<li><a href="#accessibility-setup-1">Accessibility</a> - High contrast themes</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="highlight-patterns"><a class="header" href="#highlight-patterns">Highlight Patterns</a></h1>
<p>Highlights let you colorize text based on patterns. This guide covers advanced pattern creation.</p>
<h2 id="pattern-basics"><a class="header" href="#pattern-basics">Pattern Basics</a></h2>
<p>Highlights use regex (regular expressions):</p>
<pre><code class="language-toml">[[highlights]]
name = "creatures"
pattern = "(?i)\\b(goblin|orc|troll)\\b"
fg = "#FF6600"
bold = true
</code></pre>
<h2 id="regex-syntax"><a class="header" href="#regex-syntax">Regex Syntax</a></h2>
<h3 id="literal-text"><a class="header" href="#literal-text">Literal Text</a></h3>
<pre><code class="language-toml"># Exact match
pattern = "goblin"

# Multiple words
pattern = "goblin|orc|troll"
</code></pre>
<h3 id="character-classes-1"><a class="header" href="#character-classes-1">Character Classes</a></h3>
<pre><code class="language-toml"># Any digit
pattern = "\\d+"          # Matches: 123, 45, 6789

# Any word character
pattern = "\\w+"          # Matches: word, Word123

# Any whitespace
pattern = "\\s+"          # Matches spaces, tabs

# Custom class
pattern = "[A-Z][a-z]+"   # Matches: Hello, World
</code></pre>
<h3 id="quantifiers"><a class="header" href="#quantifiers">Quantifiers</a></h3>
<pre><code class="language-toml"># Zero or more
pattern = "a*"            # Matches: "", a, aa, aaa

# One or more
pattern = "a+"            # Matches: a, aa, aaa

# Zero or one
pattern = "colou?r"       # Matches: color, colour

# Exactly n
pattern = "\\d{3}"        # Matches: 123, 456

# n to m
pattern = "\\d{2,4}"      # Matches: 12, 123, 1234
</code></pre>
<h3 id="anchors-1"><a class="header" href="#anchors-1">Anchors</a></h3>
<pre><code class="language-toml"># Start of line
pattern = "^You attack"

# End of line
pattern = "falls dead!$"

# Word boundary
pattern = "\\bgoblin\\b"  # Won't match "goblins" or "hobgoblin"
</code></pre>
<h3 id="groups"><a class="header" href="#groups">Groups</a></h3>
<pre><code class="language-toml"># Non-capturing group
pattern = "(?:goblin|orc)"

# Capturing group (for future use)
pattern = "(\\w+) says,"
</code></pre>
<h3 id="modifiers"><a class="header" href="#modifiers">Modifiers</a></h3>
<pre><code class="language-toml"># Case insensitive
pattern = "(?i)goblin"    # Matches: goblin, Goblin, GOBLIN
</code></pre>
<h2 id="common-patterns-1"><a class="header" href="#common-patterns-1">Common Patterns</a></h2>
<h3 id="creature-names-1"><a class="header" href="#creature-names-1">Creature Names</a></h3>
<pre><code class="language-toml">[[highlights]]
name = "creatures"
pattern = "(?i)\\b(goblin|orc|troll|kobold|giant|wolf|bear)s?\\b"
fg = "#FF6600"
bold = true
</code></pre>
<h3 id="player-speech-1"><a class="header" href="#player-speech-1">Player Speech</a></h3>
<pre><code class="language-toml">[[highlights]]
name = "speech"
pattern = "^(\\w+) (says|asks|exclaims|whispers),"
fg = "#00FF00"
</code></pre>
<h3 id="your-character-name-1"><a class="header" href="#your-character-name-1">Your Character Name</a></h3>
<pre><code class="language-toml">[[highlights]]
name = "my_name"
pattern = "\\bYourCharacterName\\b"
fg = "#FFFF00"
bold = true
</code></pre>
<h3 id="damage-numbers-1"><a class="header" href="#damage-numbers-1">Damage Numbers</a></h3>
<pre><code class="language-toml">[[highlights]]
name = "damage"
pattern = "\\b\\d+\\s+points?\\s+of\\s+damage"
fg = "#FF0000"
bold = true
</code></pre>
<h3 id="currency"><a class="header" href="#currency">Currency</a></h3>
<pre><code class="language-toml">[[highlights]]
name = "silver"
pattern = "\\d+\\s+silvers?"
fg = "#C0C0C0"

[[highlights]]
name = "gold"
pattern = "\\d+\\s+gold"
fg = "#FFD700"
</code></pre>
<h3 id="room-exits-1"><a class="header" href="#room-exits-1">Room Exits</a></h3>
<pre><code class="language-toml">[[highlights]]
name = "exits"
pattern = "Obvious (paths|exits):"
fg = "#00FFFF"
</code></pre>
<h3 id="espthoughts-1"><a class="header" href="#espthoughts-1">ESP/Thoughts</a></h3>
<pre><code class="language-toml">[[highlights]]
name = "esp"
pattern = "^\\[.*?\\]"
fg = "#FF00FF"
stream = "thoughts"
</code></pre>
<h3 id="critical-hits"><a class="header" href="#critical-hits">Critical Hits</a></h3>
<pre><code class="language-toml">[[highlights]]
name = "critical"
pattern = "(?i)critical|devastating|massive"
fg = "#FF0000"
bg = "#400000"
bold = true
</code></pre>
<h3 id="healing"><a class="header" href="#healing">Healing</a></h3>
<pre><code class="language-toml">[[highlights]]
name = "healing"
pattern = "heal|restore|recover"
fg = "#00FF00"
</code></pre>
<h2 id="stream-filtering-1"><a class="header" href="#stream-filtering-1">Stream Filtering</a></h2>
<p>Limit patterns to specific streams:</p>
<pre><code class="language-toml">[[highlights]]
name = "combat"
pattern = "You (hit|miss)"
fg = "#FF0000"
stream = "main"

[[highlights]]
name = "esp_highlight"
pattern = "\\[ESP\\]"
fg = "#00FFFF"
stream = "thoughts"
</code></pre>
<h2 id="priority-system-1"><a class="header" href="#priority-system-1">Priority System</a></h2>
<p>Higher priority wins when multiple patterns match:</p>
<pre><code class="language-toml">[[highlights]]
name = "important"
pattern = "critical"
fg = "#FF0000"
priority = 100          # Checked first

[[highlights]]
name = "general"
pattern = ".*"
fg = "#808080"
priority = 0            # Checked last
</code></pre>
<h2 id="fast-parse-mode-1"><a class="header" href="#fast-parse-mode-1">Fast Parse Mode</a></h2>
<p>For simple literal patterns, use <code>fast_parse</code>:</p>
<pre><code class="language-toml">[[highlights]]
name = "names"
pattern = "Bob|Alice|Charlie"
fg = "#FFFF00"
fast_parse = true       # Uses Aho-Corasick algorithm
</code></pre>
<p><strong>When to use fast_parse:</strong></p>
<ul>
<li>Pattern is literal strings only</li>
<li>Pattern has many alternatives</li>
<li>High-frequency matching needed</li>
</ul>
<p><strong>When NOT to use:</strong></p>
<ul>
<li>Pattern uses regex features</li>
<li>Pattern needs word boundaries</li>
<li>Pattern uses anchors</li>
</ul>
<h2 id="special-characters"><a class="header" href="#special-characters">Special Characters</a></h2>
<p>Escape these with <code>\\</code>:</p>
<pre><code>. * + ? ^ $ { } [ ] ( ) | \
</code></pre>
<pre><code class="language-toml"># Match literal period
pattern = "Mr\\. Smith"

# Match literal asterisk
pattern = "\\*\\*emphasis\\*\\*"

# Match literal parentheses
pattern = "\\(optional\\)"
</code></pre>
<h2 id="sounds"><a class="header" href="#sounds">Sounds</a></h2>
<p>Add sounds to highlights:</p>
<pre><code class="language-toml">[[highlights]]
name = "whisper_alert"
pattern = "whispers to you"
fg = "#00FFFF"
sound = "~/.vellum-fe/sounds/whisper.wav"
</code></pre>
<h2 id="squelch-hide"><a class="header" href="#squelch-hide">Squelch (Hide)</a></h2>
<p>Hide matching text entirely:</p>
<pre><code class="language-toml">[[highlights]]
name = "spam_filter"
pattern = "A gentle breeze|The sun|Birds chirp"
squelch = true
</code></pre>
<h2 id="redirect"><a class="header" href="#redirect">Redirect</a></h2>
<p>Send matching text to different window:</p>
<pre><code class="language-toml">[[highlights]]
name = "combat_redirect"
pattern = "You (attack|hit|miss|dodge)"
redirect = "combat"
redirect_mode = "copy"  # or "move"
</code></pre>
<h2 id="testing-patterns"><a class="header" href="#testing-patterns">Testing Patterns</a></h2>
<h3 id="test-in-browser"><a class="header" href="#test-in-browser">Test in Browser</a></h3>
<pre><code>.highlights
</code></pre>
<p>Navigate to your highlight and check the preview.</p>
<h3 id="test-with-game-output"><a class="header" href="#test-with-game-output">Test with Game Output</a></h3>
<ol>
<li>Add highlight</li>
<li>Run <code>.reload highlights</code></li>
<li>Trigger the pattern in-game</li>
<li>Verify appearance</li>
</ol>
<h3 id="online-regex-testers"><a class="header" href="#online-regex-testers">Online Regex Testers</a></h3>
<p>Use regex101.com or similar to test patterns before adding.</p>
<h2 id="performance-tips"><a class="header" href="#performance-tips">Performance Tips</a></h2>
<ol>
<li><strong>Use fast_parse</strong> for simple patterns</li>
<li><strong>Use word boundaries</strong> <code>\b</code> to limit matching</li>
<li><strong>Be specific</strong> - avoid <code>.*</code> when possible</li>
<li><strong>Limit stream</strong> - use <code>stream = "main"</code> when appropriate</li>
<li><strong>Keep count low</strong> - fewer than 100 patterns recommended</li>
</ol>
<h2 id="debugging"><a class="header" href="#debugging">Debugging</a></h2>
<h3 id="pattern-not-matching"><a class="header" href="#pattern-not-matching">Pattern Not Matching</a></h3>
<ol>
<li>Test pattern in regex101.com</li>
<li>Check escaping (use <code>\\</code> not <code>\</code>)</li>
<li>Check case sensitivity</li>
<li>Verify stream setting</li>
</ol>
<h3 id="pattern-too-broad"><a class="header" href="#pattern-too-broad">Pattern Too Broad</a></h3>
<p>Add boundaries:</p>
<pre><code class="language-toml"># Too broad
pattern = "hit"        # Matches "white", "smith"

# Better
pattern = "\\bhit\\b"  # Only matches "hit" as word
</code></pre>
<h3 id="escaping-issues"><a class="header" href="#escaping-issues">Escaping Issues</a></h3>
<p>TOML strings need double backslashes:</p>
<pre><code class="language-toml"># Wrong
pattern = "\d+"

# Correct
pattern = "\\d+"
</code></pre>
<h2 id="complete-example-1"><a class="header" href="#complete-example-1">Complete Example</a></h2>
<pre><code class="language-toml"># Combat Highlights
[[highlights]]
name = "damage_taken"
pattern = "(?i)(strikes|hits|bites|claws|slashes)\\s+you"
fg = "#FF4444"
bold = true
priority = 80

[[highlights]]
name = "damage_dealt"
pattern = "You\\s+(strike|hit|slash|stab)"
fg = "#44FF44"
priority = 80

[[highlights]]
name = "critical"
pattern = "(?i)critical|devastating"
fg = "#FF0000"
bg = "#400000"
bold = true
priority = 100

# Creatures
[[highlights]]
name = "creatures"
pattern = "(?i)\\b(goblin|orc|troll|kobold|wolf|bear|rat)s?\\b"
fg = "#FF8800"
bold = true
priority = 50

# Social
[[highlights]]
name = "my_name"
pattern = "\\bYourCharacter\\b"
fg = "#FFFF00"
bold = true
priority = 90

[[highlights]]
name = "friends"
pattern = "\\b(Alice|Bob|Charlie)\\b"
fg = "#00FF00"
fast_parse = true
priority = 60

# Currency
[[highlights]]
name = "silver"
pattern = "\\d+\\s+silvers?"
fg = "#C0C0C0"
bold = true

[[highlights]]
name = "treasure"
pattern = "(?i)(gold|gems?|jewel|treasure)"
fg = "#FFD700"
</code></pre>
<h2 id="see-also-30"><a class="header" href="#see-also-30">See Also</a></h2>
<ul>
<li><a href="#highlightstoml-reference">Highlights Configuration</a> - Full reference</li>
<li><a href="#theme-system">Theme System</a> - How colors work</li>
<li><a href="#performance-optimization">Performance</a> - Optimization</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="keybind-actions"><a class="header" href="#keybind-actions">Keybind Actions</a></h1>
<p>VellumFE supports extensive keyboard customization. This guide covers all available keybind actions.</p>
<h2 id="keybind-basics"><a class="header" href="#keybind-basics">Keybind Basics</a></h2>
<p>Keybinds are defined in <code>keybinds.toml</code>:</p>
<pre><code class="language-toml">[keybinds."ctrl+l"]
action = "layout_editor"

[keybinds."f1"]
action = "help"

[keybinds."ctrl+1"]
macro = "attack target"
</code></pre>
<h2 id="key-format"><a class="header" href="#key-format">Key Format</a></h2>
<h3 id="modifiers-1"><a class="header" href="#modifiers-1">Modifiers</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Modifier</th><th>Format</th></tr>
</thead>
<tbody>
<tr><td>Control</td><td><code>ctrl+</code></td></tr>
<tr><td>Alt</td><td><code>alt+</code></td></tr>
<tr><td>Shift</td><td><code>shift+</code></td></tr>
<tr><td>Meta/Super</td><td><code>meta+</code></td></tr>
</tbody>
</table>
</div>
<h3 id="special-keys-1"><a class="header" href="#special-keys-1">Special Keys</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Key</th><th>Format</th></tr>
</thead>
<tbody>
<tr><td>F1-F12</td><td><code>f1</code> to <code>f12</code></td></tr>
<tr><td>Enter</td><td><code>enter</code></td></tr>
<tr><td>Escape</td><td><code>escape</code></td></tr>
<tr><td>Tab</td><td><code>tab</code></td></tr>
<tr><td>Backspace</td><td><code>backspace</code></td></tr>
<tr><td>Delete</td><td><code>delete</code></td></tr>
<tr><td>Insert</td><td><code>insert</code></td></tr>
<tr><td>Home</td><td><code>home</code></td></tr>
<tr><td>End</td><td><code>end</code></td></tr>
<tr><td>Page Up</td><td><code>pageup</code></td></tr>
<tr><td>Page Down</td><td><code>pagedown</code></td></tr>
<tr><td>Arrows</td><td><code>up</code>, <code>down</code>, <code>left</code>, <code>right</code></td></tr>
<tr><td>Space</td><td><code>space</code></td></tr>
</tbody>
</table>
</div>
<h3 id="combination-examples"><a class="header" href="#combination-examples">Combination Examples</a></h3>
<pre><code class="language-toml">"ctrl+s"         # Ctrl + S
"ctrl+shift+s"   # Ctrl + Shift + S
"alt+f4"         # Alt + F4
"f1"             # F1 alone
"shift+tab"      # Shift + Tab
</code></pre>
<h2 id="action-categories"><a class="header" href="#action-categories">Action Categories</a></h2>
<h3 id="navigation-actions-1"><a class="header" href="#navigation-actions-1">Navigation Actions</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Action</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>scroll_up</code></td><td>Scroll window up</td></tr>
<tr><td><code>scroll_down</code></td><td>Scroll window down</td></tr>
<tr><td><code>page_up</code></td><td>Page up</td></tr>
<tr><td><code>page_down</code></td><td>Page down</td></tr>
<tr><td><code>scroll_top</code></td><td>Jump to top</td></tr>
<tr><td><code>scroll_bottom</code></td><td>Jump to bottom</td></tr>
<tr><td><code>focus_next</code></td><td>Focus next window</td></tr>
<tr><td><code>focus_prev</code></td><td>Focus previous window</td></tr>
<tr><td><code>focus_main</code></td><td>Focus main window</td></tr>
<tr><td><code>focus_input</code></td><td>Focus command input</td></tr>
</tbody>
</table>
</div>
<h3 id="window-actions"><a class="header" href="#window-actions">Window Actions</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Action</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>layout_editor</code></td><td>Open layout editor</td></tr>
<tr><td><code>window_editor</code></td><td>Open window editor</td></tr>
<tr><td><code>toggle_border</code></td><td>Toggle window border</td></tr>
<tr><td><code>toggle_title</code></td><td>Toggle window title</td></tr>
<tr><td><code>maximize_window</code></td><td>Maximize current window</td></tr>
<tr><td><code>restore_window</code></td><td>Restore window size</td></tr>
<tr><td><code>close_window</code></td><td>Close current popup</td></tr>
</tbody>
</table>
</div>
<h3 id="editor-actions"><a class="header" href="#editor-actions">Editor Actions</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Action</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>highlight_browser</code></td><td>Open highlight browser</td></tr>
<tr><td><code>keybind_browser</code></td><td>Open keybind browser</td></tr>
<tr><td><code>color_browser</code></td><td>Open color browser</td></tr>
<tr><td><code>theme_browser</code></td><td>Open theme browser</td></tr>
<tr><td><code>settings_editor</code></td><td>Open settings</td></tr>
</tbody>
</table>
</div>
<h3 id="input-actions-1"><a class="header" href="#input-actions-1">Input Actions</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Action</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>history_prev</code></td><td>Previous command history</td></tr>
<tr><td><code>history_next</code></td><td>Next command history</td></tr>
<tr><td><code>clear_input</code></td><td>Clear command input</td></tr>
<tr><td><code>submit_command</code></td><td>Submit current command</td></tr>
<tr><td><code>cancel</code></td><td>Cancel current operation</td></tr>
</tbody>
</table>
</div>
<h3 id="text-actions"><a class="header" href="#text-actions">Text Actions</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Action</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>select_all</code></td><td>Select all text</td></tr>
<tr><td><code>copy</code></td><td>Copy selection</td></tr>
<tr><td><code>cut</code></td><td>Cut selection</td></tr>
<tr><td><code>paste</code></td><td>Paste clipboard</td></tr>
<tr><td><code>search</code></td><td>Open search</td></tr>
<tr><td><code>search_next</code></td><td>Find next</td></tr>
<tr><td><code>search_prev</code></td><td>Find previous</td></tr>
</tbody>
</table>
</div>
<h3 id="tab-actions"><a class="header" href="#tab-actions">Tab Actions</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Action</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>next_tab</code></td><td>Next tab</td></tr>
<tr><td><code>prev_tab</code></td><td>Previous tab</td></tr>
<tr><td><code>tab_1</code> to <code>tab_9</code></td><td>Jump to tab by number</td></tr>
<tr><td><code>close_tab</code></td><td>Close current tab</td></tr>
</tbody>
</table>
</div>
<h3 id="application-actions"><a class="header" href="#application-actions">Application Actions</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Action</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>quit</code></td><td>Exit application</td></tr>
<tr><td><code>help</code></td><td>Show help</td></tr>
<tr><td><code>reload_config</code></td><td>Reload all config</td></tr>
<tr><td><code>reload_colors</code></td><td>Reload colors</td></tr>
<tr><td><code>reload_highlights</code></td><td>Reload highlights</td></tr>
<tr><td><code>reload_keybinds</code></td><td>Reload keybinds</td></tr>
<tr><td><code>reload_layout</code></td><td>Reload layout</td></tr>
</tbody>
</table>
</div>
<h3 id="game-actions-1"><a class="header" href="#game-actions-1">Game Actions</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Action</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>reconnect</code></td><td>Reconnect to server</td></tr>
<tr><td><code>disconnect</code></td><td>Disconnect</td></tr>
</tbody>
</table>
</div>
<h2 id="macros"><a class="header" href="#macros">Macros</a></h2>
<p>Send game commands:</p>
<pre><code class="language-toml">[keybinds."ctrl+1"]
macro = "attack target"

[keybinds."ctrl+2"]
macro = "stance defensive"

[keybinds."ctrl+h"]
macro = "hide"
</code></pre>
<h3 id="multi-command-macros"><a class="header" href="#multi-command-macros">Multi-Command Macros</a></h3>
<p>Separate with semicolons:</p>
<pre><code class="language-toml">[keybinds."f5"]
macro = "stance offensive;attack target"
</code></pre>
<h3 id="macro-with-variables"><a class="header" href="#macro-with-variables">Macro with Variables</a></h3>
<p>Use <code>$input</code> for prompted input:</p>
<pre><code class="language-toml">[keybinds."ctrl+g"]
macro = "go $input"
# Prompts for input, then sends "go &lt;input&gt;"
</code></pre>
<h2 id="default-keybinds-1"><a class="header" href="#default-keybinds-1">Default Keybinds</a></h2>
<h3 id="global"><a class="header" href="#global">Global</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Key</th><th>Action</th></tr>
</thead>
<tbody>
<tr><td><code>Escape</code></td><td>Cancel/close popup</td></tr>
<tr><td><code>Ctrl+C</code></td><td>Copy</td></tr>
<tr><td><code>Ctrl+V</code></td><td>Paste</td></tr>
<tr><td><code>Ctrl+X</code></td><td>Cut</td></tr>
<tr><td><code>Ctrl+A</code></td><td>Select all</td></tr>
</tbody>
</table>
</div>
<h3 id="navigation-4"><a class="header" href="#navigation-4">Navigation</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Key</th><th>Action</th></tr>
</thead>
<tbody>
<tr><td><code>Page Up</code></td><td>Scroll up</td></tr>
<tr><td><code>Page Down</code></td><td>Scroll down</td></tr>
<tr><td><code>Home</code></td><td>Scroll to top</td></tr>
<tr><td><code>End</code></td><td>Scroll to bottom</td></tr>
<tr><td><code>Tab</code></td><td>Focus next</td></tr>
<tr><td><code>Shift+Tab</code></td><td>Focus prev</td></tr>
</tbody>
</table>
</div>
<h3 id="command-input-2"><a class="header" href="#command-input-2">Command Input</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Key</th><th>Action</th></tr>
</thead>
<tbody>
<tr><td><code>Enter</code></td><td>Submit command</td></tr>
<tr><td><code>Up</code></td><td>History prev</td></tr>
<tr><td><code>Down</code></td><td>History next</td></tr>
<tr><td><code>Ctrl+L</code></td><td>Clear input</td></tr>
</tbody>
</table>
</div>
<h3 id="browsers"><a class="header" href="#browsers">Browsers</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Key</th><th>Action</th></tr>
</thead>
<tbody>
<tr><td><code>Up/k</code></td><td>Navigate up</td></tr>
<tr><td><code>Down/j</code></td><td>Navigate down</td></tr>
<tr><td><code>Enter</code></td><td>Select</td></tr>
<tr><td><code>Delete</code></td><td>Delete item</td></tr>
<tr><td><code>Escape</code></td><td>Close</td></tr>
</tbody>
</table>
</div>
<h2 id="context-specific-keybinds"><a class="header" href="#context-specific-keybinds">Context-Specific Keybinds</a></h2>
<p>Some keybinds only work in specific contexts:</p>
<pre><code class="language-toml"># Only in Normal mode
[keybinds."ctrl+l"]
action = "layout_editor"
mode = "normal"

# Only in Navigation mode
[keybinds."j"]
action = "scroll_down"
mode = "navigation"
</code></pre>
<h2 id="priority-layers"><a class="header" href="#priority-layers">Priority Layers</a></h2>
<p>Keybinds are processed in order:</p>
<ol>
<li><strong>Global keybinds</strong> - Always active</li>
<li><strong>Menu keybinds</strong> - In popup/editor</li>
<li><strong>User keybinds</strong> - Game mode</li>
<li><strong>Default input</strong> - Character insertion</li>
</ol>
<h2 id="examples-16"><a class="header" href="#examples-16">Examples</a></h2>
<h3 id="combat-setup"><a class="header" href="#combat-setup">Combat Setup</a></h3>
<pre><code class="language-toml"># Quick attacks
[keybinds."f1"]
macro = "attack target"

[keybinds."f2"]
macro = "stance offensive;attack target"

[keybinds."f3"]
macro = "stance defensive"

[keybinds."f4"]
macro = "hide"

# Movement
[keybinds."numpad8"]
macro = "go north"

[keybinds."numpad2"]
macro = "go south"

[keybinds."numpad4"]
macro = "go west"

[keybinds."numpad6"]
macro = "go east"
</code></pre>
<h3 id="spellcasting"><a class="header" href="#spellcasting">Spellcasting</a></h3>
<pre><code class="language-toml">[keybinds."ctrl+1"]
macro = "prep 101;cast"

[keybinds."ctrl+2"]
macro = "prep 103;cast"

[keybinds."ctrl+3"]
macro = "prep 107;cast target"
</code></pre>
<h3 id="navigation-1-1"><a class="header" href="#navigation-1-1">Navigation</a></h3>
<pre><code class="language-toml">[keybinds."ctrl+shift+up"]
action = "scroll_top"

[keybinds."ctrl+shift+down"]
action = "scroll_bottom"

[keybinds."alt+1"]
action = "focus_main"

[keybinds."alt+2"]
macro = ".focus combat"
</code></pre>
<h3 id="quick-commands"><a class="header" href="#quick-commands">Quick Commands</a></h3>
<pre><code class="language-toml">[keybinds."ctrl+l"]
macro = "look"

[keybinds."ctrl+i"]
macro = "inventory"

[keybinds."ctrl+e"]
macro = "experience"

[keybinds."ctrl+w"]
macro = "wealth"
</code></pre>
<h2 id="using-the-keybind-browser"><a class="header" href="#using-the-keybind-browser">Using the Keybind Browser</a></h2>
<pre><code>.keybinds
</code></pre>
<p>Features:</p>
<ul>
<li>Browse all keybinds</li>
<li>Add new keybinds</li>
<li>Edit existing keybinds</li>
<li>Delete keybinds</li>
<li>Filter by type</li>
</ul>
<h2 id="conflict-resolution"><a class="header" href="#conflict-resolution">Conflict Resolution</a></h2>
<p>If two keybinds use the same key:</p>
<ol>
<li>Higher priority wins</li>
<li>Later definition overwrites earlier</li>
<li>Context-specific beats general</li>
</ol>
<p>Check for conflicts:</p>
<pre><code>.keybinds
</code></pre>
<p>Look for duplicate key combos.</p>
<h2 id="troubleshooting-15"><a class="header" href="#troubleshooting-15">Troubleshooting</a></h2>
<h3 id="keybind-not-working"><a class="header" href="#keybind-not-working">Keybind Not Working</a></h3>
<ol>
<li>Check for conflicts</li>
<li>Verify key format is correct</li>
<li>Check context/mode setting</li>
<li>Reload: <code>.reload keybinds</code></li>
</ol>
<h3 id="key-not-detected"><a class="header" href="#key-not-detected">Key Not Detected</a></h3>
<p>Some keys may not be captured:</p>
<ul>
<li>System shortcuts (Alt+Tab, etc.)</li>
<li>Terminal shortcuts</li>
<li>Media keys</li>
</ul>
<h3 id="modifier-issues"><a class="header" href="#modifier-issues">Modifier Issues</a></h3>
<p>Some terminals don’t report all modifiers:</p>
<ul>
<li>Try different modifier combos</li>
<li>Use function keys (F1-F12) as alternatives</li>
</ul>
<h2 id="see-also-31"><a class="header" href="#see-also-31">See Also</a></h2>
<ul>
<li><a href="#keybindstoml-reference">Keybinds Configuration</a> - Full reference</li>
<li><a href="#browser--editor-system">Browser Editors</a> - Keybind browser</li>
<li><a href="#command-input-1">Command Input</a> - Input widget</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="sound-alerts"><a class="header" href="#sound-alerts">Sound Alerts</a></h1>
<p>VellumFE can play sounds when specific text patterns match, providing audio alerts for important events.</p>
<h2 id="sound-basics"><a class="header" href="#sound-basics">Sound Basics</a></h2>
<p>Add sounds to highlight patterns:</p>
<pre><code class="language-toml">[[highlights]]
name = "whisper_alert"
pattern = "whispers to you"
fg = "#00FFFF"
sound = "~/.vellum-fe/sounds/whisper.wav"
</code></pre>
<h2 id="supported-formats"><a class="header" href="#supported-formats">Supported Formats</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Format</th><th>Extension</th><th>Notes</th></tr>
</thead>
<tbody>
<tr><td>WAV</td><td><code>.wav</code></td><td>Best compatibility</td></tr>
<tr><td>MP3</td><td><code>.mp3</code></td><td>Requires codec</td></tr>
<tr><td>OGG</td><td><code>.ogg</code></td><td>Good compression</td></tr>
</tbody>
</table>
</div>
<p>WAV is recommended for reliable playback.</p>
<h2 id="sound-configuration"><a class="header" href="#sound-configuration">Sound Configuration</a></h2>
<h3 id="basic-sound"><a class="header" href="#basic-sound">Basic Sound</a></h3>
<pre><code class="language-toml">[[highlights]]
name = "my_alert"
pattern = "important event"
sound = "/path/to/sound.wav"
</code></pre>
<h3 id="volume-control"><a class="header" href="#volume-control">Volume Control</a></h3>
<pre><code class="language-toml">[[highlights]]
name = "quiet_alert"
pattern = "minor event"
sound = "/path/to/sound.wav"
volume = 0.5    # 0.0 to 1.0
</code></pre>
<h3 id="sound-only-no-visual"><a class="header" href="#sound-only-no-visual">Sound-Only (No Visual)</a></h3>
<pre><code class="language-toml">[[highlights]]
name = "audio_only"
pattern = "background event"
sound = "/path/to/sound.wav"
# No fg/bg colors - visual unchanged
</code></pre>
<h2 id="sound-file-management"><a class="header" href="#sound-file-management">Sound File Management</a></h2>
<h3 id="directory-structure"><a class="header" href="#directory-structure">Directory Structure</a></h3>
<pre><code>~/.vellum-fe/
└── sounds/
    ├── whisper.wav
    ├── attack.wav
    ├── death.wav
    ├── loot.wav
    └── custom/
        └── my_sounds.wav
</code></pre>
<h3 id="creating-the-sounds-directory"><a class="header" href="#creating-the-sounds-directory">Creating the Sounds Directory</a></h3>
<pre><code class="language-bash">mkdir -p ~/.vellum-fe/sounds
</code></pre>
<h3 id="sound-sources"><a class="header" href="#sound-sources">Sound Sources</a></h3>
<ul>
<li><strong>System sounds</strong> - Copy from OS sound themes</li>
<li><strong>Online libraries</strong> - freesound.org, soundsnap.com</li>
<li><strong>Create your own</strong> - Record with Audacity</li>
<li><strong>Game packs</strong> - MUD sound packs</li>
</ul>
<h2 id="common-alert-sounds"><a class="header" href="#common-alert-sounds">Common Alert Sounds</a></h2>
<h3 id="combat-alerts"><a class="header" href="#combat-alerts">Combat Alerts</a></h3>
<pre><code class="language-toml"># Being attacked
[[highlights]]
name = "attack_received"
pattern = "(strikes|hits|bites|claws) you"
fg = "#FF4444"
sound = "~/.vellum-fe/sounds/hit.wav"

# Near death
[[highlights]]
name = "low_health"
pattern = "You feel weak"
fg = "#FF0000"
bg = "#400000"
sound = "~/.vellum-fe/sounds/warning.wav"
volume = 1.0

# Death
[[highlights]]
name = "death"
pattern = "You have died"
fg = "#FFFFFF"
bg = "#FF0000"
sound = "~/.vellum-fe/sounds/death.wav"
</code></pre>
<h3 id="social-alerts"><a class="header" href="#social-alerts">Social Alerts</a></h3>
<pre><code class="language-toml"># Whispers
[[highlights]]
name = "whisper"
pattern = "whispers,"
fg = "#00FFFF"
sound = "~/.vellum-fe/sounds/whisper.wav"
volume = 0.7

# Your name mentioned
[[highlights]]
name = "name_mention"
pattern = "\\bYourCharacter\\b"
fg = "#FFFF00"
sound = "~/.vellum-fe/sounds/mention.wav"

# Group invite
[[highlights]]
name = "group_invite"
pattern = "invites you to join"
fg = "#00FF00"
sound = "~/.vellum-fe/sounds/invite.wav"
</code></pre>
<h3 id="loot-alerts"><a class="header" href="#loot-alerts">Loot Alerts</a></h3>
<pre><code class="language-toml"># Treasure found
[[highlights]]
name = "treasure"
pattern = "(?i)(gold|gems|treasure|chest)"
fg = "#FFD700"
sound = "~/.vellum-fe/sounds/loot.wav"
volume = 0.5

# Rare item
[[highlights]]
name = "rare_item"
pattern = "(?i)(legendary|artifact|ancient)"
fg = "#FF00FF"
sound = "~/.vellum-fe/sounds/rare.wav"
</code></pre>
<h3 id="status-alerts"><a class="header" href="#status-alerts">Status Alerts</a></h3>
<pre><code class="language-toml"># Stunned
[[highlights]]
name = "stunned"
pattern = "You are stunned"
fg = "#FFFF00"
sound = "~/.vellum-fe/sounds/stun.wav"

# Poisoned
[[highlights]]
name = "poisoned"
pattern = "(?i)poison|venom"
fg = "#00FF00"
sound = "~/.vellum-fe/sounds/poison.wav"
</code></pre>
<h2 id="global-sound-settings"><a class="header" href="#global-sound-settings">Global Sound Settings</a></h2>
<h3 id="in-configtoml"><a class="header" href="#in-configtoml">In config.toml</a></h3>
<pre><code class="language-toml">[sound]
enabled = true           # Master switch
volume = 0.8             # Master volume (0.0-1.0)
concurrent_limit = 3     # Max simultaneous sounds
</code></pre>
<h3 id="disable-all-sounds"><a class="header" href="#disable-all-sounds">Disable All Sounds</a></h3>
<pre><code class="language-toml">[sound]
enabled = false
</code></pre>
<h2 id="sound-priority"><a class="header" href="#sound-priority">Sound Priority</a></h2>
<p>When multiple patterns match:</p>
<pre><code class="language-toml">[[highlights]]
name = "critical_alert"
pattern = "critical"
sound = "~/.vellum-fe/sounds/critical.wav"
priority = 100          # Plays first

[[highlights]]
name = "minor_alert"
pattern = "hit"
sound = "~/.vellum-fe/sounds/hit.wav"
priority = 50           # May be skipped if concurrent_limit reached
</code></pre>
<h2 id="rate-limiting"><a class="header" href="#rate-limiting">Rate Limiting</a></h2>
<p>Prevent sound spam:</p>
<pre><code class="language-toml">[[highlights]]
name = "combat_sound"
pattern = "You attack"
sound = "~/.vellum-fe/sounds/attack.wav"
sound_cooldown = 500    # Milliseconds between plays
</code></pre>
<h2 id="platform-notes"><a class="header" href="#platform-notes">Platform Notes</a></h2>
<h3 id="windows"><a class="header" href="#windows">Windows</a></h3>
<ul>
<li>WAV files play natively</li>
<li>No additional dependencies needed</li>
</ul>
<h3 id="linux"><a class="header" href="#linux">Linux</a></h3>
<p>Requires audio system:</p>
<pre><code class="language-bash"># PulseAudio (most distros)
pactl list short sinks

# ALSA
aplay -l
</code></pre>
<h3 id="macos"><a class="header" href="#macos">macOS</a></h3>
<ul>
<li>WAV files play natively</li>
<li>Uses Core Audio</li>
</ul>
<h2 id="troubleshooting-16"><a class="header" href="#troubleshooting-16">Troubleshooting</a></h2>
<h3 id="no-sound"><a class="header" href="#no-sound">No Sound</a></h3>
<ol>
<li>Check <code>[sound] enabled = true</code></li>
<li>Verify file path is correct</li>
<li>Test file with system player</li>
<li>Check volume settings</li>
</ol>
<h3 id="delayed-sound"><a class="header" href="#delayed-sound">Delayed Sound</a></h3>
<ol>
<li>Use WAV instead of MP3</li>
<li>Reduce file size</li>
<li>Check system audio latency</li>
</ol>
<h3 id="wrong-sound"><a class="header" href="#wrong-sound">Wrong Sound</a></h3>
<ol>
<li>Check pattern matching correctly</li>
<li>Verify highlight priority</li>
<li>Check for pattern conflicts</li>
</ol>
<h2 id="creating-custom-sounds"><a class="header" href="#creating-custom-sounds">Creating Custom Sounds</a></h2>
<h3 id="using-audacity"><a class="header" href="#using-audacity">Using Audacity</a></h3>
<ol>
<li>Open Audacity</li>
<li>Record or import audio</li>
<li>Trim to desired length (0.5-2 seconds recommended)</li>
<li>Export as WAV (16-bit PCM)</li>
<li>Save to <code>~/.vellum-fe/sounds/</code></li>
</ol>
<h3 id="sound-guidelines"><a class="header" href="#sound-guidelines">Sound Guidelines</a></h3>
<ul>
<li><strong>Duration</strong>: 0.5-2 seconds</li>
<li><strong>Format</strong>: WAV 16-bit PCM</li>
<li><strong>Sample rate</strong>: 44100 Hz</li>
<li><strong>Channels</strong>: Mono or Stereo</li>
<li><strong>File size</strong>: Keep under 500KB</li>
</ul>
<h2 id="sound-packs"><a class="header" href="#sound-packs">Sound Packs</a></h2>
<h3 id="creating-a-sound-pack"><a class="header" href="#creating-a-sound-pack">Creating a Sound Pack</a></h3>
<ol>
<li>Create themed sounds</li>
<li>Package in zip/tar</li>
<li>Include README with highlight configs</li>
<li>Share with community</li>
</ol>
<h3 id="installing-a-sound-pack"><a class="header" href="#installing-a-sound-pack">Installing a Sound Pack</a></h3>
<ol>
<li>Extract to <code>~/.vellum-fe/sounds/</code></li>
<li>Add highlights from pack’s config</li>
<li>Run <code>.reload highlights</code></li>
</ol>
<h2 id="see-also-32"><a class="header" href="#see-also-32">See Also</a></h2>
<ul>
<li><a href="#highlightstoml-reference">Highlights Configuration</a> - Pattern configuration</li>
<li><a href="#highlight-patterns">Highlight Patterns</a> - Pattern syntax</li>
<li><a href="#tts-setup">TTS Setup</a> - Text-to-speech alternative</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="tts-setup"><a class="header" href="#tts-setup">TTS Setup</a></h1>
<p>VellumFE supports text-to-speech (TTS) for accessibility and hands-free notifications.</p>
<h2 id="overview-18"><a class="header" href="#overview-18">Overview</a></h2>
<p>TTS features:</p>
<ul>
<li>Read game text aloud</li>
<li>Announce specific events</li>
<li>Screen reader compatibility</li>
<li>Multiple voice options</li>
</ul>
<h2 id="configuration-17"><a class="header" href="#configuration-17">Configuration</a></h2>
<h3 id="basic-setup"><a class="header" href="#basic-setup">Basic Setup</a></h3>
<p>In <code>config.toml</code>:</p>
<pre><code class="language-toml">[tts]
enabled = true
voice = "default"
rate = 1.0           # Speaking rate (0.5-2.0)
volume = 1.0         # Volume (0.0-1.0)
</code></pre>
<h3 id="voice-selection"><a class="header" href="#voice-selection">Voice Selection</a></h3>
<pre><code class="language-toml">[tts]
voice = "default"    # System default
# Or specific voice name from your system
voice = "Microsoft David"    # Windows
voice = "Alex"               # macOS
voice = "espeak"             # Linux
</code></pre>
<h2 id="stream-configuration"><a class="header" href="#stream-configuration">Stream Configuration</a></h2>
<p>Control which streams are spoken:</p>
<pre><code class="language-toml">[tts]
enabled = true
streams = ["main", "speech", "thoughts"]  # Streams to read

# Or exclude specific streams
exclude_streams = ["combat", "logons"]
</code></pre>
<h3 id="stream-options"><a class="header" href="#stream-options">Stream Options</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Stream</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>main</code></td><td>Main game output</td></tr>
<tr><td><code>speech</code></td><td>Player dialogue</td></tr>
<tr><td><code>thoughts</code></td><td>ESP/telepathy</td></tr>
<tr><td><code>combat</code></td><td>Combat messages</td></tr>
<tr><td><code>death</code></td><td>Death notices</td></tr>
<tr><td><code>logons</code></td><td>Login/logout</td></tr>
<tr><td><code>familiar</code></td><td>Familiar messages</td></tr>
</tbody>
</table>
</div>
<h2 id="pattern-based-tts"><a class="header" href="#pattern-based-tts">Pattern-Based TTS</a></h2>
<p>Speak only when patterns match:</p>
<pre><code class="language-toml">[[tts_patterns]]
name = "whisper_announce"
pattern = "whispers to you"
message = "You received a whisper"

[[tts_patterns]]
name = "death_announce"
pattern = "You have died"
message = "Warning: You have died"

[[tts_patterns]]
name = "stun_announce"
pattern = "You are stunned"
speak_match = true    # Speak the matched text
</code></pre>
<h3 id="pattern-properties"><a class="header" href="#pattern-properties">Pattern Properties</a></h3>
<pre><code class="language-toml">[[tts_patterns]]
name = "my_pattern"
pattern = "regex pattern"

# What to speak:
message = "Custom message"    # Speak this text
speak_match = true            # Speak matched text
speak_line = true             # Speak entire line

# Control:
priority = 100                # Higher = more important
rate = 1.5                    # Override speaking rate
volume = 1.0                  # Override volume
</code></pre>
<h2 id="platform-setup"><a class="header" href="#platform-setup">Platform Setup</a></h2>
<h3 id="windows-1"><a class="header" href="#windows-1">Windows</a></h3>
<p>Windows has built-in TTS (SAPI):</p>
<ol>
<li>TTS works out of the box</li>
<li>Configure voices in Windows Settings → Time &amp; Language → Speech</li>
<li>Install additional voices from Microsoft Store</li>
</ol>
<p>Available voices:</p>
<ul>
<li>Microsoft David (Male)</li>
<li>Microsoft Zira (Female)</li>
<li>Additional language packs</li>
</ul>
<pre><code class="language-toml">[tts]
enabled = true
voice = "Microsoft David"
</code></pre>
<h3 id="macos-1"><a class="header" href="#macos-1">macOS</a></h3>
<p>macOS uses built-in speech synthesis:</p>
<ol>
<li>TTS works out of the box</li>
<li>Configure in System Preferences → Accessibility → Spoken Content</li>
<li>Download additional voices</li>
</ol>
<p>Available voices:</p>
<ul>
<li>Alex (Male)</li>
<li>Samantha (Female)</li>
<li>Many international voices</li>
</ul>
<pre><code class="language-toml">[tts]
enabled = true
voice = "Alex"
</code></pre>
<h3 id="linux-1"><a class="header" href="#linux-1">Linux</a></h3>
<p>Linux requires a TTS engine:</p>
<h4 id="espeak"><a class="header" href="#espeak">eSpeak</a></h4>
<pre><code class="language-bash"># Debian/Ubuntu
sudo apt install espeak

# Fedora
sudo dnf install espeak

# Arch
sudo pacman -S espeak
</code></pre>
<pre><code class="language-toml">[tts]
enabled = true
engine = "espeak"
voice = "en"
</code></pre>
<h4 id="festival"><a class="header" href="#festival">Festival</a></h4>
<pre><code class="language-bash"># Debian/Ubuntu
sudo apt install festival

# Configure
sudo apt install festvox-kallpc16k
</code></pre>
<pre><code class="language-toml">[tts]
enabled = true
engine = "festival"
</code></pre>
<h4 id="speech-dispatcher"><a class="header" href="#speech-dispatcher">Speech Dispatcher</a></h4>
<pre><code class="language-bash"># Debian/Ubuntu
sudo apt install speech-dispatcher
spd-say "test"
</code></pre>
<pre><code class="language-toml">[tts]
enabled = true
engine = "speechd"
</code></pre>
<h2 id="rate-and-pitch"><a class="header" href="#rate-and-pitch">Rate and Pitch</a></h2>
<h3 id="speaking-rate"><a class="header" href="#speaking-rate">Speaking Rate</a></h3>
<pre><code class="language-toml">[tts]
rate = 1.0      # Normal speed
rate = 0.5      # Half speed (slower)
rate = 2.0      # Double speed (faster)
</code></pre>
<h3 id="pitch-if-supported"><a class="header" href="#pitch-if-supported">Pitch (if supported)</a></h3>
<pre><code class="language-toml">[tts]
pitch = 1.0     # Normal pitch
pitch = 0.8     # Lower pitch
pitch = 1.2     # Higher pitch
</code></pre>
<h2 id="accessibility-features"><a class="header" href="#accessibility-features">Accessibility Features</a></h2>
<h3 id="screen-reader-compatibility"><a class="header" href="#screen-reader-compatibility">Screen Reader Compatibility</a></h3>
<p>VellumFE works with screen readers:</p>
<ul>
<li>NVDA (Windows)</li>
<li>JAWS (Windows)</li>
<li>VoiceOver (macOS)</li>
<li>Orca (Linux)</li>
</ul>
<pre><code class="language-toml">[accessibility]
screen_reader_mode = true
announce_focus_changes = true
announce_new_content = true
</code></pre>
<h3 id="high-contrast-mode"><a class="header" href="#high-contrast-mode">High Contrast Mode</a></h3>
<p>Combine with TTS:</p>
<pre><code class="language-toml">[ui]
high_contrast = true

[tts]
enabled = true
announce_colors = false    # Don't read color codes
</code></pre>
<h2 id="tts-commands"><a class="header" href="#tts-commands">TTS Commands</a></h2>
<h3 id="toggle-tts"><a class="header" href="#toggle-tts">Toggle TTS</a></h3>
<pre><code>.tts on
.tts off
.tts toggle
</code></pre>
<h3 id="change-rate"><a class="header" href="#change-rate">Change Rate</a></h3>
<pre><code>.tts rate 1.5
</code></pre>
<h3 id="change-volume"><a class="header" href="#change-volume">Change Volume</a></h3>
<pre><code>.tts volume 0.8
</code></pre>
<h3 id="test-tts"><a class="header" href="#test-tts">Test TTS</a></h3>
<pre><code>.tts test "This is a test message"
</code></pre>
<h3 id="list-voices"><a class="header" href="#list-voices">List Voices</a></h3>
<pre><code>.tts voices
</code></pre>
<h2 id="common-patterns-2"><a class="header" href="#common-patterns-2">Common Patterns</a></h2>
<h3 id="combat-awareness"><a class="header" href="#combat-awareness">Combat Awareness</a></h3>
<pre><code class="language-toml">[[tts_patterns]]
name = "attack"
pattern = "(strikes|hits|bites) you"
message = "Under attack"
priority = 90

[[tts_patterns]]
name = "stunned"
pattern = "You are stunned"
message = "Stunned"
priority = 100

[[tts_patterns]]
name = "roundtime"
pattern = "Roundtime: (\\d+)"
message = "Roundtime"
</code></pre>
<h3 id="social-notifications"><a class="header" href="#social-notifications">Social Notifications</a></h3>
<pre><code class="language-toml">[[tts_patterns]]
name = "whisper"
pattern = "(\\w+) whispers,"
speak_match = true

[[tts_patterns]]
name = "name_mention"
pattern = "\\bYourCharacter\\b"
message = "Someone mentioned you"
</code></pre>
<h3 id="navigation-5"><a class="header" href="#navigation-5">Navigation</a></h3>
<pre><code class="language-toml">[[tts_patterns]]
name = "room_name"
pattern = "^\\[.*?\\]$"
speak_line = true

[[tts_patterns]]
name = "exits"
pattern = "Obvious (paths|exits):"
speak_line = true
</code></pre>
<h2 id="interruption"><a class="header" href="#interruption">Interruption</a></h2>
<p>Control how new speech interrupts current:</p>
<pre><code class="language-toml">[tts]
interrupt_mode = "queue"     # Wait for current to finish
interrupt_mode = "interrupt" # Stop current, start new
interrupt_mode = "priority"  # Interrupt only if higher priority
</code></pre>
<h2 id="troubleshooting-17"><a class="header" href="#troubleshooting-17">Troubleshooting</a></h2>
<h3 id="no-sound-1"><a class="header" href="#no-sound-1">No Sound</a></h3>
<ol>
<li>Check <code>[tts] enabled = true</code></li>
<li>Verify system TTS works:
<ul>
<li>Windows: <code>PowerShell: Add-Type -AssemblyName System.Speech; (New-Object System.Speech.Synthesis.SpeechSynthesizer).Speak("test")</code></li>
<li>macOS: <code>say "test"</code></li>
<li>Linux: <code>espeak "test"</code></li>
</ul>
</li>
<li>Check volume settings</li>
</ol>
<h3 id="wrong-voice"><a class="header" href="#wrong-voice">Wrong Voice</a></h3>
<ol>
<li>List available voices: <code>.tts voices</code></li>
<li>Set correct voice name exactly</li>
<li>Voice names are case-sensitive on some systems</li>
</ol>
<h3 id="too-fastslow"><a class="header" href="#too-fastslow">Too Fast/Slow</a></h3>
<p>Adjust rate:</p>
<pre><code class="language-toml">[tts]
rate = 0.8    # Slower
rate = 1.2    # Faster
</code></pre>
<h3 id="cuts-off"><a class="header" href="#cuts-off">Cuts Off</a></h3>
<p>Increase buffer or reduce interrupt:</p>
<pre><code class="language-toml">[tts]
interrupt_mode = "queue"
</code></pre>
<h2 id="see-also-33"><a class="header" href="#see-also-33">See Also</a></h2>
<ul>
<li><a href="#sound-alerts">Sound Alerts</a> - Audio alerts</li>
<li><a href="#accessibility-setup-1">Accessibility Tutorial</a> - Full accessibility setup</li>
<li><a href="#configtoml-reference">Configuration</a> - Full config reference</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="automation-overview"><a class="header" href="#automation-overview">Automation Overview</a></h1>
<p>VellumFE provides automation features to streamline repetitive tasks and enhance gameplay efficiency.</p>
<h2 id="automation-features"><a class="header" href="#automation-features">Automation Features</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Feature</th><th>Description</th><th>Use Case</th></tr>
</thead>
<tbody>
<tr><td><strong>Cmdlists</strong></td><td>Context menu commands</td><td>Right-click actions</td></tr>
<tr><td><strong>Macros</strong></td><td>Multi-command sequences</td><td>Complex actions</td></tr>
<tr><td><strong>Triggers</strong></td><td>Event-based responses</td><td>Automatic reactions</td></tr>
<tr><td><strong>Scripting</strong></td><td>Advanced automation</td><td>Custom logic</td></tr>
</tbody>
</table>
</div>
<h2 id="quick-start-1"><a class="header" href="#quick-start-1">Quick Start</a></h2>
<h3 id="simple-macro"><a class="header" href="#simple-macro">Simple Macro</a></h3>
<pre><code class="language-toml"># In keybinds.toml
[keybinds."f1"]
macro = "attack target"

[keybinds."f2"]
macro = "stance defensive;hide"
</code></pre>
<h3 id="context-menu-cmdlist"><a class="header" href="#context-menu-cmdlist">Context Menu (Cmdlist)</a></h3>
<pre><code class="language-toml"># In cmdlist.toml
[[cmdlist]]
noun = "sword"
commands = ["look", "get", "drop", "put in backpack"]
</code></pre>
<h3 id="trigger"><a class="header" href="#trigger">Trigger</a></h3>
<pre><code class="language-toml"># In triggers.toml
[[triggers]]
pattern = "You are stunned"
command = ".say Stunned!"
</code></pre>
<h2 id="automation-philosophy"><a class="header" href="#automation-philosophy">Automation Philosophy</a></h2>
<h3 id="enhancement-not-replacement"><a class="header" href="#enhancement-not-replacement">Enhancement, Not Replacement</a></h3>
<p>VellumFE automation is designed to:</p>
<ul>
<li><strong>Reduce tedium</strong> - Automate repetitive tasks</li>
<li><strong>Speed up common actions</strong> - Quick access to frequent commands</li>
<li><strong>Provide alerts</strong> - Notify of important events</li>
</ul>
<h3 id="not-designed-for"><a class="header" href="#not-designed-for">Not Designed For</a></h3>
<ul>
<li>Fully automated hunting</li>
<li>AFK gameplay</li>
<li>Botting</li>
</ul>
<h2 id="automation-levels"><a class="header" href="#automation-levels">Automation Levels</a></h2>
<h3 id="level-1-keybind-macros"><a class="header" href="#level-1-keybind-macros">Level 1: Keybind Macros</a></h3>
<p>Simple command sequences bound to keys:</p>
<pre><code class="language-toml">[keybinds."ctrl+1"]
macro = "prep 101;cast"
</code></pre>
<p><strong>Best for:</strong> Frequent, simple commands</p>
<h3 id="level-2-context-menus"><a class="header" href="#level-2-context-menus">Level 2: Context Menus</a></h3>
<p>Right-click commands for objects:</p>
<pre><code class="language-toml">[[cmdlist]]
noun = "creature"
commands = ["attack", "look", "assess"]
</code></pre>
<p><strong>Best for:</strong> Object-specific actions</p>
<h3 id="level-3-triggers"><a class="header" href="#level-3-triggers">Level 3: Triggers</a></h3>
<p>Automatic responses to game events:</p>
<pre><code class="language-toml">[[triggers]]
pattern = "roundtime"
command = ".notify"
</code></pre>
<p><strong>Best for:</strong> Status monitoring, alerts</p>
<h3 id="level-4-scripts-future"><a class="header" href="#level-4-scripts-future">Level 4: Scripts (Future)</a></h3>
<p>Complex conditional logic:</p>
<pre><code class="language-lua">-- Future scripting API
on_event("stun", function()
    if health() &lt; 50 then
        send("flee")
    end
end)
</code></pre>
<p><strong>Best for:</strong> Complex decision-making</p>
<h2 id="safety-guidelines"><a class="header" href="#safety-guidelines">Safety Guidelines</a></h2>
<h3 id="avoid-detection-issues"><a class="header" href="#avoid-detection-issues">Avoid Detection Issues</a></h3>
<ul>
<li>Don’t automate too quickly</li>
<li>Add reasonable delays</li>
<li>Keep human-like timing</li>
<li>Don’t automate core gameplay</li>
</ul>
<h3 id="respect-game-rules"><a class="header" href="#respect-game-rules">Respect Game Rules</a></h3>
<p>Check game policies on automation:</p>
<ul>
<li>Some automation is allowed</li>
<li>Unattended automation may not be</li>
<li>When in doubt, don’t automate</li>
</ul>
<h3 id="test-safely"><a class="header" href="#test-safely">Test Safely</a></h3>
<p>Test automation in safe areas:</p>
<ul>
<li>Town squares</li>
<li>Non-combat zones</li>
<li>With backup plans</li>
</ul>
<h2 id="automation-guides"><a class="header" href="#automation-guides">Automation Guides</a></h2>
<p>This section covers:</p>
<ul>
<li><a href="#command-lists-cmdlists">Cmdlists</a> - Context menu system</li>
<li><a href="#macros-1">Macros</a> - Multi-command keybinds</li>
<li><a href="#triggers">Triggers</a> - Event-based automation</li>
<li><a href="#scripting-future">Scripting</a> - Advanced automation (future)</li>
</ul>
<h2 id="common-automation-tasks"><a class="header" href="#common-automation-tasks">Common Automation Tasks</a></h2>
<h3 id="combat-efficiency"><a class="header" href="#combat-efficiency">Combat Efficiency</a></h3>
<ul>
<li>Quick spell casting (macros)</li>
<li>Target selection (cmdlist)</li>
<li>Status alerts (triggers)</li>
</ul>
<h3 id="inventory-management"><a class="header" href="#inventory-management">Inventory Management</a></h3>
<ul>
<li>Quick get/drop commands</li>
<li>Container management</li>
<li>Sorting actions</li>
</ul>
<h3 id="navigation-6"><a class="header" href="#navigation-6">Navigation</a></h3>
<ul>
<li>Direction macros</li>
<li>Room scanning</li>
<li>Exit shortcuts</li>
</ul>
<h3 id="social"><a class="header" href="#social">Social</a></h3>
<ul>
<li>Quick emotes</li>
<li>Response macros</li>
<li>Greeting templates</li>
</ul>
<h2 id="see-also-34"><a class="header" href="#see-also-34">See Also</a></h2>
<ul>
<li><a href="#keybind-actions">Keybind Actions</a> - All keybind options</li>
<li><a href="#highlight-patterns">Highlight Patterns</a> - Pattern matching</li>
<li><a href="#sound-alerts">Sound Alerts</a> - Audio notifications</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="command-lists-cmdlists"><a class="header" href="#command-lists-cmdlists">Command Lists (Cmdlists)</a></h1>
<p>Command lists provide context menu actions for clickable objects in the game.</p>
<h2 id="overview-19"><a class="header" href="#overview-19">Overview</a></h2>
<p>When you right-click on a game object (creature, item, player), VellumFE shows a context menu with relevant commands.</p>
<pre><code>┌─────────────────┐
│ a rusty sword   │
├─────────────────┤
│ Look            │
│ Get             │
│ Drop            │
│ Put in backpack │
│ Appraise        │
└─────────────────┘
</code></pre>
<h2 id="configuration-18"><a class="header" href="#configuration-18">Configuration</a></h2>
<h3 id="basic-cmdlist"><a class="header" href="#basic-cmdlist">Basic Cmdlist</a></h3>
<p>In <code>cmdlist.toml</code>:</p>
<pre><code class="language-toml">[[cmdlist]]
noun = "sword"
commands = ["look", "get", "drop", "appraise"]
</code></pre>
<h3 id="cmdlist-properties"><a class="header" href="#cmdlist-properties">Cmdlist Properties</a></h3>
<pre><code class="language-toml">[[cmdlist]]
noun = "creature"       # Object noun to match
commands = [            # Available commands
    "attack",
    "look",
    "assess"
]
priority = 100          # Higher = appears first
category = "combat"     # Optional grouping
</code></pre>
<h2 id="noun-matching"><a class="header" href="#noun-matching">Noun Matching</a></h2>
<h3 id="exact-match"><a class="header" href="#exact-match">Exact Match</a></h3>
<pre><code class="language-toml">[[cmdlist]]
noun = "sword"
commands = ["look", "get"]
</code></pre>
<p>Matches: “sword”, not “longsword”</p>
<h3 id="partial-match"><a class="header" href="#partial-match">Partial Match</a></h3>
<pre><code class="language-toml">[[cmdlist]]
noun = "sword"
match_mode = "contains"
commands = ["look", "get"]
</code></pre>
<p>Matches: “sword”, “longsword”, “shortsword”</p>
<h3 id="pattern-match"><a class="header" href="#pattern-match">Pattern Match</a></h3>
<pre><code class="language-toml">[[cmdlist]]
noun = "(?i).*sword.*"
match_mode = "regex"
commands = ["look", "get"]
</code></pre>
<p>Matches any noun containing “sword” (case-insensitive)</p>
<h2 id="command-syntax"><a class="header" href="#command-syntax">Command Syntax</a></h2>
<h3 id="simple-command"><a class="header" href="#simple-command">Simple Command</a></h3>
<pre><code class="language-toml">commands = ["look", "get", "drop"]
# Results in: look {noun}, get {noun}, drop {noun}
</code></pre>
<h3 id="custom-command-format"><a class="header" href="#custom-command-format">Custom Command Format</a></h3>
<pre><code class="language-toml">commands = [
    "look",
    "get",
    "put in backpack:put {noun} in my backpack",
    "give to:give {noun} to {target}"
]
</code></pre>
<p>Format: <code>label:command</code> or just <code>command</code></p>
<h3 id="variables"><a class="header" href="#variables">Variables</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Variable</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>{noun}</code></td><td>Object noun</td></tr>
<tr><td><code>{exist}</code></td><td>Object ID</td></tr>
<tr><td><code>{target}</code></td><td>Prompted target</td></tr>
<tr><td><code>{input}</code></td><td>Prompted input</td></tr>
</tbody>
</table>
</div>
<h2 id="categories"><a class="header" href="#categories">Categories</a></h2>
<h3 id="default-categories"><a class="header" href="#default-categories">Default Categories</a></h3>
<pre><code class="language-toml"># Creature commands
[[cmdlist]]
category = "creature"
noun = ".*"
match_mode = "regex"
commands = ["attack", "look", "assess"]
priority = 10

# Container commands
[[cmdlist]]
category = "container"
noun = "(?i)(backpack|bag|pouch|sack)"
match_mode = "regex"
commands = ["look in", "open", "close"]
priority = 20
</code></pre>
<h3 id="custom-categories"><a class="header" href="#custom-categories">Custom Categories</a></h3>
<pre><code class="language-toml">[[cmdlist]]
category = "alchemy"
noun = "(?i)(vial|potion|herb)"
match_mode = "regex"
commands = [
    "look",
    "get",
    "drink:drink my {noun}",
    "mix:mix my {noun}"
]
</code></pre>
<h2 id="common-cmdlists"><a class="header" href="#common-cmdlists">Common Cmdlists</a></h2>
<h3 id="creatures"><a class="header" href="#creatures">Creatures</a></h3>
<pre><code class="language-toml">[[cmdlist]]
category = "combat"
noun = ".*"  # Default for all creatures
match_mode = "regex"
commands = [
    "attack",
    "attack left",
    "attack right",
    "look",
    "assess"
]
priority = 10
</code></pre>
<h3 id="weapons"><a class="header" href="#weapons">Weapons</a></h3>
<pre><code class="language-toml">[[cmdlist]]
category = "weapon"
noun = "(?i)(sword|dagger|axe|mace|staff)"
match_mode = "regex"
commands = [
    "look",
    "get",
    "drop",
    "wield",
    "sheath",
    "appraise"
]
</code></pre>
<h3 id="containers"><a class="header" href="#containers">Containers</a></h3>
<pre><code class="language-toml">[[cmdlist]]
category = "container"
noun = "(?i)(backpack|bag|pouch|cloak|sack)"
match_mode = "regex"
commands = [
    "look in",
    "open",
    "close",
    "get from:get {input} from my {noun}"
]
</code></pre>
<h3 id="players-1"><a class="header" href="#players-1">Players</a></h3>
<pre><code class="language-toml">[[cmdlist]]
category = "player"
noun = "^[A-Z][a-z]+$"  # Capitalized names
match_mode = "regex"
commands = [
    "look",
    "smile",
    "bow",
    "whisper:whisper {noun} {input}",
    "give:give {input} to {noun}"
]
</code></pre>
<h3 id="herbsalchemy"><a class="header" href="#herbsalchemy">Herbs/Alchemy</a></h3>
<pre><code class="language-toml">[[cmdlist]]
category = "herb"
noun = "(?i)(acantha|ambrominas|basal|cactacae)"
match_mode = "regex"
commands = [
    "look",
    "get",
    "eat",
    "put in:put my {noun} in my {input}"
]
</code></pre>
<h3 id="gemstreasure"><a class="header" href="#gemstreasure">Gems/Treasure</a></h3>
<pre><code class="language-toml">[[cmdlist]]
category = "treasure"
noun = "(?i)(gem|jewel|coin|gold|silver)"
match_mode = "regex"
commands = [
    "look",
    "get",
    "appraise",
    "sell"
]
</code></pre>
<h2 id="menu-separators"><a class="header" href="#menu-separators">Menu Separators</a></h2>
<p>Add visual separators:</p>
<pre><code class="language-toml">[[cmdlist]]
noun = "sword"
commands = [
    "look",
    "get",
    "---",           # Separator
    "wield",
    "sheath",
    "---",
    "appraise",
    "sell"
]
</code></pre>
<h2 id="submenus"><a class="header" href="#submenus">Submenus</a></h2>
<p>Create nested menus:</p>
<pre><code class="language-toml">[[cmdlist]]
noun = "sword"
commands = [
    "look",
    "get",
    "Combat&gt;attack,attack left,attack right",
    "Container&gt;put in backpack:put {noun} in my backpack,put in sack:put {noun} in my sack"
]
</code></pre>
<h2 id="priority-system-2"><a class="header" href="#priority-system-2">Priority System</a></h2>
<p>Higher priority cmdlists appear first:</p>
<pre><code class="language-toml"># Specific override
[[cmdlist]]
noun = "magic sword"
commands = ["invoke", "look", "get"]
priority = 100         # High priority

# General fallback
[[cmdlist]]
noun = "(?i).*sword.*"
match_mode = "regex"
commands = ["look", "get"]
priority = 10          # Lower priority
</code></pre>
<h2 id="game-object-links"><a class="header" href="#game-object-links">Game Object Links</a></h2>
<p>VellumFE extracts object data from game XML:</p>
<pre><code class="language-xml">&lt;a exist="12345" noun="sword"&gt;a rusty sword&lt;/a&gt;
</code></pre>
<ul>
<li><code>exist</code>: Object ID for direct commands</li>
<li><code>noun</code>: Used for cmdlist matching</li>
<li>Text: Display name</li>
</ul>
<h2 id="direct-commands"><a class="header" href="#direct-commands">Direct Commands</a></h2>
<p>Use object ID for precise targeting:</p>
<pre><code class="language-toml">[[cmdlist]]
noun = "sword"
commands = [
    "look",
    "_inspect {exist}",      # Uses object ID
    "get #{exist}",          # Direct reference
]
</code></pre>
<h2 id="testing-cmdlists"><a class="header" href="#testing-cmdlists">Testing Cmdlists</a></h2>
<ol>
<li>Save <code>cmdlist.toml</code></li>
<li>Run <code>.reload cmdlist</code></li>
<li>Right-click on matching object</li>
<li>Verify menu appears correctly</li>
</ol>
<h2 id="troubleshooting-18"><a class="header" href="#troubleshooting-18">Troubleshooting</a></h2>
<h3 id="menu-not-appearing"><a class="header" href="#menu-not-appearing">Menu Not Appearing</a></h3>
<ol>
<li>Check noun matches object exactly</li>
<li>Try <code>match_mode = "contains"</code></li>
<li>Verify cmdlist.toml syntax</li>
<li>Run <code>.reload cmdlist</code></li>
</ol>
<h3 id="wrong-commands"><a class="header" href="#wrong-commands">Wrong Commands</a></h3>
<ol>
<li>Check priority order</li>
<li>Verify pattern matching</li>
<li>Test with exact noun match first</li>
</ol>
<h3 id="variables-not-replaced"><a class="header" href="#variables-not-replaced">Variables Not Replaced</a></h3>
<ol>
<li>Check variable syntax <code>{noun}</code>, <code>{exist}</code></li>
<li>Ensure object has required data</li>
<li>Check for typos in variable names</li>
</ol>
<h2 id="complete-example-2"><a class="header" href="#complete-example-2">Complete Example</a></h2>
<pre><code class="language-toml"># cmdlist.toml

# Combat creatures
[[cmdlist]]
category = "combat"
noun = ".*"
match_mode = "regex"
commands = [
    "attack",
    "attack left",
    "attack right",
    "---",
    "look",
    "assess"
]
priority = 5

# Weapons
[[cmdlist]]
category = "weapon"
noun = "(?i)(sword|dagger|axe|mace|staff|bow)"
match_mode = "regex"
commands = [
    "look",
    "get",
    "---",
    "wield",
    "sheath",
    "---",
    "appraise"
]
priority = 20

# Containers
[[cmdlist]]
category = "container"
noun = "(?i)(backpack|bag|pouch|cloak|sack|chest)"
match_mode = "regex"
commands = [
    "look in",
    "open",
    "close",
    "---",
    "get from:get {input} from my {noun}"
]
priority = 20

# Currency
[[cmdlist]]
category = "currency"
noun = "(?i)(silver|gold|coins?)"
match_mode = "regex"
commands = [
    "look",
    "get",
    "count"
]
priority = 15

# Players
[[cmdlist]]
category = "player"
noun = "^[A-Z][a-z]+$"
match_mode = "regex"
commands = [
    "look",
    "---",
    "smile",
    "wave",
    "bow",
    "---",
    "whisper:whisper {noun} {input}",
    "give:give {input} to {noun}"
]
priority = 25
</code></pre>
<h2 id="see-also-35"><a class="header" href="#see-also-35">See Also</a></h2>
<ul>
<li><a href="#macros-1">Macros</a> - Keybind automation</li>
<li><a href="#keybind-actions">Keybind Actions</a> - Key commands</li>
<li><a href="#command-input-1">Command Input</a> - Command entry</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="macros-1"><a class="header" href="#macros-1">Macros</a></h1>
<p>Macros allow you to bind multiple commands to a single key press.</p>
<h2 id="overview-20"><a class="header" href="#overview-20">Overview</a></h2>
<p>Macros send game commands when you press a key:</p>
<pre><code class="language-toml"># In keybinds.toml
[keybinds."f1"]
macro = "attack target"

[keybinds."ctrl+1"]
macro = "prep 101;cast"
</code></pre>
<h2 id="basic-macros"><a class="header" href="#basic-macros">Basic Macros</a></h2>
<h3 id="single-command"><a class="header" href="#single-command">Single Command</a></h3>
<pre><code class="language-toml">[keybinds."f1"]
macro = "attack target"
</code></pre>
<p>Press F1 → Sends “attack target” to game</p>
<h3 id="multiple-commands"><a class="header" href="#multiple-commands">Multiple Commands</a></h3>
<p>Separate commands with semicolons:</p>
<pre><code class="language-toml">[keybinds."f2"]
macro = "stance offensive;attack target"
</code></pre>
<p>Press F2 → Sends both commands in sequence</p>
<h2 id="command-sequences"><a class="header" href="#command-sequences">Command Sequences</a></h2>
<h3 id="combat-sequence"><a class="header" href="#combat-sequence">Combat Sequence</a></h3>
<pre><code class="language-toml">[keybinds."f5"]
macro = "stance offensive;attack target;stance defensive"
</code></pre>
<h3 id="spell-casting"><a class="header" href="#spell-casting">Spell Casting</a></h3>
<pre><code class="language-toml">[keybinds."ctrl+1"]
macro = "prep 101;cast"

[keybinds."ctrl+2"]
macro = "prep 103;cast target"

[keybinds."ctrl+3"]
macro = "incant 107"
</code></pre>
<h3 id="movement"><a class="header" href="#movement">Movement</a></h3>
<pre><code class="language-toml">[keybinds."numpad8"]
macro = "go north"

[keybinds."numpad2"]
macro = "go south"

[keybinds."numpad4"]
macro = "go west"

[keybinds."numpad6"]
macro = "go east"

[keybinds."numpad5"]
macro = "out"
</code></pre>
<h2 id="delays"><a class="header" href="#delays">Delays</a></h2>
<p>Add delays between commands (in milliseconds):</p>
<pre><code class="language-toml">[keybinds."f5"]
macro = "prep 101;{500};cast"
# Wait 500ms between prep and cast
</code></pre>
<h3 id="delay-syntax"><a class="header" href="#delay-syntax">Delay Syntax</a></h3>
<pre><code class="language-toml">macro = "command1;{1000};command2"
# {1000} = 1 second delay
</code></pre>
<h3 id="example-careful-spellcasting"><a class="header" href="#example-careful-spellcasting">Example: Careful Spellcasting</a></h3>
<pre><code class="language-toml">[keybinds."f6"]
macro = "prep 901;{2000};cast target"
# Prep spell, wait 2 seconds for mana, cast
</code></pre>
<h2 id="variables-1"><a class="header" href="#variables-1">Variables</a></h2>
<h3 id="input-prompt"><a class="header" href="#input-prompt">Input Prompt</a></h3>
<pre><code class="language-toml">[keybinds."ctrl+g"]
macro = "go $input"
</code></pre>
<p>Press Ctrl+G → Prompts for direction → Sends “go <input>”</p>
<h3 id="target-variable"><a class="header" href="#target-variable">Target Variable</a></h3>
<pre><code class="language-toml">[keybinds."f1"]
macro = "attack $target"
</code></pre>
<p>Uses current target if set, or prompts.</p>
<h3 id="last-target"><a class="header" href="#last-target">Last Target</a></h3>
<pre><code class="language-toml">[keybinds."f2"]
macro = "attack $lasttarget"
</code></pre>
<p>Attacks the last targeted creature.</p>
<h2 id="conditional-macros"><a class="header" href="#conditional-macros">Conditional Macros</a></h2>
<h3 id="with-input-check"><a class="header" href="#with-input-check">With Input Check</a></h3>
<pre><code class="language-toml">[keybinds."f5"]
macro = "$input:prep $input;cast"
# Only executes if input provided
</code></pre>
<h3 id="multiple-inputs"><a class="header" href="#multiple-inputs">Multiple Inputs</a></h3>
<pre><code class="language-toml">[keybinds."f6"]
macro = "give $input1 to $input2"
# Prompts for two inputs
</code></pre>
<h2 id="common-macro-patterns"><a class="header" href="#common-macro-patterns">Common Macro Patterns</a></h2>
<h3 id="quick-attacks"><a class="header" href="#quick-attacks">Quick Attacks</a></h3>
<pre><code class="language-toml">[keybinds."f1"]
macro = "attack target"

[keybinds."f2"]
macro = "attack left target"

[keybinds."f3"]
macro = "attack right target"

[keybinds."f4"]
macro = "feint target"
</code></pre>
<h3 id="defensive-moves"><a class="header" href="#defensive-moves">Defensive Moves</a></h3>
<pre><code class="language-toml">[keybinds."f5"]
macro = "stance defensive"

[keybinds."f6"]
macro = "hide"

[keybinds."f7"]
macro = "evade"
</code></pre>
<h3 id="stance-cycling"><a class="header" href="#stance-cycling">Stance Cycling</a></h3>
<pre><code class="language-toml">[keybinds."ctrl+up"]
macro = "stance offensive"

[keybinds."ctrl+down"]
macro = "stance defensive"

[keybinds."ctrl+left"]
macro = "stance neutral"
</code></pre>
<h3 id="looting"><a class="header" href="#looting">Looting</a></h3>
<pre><code class="language-toml">[keybinds."ctrl+l"]
macro = "search;loot"

[keybinds."ctrl+shift+l"]
macro = "search;loot;skin"
</code></pre>
<h3 id="information"><a class="header" href="#information">Information</a></h3>
<pre><code class="language-toml">[keybinds."i"]
macro = "inventory"

[keybinds."ctrl+i"]
macro = "inventory full"

[keybinds."ctrl+e"]
macro = "experience"

[keybinds."ctrl+w"]
macro = "wealth"
</code></pre>
<h3 id="healing-1"><a class="header" href="#healing-1">Healing</a></h3>
<pre><code class="language-toml"># Empath healing
[keybinds."ctrl+h"]
macro = "transfer $target"

# Herb usage
[keybinds."ctrl+1"]
macro = "get acantha from my herb pouch;eat my acantha"

[keybinds."ctrl+2"]
macro = "get basal from my herb pouch;eat my basal"
</code></pre>
<h3 id="social-1"><a class="header" href="#social-1">Social</a></h3>
<pre><code class="language-toml">[keybinds."ctrl+s"]
macro = "smile"

[keybinds."ctrl+b"]
macro = "bow"

[keybinds."ctrl+w"]
macro = "wave"

[keybinds."ctrl+g"]
macro = "greet $target"
</code></pre>
<h2 id="macro-organization"><a class="header" href="#macro-organization">Macro Organization</a></h2>
<h3 id="by-activity"><a class="header" href="#by-activity">By Activity</a></h3>
<pre><code class="language-toml"># === COMBAT ===
[keybinds."f1"]
macro = "attack target"

[keybinds."f2"]
macro = "stance defensive"

# === SPELLS ===
[keybinds."ctrl+1"]
macro = "prep 101;cast"

# === MOVEMENT ===
[keybinds."numpad8"]
macro = "go north"

# === SOCIAL ===
[keybinds."ctrl+s"]
macro = "smile"
</code></pre>
<h3 id="by-profession"><a class="header" href="#by-profession">By Profession</a></h3>
<p>Create character-specific keybinds:</p>
<pre><code>~/.vellum-fe/characters/Warrior/keybinds.toml
~/.vellum-fe/characters/Wizard/keybinds.toml
</code></pre>
<h2 id="advanced-macros"><a class="header" href="#advanced-macros">Advanced Macros</a></h2>
<h3 id="complex-combat-routine"><a class="header" href="#complex-combat-routine">Complex Combat Routine</a></h3>
<pre><code class="language-toml">[keybinds."f10"]
macro = "stance offensive;{100};attack target;{500};stance defensive"
</code></pre>
<h3 id="merchant-interaction"><a class="header" href="#merchant-interaction">Merchant Interaction</a></h3>
<pre><code class="language-toml">[keybinds."ctrl+m"]
macro = "order $input;buy"
</code></pre>
<h3 id="container-management"><a class="header" href="#container-management">Container Management</a></h3>
<pre><code class="language-toml">[keybinds."ctrl+p"]
macro = "put $input in my backpack"

[keybinds."ctrl+shift+p"]
macro = "get $input from my backpack"
</code></pre>
<h2 id="troubleshooting-19"><a class="header" href="#troubleshooting-19">Troubleshooting</a></h2>
<h3 id="macro-not-executing"><a class="header" href="#macro-not-executing">Macro Not Executing</a></h3>
<ol>
<li>Check key format is correct</li>
<li>Verify keybinds.toml syntax</li>
<li>Run <code>.reload keybinds</code></li>
<li>Check for key conflicts</li>
</ol>
<h3 id="commands-out-of-order"><a class="header" href="#commands-out-of-order">Commands Out of Order</a></h3>
<p>Add delays:</p>
<pre><code class="language-toml">macro = "command1;{500};command2"
</code></pre>
<h3 id="input-prompt-not-appearing"><a class="header" href="#input-prompt-not-appearing">Input Prompt Not Appearing</a></h3>
<ol>
<li>Check <code>$input</code> syntax</li>
<li>Verify focus is on game</li>
<li>Check for conflicting keybinds</li>
</ol>
<h3 id="multiple-commands-failing"><a class="header" href="#multiple-commands-failing">Multiple Commands Failing</a></h3>
<p>Some games have command limits:</p>
<ul>
<li>Add delays between commands</li>
<li>Break into separate macros</li>
<li>Check game’s command queue limit</li>
</ul>
<h2 id="best-practices"><a class="header" href="#best-practices">Best Practices</a></h2>
<ol>
<li><strong>Keep macros simple</strong> - Complex macros are harder to debug</li>
<li><strong>Add delays when needed</strong> - Prevents command flooding</li>
<li><strong>Test in safe areas</strong> - Verify before combat use</li>
<li><strong>Document your macros</strong> - Add comments to keybinds.toml</li>
<li><strong>Use consistent keys</strong> - Group related macros logically</li>
</ol>
<h2 id="see-also-36"><a class="header" href="#see-also-36">See Also</a></h2>
<ul>
<li><a href="#keybind-actions">Keybind Actions</a> - All keybind options</li>
<li><a href="#keybindstoml-reference">Keybinds Configuration</a> - Full reference</li>
<li><a href="#command-lists-cmdlists">Cmdlists</a> - Context menu commands</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="triggers"><a class="header" href="#triggers">Triggers</a></h1>
<p>Triggers automatically execute commands when specific text patterns appear in the game.</p>
<h2 id="overview-21"><a class="header" href="#overview-21">Overview</a></h2>
<p>Triggers watch for patterns and respond:</p>
<pre><code class="language-toml"># In triggers.toml
[[triggers]]
pattern = "You are stunned"
command = ".say Stunned!"

[[triggers]]
pattern = "falls dead"
command = "search;loot"
</code></pre>
<h2 id="basic-triggers"><a class="header" href="#basic-triggers">Basic Triggers</a></h2>
<h3 id="simple-trigger"><a class="header" href="#simple-trigger">Simple Trigger</a></h3>
<pre><code class="language-toml">[[triggers]]
name = "stun_alert"
pattern = "You are stunned"
command = ".notify Stunned!"
</code></pre>
<h3 id="multiple-commands-1"><a class="header" href="#multiple-commands-1">Multiple Commands</a></h3>
<pre><code class="language-toml">[[triggers]]
name = "death_loot"
pattern = "falls dead"
command = "search;loot"
</code></pre>
<h2 id="trigger-properties"><a class="header" href="#trigger-properties">Trigger Properties</a></h2>
<pre><code class="language-toml">[[triggers]]
name = "my_trigger"           # Unique name
pattern = "regex pattern"     # Pattern to match
command = "game command"      # Command to execute

# Optional properties
enabled = true                # Enable/disable
priority = 100                # Higher = checked first
stream = "main"               # Limit to specific stream
cooldown = 1000               # Minimum ms between triggers
category = "combat"           # Grouping
</code></pre>
<h2 id="pattern-syntax-1"><a class="header" href="#pattern-syntax-1">Pattern Syntax</a></h2>
<p>Triggers use regex patterns:</p>
<h3 id="literal-text-1"><a class="header" href="#literal-text-1">Literal Text</a></h3>
<pre><code class="language-toml">pattern = "You are stunned"
</code></pre>
<h3 id="case-insensitive"><a class="header" href="#case-insensitive">Case Insensitive</a></h3>
<pre><code class="language-toml">pattern = "(?i)you are stunned"
</code></pre>
<h3 id="word-boundaries"><a class="header" href="#word-boundaries">Word Boundaries</a></h3>
<pre><code class="language-toml">pattern = "\\bstunned\\b"
</code></pre>
<h3 id="capture-groups"><a class="header" href="#capture-groups">Capture Groups</a></h3>
<pre><code class="language-toml">pattern = "(\\w+) falls dead"
command = "search #{noun}"
</code></pre>
<h3 id="multiple-patterns"><a class="header" href="#multiple-patterns">Multiple Patterns</a></h3>
<pre><code class="language-toml">pattern = "(stun|web|prone)"
</code></pre>
<h2 id="command-options"><a class="header" href="#command-options">Command Options</a></h2>
<h3 id="game-commands"><a class="header" href="#game-commands">Game Commands</a></h3>
<pre><code class="language-toml">command = "attack target"
</code></pre>
<h3 id="client-commands"><a class="header" href="#client-commands">Client Commands</a></h3>
<pre><code class="language-toml">command = ".notify Alert!"      # VellumFE command
command = ".sound alert.wav"    # Play sound
command = ".tts Danger!"        # Text-to-speech
</code></pre>
<h3 id="multiple-commands-1-1"><a class="header" href="#multiple-commands-1-1">Multiple Commands</a></h3>
<pre><code class="language-toml">command = "search;loot;skin"
</code></pre>
<h3 id="with-delay"><a class="header" href="#with-delay">With Delay</a></h3>
<pre><code class="language-toml">command = "prep 101;{500};cast"
</code></pre>
<h2 id="captured-variables"><a class="header" href="#captured-variables">Captured Variables</a></h2>
<p>Use captured groups in commands:</p>
<pre><code class="language-toml">[[triggers]]
pattern = "(\\w+) whispers,"
command = ".notify Whisper from $1"
# $1 = captured name
</code></pre>
<h3 id="variable-reference"><a class="header" href="#variable-reference">Variable Reference</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Variable</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>$0</code></td><td>Entire match</td></tr>
<tr><td><code>$1</code></td><td>First capture group</td></tr>
<tr><td><code>$2</code></td><td>Second capture group</td></tr>
<tr><td><code>$n</code></td><td>Nth capture group</td></tr>
</tbody>
</table>
</div>
<h2 id="stream-filtering-2"><a class="header" href="#stream-filtering-2">Stream Filtering</a></h2>
<p>Limit triggers to specific streams:</p>
<pre><code class="language-toml">[[triggers]]
pattern = "ESP"
command = ".notify ESP received"
stream = "thoughts"

[[triggers]]
pattern = "attack"
command = ".beep"
stream = "combat"
</code></pre>
<h2 id="cooldowns"><a class="header" href="#cooldowns">Cooldowns</a></h2>
<p>Prevent rapid-fire triggers:</p>
<pre><code class="language-toml">[[triggers]]
pattern = "You are hit"
command = ".sound hit.wav"
cooldown = 500     # Only trigger once per 500ms
</code></pre>
<h2 id="common-triggers"><a class="header" href="#common-triggers">Common Triggers</a></h2>
<h3 id="combat-alerts-1"><a class="header" href="#combat-alerts-1">Combat Alerts</a></h3>
<pre><code class="language-toml"># Stunned
[[triggers]]
name = "stun_alert"
pattern = "You are stunned"
command = ".notify Stunned!"
category = "combat"

# Webbed
[[triggers]]
name = "web_alert"
pattern = "webs stick to you"
command = ".notify Webbed!"
category = "combat"

# Low health
[[triggers]]
name = "low_health"
pattern = "You feel weak"
command = ".notify Low Health!;stance defensive"
category = "combat"
priority = 100
</code></pre>
<h3 id="social-alerts-1"><a class="header" href="#social-alerts-1">Social Alerts</a></h3>
<pre><code class="language-toml"># Whispers
[[triggers]]
name = "whisper"
pattern = "(\\w+) whispers,"
command = ".notify Whisper from $1"
category = "social"

# Name mentioned
[[triggers]]
name = "name_mention"
pattern = "\\bYourCharacter\\b"
command = ".sound mention.wav"
category = "social"
</code></pre>
<h3 id="loot-triggers"><a class="header" href="#loot-triggers">Loot Triggers</a></h3>
<pre><code class="language-toml"># Auto-search on kill
[[triggers]]
name = "auto_search"
pattern = "falls dead"
command = "search"
cooldown = 1000
category = "loot"

# Treasure alert
[[triggers]]
name = "treasure"
pattern = "(?i)treasure|gold|gems"
command = ".notify Treasure!"
category = "loot"
</code></pre>
<h3 id="status-triggers"><a class="header" href="#status-triggers">Status Triggers</a></h3>
<pre><code class="language-toml"># Roundtime tracker
[[triggers]]
name = "roundtime"
pattern = "Roundtime: (\\d+)"
command = ".countdown $1"
category = "status"

# Hidden status
[[triggers]]
name = "hidden"
pattern = "You melt into the shadows"
command = ".notify Hidden"
category = "status"
</code></pre>
<h2 id="priority-system-3"><a class="header" href="#priority-system-3">Priority System</a></h2>
<p>Higher priority triggers are checked first:</p>
<pre><code class="language-toml">[[triggers]]
name = "critical_danger"
pattern = "dragon"
command = "flee"
priority = 100      # Highest priority

[[triggers]]
name = "general_alert"
pattern = "attacks you"
command = ".beep"
priority = 10       # Lower priority
</code></pre>
<h2 id="conditional-triggers"><a class="header" href="#conditional-triggers">Conditional Triggers</a></h2>
<h3 id="with-capture-check"><a class="header" href="#with-capture-check">With Capture Check</a></h3>
<pre><code class="language-toml">[[triggers]]
pattern = "(\\w+) says, \"(.+)\""
command = ".log $1: $2"
# Only triggers if both captures match
</code></pre>
<h3 id="negative-lookahead"><a class="header" href="#negative-lookahead">Negative Lookahead</a></h3>
<pre><code class="language-toml">pattern = "(?!You )\\w+ attacks"
# Matches "Goblin attacks" but not "You attack"
</code></pre>
<h2 id="enabledisable"><a class="header" href="#enabledisable">Enable/Disable</a></h2>
<h3 id="in-configuration"><a class="header" href="#in-configuration">In Configuration</a></h3>
<pre><code class="language-toml">[[triggers]]
name = "my_trigger"
pattern = "something"
command = "respond"
enabled = false     # Disabled by default
</code></pre>
<h3 id="via-commands"><a class="header" href="#via-commands">Via Commands</a></h3>
<pre><code>.trigger enable my_trigger
.trigger disable my_trigger
.trigger toggle my_trigger
</code></pre>
<h3 id="trigger-groups"><a class="header" href="#trigger-groups">Trigger Groups</a></h3>
<pre><code>.trigger enable combat    # Enable all combat triggers
.trigger disable loot     # Disable all loot triggers
</code></pre>
<h2 id="testing-triggers"><a class="header" href="#testing-triggers">Testing Triggers</a></h2>
<ol>
<li>Add trigger to <code>triggers.toml</code></li>
<li>Run <code>.reload triggers</code></li>
<li>Look for matching text in game</li>
<li>Verify trigger fires</li>
</ol>
<h3 id="debug-mode"><a class="header" href="#debug-mode">Debug Mode</a></h3>
<pre><code>.trigger debug on
</code></pre>
<p>Shows when triggers match.</p>
<h2 id="safety-considerations"><a class="header" href="#safety-considerations">Safety Considerations</a></h2>
<h3 id="avoid-automation-abuse"><a class="header" href="#avoid-automation-abuse">Avoid Automation Abuse</a></h3>
<ul>
<li>Don’t automate core gameplay</li>
<li>Keep human-like delays</li>
<li>Don’t trigger in loops</li>
<li>Use cooldowns</li>
</ul>
<h3 id="test-thoroughly"><a class="header" href="#test-thoroughly">Test Thoroughly</a></h3>
<ul>
<li>Test in safe areas</li>
<li>Verify pattern accuracy</li>
<li>Check for false positives</li>
<li>Monitor for issues</li>
</ul>
<h2 id="complete-example-3"><a class="header" href="#complete-example-3">Complete Example</a></h2>
<pre><code class="language-toml"># triggers.toml

# === COMBAT ALERTS ===
[[triggers]]
name = "stun_alert"
pattern = "(?i)you are stunned"
command = ".notify Stunned!;.sound stun.wav"
category = "combat"
priority = 100
cooldown = 1000

[[triggers]]
name = "web_alert"
pattern = "(?i)webs? (stick|entangle)"
command = ".notify Webbed!"
category = "combat"
priority = 90

[[triggers]]
name = "prone_alert"
pattern = "(?i)knock.*down|fall.*prone"
command = ".notify Prone!"
category = "combat"
priority = 90

# === HEALTH ALERTS ===
[[triggers]]
name = "low_health"
pattern = "(?i)feel (weak|faint|dizzy)"
command = ".notify Low Health!;.sound warning.wav"
category = "health"
priority = 100

[[triggers]]
name = "death"
pattern = "You have died"
command = ".notify DEAD!;.sound death.wav"
category = "health"
priority = 100

# === SOCIAL ===
[[triggers]]
name = "whisper"
pattern = "(\\w+) whispers,"
command = ".notify Whisper from $1;.sound whisper.wav"
category = "social"
stream = "main"

[[triggers]]
name = "name_mention"
pattern = "\\bYourCharacter\\b"
command = ".sound mention.wav"
category = "social"
cooldown = 5000

# === LOOT ===
[[triggers]]
name = "auto_search"
pattern = "falls dead"
command = "search"
category = "loot"
cooldown = 2000
enabled = false    # Disabled by default

# === STATUS ===
[[triggers]]
name = "roundtime"
pattern = "Roundtime: (\\d+)"
command = ".rt $1"
category = "status"
</code></pre>
<h2 id="see-also-37"><a class="header" href="#see-also-37">See Also</a></h2>
<ul>
<li><a href="#highlight-patterns">Highlight Patterns</a> - Pattern syntax</li>
<li><a href="#sound-alerts">Sound Alerts</a> - Audio notifications</li>
<li><a href="#macros-1">Macros</a> - Keybind automation</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="scripting-future"><a class="header" href="#scripting-future">Scripting (Future)</a></h1>
<blockquote>
<p><strong>Note</strong>: Advanced scripting is a planned feature. This document describes the intended design.</p>
</blockquote>
<h2 id="overview-22"><a class="header" href="#overview-22">Overview</a></h2>
<p>VellumFE will support a scripting API for complex automation beyond simple triggers and macros.</p>
<h2 id="planned-features"><a class="header" href="#planned-features">Planned Features</a></h2>
<h3 id="event-based-scripts"><a class="header" href="#event-based-scripts">Event-Based Scripts</a></h3>
<pre><code class="language-lua">-- React to game events
on_event("stun", function(duration)
    notify("Stunned for " .. duration .. " seconds")
    if health() &lt; 50 then
        send("flee")
    end
end)

on_event("death", function()
    notify("You have died!")
    -- Auto-release logic
end)
</code></pre>
<h3 id="state-access"><a class="header" href="#state-access">State Access</a></h3>
<pre><code class="language-lua">-- Access game state
if health() &lt; 30 then
    send("hide")
end

if mana() &gt; 50 and not has_spell("Spirit Shield") then
    send("prep 107;cast")
end
</code></pre>
<h3 id="timers"><a class="header" href="#timers">Timers</a></h3>
<pre><code class="language-lua">-- Delayed actions
after(5000, function()
    send("look")
end)

-- Repeating actions
every(60000, function()
    if not hidden() then
        send("perception")
    end
end)
</code></pre>
<h3 id="variables-2"><a class="header" href="#variables-2">Variables</a></h3>
<pre><code class="language-lua">-- Persistent variables
set_var("kill_count", get_var("kill_count", 0) + 1)

if get_var("kill_count") &gt;= 100 then
    notify("100 kills reached!")
end
</code></pre>
<h2 id="language-options"><a class="header" href="#language-options">Language Options</a></h2>
<h3 id="lua"><a class="header" href="#lua">Lua</a></h3>
<p>Lightweight, embeddable, well-suited for game scripting:</p>
<pre><code class="language-lua">function on_combat_start(enemy)
    if enemy.name:match("dragon") then
        send("flee")
    else
        send("attack " .. enemy.noun)
    end
end
</code></pre>
<h3 id="rhai"><a class="header" href="#rhai">Rhai</a></h3>
<p>Rust-native scripting language:</p>
<pre><code class="language-rhai">fn on_combat_start(enemy) {
    if enemy.name.contains("dragon") {
        send("flee");
    } else {
        send("attack " + enemy.noun);
    }
}
</code></pre>
<h2 id="planned-api"><a class="header" href="#planned-api">Planned API</a></h2>
<h3 id="core-functions"><a class="header" href="#core-functions">Core Functions</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Function</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>send(cmd)</code></td><td>Send command to game</td></tr>
<tr><td><code>notify(msg)</code></td><td>Show notification</td></tr>
<tr><td><code>log(msg)</code></td><td>Write to log</td></tr>
<tr><td><code>sleep(ms)</code></td><td>Pause execution</td></tr>
</tbody>
</table>
</div>
<h3 id="state-functions"><a class="header" href="#state-functions">State Functions</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Function</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>health()</code></td><td>Current health</td></tr>
<tr><td><code>max_health()</code></td><td>Maximum health</td></tr>
<tr><td><code>mana()</code></td><td>Current mana</td></tr>
<tr><td><code>stamina()</code></td><td>Current stamina</td></tr>
<tr><td><code>spirit()</code></td><td>Current spirit</td></tr>
</tbody>
</table>
</div>
<h3 id="status-functions"><a class="header" href="#status-functions">Status Functions</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Function</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>stunned()</code></td><td>Is character stunned?</td></tr>
<tr><td><code>hidden()</code></td><td>Is character hidden?</td></tr>
<tr><td><code>prone()</code></td><td>Is character prone?</td></tr>
<tr><td><code>roundtime()</code></td><td>Current roundtime</td></tr>
</tbody>
</table>
</div>
<h3 id="room-functions"><a class="header" href="#room-functions">Room Functions</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Function</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>room_name()</code></td><td>Current room name</td></tr>
<tr><td><code>room_id()</code></td><td>Current room ID</td></tr>
<tr><td><code>exits()</code></td><td>Available exits</td></tr>
<tr><td><code>creatures()</code></td><td>Creatures in room</td></tr>
</tbody>
</table>
</div>
<h3 id="spell-functions"><a class="header" href="#spell-functions">Spell Functions</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Function</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>has_spell(name)</code></td><td>Check active spell</td></tr>
<tr><td><code>spell_time(name)</code></td><td>Time remaining</td></tr>
<tr><td><code>prepared_spell()</code></td><td>Currently prepared</td></tr>
</tbody>
</table>
</div>
<h2 id="example-scripts"><a class="header" href="#example-scripts">Example Scripts</a></h2>
<h3 id="auto-hide-when-wounded"><a class="header" href="#auto-hide-when-wounded">Auto-Hide When Wounded</a></h3>
<pre><code class="language-lua">-- Auto-hide when health drops
on_event("health_change", function(current, max)
    local percent = (current / max) * 100
    if percent &lt; 30 and not hidden() and not stunned() then
        send("hide")
    end
end)
</code></pre>
<h3 id="spell-manager"><a class="header" href="#spell-manager">Spell Manager</a></h3>
<pre><code class="language-lua">-- Keep defensive spells up
local defensive_spells = {
    {spell = 107, name = "Spirit Shield"},
    {spell = 103, name = "Spirit Defense"},
}

every(10000, function()
    for _, s in ipairs(defensive_spells) do
        if not has_spell(s.name) and mana() &gt; 20 then
            wait_for_rt()
            send("incant " .. s.spell)
            return  -- One spell at a time
        end
    end
end)
</code></pre>
<h3 id="combat-assistant"><a class="header" href="#combat-assistant">Combat Assistant</a></h3>
<pre><code class="language-lua">-- Simple combat script
local target = nil

on_event("creature_enter", function(creature)
    if target == nil then
        target = creature
        notify("Targeting: " .. creature.name)
    end
end)

on_event("creature_death", function(creature)
    if target and target.id == creature.id then
        send("search")
        target = nil
    end
end)

on_key("f1", function()
    if target then
        wait_for_rt()
        send("attack " .. target.noun)
    else
        notify("No target")
    end
end)
</code></pre>
<h3 id="herb-monitor"><a class="header" href="#herb-monitor">Herb Monitor</a></h3>
<pre><code class="language-lua">-- Track herb usage
local herbs_used = {
    acantha = 0,
    basal = 0,
    cactacae = 0,
}

on_pattern("eat.*acantha", function()
    herbs_used.acantha = herbs_used.acantha + 1
    if herbs_used.acantha % 10 == 0 then
        notify("Used " .. herbs_used.acantha .. " acantha")
    end
end)
</code></pre>
<h2 id="script-management"><a class="header" href="#script-management">Script Management</a></h2>
<h3 id="loading-scripts"><a class="header" href="#loading-scripts">Loading Scripts</a></h3>
<pre><code>.script load my_script.lua
.script reload my_script
.script unload my_script
</code></pre>
<h3 id="listing-scripts"><a class="header" href="#listing-scripts">Listing Scripts</a></h3>
<pre><code>.script list
</code></pre>
<h3 id="script-directory"><a class="header" href="#script-directory">Script Directory</a></h3>
<pre><code>~/.vellum-fe/scripts/
├── combat.lua
├── spells.lua
├── utils.lua
└── character/
    └── my_char.lua
</code></pre>
<h2 id="safety-features"><a class="header" href="#safety-features">Safety Features</a></h2>
<h3 id="sandboxing"><a class="header" href="#sandboxing">Sandboxing</a></h3>
<p>Scripts will be sandboxed:</p>
<ul>
<li>No file system access</li>
<li>No network access</li>
<li>No shell commands</li>
<li>Limited API surface</li>
</ul>
<h3 id="rate-limiting-1"><a class="header" href="#rate-limiting-1">Rate Limiting</a></h3>
<pre><code class="language-lua">-- Commands are rate-limited
send("attack")  -- Works
send("attack")  -- Queued
send("attack")  -- Queued
-- Actual sends spaced out
</code></pre>
<h3 id="kill-switch"><a class="header" href="#kill-switch">Kill Switch</a></h3>
<pre><code>.script stop     # Stop all scripts
.script pause    # Pause execution
.script resume   # Resume execution
</code></pre>
<h2 id="current-alternatives"><a class="header" href="#current-alternatives">Current Alternatives</a></h2>
<p>Until scripting is implemented, use:</p>
<ol>
<li><strong>Triggers</strong> - Pattern-based automation</li>
<li><strong>Macros</strong> - Key-bound command sequences</li>
<li><strong>Cmdlists</strong> - Context menu commands</li>
<li><strong>External scripts</strong> - Lich scripts (via proxy)</li>
</ol>
<h2 id="contributing"><a class="header" href="#contributing">Contributing</a></h2>
<p>Interested in scripting implementation? Check:</p>
<ul>
<li><a href="development/README.html">Development Guide</a></li>
<li><a href="#contributing-guide">Contributing Guide</a></li>
<li>GitHub Issues for scripting discussion</li>
</ul>
<h2 id="see-also-38"><a class="header" href="#see-also-38">See Also</a></h2>
<ul>
<li><a href="#triggers">Triggers</a> - Current pattern automation</li>
<li><a href="#macros-1">Macros</a> - Keybind commands</li>
<li><a href="architecture/README.html">Architecture</a> - System design</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="tutorials"><a class="header" href="#tutorials">Tutorials</a></h1>
<p>Step-by-step guides for common VellumFE setups and workflows.</p>
<h2 id="tutorial-philosophy"><a class="header" href="#tutorial-philosophy">Tutorial Philosophy</a></h2>
<p>These tutorials guide you through complete workflows, explaining not just <em>what</em> to do but <em>why</em> each choice matters. Each tutorial builds a functional setup from scratch.</p>
<h2 id="available-tutorials"><a class="header" href="#available-tutorials">Available Tutorials</a></h2>
<h3 id="your-first-layout"><a class="header" href="#your-first-layout"><a href="#your-first-layout-1">Your First Layout</a></a></h3>
<p>Start here! Create a basic but functional layout:</p>
<ul>
<li>Understanding the coordinate system</li>
<li>Placing essential widgets</li>
<li>Testing and iteration</li>
<li>Saving and loading</li>
</ul>
<p><strong>Time</strong>: 30 minutes | <strong>Difficulty</strong>: Beginner</p>
<h3 id="hunting-setup"><a class="header" href="#hunting-setup"><a href="#hunting-setup-1">Hunting Setup</a></a></h3>
<p>Optimized layout for combat and hunting:</p>
<ul>
<li>Combat-focused widget arrangement</li>
<li>Health/mana monitoring</li>
<li>Quick action macros</li>
<li>Creature targeting</li>
</ul>
<p><strong>Time</strong>: 45 minutes | <strong>Difficulty</strong>: Intermediate</p>
<h3 id="merchant-setup"><a class="header" href="#merchant-setup"><a href="#merchant-setup-1">Merchant Setup</a></a></h3>
<p>Layout for trading and crafting:</p>
<ul>
<li>Inventory management</li>
<li>Transaction logging</li>
<li>Crafting timers</li>
<li>Trade window optimization</li>
</ul>
<p><strong>Time</strong>: 30 minutes | <strong>Difficulty</strong>: Intermediate</p>
<h3 id="roleplay-setup"><a class="header" href="#roleplay-setup"><a href="#roleplay-setup-1">Roleplay Setup</a></a></h3>
<p>Immersive layout for roleplaying:</p>
<ul>
<li>Expanded text areas</li>
<li>Chat organization</li>
<li>Minimal HUD elements</li>
<li>Atmosphere preservation</li>
</ul>
<p><strong>Time</strong>: 30 minutes | <strong>Difficulty</strong>: Beginner</p>
<h3 id="minimal-layout-1"><a class="header" href="#minimal-layout-1"><a href="#minimal-layout-2">Minimal Layout</a></a></h3>
<p>Clean, distraction-free interface:</p>
<ul>
<li>Essential widgets only</li>
<li>Maximum text space</li>
<li>Keyboard-centric design</li>
<li>Low resource usage</li>
</ul>
<p><strong>Time</strong>: 20 minutes | <strong>Difficulty</strong>: Beginner</p>
<h3 id="accessibility-setup"><a class="header" href="#accessibility-setup"><a href="#accessibility-setup-1">Accessibility Setup</a></a></h3>
<p>Screen reader and high contrast configurations:</p>
<ul>
<li>TTS integration</li>
<li>High contrast themes</li>
<li>Keyboard navigation</li>
<li>Large text options</li>
</ul>
<p><strong>Time</strong>: 45 minutes | <strong>Difficulty</strong>: Intermediate</p>
<h2 id="tutorial-structure"><a class="header" href="#tutorial-structure">Tutorial Structure</a></h2>
<p>Each tutorial follows the same pattern:</p>
<ol>
<li><strong>Goal</strong> - What we’re building</li>
<li><strong>Prerequisites</strong> - What you need first</li>
<li><strong>Step-by-Step</strong> - Detailed instructions</li>
<li><strong>Configuration</strong> - Complete config files</li>
<li><strong>Testing</strong> - Verification steps</li>
<li><strong>Customization</strong> - Ways to adapt it</li>
<li><strong>Troubleshooting</strong> - Common issues</li>
</ol>
<h2 id="before-you-start"><a class="header" href="#before-you-start">Before You Start</a></h2>
<h3 id="prerequisites-2"><a class="header" href="#prerequisites-2">Prerequisites</a></h3>
<ol>
<li>VellumFE installed and running</li>
<li>Basic familiarity with TOML syntax</li>
<li>A text editor</li>
<li>Game account for testing</li>
</ol>
<h3 id="backup-first"><a class="header" href="#backup-first">Backup First</a></h3>
<p>Before modifying configurations:</p>
<pre><code class="language-bash"># Backup your configs
cp -r ~/.vellum-fe ~/.vellum-fe.backup
</code></pre>
<h3 id="configuration-location"><a class="header" href="#configuration-location">Configuration Location</a></h3>
<p>All config files live in <code>~/.vellum-fe/</code>:</p>
<pre><code>~/.vellum-fe/
├── config.toml      # Main settings
├── layout.toml      # Widget positions
├── colors.toml      # Theme colors
├── highlights.toml  # Text patterns
└── keybinds.toml    # Key mappings
</code></pre>
<h2 id="learning-path"><a class="header" href="#learning-path">Learning Path</a></h2>
<h3 id="complete-beginner"><a class="header" href="#complete-beginner">Complete Beginner</a></h3>
<ol>
<li><a href="#your-first-layout-1">Your First Layout</a></li>
<li><a href="#minimal-layout-2">Minimal Layout</a></li>
<li><a href="#roleplay-setup-1">Roleplay Setup</a></li>
</ol>
<h3 id="combat-focus"><a class="header" href="#combat-focus">Combat Focus</a></h3>
<ol>
<li><a href="#your-first-layout-1">Your First Layout</a></li>
<li><a href="#hunting-setup-1">Hunting Setup</a></li>
</ol>
<h3 id="accessibility-needs"><a class="header" href="#accessibility-needs">Accessibility Needs</a></h3>
<ol>
<li><a href="#accessibility-setup-1">Accessibility Setup</a></li>
<li><a href="#minimal-layout-2">Minimal Layout</a></li>
</ol>
<h3 id="tradingcrafting"><a class="header" href="#tradingcrafting">Trading/Crafting</a></h3>
<ol>
<li><a href="#your-first-layout-1">Your First Layout</a></li>
<li><a href="#merchant-setup-1">Merchant Setup</a></li>
</ol>
<h2 id="tutorial-tips"><a class="header" href="#tutorial-tips">Tutorial Tips</a></h2>
<h3 id="take-your-time"><a class="header" href="#take-your-time">Take Your Time</a></h3>
<p>Don’t rush through tutorials. Understanding each step helps you customize later.</p>
<h3 id="experiment"><a class="header" href="#experiment">Experiment</a></h3>
<p>Tutorials provide starting points. Try variations to find what works for you.</p>
<h3 id="ask-questions"><a class="header" href="#ask-questions">Ask Questions</a></h3>
<p>If something’s unclear:</p>
<ul>
<li>Check <a href="troubleshooting/README.html">Troubleshooting</a></li>
<li>Search existing issues</li>
<li>Ask the community</li>
</ul>
<h3 id="share-your-setups"><a class="header" href="#share-your-setups">Share Your Setups</a></h3>
<p>Created something cool? Consider sharing it with the community!</p>
<h2 id="see-also-39"><a class="header" href="#see-also-39">See Also</a></h2>
<ul>
<li><a href="cookbook/README.html">Cookbook</a> - Quick recipes for specific tasks</li>
<li><a href="configuration/README.html">Configuration Reference</a> - Complete config documentation</li>
<li><a href="widgets/README.html">Widget Reference</a> - All widget types</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="your-first-layout-1"><a class="header" href="#your-first-layout-1">Your First Layout</a></h1>
<p>Create a functional VellumFE layout from scratch in 30 minutes.</p>
<h2 id="goal"><a class="header" href="#goal">Goal</a></h2>
<p>By the end of this tutorial, you’ll have:</p>
<ul>
<li>A main text window for game output</li>
<li>Health, mana, and stamina bars</li>
<li>A compass for navigation</li>
<li>A command input area</li>
<li>Basic keybinds for common actions</li>
</ul>
<h2 id="prerequisites-3"><a class="header" href="#prerequisites-3">Prerequisites</a></h2>
<ul>
<li>VellumFE installed</li>
<li>Connection to game (via Lich or direct)</li>
<li>Text editor for config files</li>
</ul>
<h2 id="step-1-understanding-the-grid"><a class="header" href="#step-1-understanding-the-grid">Step 1: Understanding the Grid</a></h2>
<p>VellumFE uses a <strong>percentage-based grid</strong> where:</p>
<ul>
<li><code>x</code> and <code>y</code> are positions (0-100)</li>
<li><code>width</code> and <code>height</code> are sizes (0-100)</li>
<li>Origin (0, 0) is top-left corner</li>
</ul>
<pre><code>(0,0)─────────────────────────(100,0)
  │                                │
  │     Your Terminal Window       │
  │                                │
(0,100)───────────────────────(100,100)
</code></pre>
<h2 id="step-2-plan-your-layout"><a class="header" href="#step-2-plan-your-layout">Step 2: Plan Your Layout</a></h2>
<p>Before coding, sketch your layout:</p>
<pre><code>┌─────────────────────────────────────┐
│  Room Info (top bar)                │
├──────────────────────────┬──────────┤
│                          │ Compass  │
│                          ├──────────┤
│     Main Text            │ Health   │
│                          │ Mana     │
│                          │ Stamina  │
├──────────────────────────┴──────────┤
│  Command Input (bottom)             │
└─────────────────────────────────────┘
</code></pre>
<h2 id="step-3-create-the-main-text-window"><a class="header" href="#step-3-create-the-main-text-window">Step 3: Create the Main Text Window</a></h2>
<p>Open <code>~/.vellum-fe/layout.toml</code> and start fresh:</p>
<pre><code class="language-toml"># Main game text window
[[widgets]]
type = "text"
name = "main"
title = "Game"
x = 0
y = 5
width = 75
height = 85
streams = ["main", "combat", "room"]
scrollback = 5000
</code></pre>
<p><strong>What this does</strong>:</p>
<ul>
<li>Creates a text window named “main”</li>
<li>Positions it from 0% left, 5% from top</li>
<li>Takes 75% width, 85% height</li>
<li>Shows main game output, combat, and room descriptions</li>
<li>Keeps 5000 lines of history</li>
</ul>
<h2 id="step-4-add-the-room-info-bar"><a class="header" href="#step-4-add-the-room-info-bar">Step 4: Add the Room Info Bar</a></h2>
<p>Add a room info display at the top:</p>
<pre><code class="language-toml"># Room information bar
[[widgets]]
type = "room"
name = "room_info"
x = 0
y = 0
width = 100
height = 5
show_exits = true
show_creatures = true
</code></pre>
<h2 id="step-5-add-the-compass"><a class="header" href="#step-5-add-the-compass">Step 5: Add the Compass</a></h2>
<p>Position the compass in the right sidebar:</p>
<pre><code class="language-totml"># Navigation compass
[[widgets]]
type = "compass"
name = "compass"
x = 76
y = 5
width = 24
height = 15
style = "unicode"
clickable = true
</code></pre>
<p><strong>Style options</strong>:</p>
<ul>
<li><code>"ascii"</code> - Basic ASCII characters</li>
<li><code>"unicode"</code> - Unicode arrows (recommended)</li>
<li><code>"minimal"</code> - Just letters (N, S, E, W)</li>
</ul>
<h2 id="step-6-add-vital-bars"><a class="header" href="#step-6-add-vital-bars">Step 6: Add Vital Bars</a></h2>
<p>Add health, mana, and stamina bars below the compass:</p>
<pre><code class="language-toml"># Health bar
[[widgets]]
type = "progress"
name = "health"
title = "Health"
x = 76
y = 21
width = 24
height = 3
data_source = "vitals.health"
color = "health"
show_text = true

# Mana bar
[[widgets]]
type = "progress"
name = "mana"
title = "Mana"
x = 76
y = 25
width = 24
height = 3
data_source = "vitals.mana"
color = "mana"
show_text = true

# Stamina bar
[[widgets]]
type = "progress"
name = "stamina"
title = "Stamina"
x = 76
y = 29
width = 24
height = 3
data_source = "vitals.stamina"
color = "stamina"
show_text = true
</code></pre>
<h2 id="step-7-add-command-input"><a class="header" href="#step-7-add-command-input">Step 7: Add Command Input</a></h2>
<p>Add the command input at the bottom:</p>
<pre><code class="language-toml"># Command input
[[widgets]]
type = "command_input"
name = "input"
x = 0
y = 91
width = 100
height = 9
history_size = 500
prompt = "&gt; "
</code></pre>
<h2 id="step-8-complete-layout-file"><a class="header" href="#step-8-complete-layout-file">Step 8: Complete Layout File</a></h2>
<p>Your complete <code>layout.toml</code> should look like:</p>
<pre><code class="language-toml"># VellumFE Layout - Basic Setup
# Created following the "Your First Layout" tutorial

# Room information bar
[[widgets]]
type = "room"
name = "room_info"
x = 0
y = 0
width = 100
height = 5
show_exits = true
show_creatures = true

# Main game text window
[[widgets]]
type = "text"
name = "main"
title = "Game"
x = 0
y = 5
width = 75
height = 85
streams = ["main", "combat", "room"]
scrollback = 5000

# Navigation compass
[[widgets]]
type = "compass"
name = "compass"
x = 76
y = 5
width = 24
height = 15
style = "unicode"
clickable = true

# Health bar
[[widgets]]
type = "progress"
name = "health"
title = "Health"
x = 76
y = 21
width = 24
height = 3
data_source = "vitals.health"
color = "health"
show_text = true

# Mana bar
[[widgets]]
type = "progress"
name = "mana"
title = "Mana"
x = 76
y = 25
width = 24
height = 3
data_source = "vitals.mana"
color = "mana"
show_text = true

# Stamina bar
[[widgets]]
type = "progress"
name = "stamina"
title = "Stamina"
x = 76
y = 29
width = 24
height = 3
data_source = "vitals.stamina"
color = "stamina"
show_text = true

# Command input
[[widgets]]
type = "command_input"
name = "input"
x = 0
y = 91
width = 100
height = 9
history_size = 500
prompt = "&gt; "
</code></pre>
<h2 id="step-9-add-basic-keybinds"><a class="header" href="#step-9-add-basic-keybinds">Step 9: Add Basic Keybinds</a></h2>
<p>Create <code>~/.vellum-fe/keybinds.toml</code>:</p>
<pre><code class="language-toml"># Basic navigation
[keybinds."numpad8"]
macro = "north"

[keybinds."numpad2"]
macro = "south"

[keybinds."numpad4"]
macro = "west"

[keybinds."numpad6"]
macro = "east"

[keybinds."numpad7"]
macro = "northwest"

[keybinds."numpad9"]
macro = "northeast"

[keybinds."numpad1"]
macro = "southwest"

[keybinds."numpad3"]
macro = "southeast"

[keybinds."numpad5"]
macro = "out"

# Quick actions
[keybinds."f1"]
macro = "look"

[keybinds."f2"]
macro = "inventory"

[keybinds."f3"]
macro = "experience"

# Widget navigation
[keybinds."tab"]
action = "next_widget"

[keybinds."shift+tab"]
action = "prev_widget"

[keybinds."page_up"]
action = "scroll_up"

[keybinds."page_down"]
action = "scroll_down"

# Escape to focus input
[keybinds."escape"]
action = "focus_input"
</code></pre>
<h2 id="step-10-test-your-layout"><a class="header" href="#step-10-test-your-layout">Step 10: Test Your Layout</a></h2>
<ol>
<li>
<p><strong>Save both files</strong></p>
</li>
<li>
<p><strong>Reload configuration</strong>:</p>
<pre><code>.reload
</code></pre>
</li>
<li>
<p><strong>Verify widgets appear</strong>:</p>
<ul>
<li>Main text window shows game output</li>
<li>Compass displays available exits</li>
<li>Vital bars show current values</li>
<li>Command input accepts typing</li>
</ul>
</li>
<li>
<p><strong>Test keybinds</strong>:</p>
<ul>
<li>Press numpad keys for movement</li>
<li>Press F1-F3 for quick commands</li>
<li>Use Tab to cycle widgets</li>
</ul>
</li>
</ol>
<h2 id="testing-checklist"><a class="header" href="#testing-checklist">Testing Checklist</a></h2>
<ul>
<li><input disabled="" type="checkbox"> Main window shows text</li>
<li><input disabled="" type="checkbox"> Room info updates when moving</li>
<li><input disabled="" type="checkbox"> Compass shows exits</li>
<li><input disabled="" type="checkbox"> Health bar reflects actual health</li>
<li><input disabled="" type="checkbox"> Mana bar works</li>
<li><input disabled="" type="checkbox"> Stamina bar works</li>
<li><input disabled="" type="checkbox"> Can type commands</li>
<li><input disabled="" type="checkbox"> Command history works (up/down arrows)</li>
<li><input disabled="" type="checkbox"> Keybinds execute commands</li>
</ul>
<h2 id="customization-ideas"><a class="header" href="#customization-ideas">Customization Ideas</a></h2>
<h3 id="adjust-sizes"><a class="header" href="#adjust-sizes">Adjust Sizes</a></h3>
<p>If the sidebar feels too wide:</p>
<pre><code class="language-toml"># Narrower sidebar (20% instead of 24%)
width = 80    # Main text
x = 81        # Sidebar widgets
width = 19    # Sidebar width
</code></pre>
<h3 id="add-more-bars"><a class="header" href="#add-more-bars">Add More Bars</a></h3>
<p>Spirit bar for some professions:</p>
<pre><code class="language-toml">[[widgets]]
type = "progress"
name = "spirit"
title = "Spirit"
x = 76
y = 33
width = 24
height = 3
data_source = "vitals.spirit"
color = "spirit"
show_text = true
</code></pre>
<h3 id="add-roundtime-display"><a class="header" href="#add-roundtime-display">Add Roundtime Display</a></h3>
<pre><code class="language-toml">[[widgets]]
type = "countdown"
name = "roundtime"
title = "RT"
x = 76
y = 37
width = 24
height = 3
data_source = "roundtime"
</code></pre>
<h3 id="add-status-indicators"><a class="header" href="#add-status-indicators">Add Status Indicators</a></h3>
<pre><code class="language-toml">[[widgets]]
type = "indicator"
name = "status"
x = 76
y = 41
width = 24
height = 8
indicators = ["hidden", "stunned", "webbed", "prone", "kneeling"]
</code></pre>
<h2 id="troubleshooting-20"><a class="header" href="#troubleshooting-20">Troubleshooting</a></h2>
<h3 id="widgets-overlap"><a class="header" href="#widgets-overlap">Widgets Overlap</a></h3>
<p>Check your coordinate math:</p>
<ul>
<li>Widget end = x + width (or y + height)</li>
<li>Ensure widgets don’t exceed 100%</li>
<li>Leave small gaps between widgets</li>
</ul>
<h3 id="bars-not-updating"><a class="header" href="#bars-not-updating">Bars Not Updating</a></h3>
<p>Verify data source names:</p>
<ul>
<li><code>vitals.health</code></li>
<li><code>vitals.mana</code></li>
<li><code>vitals.stamina</code></li>
<li><code>vitals.spirit</code></li>
</ul>
<h3 id="compass-not-showing-exits"><a class="header" href="#compass-not-showing-exits">Compass Not Showing Exits</a></h3>
<p>The game must send exit data. Check that:</p>
<ul>
<li>You’re logged in</li>
<li>You’ve moved to a room</li>
<li>Brief mode isn’t hiding room info</li>
</ul>
<h3 id="keybinds-not-working"><a class="header" href="#keybinds-not-working">Keybinds Not Working</a></h3>
<ol>
<li>Check key syntax (<code>"numpad8"</code> not <code>"num8"</code>)</li>
<li>Verify no conflicts with system keys</li>
<li>Reload config: <code>.reload keybinds</code></li>
</ol>
<h2 id="next-steps-3"><a class="header" href="#next-steps-3">Next Steps</a></h2>
<p>Congratulations! You’ve created your first layout.</p>
<p>Consider exploring:</p>
<ul>
<li><a href="#hunting-setup-1">Hunting Setup</a> - Combat optimization</li>
<li><a href="#creating-layouts">Creating Layouts</a> - Advanced techniques</li>
<li><a href="widgets/README.html">Widget Reference</a> - All widget types</li>
</ul>
<h2 id="see-also-40"><a class="header" href="#see-also-40">See Also</a></h2>
<ul>
<li><a href="#layouttoml-reference">Layout Configuration</a></li>
<li><a href="#keybindstoml-reference">Keybinds Configuration</a></li>
<li><a href="#compass-2">Compass Widget</a></li>
<li><a href="#progress-bars-1">Progress Bars</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="hunting-setup-1"><a class="header" href="#hunting-setup-1">Hunting Setup</a></h1>
<p>Create an optimized layout for combat and hunting with real-time status monitoring.</p>
<h2 id="goal-1"><a class="header" href="#goal-1">Goal</a></h2>
<p>Build a hunting-focused layout with:</p>
<ul>
<li>Combat text in a dedicated window</li>
<li>Real-time vital monitoring with alerts</li>
<li>Quick-access combat macros</li>
<li>Target tracking</li>
<li>Roundtime and casttime displays</li>
<li>Injury awareness</li>
</ul>
<h2 id="prerequisites-4"><a class="header" href="#prerequisites-4">Prerequisites</a></h2>
<ul>
<li>Completed <a href="#your-first-layout-1">Your First Layout</a></li>
<li>Understanding of basic keybinds</li>
<li>Active hunting character</li>
</ul>
<h2 id="layout-overview"><a class="header" href="#layout-overview">Layout Overview</a></h2>
<pre><code>┌────────────────────────────────────────────────────────────┐
│ Room: [name]                    Exits: N S E W    [Compass]│
├────────────────────────────────────┬───────────────────────┤
│                                    │ ████████████ Health   │
│                                    │ ████████░░░░ Mana     │
│       Main Game Text               │ ████████████ Stamina  │
│                                    ├───────────────────────┤
│                                    │ RT: 3s    Cast: --    │
│                                    ├───────────────────────┤
├────────────────────────────────────┤ [Hidden] [Prone]      │
│       Combat Log                   │ [Stunned] [Webbed]    │
│       (filtered combat text)       ├───────────────────────┤
│                                    │ Head:  ░░░░░          │
│                                    │ Chest: ██░░░          │
│                                    │ Arms:  ░░░░░          │
├────────────────────────────────────┴───────────────────────┤
│ &gt; [command input]                                          │
└────────────────────────────────────────────────────────────┘
</code></pre>
<h2 id="step-1-create-the-layout"><a class="header" href="#step-1-create-the-layout">Step 1: Create the Layout</a></h2>
<p>Create <code>~/.vellum-fe/layout.toml</code>:</p>
<pre><code class="language-toml"># Hunting Layout - Combat Optimized
# Designed for active hunting with real-time monitoring

# ═══════════════════════════════════════════════════════════
# TOP BAR - Room and Navigation
# ═══════════════════════════════════════════════════════════

[[widgets]]
type = "room"
name = "room_info"
x = 0
y = 0
width = 85
height = 4
show_exits = true
show_creatures = true
creature_highlight = true

[[widgets]]
type = "compass"
name = "compass"
x = 86
y = 0
width = 14
height = 7
style = "unicode"
clickable = true

# ═══════════════════════════════════════════════════════════
# MAIN AREA - Game Text
# ═══════════════════════════════════════════════════════════

[[widgets]]
type = "text"
name = "main"
title = "Game"
x = 0
y = 4
width = 65
height = 50
streams = ["main", "room", "thoughts", "speech"]
scrollback = 5000
auto_scroll = true

# ═══════════════════════════════════════════════════════════
# COMBAT WINDOW - Filtered Combat Text
# ═══════════════════════════════════════════════════════════

[[widgets]]
type = "text"
name = "combat"
title = "Combat"
x = 0
y = 55
width = 65
height = 35
streams = ["combat"]
scrollback = 1000
auto_scroll = true
border_color = "red"

# ═══════════════════════════════════════════════════════════
# RIGHT SIDEBAR - Status Panel
# ═══════════════════════════════════════════════════════════

# Vital Bars
[[widgets]]
type = "progress"
name = "health"
title = "HP"
x = 66
y = 8
width = 34
height = 3
data_source = "vitals.health"
color = "health"
show_text = true
show_percentage = true

[[widgets]]
type = "progress"
name = "mana"
title = "MP"
x = 66
y = 12
width = 34
height = 3
data_source = "vitals.mana"
color = "mana"
show_text = true
show_percentage = true

[[widgets]]
type = "progress"
name = "stamina"
title = "ST"
x = 66
y = 16
width = 34
height = 3
data_source = "vitals.stamina"
color = "stamina"
show_text = true
show_percentage = true

[[widgets]]
type = "progress"
name = "spirit"
title = "SP"
x = 66
y = 20
width = 34
height = 3
data_source = "vitals.spirit"
color = "spirit"
show_text = true
show_percentage = true

# Timing Displays
[[widgets]]
type = "countdown"
name = "roundtime"
title = "RT"
x = 66
y = 24
width = 16
height = 3
data_source = "roundtime"
warning_threshold = 2
critical_threshold = 0

[[widgets]]
type = "countdown"
name = "casttime"
title = "Cast"
x = 83
y = 24
width = 17
height = 3
data_source = "casttime"

# Status Indicators
[[widgets]]
type = "indicator"
name = "status"
title = "Status"
x = 66
y = 28
width = 34
height = 10
indicators = [
    "hidden",
    "invisible",
    "stunned",
    "webbed",
    "prone",
    "kneeling",
    "sitting",
    "bleeding",
    "poisoned"
]
columns = 2

# Injury Display
[[widgets]]
type = "injury_doll"
name = "injuries"
title = "Injuries"
x = 66
y = 39
width = 34
height = 20
style = "bars"
show_scars = false

# Active Effects
[[widgets]]
type = "active_effects"
name = "effects"
title = "Active"
x = 66
y = 60
width = 34
height = 30
show_duration = true
group_by_type = true

# ═══════════════════════════════════════════════════════════
# BOTTOM - Command Input
# ═══════════════════════════════════════════════════════════

[[widgets]]
type = "command_input"
name = "input"
x = 0
y = 91
width = 100
height = 9
history_size = 500
prompt = "› "
show_roundtime = true
</code></pre>
<h2 id="step-2-combat-keybinds"><a class="header" href="#step-2-combat-keybinds">Step 2: Combat Keybinds</a></h2>
<p>Create combat-focused <code>~/.vellum-fe/keybinds.toml</code>:</p>
<pre><code class="language-toml"># ═══════════════════════════════════════════════════════════
# COMBAT MACROS - Function Keys
# ═══════════════════════════════════════════════════════════

# Basic attacks
[keybinds."f1"]
macro = "attack target"

[keybinds."f2"]
macro = "attack left target"

[keybinds."f3"]
macro = "attack right target"

[keybinds."f4"]
macro = "feint target"

# Defensive actions
[keybinds."f5"]
macro = "stance defensive"

[keybinds."f6"]
macro = "hide"

[keybinds."f7"]
macro = "stance offensive"

[keybinds."f8"]
macro = "stance neutral"

# Combat utilities
[keybinds."f9"]
macro = "search"

[keybinds."f10"]
macro = "search;loot"

[keybinds."f11"]
macro = "skin"

[keybinds."f12"]
macro = "aim target"

# ═══════════════════════════════════════════════════════════
# SPELL MACROS - Ctrl+Number
# ═══════════════════════════════════════════════════════════

[keybinds."ctrl+1"]
macro = "incant 101"

[keybinds."ctrl+2"]
macro = "incant 102"

[keybinds."ctrl+3"]
macro = "incant 103"

[keybinds."ctrl+4"]
macro = "incant 104"

[keybinds."ctrl+5"]
macro = "incant 105"

[keybinds."ctrl+6"]
macro = "incant 106"

[keybinds."ctrl+7"]
macro = "incant 107"

[keybinds."ctrl+8"]
macro = "incant 108"

[keybinds."ctrl+9"]
macro = "incant 109"

[keybinds."ctrl+0"]
macro = "incant 110"

# ═══════════════════════════════════════════════════════════
# MOVEMENT - Numpad
# ═══════════════════════════════════════════════════════════

[keybinds."numpad8"]
macro = "north"

[keybinds."numpad2"]
macro = "south"

[keybinds."numpad4"]
macro = "west"

[keybinds."numpad6"]
macro = "east"

[keybinds."numpad7"]
macro = "northwest"

[keybinds."numpad9"]
macro = "northeast"

[keybinds."numpad1"]
macro = "southwest"

[keybinds."numpad3"]
macro = "southeast"

[keybinds."numpad5"]
macro = "out"

[keybinds."numpad_plus"]
macro = "go gate"

[keybinds."numpad_minus"]
macro = "go door"

# ═══════════════════════════════════════════════════════════
# EMERGENCY ACTIONS - Shift+Function
# ═══════════════════════════════════════════════════════════

[keybinds."shift+f1"]
macro = "flee"

[keybinds."shift+f2"]
macro = "stance defensive;hide"

[keybinds."shift+f3"]
macro = "get acantha from my pouch;eat my acantha"

[keybinds."shift+f4"]
macro = "get basal from my pouch;eat my basal"

[keybinds."shift+f5"]
macro = "get cactacae from my pouch;eat my cactacae"

# ═══════════════════════════════════════════════════════════
# TARGETING - Alt+Keys
# ═══════════════════════════════════════════════════════════

[keybinds."alt+1"]
macro = "target first"

[keybinds."alt+2"]
macro = "target second"

[keybinds."alt+3"]
macro = "target third"

[keybinds."alt+t"]
macro = "target $input"

[keybinds."alt+c"]
macro = "target clear"

# ═══════════════════════════════════════════════════════════
# WIDGET NAVIGATION
# ═══════════════════════════════════════════════════════════

[keybinds."tab"]
action = "next_widget"

[keybinds."shift+tab"]
action = "prev_widget"

[keybinds."page_up"]
action = "scroll_up"

[keybinds."page_down"]
action = "scroll_down"

[keybinds."home"]
action = "scroll_top"

[keybinds."end"]
action = "scroll_bottom"

[keybinds."escape"]
action = "focus_input"
</code></pre>
<h2 id="step-3-combat-highlights"><a class="header" href="#step-3-combat-highlights">Step 3: Combat Highlights</a></h2>
<p>Add to <code>~/.vellum-fe/highlights.toml</code>:</p>
<pre><code class="language-toml"># ═══════════════════════════════════════════════════════════
# COMBAT HIGHLIGHTING
# ═══════════════════════════════════════════════════════════

# Critical hits
[[highlights]]
pattern = "\\*\\* .+ \\*\\*"
fg = "bright_red"
bold = true

# Your attacks
[[highlights]]
pattern = "You (swing|thrust|slash|punch|kick)"
fg = "green"

# Enemy attacks
[[highlights]]
pattern = "(swings|thrusts|slashes|punches|kicks) at you"
fg = "red"

# Misses
[[highlights]]
pattern = "(miss|barely miss|narrowly miss)"
fg = "dark_gray"
italic = true

# Death messages
[[highlights]]
pattern = "falls dead"
fg = "bright_yellow"
bold = true

# ═══════════════════════════════════════════════════════════
# STATUS ALERTS
# ═══════════════════════════════════════════════════════════

# Stunned
[[highlights]]
pattern = "(?i)you are stunned"
fg = "black"
bg = "yellow"
bold = true

# Webbed
[[highlights]]
pattern = "(?i)webs? (stick|entangle)"
fg = "black"
bg = "magenta"
bold = true

# Prone
[[highlights]]
pattern = "(?i)(knock|fall).*?(down|prone)"
fg = "black"
bg = "cyan"
bold = true

# ═══════════════════════════════════════════════════════════
# DAMAGE NUMBERS
# ═══════════════════════════════════════════════════════════

# High damage
[[highlights]]
pattern = "\\b([5-9]\\d|[1-9]\\d{2,}) points? of damage"
fg = "bright_green"
bold = true

# Medium damage
[[highlights]]
pattern = "\\b([2-4]\\d) points? of damage"
fg = "green"

# Low damage
[[highlights]]
pattern = "\\b([0-1]\\d) points? of damage"
fg = "dark_green"

# ═══════════════════════════════════════════════════════════
# LOOT
# ═══════════════════════════════════════════════════════════

# Coins
[[highlights]]
pattern = "\\d+ (silver|gold|copper)"
fg = "bright_yellow"

# Gems
[[highlights]]
pattern = "(?i)(gem|jewel|diamond|ruby|emerald|sapphire)"
fg = "bright_cyan"

# Treasure
[[highlights]]
pattern = "(?i)treasure"
fg = "bright_yellow"
bold = true
</code></pre>
<h2 id="step-4-combat-triggers"><a class="header" href="#step-4-combat-triggers">Step 4: Combat Triggers</a></h2>
<p>Add to <code>~/.vellum-fe/triggers.toml</code>:</p>
<pre><code class="language-toml"># ═══════════════════════════════════════════════════════════
# COMBAT ALERTS
# ═══════════════════════════════════════════════════════════

# Stunned alert
[[triggers]]
name = "stun_alert"
pattern = "(?i)you are stunned"
command = ".notify STUNNED!"
category = "combat"
priority = 100
cooldown = 1000

# Webbed alert
[[triggers]]
name = "web_alert"
pattern = "(?i)webs? (stick|entangle)"
command = ".notify WEBBED!"
category = "combat"
priority = 100
cooldown = 1000

# Prone alert
[[triggers]]
name = "prone_alert"
pattern = "(?i)(knock|fall).*?(down|prone)"
command = ".notify PRONE!"
category = "combat"
priority = 100
cooldown = 1000

# Low health warning
[[triggers]]
name = "low_health"
pattern = "You feel (weak|faint|dizzy)"
command = ".notify LOW HEALTH!;stance defensive"
category = "combat"
priority = 100

# ═══════════════════════════════════════════════════════════
# HUNTING AUTOMATION (Optional - Use Carefully)
# ═══════════════════════════════════════════════════════════

# Auto-search on kill (disabled by default)
[[triggers]]
name = "auto_search"
pattern = "falls dead"
command = "search"
category = "loot"
cooldown = 2000
enabled = false

# Roundtime notification
[[triggers]]
name = "roundtime"
pattern = "Roundtime: (\\d+)"
command = ".rt $1"
category = "status"
</code></pre>
<h2 id="step-5-color-theme-for-combat"><a class="header" href="#step-5-color-theme-for-combat">Step 5: Color Theme for Combat</a></h2>
<p>Add combat-focused colors to <code>~/.vellum-fe/colors.toml</code>:</p>
<pre><code class="language-toml">[theme]
name = "Combat Focus"

# Vital colors - easy visibility
health = "#00ff00"          # Bright green
health_low = "#ffff00"      # Yellow warning
health_critical = "#ff0000" # Red danger
mana = "#0080ff"            # Blue
stamina = "#ff8000"         # Orange
spirit = "#ff00ff"          # Magenta

# Combat window
combat_border = "#ff4444"
combat_bg = "#1a0000"

# Status indicators
hidden = "#00ff00"
stunned = "#ffff00"
webbed = "#ff00ff"
prone = "#00ffff"

# High contrast text
text = "#ffffff"
text_dim = "#808080"
</code></pre>
<h2 id="testing-your-setup"><a class="header" href="#testing-your-setup">Testing Your Setup</a></h2>
<h3 id="combat-test-checklist"><a class="header" href="#combat-test-checklist">Combat Test Checklist</a></h3>
<ol>
<li>
<p><strong>Vital Monitoring</strong></p>
<ul>
<li><input disabled="" type="checkbox"> Health bar updates when damaged</li>
<li><input disabled="" type="checkbox"> Mana bar updates when casting</li>
<li><input disabled="" type="checkbox"> Low health triggers visual warning</li>
</ul>
</li>
<li>
<p><strong>Combat Window</strong></p>
<ul>
<li><input disabled="" type="checkbox"> Combat text appears in combat window</li>
<li><input disabled="" type="checkbox"> Non-combat text stays in main window</li>
<li><input disabled="" type="checkbox"> Combat highlights are visible</li>
</ul>
</li>
<li>
<p><strong>Roundtime Display</strong></p>
<ul>
<li><input disabled="" type="checkbox"> RT countdown shows during actions</li>
<li><input disabled="" type="checkbox"> Cast timer shows during spellcasting</li>
</ul>
</li>
<li>
<p><strong>Status Indicators</strong></p>
<ul>
<li><input disabled="" type="checkbox"> Hidden indicator shows when hiding</li>
<li><input disabled="" type="checkbox"> Stun indicator triggers on stun</li>
</ul>
</li>
<li>
<p><strong>Keybinds</strong></p>
<ul>
<li><input disabled="" type="checkbox"> F1 attacks target</li>
<li><input disabled="" type="checkbox"> Numpad moves correctly</li>
<li><input disabled="" type="checkbox"> Emergency flee works</li>
</ul>
</li>
</ol>
<h3 id="combat-workflow-test"><a class="header" href="#combat-workflow-test">Combat Workflow Test</a></h3>
<ol>
<li>Find a creature</li>
<li>Use F1 to attack</li>
<li>Watch combat window for hit/miss</li>
<li>Check RT countdown</li>
<li>Use numpad to navigate away</li>
<li>Verify flee (Shift+F1) works</li>
</ol>
<h2 id="customization-tips-1"><a class="header" href="#customization-tips-1">Customization Tips</a></h2>
<h3 id="profession-specific-adjustments"><a class="header" href="#profession-specific-adjustments">Profession-Specific Adjustments</a></h3>
<p><strong>Rogues</strong>: Prioritize hidden indicator, add ambush macros</p>
<pre><code class="language-toml">[keybinds."f1"]
macro = "ambush target"

[keybinds."f2"]
macro = "hide;ambush target"
</code></pre>
<p><strong>Wizards</strong>: Add spell tracking, larger mana display</p>
<pre><code class="language-toml">[[widgets]]
type = "spells"
name = "known_spells"
x = 66
y = 60
width = 34
height = 30
</code></pre>
<p><strong>Warriors</strong>: Add CM tracking, shield macros</p>
<pre><code class="language-toml">[keybinds."f4"]
macro = "cman surge"

[keybinds."f5"]
macro = "cman feint"
</code></pre>
<h3 id="multi-target-hunting"><a class="header" href="#multi-target-hunting">Multi-Target Hunting</a></h3>
<p>For areas with multiple creatures:</p>
<pre><code class="language-toml"># Target cycling
[keybinds."alt+n"]
macro = "target next"

[keybinds."alt+p"]
macro = "target previous"
</code></pre>
<h2 id="troubleshooting-21"><a class="header" href="#troubleshooting-21">Troubleshooting</a></h2>
<h3 id="combat-text-not-filtering"><a class="header" href="#combat-text-not-filtering">Combat Text Not Filtering</a></h3>
<p>Verify stream configuration:</p>
<ul>
<li>Main window: <code>streams = ["main", "room", "thoughts", "speech"]</code></li>
<li>Combat window: <code>streams = ["combat"]</code></li>
</ul>
<h3 id="roundtime-not-showing"><a class="header" href="#roundtime-not-showing">Roundtime Not Showing</a></h3>
<p>Check data source is correct:</p>
<pre><code class="language-toml">data_source = "roundtime"
</code></pre>
<h3 id="keybinds-not-responding-during-combat"><a class="header" href="#keybinds-not-responding-during-combat">Keybinds Not Responding During Combat</a></h3>
<p>Ensure focus is on input widget:</p>
<pre><code class="language-toml">[keybinds."escape"]
action = "focus_input"
</code></pre>
<h3 id="triggers-not-firing"><a class="header" href="#triggers-not-firing">Triggers Not Firing</a></h3>
<ol>
<li>Check trigger syntax</li>
<li>Verify <code>enabled = true</code> (default)</li>
<li>Test pattern matches actual game text</li>
</ol>
<h2 id="see-also-41"><a class="header" href="#see-also-41">See Also</a></h2>
<ul>
<li><a href="#combat-alerts-2">Combat Alerts Cookbook</a></li>
<li><a href="#progress-bars-1">Progress Bars</a></li>
<li><a href="#status-indicators">Indicators</a></li>
<li><a href="#triggers">Triggers</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="merchant-setup-1"><a class="header" href="#merchant-setup-1">Merchant Setup</a></h1>
<p>Create a layout optimized for trading, crafting, and inventory management.</p>
<h2 id="goal-2"><a class="header" href="#goal-2">Goal</a></h2>
<p>Build a merchant-focused layout with:</p>
<ul>
<li>Expanded inventory display</li>
<li>Transaction logging</li>
<li>Crafting timer tracking</li>
<li>Multiple chat channels</li>
<li>Appraisal quick-access</li>
</ul>
<h2 id="prerequisites-5"><a class="header" href="#prerequisites-5">Prerequisites</a></h2>
<ul>
<li>Completed <a href="#your-first-layout-1">Your First Layout</a></li>
<li>Character with merchant activities</li>
<li>Understanding of inventory commands</li>
</ul>
<h2 id="layout-overview-1"><a class="header" href="#layout-overview-1">Layout Overview</a></h2>
<pre><code>┌────────────────────────────────────────────────────────────┐
│ Room: [Town Square]                              [Compass] │
├────────────────────┬───────────────────┬───────────────────┤
│                    │                   │                   │
│   Main Game Text   │   Inventory       │   Transaction     │
│                    │   (tree view)     │   Log             │
│                    │                   │                   │
│                    │                   │                   │
├────────────────────┼───────────────────┴───────────────────┤
│   Trade Channel    │   Crafting Timer    │ Wealth Display  │
│                    │   [████████░░ 80%]  │ 12,345 silver   │
├────────────────────┴───────────────────────────────────────┤
│ &gt; [command input]                                          │
└────────────────────────────────────────────────────────────┘
</code></pre>
<h2 id="step-1-create-the-layout-1"><a class="header" href="#step-1-create-the-layout-1">Step 1: Create the Layout</a></h2>
<p>Create <code>~/.vellum-fe/layout.toml</code>:</p>
<pre><code class="language-toml"># Merchant Layout - Trading and Crafting Optimized
# Designed for inventory management and transactions

# ═══════════════════════════════════════════════════════════
# TOP BAR - Room and Navigation
# ═══════════════════════════════════════════════════════════

[[widgets]]
type = "room"
name = "room_info"
x = 0
y = 0
width = 85
height = 4
show_exits = true
show_creatures = false
show_players = true

[[widgets]]
type = "compass"
name = "compass"
x = 86
y = 0
width = 14
height = 6
style = "minimal"
clickable = true

# ═══════════════════════════════════════════════════════════
# LEFT COLUMN - Main Game Text
# ═══════════════════════════════════════════════════════════

[[widgets]]
type = "text"
name = "main"
title = "Game"
x = 0
y = 4
width = 35
height = 55
streams = ["main", "room"]
scrollback = 3000
auto_scroll = true

# ═══════════════════════════════════════════════════════════
# CENTER COLUMN - Inventory
# ═══════════════════════════════════════════════════════════

[[widgets]]
type = "inventory"
name = "inventory"
title = "Inventory"
x = 36
y = 4
width = 32
height = 55
show_containers = true
show_weight = true
expand_containers = true
sort_by = "name"

# ═══════════════════════════════════════════════════════════
# RIGHT COLUMN - Transaction Log
# ═══════════════════════════════════════════════════════════

[[widgets]]
type = "text"
name = "transactions"
title = "Transactions"
x = 69
y = 4
width = 31
height = 55
streams = ["commerce", "merchant"]
scrollback = 1000
auto_scroll = true
border_color = "yellow"

# ═══════════════════════════════════════════════════════════
# BOTTOM ROW - Trade Chat and Utilities
# ═══════════════════════════════════════════════════════════

# Trade channel
[[widgets]]
type = "text"
name = "trade"
title = "Trade Chat"
x = 0
y = 60
width = 50
height = 30
streams = ["thoughts", "speech"]
scrollback = 500
auto_scroll = true

# Crafting/Activity Timer
[[widgets]]
type = "countdown"
name = "crafting"
title = "Activity"
x = 51
y = 60
width = 24
height = 5
data_source = "roundtime"
show_bar = true

# Wealth Display (Custom text widget)
[[widgets]]
type = "text"
name = "wealth"
title = "Wealth"
x = 76
y = 60
width = 24
height = 10
streams = ["wealth"]
scrollback = 50

# Status indicators (minimal)
[[widgets]]
type = "indicator"
name = "status"
title = "Status"
x = 51
y = 66
width = 49
height = 8
indicators = ["kneeling", "sitting", "encumbered"]
columns = 3

# Vital bars (compact)
[[widgets]]
type = "progress"
name = "health"
title = "HP"
x = 51
y = 75
width = 24
height = 3
data_source = "vitals.health"
color = "health"
show_text = true

[[widgets]]
type = "progress"
name = "stamina"
title = "ST"
x = 76
y = 75
width = 24
height = 3
data_source = "vitals.stamina"
color = "stamina"
show_text = true

# Active effects (spells, buffs)
[[widgets]]
type = "active_effects"
name = "effects"
title = "Effects"
x = 51
y = 79
width = 49
height = 11
show_duration = true
compact = true

# ═══════════════════════════════════════════════════════════
# COMMAND INPUT
# ═══════════════════════════════════════════════════════════

[[widgets]]
type = "command_input"
name = "input"
x = 0
y = 91
width = 100
height = 9
history_size = 500
prompt = "$ "
</code></pre>
<h2 id="step-2-merchant-keybinds"><a class="header" href="#step-2-merchant-keybinds">Step 2: Merchant Keybinds</a></h2>
<p>Create <code>~/.vellum-fe/keybinds.toml</code>:</p>
<pre><code class="language-toml"># ═══════════════════════════════════════════════════════════
# INVENTORY MANAGEMENT - Function Keys
# ═══════════════════════════════════════════════════════════

[keybinds."f1"]
macro = "inventory"

[keybinds."f2"]
macro = "inventory full"

[keybinds."f3"]
macro = "look in my backpack"

[keybinds."f4"]
macro = "look in my cloak"

[keybinds."f5"]
macro = "wealth"

[keybinds."f6"]
macro = "experience"

# ═══════════════════════════════════════════════════════════
# TRADING ACTIONS - Ctrl Keys
# ═══════════════════════════════════════════════════════════

[keybinds."ctrl+a"]
macro = "appraise $input"

[keybinds."ctrl+g"]
macro = "get $input"

[keybinds."ctrl+d"]
macro = "drop $input"

[keybinds."ctrl+p"]
macro = "put $input in my backpack"

[keybinds."ctrl+s"]
macro = "sell $input"

[keybinds."ctrl+b"]
macro = "buy $input"

[keybinds."ctrl+o"]
macro = "order $input"

# ═══════════════════════════════════════════════════════════
# CONTAINER SHORTCUTS - Alt Keys
# ═══════════════════════════════════════════════════════════

[keybinds."alt+1"]
macro = "put $input in my backpack"

[keybinds."alt+2"]
macro = "put $input in my cloak"

[keybinds."alt+3"]
macro = "put $input in my sack"

[keybinds."alt+4"]
macro = "put $input in my pouch"

[keybinds."alt+g"]
macro = "get $input from my $input"

# ═══════════════════════════════════════════════════════════
# QUICK COMMERCE
# ═══════════════════════════════════════════════════════════

[keybinds."ctrl+shift+a"]
macro = "appraise all"

[keybinds."ctrl+shift+s"]
macro = "sell all"

# Give to player
[keybinds."ctrl+shift+g"]
macro = "give $input to $input"

# ═══════════════════════════════════════════════════════════
# MOVEMENT - Numpad
# ═══════════════════════════════════════════════════════════

[keybinds."numpad8"]
macro = "north"

[keybinds."numpad2"]
macro = "south"

[keybinds."numpad4"]
macro = "west"

[keybinds."numpad6"]
macro = "east"

[keybinds."numpad7"]
macro = "northwest"

[keybinds."numpad9"]
macro = "northeast"

[keybinds."numpad1"]
macro = "southwest"

[keybinds."numpad3"]
macro = "southeast"

[keybinds."numpad5"]
macro = "out"

[keybinds."numpad_plus"]
macro = "go counter"

[keybinds."numpad_minus"]
macro = "go door"

# ═══════════════════════════════════════════════════════════
# SOCIAL/TRADE CHAT
# ═══════════════════════════════════════════════════════════

[keybinds."ctrl+t"]
macro = "think $input"

[keybinds."ctrl+w"]
macro = "whisper $input"

# ═══════════════════════════════════════════════════════════
# WIDGET NAVIGATION
# ═══════════════════════════════════════════════════════════

[keybinds."tab"]
action = "next_widget"

[keybinds."shift+tab"]
action = "prev_widget"

[keybinds."page_up"]
action = "scroll_up"

[keybinds."page_down"]
action = "scroll_down"

[keybinds."escape"]
action = "focus_input"

# Quick focus specific widgets
[keybinds."alt+i"]
action = "focus_widget"
widget = "inventory"

[keybinds."alt+t"]
action = "focus_widget"
widget = "transactions"

[keybinds."alt+m"]
action = "focus_widget"
widget = "main"
</code></pre>
<h2 id="step-3-commerce-highlights"><a class="header" href="#step-3-commerce-highlights">Step 3: Commerce Highlights</a></h2>
<p>Add to <code>~/.vellum-fe/highlights.toml</code>:</p>
<pre><code class="language-toml"># ═══════════════════════════════════════════════════════════
# CURRENCY HIGHLIGHTING
# ═══════════════════════════════════════════════════════════

# Silver amounts
[[highlights]]
pattern = "\\d+,?\\d* silver"
fg = "bright_white"
bold = true

# Gold (if applicable)
[[highlights]]
pattern = "\\d+,?\\d* gold"
fg = "bright_yellow"
bold = true

# ═══════════════════════════════════════════════════════════
# TRANSACTION HIGHLIGHTING
# ═══════════════════════════════════════════════════════════

# Purchase
[[highlights]]
pattern = "(?i)you (buy|purchase|acquire)"
fg = "green"

# Sale
[[highlights]]
pattern = "(?i)you (sell|sold)"
fg = "cyan"

# Trade accepted
[[highlights]]
pattern = "(?i)trade (complete|accepted|confirmed)"
fg = "bright_green"
bold = true

# ═══════════════════════════════════════════════════════════
# ITEM HIGHLIGHTING
# ═══════════════════════════════════════════════════════════

# Gems
[[highlights]]
pattern = "(?i)(diamond|ruby|emerald|sapphire|pearl|opal|topaz|garnet)"
fg = "bright_cyan"

# Rare items
[[highlights]]
pattern = "(?i)(rare|unique|enchanted|magical)"
fg = "bright_magenta"

# Containers
[[highlights]]
pattern = "(?i)(backpack|cloak|sack|pouch|bag|chest|box)"
fg = "yellow"

# ═══════════════════════════════════════════════════════════
# MERCHANT NPCS
# ═══════════════════════════════════════════════════════════

[[highlights]]
pattern = "(?i)(merchant|shopkeeper|vendor|trader|clerk)"
fg = "bright_yellow"

# ═══════════════════════════════════════════════════════════
# PLAYER NAMES (Trade Context)
# ═══════════════════════════════════════════════════════════

[[highlights]]
pattern = "\\b[A-Z][a-z]+\\b(?= (offers|gives|trades|whispers))"
fg = "bright_white"
bold = true
</code></pre>
<h2 id="step-4-transaction-triggers"><a class="header" href="#step-4-transaction-triggers">Step 4: Transaction Triggers</a></h2>
<p>Add to <code>~/.vellum-fe/triggers.toml</code>:</p>
<pre><code class="language-toml"># ═══════════════════════════════════════════════════════════
# TRANSACTION ALERTS
# ═══════════════════════════════════════════════════════════

# Whisper received
[[triggers]]
name = "whisper_alert"
pattern = "(\\w+) whispers,"
command = ".notify Whisper from $1"
category = "social"
priority = 100

# Trade offer
[[triggers]]
name = "trade_offer"
pattern = "(\\w+) offers to trade"
command = ".notify Trade offer from $1"
category = "commerce"
priority = 90

# Payment received
[[triggers]]
name = "payment"
pattern = "(\\d+) silver"
command = ".log Payment: $1 silver"
category = "commerce"
stream = "commerce"

# ═══════════════════════════════════════════════════════════
# INVENTORY ALERTS
# ═══════════════════════════════════════════════════════════

# Encumbered
[[triggers]]
name = "encumbered"
pattern = "(?i)encumbered"
command = ".notify Encumbered!"
category = "status"
cooldown = 5000

# Container full
[[triggers]]
name = "container_full"
pattern = "(?i)won't fit|too full"
command = ".notify Container full!"
category = "inventory"
cooldown = 2000

# ═══════════════════════════════════════════════════════════
# CRAFTING TIMERS
# ═══════════════════════════════════════════════════════════

# Roundtime for crafting
[[triggers]]
name = "craft_rt"
pattern = "Roundtime: (\\d+)"
command = ".rt $1"
category = "crafting"
</code></pre>
<h2 id="step-5-command-lists-for-items"><a class="header" href="#step-5-command-lists-for-items">Step 5: Command Lists for Items</a></h2>
<p>Add to <code>~/.vellum-fe/cmdlist.toml</code>:</p>
<pre><code class="language-toml"># ═══════════════════════════════════════════════════════════
# GENERAL ITEMS
# ═══════════════════════════════════════════════════════════

[[cmdlist]]
category = "item"
noun = ".*"
match_mode = "regex"
commands = [
    "look",
    "get",
    "drop",
    "---",
    "appraise",
    "sell",
    "---",
    "put in&gt;put {noun} in my backpack,put {noun} in my cloak,put {noun} in my sack"
]
priority = 10

# ═══════════════════════════════════════════════════════════
# CONTAINERS
# ═══════════════════════════════════════════════════════════

[[cmdlist]]
category = "container"
noun = "(?i)(backpack|cloak|sack|pouch|bag|chest|box)"
match_mode = "regex"
commands = [
    "look in",
    "open",
    "close",
    "---",
    "get from:get {input} from my {noun}",
    "inventory check"
]
priority = 50

# ═══════════════════════════════════════════════════════════
# CURRENCY
# ═══════════════════════════════════════════════════════════

[[cmdlist]]
category = "currency"
noun = "(?i)(silver|gold|coins?|copper)"
match_mode = "regex"
commands = [
    "get",
    "count",
    "deposit"
]
priority = 40

# ═══════════════════════════════════════════════════════════
# GEMS AND VALUABLES
# ═══════════════════════════════════════════════════════════

[[cmdlist]]
category = "gems"
noun = "(?i)(gem|jewel|diamond|ruby|emerald|sapphire|pearl|stone)"
match_mode = "regex"
commands = [
    "look",
    "get",
    "appraise",
    "sell",
    "---",
    "put in pouch:put {noun} in my gem pouch"
]
priority = 45

# ═══════════════════════════════════════════════════════════
# PLAYERS (Trade Context)
# ═══════════════════════════════════════════════════════════

[[cmdlist]]
category = "player"
noun = "^[A-Z][a-z]+$"
match_mode = "regex"
commands = [
    "look",
    "---",
    "whisper:whisper {noun} {input}",
    "give:give {input} to {noun}",
    "trade:trade {noun}",
    "---",
    "smile",
    "bow"
]
priority = 60
</code></pre>
<h2 id="testing-your-setup-1"><a class="header" href="#testing-your-setup-1">Testing Your Setup</a></h2>
<h3 id="merchant-workflow-test"><a class="header" href="#merchant-workflow-test">Merchant Workflow Test</a></h3>
<ol>
<li>
<p><strong>Inventory Display</strong></p>
<ul>
<li><input disabled="" type="checkbox"> Inventory widget shows items</li>
<li><input disabled="" type="checkbox"> Container contents expand</li>
<li><input disabled="" type="checkbox"> Weight displays correctly</li>
</ul>
</li>
<li>
<p><strong>Transaction Logging</strong></p>
<ul>
<li><input disabled="" type="checkbox"> Commerce messages appear in transaction log</li>
<li><input disabled="" type="checkbox"> Trade whispers show in trade chat</li>
</ul>
</li>
<li>
<p><strong>Quick Commands</strong></p>
<ul>
<li><input disabled="" type="checkbox"> F1 shows inventory</li>
<li><input disabled="" type="checkbox"> Ctrl+A prompts for appraise target</li>
<li><input disabled="" type="checkbox"> Ctrl+S prompts for sell target</li>
</ul>
</li>
<li>
<p><strong>Context Menus</strong></p>
<ul>
<li><input disabled="" type="checkbox"> Right-click item shows merchant options</li>
<li><input disabled="" type="checkbox"> Put in container submenu works</li>
<li><input disabled="" type="checkbox"> Player right-click shows trade options</li>
</ul>
</li>
</ol>
<h3 id="typical-trade-session"><a class="header" href="#typical-trade-session">Typical Trade Session</a></h3>
<ol>
<li>Go to town square</li>
<li>Check inventory (F1)</li>
<li>Appraise items (Ctrl+A)</li>
<li>Watch transaction log</li>
<li>Test whisper alerts</li>
<li>Try context menu trading</li>
</ol>
<h2 id="customization-tips-2"><a class="header" href="#customization-tips-2">Customization Tips</a></h2>
<h3 id="for-crafters"><a class="header" href="#for-crafters">For Crafters</a></h3>
<p>Add crafting-specific bindings:</p>
<pre><code class="language-toml"># Crafting macros
[keybinds."ctrl+c"]
macro = "craft $input"

[keybinds."ctrl+r"]
macro = "repair $input"

[keybinds."ctrl+e"]
macro = "enhance $input"
</code></pre>
<h3 id="for-auctioneers"><a class="header" href="#for-auctioneers">For Auctioneers</a></h3>
<p>Track auction activity:</p>
<pre><code class="language-toml">[[triggers]]
name = "auction_bid"
pattern = "(?i)bid.*?(\\d+) silver"
command = ".notify Bid: $1 silver"
category = "auction"
</code></pre>
<h3 id="for-gatherers"><a class="header" href="#for-gatherers">For Gatherers</a></h3>
<p>Quick deposit macros:</p>
<pre><code class="language-toml">[keybinds."ctrl+shift+d"]
macro = "deposit all"

[keybinds."ctrl+shift+w"]
macro = "withdraw $input silver"
</code></pre>
<h2 id="troubleshooting-22"><a class="header" href="#troubleshooting-22">Troubleshooting</a></h2>
<h3 id="transaction-log-empty"><a class="header" href="#transaction-log-empty">Transaction Log Empty</a></h3>
<p>Check stream configuration:</p>
<pre><code class="language-toml">streams = ["commerce", "merchant"]
</code></pre>
<p>If no dedicated streams exist, try:</p>
<pre><code class="language-toml">streams = ["main"]
</code></pre>
<p>Then filter with highlights.</p>
<h3 id="inventory-not-updating-1"><a class="header" href="#inventory-not-updating-1">Inventory Not Updating</a></h3>
<p>Inventory requires game state updates:</p>
<ol>
<li>Type <code>inventory</code> to refresh</li>
<li>Check for parsing errors in logs</li>
<li>Verify widget data source</li>
</ol>
<h3 id="context-menu-missing"><a class="header" href="#context-menu-missing">Context Menu Missing</a></h3>
<ol>
<li>Check cmdlist.toml syntax</li>
<li>Verify pattern matches item nouns</li>
<li>Reload: <code>.reload cmdlist</code></li>
</ol>
<h3 id="keybind-prompts-not-appearing"><a class="header" href="#keybind-prompts-not-appearing">Keybind Prompts Not Appearing</a></h3>
<p>Ensure <code>$input</code> syntax is correct:</p>
<pre><code class="language-toml">macro = "sell $input"     # Correct
macro = "sell {input}"    # Wrong
</code></pre>
<h2 id="see-also-42"><a class="header" href="#see-also-42">See Also</a></h2>
<ul>
<li><a href="#inventory-widget">Inventory Widget</a></li>
<li><a href="#command-lists-cmdlists">Command Lists</a></li>
<li><a href="#triggers">Triggers</a></li>
<li><a href="#keybind-actions">Keybind Actions</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="roleplay-setup-1"><a class="header" href="#roleplay-setup-1">Roleplay Setup</a></h1>
<p>Create an immersive layout focused on storytelling and social interaction.</p>
<h2 id="goal-3"><a class="header" href="#goal-3">Goal</a></h2>
<p>Build a roleplay-focused layout with:</p>
<ul>
<li>Maximum text visibility for story immersion</li>
<li>Organized chat channels</li>
<li>Minimal HUD elements</li>
<li>Easy social command access</li>
<li>Atmospheric preservation</li>
</ul>
<h2 id="prerequisites-6"><a class="header" href="#prerequisites-6">Prerequisites</a></h2>
<ul>
<li>Completed <a href="#your-first-layout-1">Your First Layout</a></li>
<li>Interest in roleplay and social gameplay</li>
<li>Basic emote familiarity</li>
</ul>
<h2 id="design-philosophy"><a class="header" href="#design-philosophy">Design Philosophy</a></h2>
<p>Roleplay layouts prioritize:</p>
<ol>
<li><strong>Immersion</strong> - Large text areas, minimal UI chrome</li>
<li><strong>Readability</strong> - Clear text, comfortable spacing</li>
<li><strong>Organization</strong> - Separate IC (In-Character) and OOC (Out-Of-Character)</li>
<li><strong>Quick Social</strong> - Fast access to emotes and speech</li>
</ol>
<h2 id="layout-overview-2"><a class="header" href="#layout-overview-2">Layout Overview</a></h2>
<pre><code>┌────────────────────────────────────────────────────────────┐
│ [Room Name]                                                │
├────────────────────────────────────────────────────────────┤
│                                                            │
│                                                            │
│                    Main Story Text                         │
│              (room descriptions, actions)                  │
│                                                            │
│                                                            │
│                                                            │
├──────────────────────────────────┬─────────────────────────┤
│     Speech &amp; Thoughts            │    ESP/OOC Chat         │
│     (IC communication)           │    (group chat)         │
├──────────────────────────────────┴─────────────────────────┤
│ &gt; [command input]                                          │
└────────────────────────────────────────────────────────────┘
</code></pre>
<h2 id="step-1-create-the-layout-2"><a class="header" href="#step-1-create-the-layout-2">Step 1: Create the Layout</a></h2>
<p>Create <code>~/.vellum-fe/layout.toml</code>:</p>
<pre><code class="language-toml"># Roleplay Layout - Immersive Storytelling
# Maximizes text space, organizes communication channels

# ═══════════════════════════════════════════════════════════
# TOP - Room Title Bar (Minimal)
# ═══════════════════════════════════════════════════════════

[[widgets]]
type = "room"
name = "room_title"
x = 0
y = 0
width = 100
height = 3
show_exits = false
show_creatures = false
show_players = false
title_only = true

# ═══════════════════════════════════════════════════════════
# MAIN AREA - Story Text (Largest Widget)
# ═══════════════════════════════════════════════════════════

[[widgets]]
type = "text"
name = "story"
title = ""
x = 0
y = 3
width = 100
height = 55
streams = ["main", "room"]
scrollback = 10000
auto_scroll = true
border = false
padding = 1

# ═══════════════════════════════════════════════════════════
# BOTTOM LEFT - In-Character Communication
# ═══════════════════════════════════════════════════════════

[[widgets]]
type = "text"
name = "speech"
title = "Speech"
x = 0
y = 59
width = 55
height = 31
streams = ["speech", "whisper"]
scrollback = 2000
auto_scroll = true
border_color = "blue"

# ═══════════════════════════════════════════════════════════
# BOTTOM RIGHT - Out-Of-Character / ESP
# ═══════════════════════════════════════════════════════════

[[widgets]]
type = "text"
name = "thoughts"
title = "ESP/OOC"
x = 56
y = 59
width = 44
height = 31
streams = ["thoughts", "group"]
scrollback = 1000
auto_scroll = true
border_color = "cyan"

# ═══════════════════════════════════════════════════════════
# COMMAND INPUT
# ═══════════════════════════════════════════════════════════

[[widgets]]
type = "command_input"
name = "input"
x = 0
y = 91
width = 100
height = 9
history_size = 500
prompt = "› "
</code></pre>
<h2 id="step-2-immersive-theme"><a class="header" href="#step-2-immersive-theme">Step 2: Immersive Theme</a></h2>
<p>Create <code>~/.vellum-fe/colors.toml</code>:</p>
<pre><code class="language-toml">[theme]
name = "Parchment"

# Background - soft, easy on eyes
background = "#1a1814"     # Dark parchment

# Text colors - warm and readable
text = "#d4c5a9"           # Cream text
text_dim = "#8b7355"       # Muted brown

# UI elements - unobtrusive
border = "#3d3428"         # Dark border
border_focused = "#5c4a32" # Focused border

# Speech colors - distinguishable but not harsh
speech = "#87ceeb"         # Sky blue (say)
whisper = "#da70d6"        # Orchid (whisper)
thoughts = "#98fb98"       # Pale green (thoughts)
shout = "#ffa500"          # Orange (shout)

# Room descriptions - slightly brighter
room_name = "#ffd700"      # Gold
room_desc = "#d4c5a9"      # Cream

# Player names
player = "#ffffff"         # White
npc = "#daa520"            # Goldenrod

# Emotes and actions
emote = "#b8860b"          # Dark goldenrod

# Minimal status (if shown)
health = "#8fbc8f"         # Dark sea green
mana = "#6495ed"           # Cornflower blue
</code></pre>
<h2 id="step-3-roleplay-keybinds"><a class="header" href="#step-3-roleplay-keybinds">Step 3: Roleplay Keybinds</a></h2>
<p>Create <code>~/.vellum-fe/keybinds.toml</code>:</p>
<pre><code class="language-toml"># ═══════════════════════════════════════════════════════════
# SPEECH SHORTCUTS
# ═══════════════════════════════════════════════════════════

# Quick say (most common)
[keybinds."enter"]
action = "submit_input"

# Say with prompt
[keybinds."ctrl+s"]
macro = "say $input"

# Whisper
[keybinds."ctrl+w"]
macro = "whisper $input"

# Ask
[keybinds."ctrl+a"]
macro = "ask $input"

# Exclaim
[keybinds."ctrl+e"]
macro = "exclaim $input"

# ═══════════════════════════════════════════════════════════
# ESP/THOUGHTS
# ═══════════════════════════════════════════════════════════

[keybinds."ctrl+t"]
macro = "think $input"

[keybinds."ctrl+g"]
macro = "think [group] $input"

# ═══════════════════════════════════════════════════════════
# COMMON EMOTES - Function Keys
# ═══════════════════════════════════════════════════════════

[keybinds."f1"]
macro = "smile"

[keybinds."f2"]
macro = "nod"

[keybinds."f3"]
macro = "bow"

[keybinds."f4"]
macro = "wave"

[keybinds."f5"]
macro = "laugh"

[keybinds."f6"]
macro = "grin"

[keybinds."f7"]
macro = "sigh"

[keybinds."f8"]
macro = "shrug"

# Targeted emotes
[keybinds."shift+f1"]
macro = "smile $input"

[keybinds."shift+f2"]
macro = "nod $input"

[keybinds."shift+f3"]
macro = "bow $input"

[keybinds."shift+f4"]
macro = "wave $input"

# ═══════════════════════════════════════════════════════════
# ACTIONS AND POSES
# ═══════════════════════════════════════════════════════════

[keybinds."ctrl+1"]
macro = "act $input"

[keybinds."ctrl+2"]
macro = "pose $input"

[keybinds."ctrl+3"]
macro = "emote $input"

# ═══════════════════════════════════════════════════════════
# MOVEMENT (Unobtrusive)
# ═══════════════════════════════════════════════════════════

[keybinds."numpad8"]
macro = "go north"

[keybinds."numpad2"]
macro = "go south"

[keybinds."numpad4"]
macro = "go west"

[keybinds."numpad6"]
macro = "go east"

[keybinds."numpad7"]
macro = "go northwest"

[keybinds."numpad9"]
macro = "go northeast"

[keybinds."numpad1"]
macro = "go southwest"

[keybinds."numpad3"]
macro = "go southeast"

[keybinds."numpad5"]
macro = "go out"

# ═══════════════════════════════════════════════════════════
# LOOK AROUND
# ═══════════════════════════════════════════════════════════

[keybinds."ctrl+l"]
macro = "look"

[keybinds."ctrl+shift+l"]
macro = "look $input"

# ═══════════════════════════════════════════════════════════
# WINDOW NAVIGATION
# ═══════════════════════════════════════════════════════════

[keybinds."page_up"]
action = "scroll_up"

[keybinds."page_down"]
action = "scroll_down"

[keybinds."home"]
action = "scroll_top"

[keybinds."end"]
action = "scroll_bottom"

[keybinds."tab"]
action = "next_widget"

[keybinds."escape"]
action = "focus_input"

# Quick focus to specific windows
[keybinds."alt+1"]
action = "focus_widget"
widget = "story"

[keybinds."alt+2"]
action = "focus_widget"
widget = "speech"

[keybinds."alt+3"]
action = "focus_widget"
widget = "thoughts"
</code></pre>
<h2 id="step-4-immersive-highlights"><a class="header" href="#step-4-immersive-highlights">Step 4: Immersive Highlights</a></h2>
<p>Add to <code>~/.vellum-fe/highlights.toml</code>:</p>
<pre><code class="language-toml"># ═══════════════════════════════════════════════════════════
# SPEECH PATTERNS
# ═══════════════════════════════════════════════════════════

# Someone says
[[highlights]]
pattern = '(\\w+) says?, "'
fg = "#87ceeb"

# Someone whispers
[[highlights]]
pattern = "(\\w+) whispers,"
fg = "#da70d6"

# Someone asks
[[highlights]]
pattern = "(\\w+) asks?,"
fg = "#87ceeb"

# Someone exclaims
[[highlights]]
pattern = "(\\w+) exclaims?,"
fg = "#ffa500"

# Quoted speech
[[highlights]]
pattern = '"[^"]*"'
fg = "#ffffff"
bold = false

# ═══════════════════════════════════════════════════════════
# EMOTES AND ACTIONS
# ═══════════════════════════════════════════════════════════

# Emotes (verbs at start of line after name)
[[highlights]]
pattern = "^\\w+ (smiles|nods|bows|waves|laughs|grins|sighs|shrugs)"
fg = "#b8860b"

# ═══════════════════════════════════════════════════════════
# ROOM ELEMENTS
# ═══════════════════════════════════════════════════════════

# Room name (usually in brackets or emphasized)
[[highlights]]
pattern = "^\\[.*\\]$"
fg = "#ffd700"
bold = true

# Obvious exits
[[highlights]]
pattern = "Obvious (exits|paths):"
fg = "#8b7355"

# ═══════════════════════════════════════════════════════════
# PLAYER NAMES
# ═══════════════════════════════════════════════════════════

# Capital names (likely players)
[[highlights]]
pattern = "\\b[A-Z][a-z]{2,}\\b"
fg = "#ffffff"

# ═══════════════════════════════════════════════════════════
# OBJECTS AND ITEMS (Subtle)
# ═══════════════════════════════════════════════════════════

[[highlights]]
pattern = "(a|an|the|some) [a-z]+ [a-z]+"
fg = "#d4c5a9"

# ═══════════════════════════════════════════════════════════
# ESP/THOUGHTS
# ═══════════════════════════════════════════════════════════

[[highlights]]
pattern = "\\[.*?\\]:"
fg = "#98fb98"

# ═══════════════════════════════════════════════════════════
# TIME AND ATMOSPHERE
# ═══════════════════════════════════════════════════════════

[[highlights]]
pattern = "(?i)(dawn|morning|noon|afternoon|dusk|evening|night|midnight)"
fg = "#6495ed"
italic = true

[[highlights]]
pattern = "(?i)(rain|snow|fog|mist|wind|storm|clear|cloudy)"
fg = "#6495ed"
italic = true
</code></pre>
<h2 id="step-5-social-command-list"><a class="header" href="#step-5-social-command-list">Step 5: Social Command List</a></h2>
<p>Add to <code>~/.vellum-fe/cmdlist.toml</code>:</p>
<pre><code class="language-toml"># ═══════════════════════════════════════════════════════════
# PLAYERS - Social Context
# ═══════════════════════════════════════════════════════════

[[cmdlist]]
category = "player"
noun = "^[A-Z][a-z]+$"
match_mode = "regex"
commands = [
    "look",
    "---",
    "Greet&gt;smile {noun},bow {noun},wave {noun},nod {noun}",
    "Say&gt;say (to {noun}) {input},whisper {noun} {input},ask {noun} {input}",
    "---",
    "appraise"
]
priority = 50

# ═══════════════════════════════════════════════════════════
# ITEMS - RP Context
# ═══════════════════════════════════════════════════════════

[[cmdlist]]
category = "item"
noun = ".*"
match_mode = "regex"
commands = [
    "look",
    "get",
    "touch",
    "smell",
    "taste",
    "---",
    "show:show my {noun} to {input}",
    "give:give my {noun} to {input}"
]
priority = 10

# ═══════════════════════════════════════════════════════════
# FURNITURE AND SCENERY
# ═══════════════════════════════════════════════════════════

[[cmdlist]]
category = "furniture"
noun = "(?i)(chair|bench|stool|table|bed|couch|throne)"
match_mode = "regex"
commands = [
    "look",
    "sit on",
    "stand",
    "lean on"
]
priority = 30
</code></pre>
<h2 id="step-6-optional---minimal-status"><a class="header" href="#step-6-optional---minimal-status">Step 6: Optional - Minimal Status</a></h2>
<p>If you want some status without breaking immersion:</p>
<pre><code class="language-toml"># Add to layout.toml - minimalist status bar

[[widgets]]
type = "progress"
name = "health"
x = 0
y = 56
width = 50
height = 2
data_source = "vitals.health"
color = "health"
show_text = false
border = false

[[widgets]]
type = "progress"
name = "mana"
x = 50
y = 56
width = 50
height = 2
data_source = "vitals.mana"
color = "mana"
show_text = false
border = false
</code></pre>
<p>This adds thin, borderless bars between story and chat.</p>
<h2 id="testing-your-setup-2"><a class="header" href="#testing-your-setup-2">Testing Your Setup</a></h2>
<h3 id="roleplay-flow-test"><a class="header" href="#roleplay-flow-test">Roleplay Flow Test</a></h3>
<ol>
<li>
<p><strong>Text Visibility</strong></p>
<ul>
<li><input disabled="" type="checkbox"> Room descriptions fill story window</li>
<li><input disabled="" type="checkbox"> Text is comfortable to read</li>
<li><input disabled="" type="checkbox"> Scrolling works smoothly</li>
</ul>
</li>
<li>
<p><strong>Communication</strong></p>
<ul>
<li><input disabled="" type="checkbox"> Speech appears in speech window</li>
<li><input disabled="" type="checkbox"> ESP/thoughts in separate window</li>
<li><input disabled="" type="checkbox"> Colors distinguish speakers</li>
</ul>
</li>
<li>
<p><strong>Quick Actions</strong></p>
<ul>
<li><input disabled="" type="checkbox"> F1-F8 emotes work</li>
<li><input disabled="" type="checkbox"> Ctrl+S opens say prompt</li>
<li><input disabled="" type="checkbox"> Movement numpad works</li>
</ul>
</li>
<li>
<p><strong>Immersion</strong></p>
<ul>
<li><input disabled="" type="checkbox"> UI doesn’t distract</li>
<li><input disabled="" type="checkbox"> Colors are comfortable</li>
<li><input disabled="" type="checkbox"> Layout feels spacious</li>
</ul>
</li>
</ol>
<h3 id="social-interaction-test"><a class="header" href="#social-interaction-test">Social Interaction Test</a></h3>
<ol>
<li>Go to a social area (town square)</li>
<li>Use F1 to smile</li>
<li>Use Ctrl+S to say something</li>
<li>Check speech appears in correct window</li>
<li>Verify ESP goes to thoughts window</li>
</ol>
<h2 id="customization-ideas-1"><a class="header" href="#customization-ideas-1">Customization Ideas</a></h2>
<h3 id="faction-based-themes"><a class="header" href="#faction-based-themes">Faction-Based Themes</a></h3>
<p>Create themes matching your character’s background:</p>
<p><strong>Elven Theme</strong>:</p>
<pre><code class="language-toml">background = "#0a1510"
text = "#c0d890"
border = "#2a4530"
</code></pre>
<p><strong>Dark Theme</strong>:</p>
<pre><code class="language-toml">background = "#0d0d0d"
text = "#b0b0b0"
border = "#1a1a1a"
</code></pre>
<h3 id="event-specific-layouts"><a class="header" href="#event-specific-layouts">Event-Specific Layouts</a></h3>
<p>For large events, expand thoughts window:</p>
<pre><code class="language-toml"># Event layout - larger ESP
[[widgets]]
type = "text"
name = "thoughts"
x = 0
y = 60
width = 100
height = 30
streams = ["thoughts", "group"]
</code></pre>
<h3 id="character-macros"><a class="header" href="#character-macros">Character Macros</a></h3>
<p>Pre-written character expressions:</p>
<pre><code class="language-toml">[keybinds."ctrl+shift+1"]
macro = "emote adjusts their cloak with practiced ease"

[keybinds."ctrl+shift+2"]
macro = "emote glances around thoughtfully"

[keybinds."ctrl+shift+3"]
macro = "emote inclines their head in greeting"
</code></pre>
<h2 id="troubleshooting-23"><a class="header" href="#troubleshooting-23">Troubleshooting</a></h2>
<h3 id="text-too-dense"><a class="header" href="#text-too-dense">Text Too Dense</a></h3>
<p>Increase padding:</p>
<pre><code class="language-toml">padding = 2
</code></pre>
<p>Or add line spacing if supported.</p>
<h3 id="cant-see-whos-speaking"><a class="header" href="#cant-see-whos-speaking">Can’t See Who’s Speaking</a></h3>
<p>Adjust highlight patterns to catch speaker names before quotes.</p>
<h3 id="esp-flooding-main-window"><a class="header" href="#esp-flooding-main-window">ESP Flooding Main Window</a></h3>
<p>Verify stream separation:</p>
<ul>
<li>Story: <code>["main", "room"]</code></li>
<li>Speech: <code>["speech", "whisper"]</code></li>
<li>Thoughts: <code>["thoughts", "group"]</code></li>
</ul>
<h3 id="emotes-going-to-wrong-window"><a class="header" href="#emotes-going-to-wrong-window">Emotes Going to Wrong Window</a></h3>
<p>Emotes typically go to “main” stream. If you want them separate, check parser configuration.</p>
<h2 id="see-also-43"><a class="header" href="#see-also-43">See Also</a></h2>
<ul>
<li><a href="#text-windows-1">Text Windows</a></li>
<li><a href="#creating-themes">Creating Themes</a></li>
<li><a href="#highlight-patterns">Highlight Patterns</a></li>
<li><a href="#macros-1">Macros</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="minimal-layout-2"><a class="header" href="#minimal-layout-2">Minimal Layout</a></h1>
<p>Create a clean, distraction-free interface with maximum text visibility.</p>
<h2 id="goal-4"><a class="header" href="#goal-4">Goal</a></h2>
<p>Build a minimalist layout with:</p>
<ul>
<li>Maximum screen space for game text</li>
<li>Essential information only</li>
<li>Keyboard-centric design</li>
<li>Low resource usage</li>
<li>Quick load times</li>
</ul>
<h2 id="prerequisites-7"><a class="header" href="#prerequisites-7">Prerequisites</a></h2>
<ul>
<li>Basic VellumFE familiarity</li>
<li>Preference for simple interfaces</li>
<li>Keyboard navigation skills</li>
</ul>
<h2 id="design-philosophy-1"><a class="header" href="#design-philosophy-1">Design Philosophy</a></h2>
<p>The minimal layout follows these principles:</p>
<ol>
<li><strong>Less is More</strong> - Only show what you actively need</li>
<li><strong>Text First</strong> - Game output takes priority</li>
<li><strong>Keyboard Driven</strong> - Reduce mouse dependency</li>
<li><strong>Performance</strong> - Fewer widgets = faster rendering</li>
</ol>
<h2 id="layout-overview-3"><a class="header" href="#layout-overview-3">Layout Overview</a></h2>
<pre><code>┌────────────────────────────────────────────────────────────┐
│                                                            │
│                                                            │
│                                                            │
│                     Game Text                              │
│                   (Full Screen)                            │
│                                                            │
│                                                            │
│                                                            │
├────────────────────────────────────────────────────────────┤
│ HP: ████████░░ 82%  MP: ████░░░░░░ 40%  RT: 3  &gt; [input]   │
└────────────────────────────────────────────────────────────┘
</code></pre>
<h2 id="step-1-create-the-layout-3"><a class="header" href="#step-1-create-the-layout-3">Step 1: Create the Layout</a></h2>
<p>Create <code>~/.vellum-fe/layout.toml</code>:</p>
<pre><code class="language-toml"># Minimal Layout - Maximum Text, Minimum UI
# Clean, fast, keyboard-driven

# ═══════════════════════════════════════════════════════════
# MAIN TEXT - Full Width, Maximum Height
# ═══════════════════════════════════════════════════════════

[[widgets]]
type = "text"
name = "main"
title = ""
x = 0
y = 0
width = 100
height = 90
streams = ["main", "room", "combat", "thoughts", "speech"]
scrollback = 3000
auto_scroll = true
border = false
padding = 1

# ═══════════════════════════════════════════════════════════
# STATUS BAR - Compact Bottom Row
# ═══════════════════════════════════════════════════════════

# Health (compact)
[[widgets]]
type = "progress"
name = "health"
title = "HP"
x = 0
y = 91
width = 15
height = 3
data_source = "vitals.health"
color = "health"
show_percentage = true
border = false

# Mana (compact)
[[widgets]]
type = "progress"
name = "mana"
title = "MP"
x = 16
y = 91
width = 15
height = 3
data_source = "vitals.mana"
color = "mana"
show_percentage = true
border = false

# Roundtime (compact)
[[widgets]]
type = "countdown"
name = "roundtime"
title = "RT"
x = 32
y = 91
width = 8
height = 3
data_source = "roundtime"
border = false

# Command Input (rest of row)
[[widgets]]
type = "command_input"
name = "input"
x = 41
y = 91
width = 59
height = 9
history_size = 500
prompt = "&gt; "
border = false
</code></pre>
<p>That’s it. Four widgets total.</p>
<h2 id="step-2-minimal-theme"><a class="header" href="#step-2-minimal-theme">Step 2: Minimal Theme</a></h2>
<p>Create <code>~/.vellum-fe/colors.toml</code>:</p>
<pre><code class="language-toml">[theme]
name = "Minimal"

# Clean, high-contrast colors
background = "#000000"
text = "#cccccc"
text_dim = "#666666"

# No visible borders
border = "#000000"
border_focused = "#333333"

# Vitals - visible but not distracting
health = "#00aa00"
health_low = "#aaaa00"
health_critical = "#aa0000"
mana = "#0066aa"
stamina = "#aa6600"

# Status bar background
status_bg = "#111111"
</code></pre>
<h2 id="step-3-keyboard-centric-keybinds"><a class="header" href="#step-3-keyboard-centric-keybinds">Step 3: Keyboard-Centric Keybinds</a></h2>
<p>Create <code>~/.vellum-fe/keybinds.toml</code>:</p>
<pre><code class="language-toml"># ═══════════════════════════════════════════════════════════
# CORE NAVIGATION - Always Available
# ═══════════════════════════════════════════════════════════

# Cardinal directions
[keybinds."numpad8"]
macro = "north"

[keybinds."numpad2"]
macro = "south"

[keybinds."numpad4"]
macro = "west"

[keybinds."numpad6"]
macro = "east"

# Diagonal
[keybinds."numpad7"]
macro = "northwest"

[keybinds."numpad9"]
macro = "northeast"

[keybinds."numpad1"]
macro = "southwest"

[keybinds."numpad3"]
macro = "southeast"

# Special movement
[keybinds."numpad5"]
macro = "out"

[keybinds."numpad_plus"]
macro = "go"

[keybinds."numpad_minus"]
macro = "climb"

# ═══════════════════════════════════════════════════════════
# ESSENTIAL COMMANDS - Function Keys
# ═══════════════════════════════════════════════════════════

[keybinds."f1"]
macro = "look"

[keybinds."f2"]
macro = "inventory"

[keybinds."f3"]
macro = "experience"

[keybinds."f4"]
macro = "health"

[keybinds."f5"]
macro = "stance defensive"

[keybinds."f6"]
macro = "stance offensive"

[keybinds."f7"]
macro = "hide"

[keybinds."f8"]
macro = "search"

# ═══════════════════════════════════════════════════════════
# QUICK ACTIONS - Ctrl Keys
# ═══════════════════════════════════════════════════════════

[keybinds."ctrl+a"]
macro = "attack target"

[keybinds."ctrl+s"]
macro = "search;loot"

[keybinds."ctrl+g"]
macro = "get $input"

[keybinds."ctrl+d"]
macro = "drop $input"

# ═══════════════════════════════════════════════════════════
# SCROLLING - Page Keys
# ═══════════════════════════════════════════════════════════

[keybinds."page_up"]
action = "scroll_up"

[keybinds."page_down"]
action = "scroll_down"

[keybinds."home"]
action = "scroll_top"

[keybinds."end"]
action = "scroll_bottom"

# Half-page scroll
[keybinds."ctrl+page_up"]
action = "scroll_half_up"

[keybinds."ctrl+page_down"]
action = "scroll_half_down"

# ═══════════════════════════════════════════════════════════
# FOCUS
# ═══════════════════════════════════════════════════════════

[keybinds."escape"]
action = "focus_input"

# Toggle between main and input (since only 2 widgets)
[keybinds."tab"]
action = "next_widget"
</code></pre>
<h2 id="step-4-minimal-highlights"><a class="header" href="#step-4-minimal-highlights">Step 4: Minimal Highlights</a></h2>
<p>Create <code>~/.vellum-fe/highlights.toml</code>:</p>
<pre><code class="language-toml"># Minimal highlighting - only essential patterns

# ═══════════════════════════════════════════════════════════
# CRITICAL ALERTS
# ═══════════════════════════════════════════════════════════

[[highlights]]
pattern = "(?i)you are stunned"
fg = "black"
bg = "yellow"
bold = true

[[highlights]]
pattern = "(?i)you have died"
fg = "black"
bg = "red"
bold = true

# ═══════════════════════════════════════════════════════════
# PLAYER INTERACTION
# ═══════════════════════════════════════════════════════════

# Whispers (important)
[[highlights]]
pattern = "(\\w+) whispers,"
fg = "magenta"

# Your name mentioned
[[highlights]]
pattern = "\\bYOURNAME\\b"
fg = "cyan"
bold = true

# ═══════════════════════════════════════════════════════════
# COMBAT (Subtle)
# ═══════════════════════════════════════════════════════════

# Hits
[[highlights]]
pattern = "\\*\\*.+\\*\\*"
fg = "red"

# Death
[[highlights]]
pattern = "falls dead"
fg = "yellow"

# ═══════════════════════════════════════════════════════════
# NAVIGATION AIDS
# ═══════════════════════════════════════════════════════════

# Room name
[[highlights]]
pattern = "^\\[.+\\]$"
fg = "white"
bold = true

# Exits
[[highlights]]
pattern = "Obvious (exits|paths):"
fg = "gray"
</code></pre>
<h2 id="step-5-no-triggers-optional"><a class="header" href="#step-5-no-triggers-optional">Step 5: No Triggers (Optional)</a></h2>
<p>For truly minimal setup, skip triggers entirely. Or add only critical ones:</p>
<p>Create <code>~/.vellum-fe/triggers.toml</code>:</p>
<pre><code class="language-toml"># Only life-saving triggers

[[triggers]]
name = "death_alert"
pattern = "You have died"
command = ".notify DEAD!"
priority = 100

[[triggers]]
name = "stun_alert"
pattern = "(?i)you are stunned"
command = ".notify Stunned"
priority = 100
cooldown = 2000
</code></pre>
<h2 id="alternative-ultra-minimal"><a class="header" href="#alternative-ultra-minimal">Alternative: Ultra-Minimal</a></h2>
<p>For absolute minimalism, use just two widgets:</p>
<pre><code class="language-toml"># Ultra-minimal - text and input only

[[widgets]]
type = "text"
name = "main"
x = 0
y = 0
width = 100
height = 92
streams = ["main", "room", "combat", "thoughts", "speech"]
scrollback = 2000
border = false

[[widgets]]
type = "command_input"
name = "input"
x = 0
y = 93
width = 100
height = 7
prompt = "&gt; "
border = false
</code></pre>
<p>No status bars, no indicators. Pure text adventure.</p>
<h2 id="alternative-vertical-split"><a class="header" href="#alternative-vertical-split">Alternative: Vertical Split</a></h2>
<p>If you want some separation without complexity:</p>
<pre><code class="language-toml"># Two-column minimal

[[widgets]]
type = "text"
name = "main"
x = 0
y = 0
width = 70
height = 92
streams = ["main", "room", "combat"]
border = false

[[widgets]]
type = "text"
name = "chat"
x = 71
y = 0
width = 29
height = 92
streams = ["thoughts", "speech", "whisper"]
border_color = "gray"

[[widgets]]
type = "command_input"
name = "input"
x = 0
y = 93
width = 100
height = 7
prompt = "&gt; "
border = false
</code></pre>
<h2 id="testing-your-setup-3"><a class="header" href="#testing-your-setup-3">Testing Your Setup</a></h2>
<h3 id="performance-test"><a class="header" href="#performance-test">Performance Test</a></h3>
<ol>
<li>Launch VellumFE</li>
<li>Check startup time (should be fast)</li>
<li>Scroll rapidly (should be smooth)</li>
<li>Send many commands (no lag)</li>
</ol>
<h3 id="functionality-test"><a class="header" href="#functionality-test">Functionality Test</a></h3>
<ul>
<li><input disabled="" type="checkbox"> Text displays clearly</li>
<li><input disabled="" type="checkbox"> Scrolling works (Page Up/Down)</li>
<li><input disabled="" type="checkbox"> Commands execute</li>
<li><input disabled="" type="checkbox"> Vital bars update</li>
<li><input disabled="" type="checkbox"> RT countdown works</li>
</ul>
<h3 id="keyboard-only-test"><a class="header" href="#keyboard-only-test">Keyboard-Only Test</a></h3>
<p>Try a session without using the mouse:</p>
<ol>
<li>Navigate rooms with numpad</li>
<li>Use F-keys for common commands</li>
<li>Type commands directly</li>
<li>Scroll with Page keys</li>
</ol>
<h2 id="performance-tips-1"><a class="header" href="#performance-tips-1">Performance Tips</a></h2>
<h3 id="reduce-scrollback"><a class="header" href="#reduce-scrollback">Reduce Scrollback</a></h3>
<p>Less history = less memory:</p>
<pre><code class="language-toml">scrollback = 1000  # Instead of 5000+
</code></pre>
<h3 id="disable-animations"><a class="header" href="#disable-animations">Disable Animations</a></h3>
<p>If supported:</p>
<pre><code class="language-toml">[performance]
animations = false
smooth_scroll = false
</code></pre>
<h3 id="simple-highlights"><a class="header" href="#simple-highlights">Simple Highlights</a></h3>
<p>Complex regex patterns slow parsing:</p>
<pre><code class="language-toml"># Fast (literal string)
pattern = "You are stunned"

# Slower (complex regex)
pattern = "(?i)you\\s+are\\s+(?:completely\\s+)?stunned"
</code></pre>
<h3 id="fewer-streams"><a class="header" href="#fewer-streams">Fewer Streams</a></h3>
<p>Combining streams reduces processing:</p>
<pre><code class="language-toml"># All in one (fastest)
streams = ["main"]

# Separated (more processing)
streams = ["main", "room", "combat", "thoughts"]
</code></pre>
<h2 id="customization"><a class="header" href="#customization">Customization</a></h2>
<h3 id="adding-status-on-demand"><a class="header" href="#adding-status-on-demand">Adding Status on Demand</a></h3>
<p>Create a keybind to show/hide status:</p>
<pre><code class="language-toml">[keybinds."ctrl+h"]
action = "toggle_widget"
widget = "health"
</code></pre>
<h3 id="temporary-expansion"><a class="header" href="#temporary-expansion">Temporary Expansion</a></h3>
<p>For complex situations, temporarily switch layouts:</p>
<pre><code>.layout hunting    # Switch to full layout
.layout minimal    # Back to minimal
</code></pre>
<h3 id="color-adjustments"><a class="header" href="#color-adjustments">Color Adjustments</a></h3>
<p>For different lighting conditions:</p>
<p><strong>Day Mode</strong> (brighter):</p>
<pre><code class="language-toml">background = "#1a1a1a"
text = "#e0e0e0"
</code></pre>
<p><strong>Night Mode</strong> (darker):</p>
<pre><code class="language-toml">background = "#000000"
text = "#909090"
</code></pre>
<h2 id="troubleshooting-24"><a class="header" href="#troubleshooting-24">Troubleshooting</a></h2>
<h3 id="missing-information"><a class="header" href="#missing-information">Missing Information</a></h3>
<p>If you need data not shown:</p>
<ol>
<li>Add minimal widget for that data</li>
<li>Use keybind macros (F3 = experience)</li>
<li>Create triggers for notifications</li>
</ol>
<h3 id="accidental-scrollback"><a class="header" href="#accidental-scrollback">Accidental Scrollback</a></h3>
<p>Enable auto-scroll:</p>
<pre><code class="language-toml">auto_scroll = true
</code></pre>
<p>Or use End key to jump to bottom.</p>
<h3 id="cant-see-status"><a class="header" href="#cant-see-status">Can’t See Status</a></h3>
<p>Check border settings - borders might be same color as background:</p>
<pre><code class="language-toml">border = false  # Hide borders entirely
</code></pre>
<h3 id="input-too-small"><a class="header" href="#input-too-small">Input Too Small</a></h3>
<p>Increase input height:</p>
<pre><code class="language-toml">height = 9  # More space for long commands
</code></pre>
<h2 id="philosophy-1"><a class="header" href="#philosophy-1">Philosophy</a></h2>
<p>The minimal layout works best when you:</p>
<ul>
<li>Know the game well</li>
<li>Prefer typing over clicking</li>
<li>Want maximum text visibility</li>
<li>Value performance over features</li>
<li>Play on smaller screens or terminals</li>
</ul>
<p>It doesn’t work well when you:</p>
<ul>
<li>Need constant visual status monitoring</li>
<li>Rely heavily on context menus</li>
<li>Are new to the game</li>
<li>Want rich visual feedback</li>
</ul>
<p>Choose the approach that matches your playstyle.</p>
<h2 id="see-also-44"><a class="header" href="#see-also-44">See Also</a></h2>
<ul>
<li><a href="#your-first-layout-1">Your First Layout</a> - For more features</li>
<li><a href="#performance-optimization">Performance Optimization</a></li>
<li><a href="#creating-themes">Creating Themes</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="accessibility-setup-1"><a class="header" href="#accessibility-setup-1">Accessibility Setup</a></h1>
<p>Configure VellumFE for screen readers, high contrast needs, and other accessibility requirements.</p>
<h2 id="goal-5"><a class="header" href="#goal-5">Goal</a></h2>
<p>Create an accessible setup with:</p>
<ul>
<li>Screen reader integration (TTS)</li>
<li>High contrast color themes</li>
<li>Keyboard-only navigation</li>
<li>Large text options</li>
<li>Simplified layouts</li>
</ul>
<h2 id="prerequisites-8"><a class="header" href="#prerequisites-8">Prerequisites</a></h2>
<ul>
<li>VellumFE installed</li>
<li>Screen reader software (optional)</li>
<li>Understanding of your accessibility needs</li>
</ul>
<h2 id="accessibility-features-overview"><a class="header" href="#accessibility-features-overview">Accessibility Features Overview</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Feature</th><th>Purpose</th><th>Configuration</th></tr>
</thead>
<tbody>
<tr><td>TTS</td><td>Audio output</td><td><code>config.toml</code></td></tr>
<tr><td>High Contrast</td><td>Visual clarity</td><td><code>colors.toml</code></td></tr>
<tr><td>Large Text</td><td>Readability</td><td>Terminal settings</td></tr>
<tr><td>Keyboard Nav</td><td>Mouse-free use</td><td><code>keybinds.toml</code></td></tr>
<tr><td>Audio Alerts</td><td>Status awareness</td><td><code>triggers.toml</code></td></tr>
</tbody>
</table>
</div>
<h2 id="step-1-enable-text-to-speech"><a class="header" href="#step-1-enable-text-to-speech">Step 1: Enable Text-to-Speech</a></h2>
<h3 id="configure-tts"><a class="header" href="#configure-tts">Configure TTS</a></h3>
<p>Edit <code>~/.vellum-fe/config.toml</code>:</p>
<pre><code class="language-toml">[tts]
enabled = true
voice = "default"           # System default voice
rate = 1.0                  # 0.5 (slow) to 2.0 (fast)
volume = 1.0                # 0.0 to 1.0

# What to speak
speak_room_descriptions = true
speak_combat = true
speak_speech = true
speak_whispers = true
speak_thoughts = false      # Often too much
speak_system = true

# Filtering
skip_patterns = [
    "^\\s*$",               # Empty lines
    "^Obvious exits:",      # Repetitive
]

# Priority speaking (interrupts queue)
priority_patterns = [
    "stunned",
    "webbed",
    "died",
    "whispers,"
]
</code></pre>
<h3 id="platform-specific-tts"><a class="header" href="#platform-specific-tts">Platform-Specific TTS</a></h3>
<p><strong>Windows</strong> (SAPI):</p>
<pre><code class="language-toml">[tts]
engine = "sapi"
voice = "Microsoft David"   # or "Microsoft Zira"
</code></pre>
<p><strong>macOS</strong> (say):</p>
<pre><code class="language-toml">[tts]
engine = "say"
voice = "Alex"              # or "Samantha"
</code></pre>
<p><strong>Linux</strong> (espeak):</p>
<pre><code class="language-toml">[tts]
engine = "espeak"
voice = "en-us"
# Install: sudo apt install espeak
</code></pre>
<p><strong>Linux</strong> (speech-dispatcher):</p>
<pre><code class="language-toml">[tts]
engine = "speechd"
voice = "default"
# Install: sudo apt install speech-dispatcher
</code></pre>
<h2 id="step-2-high-contrast-theme"><a class="header" href="#step-2-high-contrast-theme">Step 2: High Contrast Theme</a></h2>
<p>Create <code>~/.vellum-fe/colors.toml</code>:</p>
<pre><code class="language-toml">[theme]
name = "High Contrast"

# Maximum contrast backgrounds
background = "#000000"      # Pure black
text = "#ffffff"            # Pure white
text_dim = "#c0c0c0"        # Light gray (still readable)

# Bold, distinct borders
border = "#ffffff"
border_focused = "#ffff00"  # Yellow focus indicator

# Vitals - WCAG AAA contrast
health = "#00ff00"          # Bright green
health_low = "#ffff00"      # Yellow warning
health_critical = "#ff0000" # Red danger
mana = "#00ffff"            # Cyan
stamina = "#ff8800"         # Orange
spirit = "#ff00ff"          # Magenta

# Status indicators - distinct colors
hidden = "#00ff00"
stunned = "#ffff00"
webbed = "#ff00ff"
prone = "#00ffff"
kneeling = "#ff8800"

# Speech - distinguishable
speech = "#00ffff"          # Cyan
whisper = "#ff00ff"         # Magenta
thoughts = "#00ff00"        # Green
shout = "#ffff00"           # Yellow

# Combat
attack_hit = "#00ff00"
attack_miss = "#ff0000"
damage_high = "#ff0000"

# Links and interactive elements
link = "#00ffff"
link_hover = "#ffff00"
</code></pre>
<h3 id="alternative-yellow-on-black"><a class="header" href="#alternative-yellow-on-black">Alternative: Yellow on Black</a></h3>
<p>Some users prefer yellow text:</p>
<pre><code class="language-toml">[theme]
name = "Yellow High Contrast"
background = "#000000"
text = "#ffff00"
text_dim = "#cccc00"
border = "#ffff00"
</code></pre>
<h3 id="alternative-white-on-blue"><a class="header" href="#alternative-white-on-blue">Alternative: White on Blue</a></h3>
<p>Classic high-contrast scheme:</p>
<pre><code class="language-toml">[theme]
name = "White on Blue"
background = "#000080"
text = "#ffffff"
border = "#ffffff"
</code></pre>
<h2 id="step-3-accessible-layout"><a class="header" href="#step-3-accessible-layout">Step 3: Accessible Layout</a></h2>
<p>Create <code>~/.vellum-fe/layout.toml</code>:</p>
<pre><code class="language-toml"># Accessible Layout - Clear, Logical Structure
# Optimized for screen readers and keyboard navigation

# ═══════════════════════════════════════════════════════════
# MAIN TEXT - Primary Focus
# ═══════════════════════════════════════════════════════════

[[widgets]]
type = "text"
name = "main"
title = "Game Output"
x = 0
y = 0
width = 100
height = 70
streams = ["main", "room", "combat", "speech"]
scrollback = 2000
auto_scroll = true
focus_order = 1             # First in tab order

# ═══════════════════════════════════════════════════════════
# STATUS - Spoken Summary
# ═══════════════════════════════════════════════════════════

[[widgets]]
type = "progress"
name = "health"
title = "Health"
x = 0
y = 71
width = 25
height = 5
data_source = "vitals.health"
color = "health"
show_text = true
show_percentage = true
announce_changes = true     # TTS announces changes
focus_order = 2

[[widgets]]
type = "progress"
name = "mana"
title = "Mana"
x = 26
y = 71
width = 25
height = 5
data_source = "vitals.mana"
color = "mana"
show_text = true
show_percentage = true
announce_changes = true
focus_order = 3

[[widgets]]
type = "progress"
name = "stamina"
title = "Stamina"
x = 52
y = 71
width = 24
height = 5
data_source = "vitals.stamina"
color = "stamina"
show_text = true
show_percentage = true
focus_order = 4

[[widgets]]
type = "countdown"
name = "roundtime"
title = "Roundtime"
x = 77
y = 71
width = 23
height = 5
data_source = "roundtime"
announce_start = true       # "Roundtime 5 seconds"
announce_end = true         # "Ready"
focus_order = 5

# ═══════════════════════════════════════════════════════════
# STATUS INDICATORS - Audio Alerts
# ═══════════════════════════════════════════════════════════

[[widgets]]
type = "indicator"
name = "status"
title = "Status"
x = 0
y = 77
width = 100
height = 5
indicators = [
    "hidden",
    "stunned",
    "webbed",
    "prone",
    "kneeling"
]
columns = 5
announce_changes = true     # TTS announces status changes
focus_order = 6

# ═══════════════════════════════════════════════════════════
# COMMAND INPUT - Primary Interaction
# ═══════════════════════════════════════════════════════════

[[widgets]]
type = "command_input"
name = "input"
title = "Command"
x = 0
y = 83
width = 100
height = 17
history_size = 500
prompt = "Enter command: "
announce_echo = false       # Don't repeat typed text
focus_order = 0             # Default focus
</code></pre>
<h2 id="step-4-keyboard-navigation"><a class="header" href="#step-4-keyboard-navigation">Step 4: Keyboard Navigation</a></h2>
<p>Create <code>~/.vellum-fe/keybinds.toml</code>:</p>
<pre><code class="language-toml"># ═══════════════════════════════════════════════════════════
# WIDGET NAVIGATION - Tab Order
# ═══════════════════════════════════════════════════════════

[keybinds."tab"]
action = "next_widget"

[keybinds."shift+tab"]
action = "prev_widget"

[keybinds."escape"]
action = "focus_input"

# Quick focus to specific widgets
[keybinds."alt+m"]
action = "focus_widget"
widget = "main"

[keybinds."alt+h"]
action = "focus_widget"
widget = "health"

[keybinds."alt+i"]
action = "focus_widget"
widget = "input"

# ═══════════════════════════════════════════════════════════
# SCROLLING - Standard Keys
# ═══════════════════════════════════════════════════════════

[keybinds."page_up"]
action = "scroll_up"

[keybinds."page_down"]
action = "scroll_down"

[keybinds."home"]
action = "scroll_top"

[keybinds."end"]
action = "scroll_bottom"

[keybinds."ctrl+home"]
action = "scroll_top"

[keybinds."ctrl+end"]
action = "scroll_bottom"

# Line-by-line scrolling
[keybinds."up"]
action = "scroll_line_up"

[keybinds."down"]
action = "scroll_line_down"

# ═══════════════════════════════════════════════════════════
# STATUS QUERIES - Audio Feedback
# ═══════════════════════════════════════════════════════════

[keybinds."f1"]
action = "speak_status"     # TTS reads all vitals

[keybinds."f2"]
action = "speak_room"       # TTS reads room description

[keybinds."f3"]
action = "speak_last"       # Repeat last spoken text

[keybinds."f4"]
action = "stop_speaking"    # Interrupt TTS

# ═══════════════════════════════════════════════════════════
# MOVEMENT - Consistent Keys
# ═══════════════════════════════════════════════════════════

[keybinds."numpad8"]
macro = "north"

[keybinds."numpad2"]
macro = "south"

[keybinds."numpad4"]
macro = "west"

[keybinds."numpad6"]
macro = "east"

[keybinds."numpad7"]
macro = "northwest"

[keybinds."numpad9"]
macro = "northeast"

[keybinds."numpad1"]
macro = "southwest"

[keybinds."numpad3"]
macro = "southeast"

[keybinds."numpad5"]
macro = "out"

# ═══════════════════════════════════════════════════════════
# COMMON ACTIONS
# ═══════════════════════════════════════════════════════════

[keybinds."f5"]
macro = "look"

[keybinds."f6"]
macro = "inventory"

[keybinds."f7"]
macro = "experience"

[keybinds."f8"]
macro = "health"

[keybinds."f9"]
macro = "attack target"

[keybinds."f10"]
macro = "hide"

[keybinds."f11"]
macro = "search"

[keybinds."f12"]
macro = "flee"

# ═══════════════════════════════════════════════════════════
# TTS CONTROL
# ═══════════════════════════════════════════════════════════

[keybinds."ctrl+space"]
action = "toggle_tts"

[keybinds."ctrl+up"]
action = "tts_rate_up"

[keybinds."ctrl+down"]
action = "tts_rate_down"

[keybinds."ctrl+shift+up"]
action = "tts_volume_up"

[keybinds."ctrl+shift+down"]
action = "tts_volume_down"
</code></pre>
<h2 id="step-5-audio-alerts"><a class="header" href="#step-5-audio-alerts">Step 5: Audio Alerts</a></h2>
<p>Create <code>~/.vellum-fe/triggers.toml</code>:</p>
<pre><code class="language-toml"># ═══════════════════════════════════════════════════════════
# CRITICAL STATUS - Spoken Alerts
# ═══════════════════════════════════════════════════════════

[[triggers]]
name = "stun_announce"
pattern = "(?i)you are stunned"
command = ".tts You are stunned!"
priority = 100
cooldown = 1000

[[triggers]]
name = "web_announce"
pattern = "(?i)webs? (stick|entangle)"
command = ".tts You are webbed!"
priority = 100
cooldown = 1000

[[triggers]]
name = "prone_announce"
pattern = "(?i)(knock|fall).*?(down|prone)"
command = ".tts You fell down!"
priority = 100
cooldown = 1000

[[triggers]]
name = "death_announce"
pattern = "You have died"
command = ".tts You have died!"
priority = 100

# ═══════════════════════════════════════════════════════════
# HEALTH WARNINGS
# ═══════════════════════════════════════════════════════════

[[triggers]]
name = "low_health"
pattern = "(?i)feel (weak|faint)"
command = ".tts Warning! Low health!"
priority = 100
cooldown = 5000

# ═══════════════════════════════════════════════════════════
# SOCIAL - Important Communications
# ═══════════════════════════════════════════════════════════

[[triggers]]
name = "whisper_announce"
pattern = "(\\w+) whispers,"
command = ".tts $1 whispers to you"
priority = 90
cooldown = 500

[[triggers]]
name = "name_mention"
pattern = "\\bYOURNAME\\b"
command = ".tts Your name was mentioned"
priority = 80
cooldown = 3000

# ═══════════════════════════════════════════════════════════
# ROUNDTIME
# ═══════════════════════════════════════════════════════════

[[triggers]]
name = "rt_long"
pattern = "Roundtime: ([5-9]|\\d{2,})"
command = ".tts Roundtime $1 seconds"
priority = 50

[[triggers]]
name = "rt_done"
pattern = "Roundtime: 0"
command = ".tts Ready"
priority = 50
enabled = false  # Enable if you want ready alerts
</code></pre>
<h2 id="step-6-large-text-configuration"><a class="header" href="#step-6-large-text-configuration">Step 6: Large Text Configuration</a></h2>
<p>VellumFE inherits font size from your terminal. Configure your terminal:</p>
<h3 id="windows-terminal"><a class="header" href="#windows-terminal">Windows Terminal</a></h3>
<p>Settings → Profiles → Default → Appearance:</p>
<ul>
<li>Font size: 14-18 for comfortable reading</li>
<li>Font face: Consolas, Cascadia Code, or other monospace</li>
</ul>
<h3 id="macos-terminal"><a class="header" href="#macos-terminal">macOS Terminal</a></h3>
<p>Terminal → Preferences → Profiles → Text:</p>
<ul>
<li>Font: Monaco or SF Mono</li>
<li>Size: 14-18 pt</li>
</ul>
<h3 id="linux-terminal-gnome"><a class="header" href="#linux-terminal-gnome">Linux Terminal (GNOME)</a></h3>
<p>Preferences → Profiles → Default → Text:</p>
<ul>
<li>Custom font: DejaVu Sans Mono</li>
<li>Size: 14-18</li>
</ul>
<h3 id="recommended-fonts"><a class="header" href="#recommended-fonts">Recommended Fonts</a></h3>
<p>High-readability monospace fonts:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Font</th><th>Platform</th><th>Notes</th></tr>
</thead>
<tbody>
<tr><td>JetBrains Mono</td><td>All</td><td>Designed for readability</td></tr>
<tr><td>Fira Code</td><td>All</td><td>Excellent legibility</td></tr>
<tr><td>Cascadia Code</td><td>Windows</td><td>Microsoft’s modern font</td></tr>
<tr><td>SF Mono</td><td>macOS</td><td>Apple’s system font</td></tr>
<tr><td>DejaVu Sans Mono</td><td>Linux</td><td>Comprehensive Unicode</td></tr>
<tr><td>OpenDyslexic Mono</td><td>All</td><td>Dyslexia-friendly</td></tr>
</tbody>
</table>
</div>
<h2 id="testing-your-setup-4"><a class="header" href="#testing-your-setup-4">Testing Your Setup</a></h2>
<h3 id="tts-test"><a class="header" href="#tts-test">TTS Test</a></h3>
<ol>
<li>Enable TTS in config</li>
<li>Launch VellumFE</li>
<li>Move to a new room</li>
<li>Verify room description is spoken</li>
<li>Test F1 (speak status) keybind</li>
</ol>
<h3 id="navigation-test"><a class="header" href="#navigation-test">Navigation Test</a></h3>
<ol>
<li>Use Tab to cycle through widgets</li>
<li>Verify focus indicator is visible (yellow border)</li>
<li>Use Page Up/Down in main window</li>
<li>Use Escape to return to input</li>
</ol>
<h3 id="contrast-test"><a class="header" href="#contrast-test">Contrast Test</a></h3>
<ol>
<li>Check all text is readable</li>
<li>Verify borders are visible</li>
<li>Test in both light and dark room lighting</li>
<li>Check vital bar colors are distinguishable</li>
</ol>
<h3 id="checklist"><a class="header" href="#checklist">Checklist</a></h3>
<ul>
<li><input disabled="" type="checkbox"> TTS speaks room descriptions</li>
<li><input disabled="" type="checkbox"> TTS announces status changes</li>
<li><input disabled="" type="checkbox"> Tab cycles through widgets</li>
<li><input disabled="" type="checkbox"> Focus indicator clearly visible</li>
<li><input disabled="" type="checkbox"> All text high contrast</li>
<li><input disabled="" type="checkbox"> Vital bars distinguishable by color</li>
<li><input disabled="" type="checkbox"> Keybinds work as expected</li>
<li><input disabled="" type="checkbox"> F1 speaks current status</li>
</ul>
<h2 id="customization-1"><a class="header" href="#customization-1">Customization</a></h2>
<h3 id="adjust-tts-speed"><a class="header" href="#adjust-tts-speed">Adjust TTS Speed</a></h3>
<p>For faster reading:</p>
<pre><code class="language-toml">[tts]
rate = 1.5
</code></pre>
<p>For clearer pronunciation:</p>
<pre><code class="language-toml">[tts]
rate = 0.8
</code></pre>
<h3 id="selective-tts"><a class="header" href="#selective-tts">Selective TTS</a></h3>
<p>Only speak important things:</p>
<pre><code class="language-toml">[tts]
speak_room_descriptions = true
speak_combat = false
speak_speech = true
speak_whispers = true
speak_thoughts = false
</code></pre>
<h3 id="different-voices"><a class="header" href="#different-voices">Different Voices</a></h3>
<p>Some systems support multiple voices:</p>
<pre><code class="language-toml">[tts]
combat_voice = "Microsoft David"
speech_voice = "Microsoft Zira"
</code></pre>
<h3 id="custom-alert-sounds"><a class="header" href="#custom-alert-sounds">Custom Alert Sounds</a></h3>
<p>Combine TTS with audio:</p>
<pre><code class="language-toml">[[triggers]]
name = "stun_alert"
pattern = "(?i)you are stunned"
command = ".sound stun.wav;.tts Stunned!"
</code></pre>
<h2 id="screen-reader-integration"><a class="header" href="#screen-reader-integration">Screen Reader Integration</a></h2>
<p>VellumFE can work alongside dedicated screen readers:</p>
<h3 id="nvda-windows"><a class="header" href="#nvda-windows">NVDA (Windows)</a></h3>
<ul>
<li>VellumFE TTS can coexist with NVDA</li>
<li>Consider disabling VellumFE TTS if using NVDA</li>
<li>NVDA will read terminal output automatically</li>
</ul>
<h3 id="voiceover-macos"><a class="header" href="#voiceover-macos">VoiceOver (macOS)</a></h3>
<ul>
<li>VoiceOver reads terminal content</li>
<li>Use VoiceOver commands for navigation</li>
<li>VellumFE keybinds may conflict - adjust as needed</li>
</ul>
<h3 id="orca-linux"><a class="header" href="#orca-linux">Orca (Linux)</a></h3>
<ul>
<li>Orca works with accessible terminals</li>
<li>Ensure terminal has accessibility enabled</li>
<li>May need to disable VellumFE TTS to avoid overlap</li>
</ul>
<h2 id="troubleshooting-25"><a class="header" href="#troubleshooting-25">Troubleshooting</a></h2>
<h3 id="tts-not-working"><a class="header" href="#tts-not-working">TTS Not Working</a></h3>
<ol>
<li>Check TTS is enabled in config</li>
<li>Verify system TTS works: <code>say "test"</code> (macOS) or test in Windows settings</li>
<li>Check TTS engine setting matches installed software</li>
<li>Review logs for TTS errors</li>
</ol>
<h3 id="focus-not-visible"><a class="header" href="#focus-not-visible">Focus Not Visible</a></h3>
<p>Increase border contrast:</p>
<pre><code class="language-toml">border_focused = "#ffff00"  # Bright yellow
</code></pre>
<p>Or add a focus background:</p>
<pre><code class="language-toml">focused_bg = "#333300"
</code></pre>
<h3 id="colors-not-distinct"><a class="header" href="#colors-not-distinct">Colors Not Distinct</a></h3>
<p>Test with colorblind simulation tools, then adjust:</p>
<pre><code class="language-toml"># For red-green colorblindness
health = "#00ffff"    # Cyan instead of green
danger = "#ffff00"    # Yellow instead of red
</code></pre>
<h3 id="keybinds-conflicting"><a class="header" href="#keybinds-conflicting">Keybinds Conflicting</a></h3>
<p>Screen readers use many keybinds. Check for conflicts and remap:</p>
<pre><code class="language-toml"># If F1 conflicts with screen reader
[keybinds."ctrl+f1"]
action = "speak_status"
</code></pre>
<h2 id="resources"><a class="header" href="#resources">Resources</a></h2>
<h3 id="color-contrast-tools"><a class="header" href="#color-contrast-tools">Color Contrast Tools</a></h3>
<ul>
<li><a href="https://webaim.org/resources/contrastchecker/">WebAIM Contrast Checker</a></li>
<li><a href="https://contrast-ratio.com/">Contrast Ratio</a></li>
</ul>
<h3 id="screen-reader-documentation"><a class="header" href="#screen-reader-documentation">Screen Reader Documentation</a></h3>
<ul>
<li><a href="https://www.nvaccess.org/files/nvda/documentation/userGuide.html">NVDA User Guide</a></li>
<li><a href="https://support.apple.com/guide/voiceover/">VoiceOver Getting Started</a></li>
<li><a href="https://help.gnome.org/users/orca/">Orca Documentation</a></li>
</ul>
<h3 id="accessibility-standards"><a class="header" href="#accessibility-standards">Accessibility Standards</a></h3>
<ul>
<li><a href="https://www.w3.org/WAI/WCAG21/quickref/">WCAG 2.1 Guidelines</a></li>
<li><a href="https://www.section508.gov/">Section 508</a></li>
</ul>
<h2 id="see-also-45"><a class="header" href="#see-also-45">See Also</a></h2>
<ul>
<li><a href="#tts-setup">TTS Setup</a> - Detailed TTS configuration</li>
<li><a href="#creating-themes">Creating Themes</a> - Theme customization</li>
<li><a href="#keybind-actions">Keybind Actions</a> - All available actions</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="cookbook"><a class="header" href="#cookbook">Cookbook</a></h1>
<p>Quick recipes for common VellumFE customizations and configurations.</p>
<h2 id="philosophy-2"><a class="header" href="#philosophy-2">Philosophy</a></h2>
<p>The cookbook provides focused, copy-paste-ready solutions for specific tasks. Each recipe is self-contained and can be used independently.</p>
<h2 id="recipe-format"><a class="header" href="#recipe-format">Recipe Format</a></h2>
<p>Each recipe includes:</p>
<ol>
<li><strong>Goal</strong> - What you’ll achieve</li>
<li><strong>Configuration</strong> - Complete TOML to copy</li>
<li><strong>Explanation</strong> - How it works</li>
<li><strong>Variations</strong> - Alternative approaches</li>
</ol>
<h2 id="available-recipes"><a class="header" href="#available-recipes">Available Recipes</a></h2>
<h3 id="layout-recipes"><a class="header" href="#layout-recipes">Layout Recipes</a></h3>
<ul>
<li><a href="#split-main-window">Split Main Window</a> - Divide main text area into multiple panels</li>
<li><a href="#floating-compass">Floating Compass</a> - Overlay compass on main window</li>
<li><a href="#transparent-overlays">Transparent Overlays</a> - Semi-transparent widgets</li>
</ul>
<h3 id="feedback-recipes"><a class="header" href="#feedback-recipes">Feedback Recipes</a></h3>
<ul>
<li><a href="#combat-alerts-2">Combat Alerts</a> - Visual and audio combat notifications</li>
<li><a href="#custom-status-bar">Custom Status Bar</a> - Personalized status display</li>
</ul>
<h3 id="organization-recipes"><a class="header" href="#organization-recipes">Organization Recipes</a></h3>
<ul>
<li><a href="#tabbed-channels">Tabbed Channels</a> - Organize communications in tabs</li>
</ul>
<h2 id="quick-reference-1"><a class="header" href="#quick-reference-1">Quick Reference</a></h2>
<h3 id="common-tasks"><a class="header" href="#common-tasks">Common Tasks</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Want to…</th><th>Recipe</th></tr>
</thead>
<tbody>
<tr><td>Split main window</td><td><a href="#split-main-window">Split Main Window</a></td></tr>
<tr><td>Overlay compass</td><td><a href="#floating-compass">Floating Compass</a></td></tr>
<tr><td>Combat sounds</td><td><a href="#combat-alerts-2">Combat Alerts</a></td></tr>
<tr><td>Organize chat</td><td><a href="#tabbed-channels">Tabbed Channels</a></td></tr>
<tr><td>Custom HUD</td><td><a href="#custom-status-bar">Custom Status Bar</a></td></tr>
</tbody>
</table>
</div>
<h3 id="by-difficulty"><a class="header" href="#by-difficulty">By Difficulty</a></h3>
<p><strong>Beginner</strong>:</p>
<ul>
<li>Combat Alerts</li>
<li>Custom Status Bar</li>
</ul>
<p><strong>Intermediate</strong>:</p>
<ul>
<li>Split Main Window</li>
<li>Tabbed Channels</li>
<li>Floating Compass</li>
</ul>
<p><strong>Advanced</strong>:</p>
<ul>
<li>Transparent Overlays</li>
</ul>
<h2 id="using-recipes"><a class="header" href="#using-recipes">Using Recipes</a></h2>
<h3 id="copy-and-modify"><a class="header" href="#copy-and-modify">Copy and Modify</a></h3>
<ol>
<li>Find the recipe for your goal</li>
<li>Copy the configuration</li>
<li>Paste into your config file</li>
<li>Adjust values for your preferences</li>
</ol>
<h3 id="combining-recipes"><a class="header" href="#combining-recipes">Combining Recipes</a></h3>
<p>Recipes are designed to work together. To combine:</p>
<ol>
<li>Copy configurations from each recipe</li>
<li>Adjust positions to prevent overlap</li>
<li>Ensure no naming conflicts</li>
</ol>
<h3 id="testing"><a class="header" href="#testing">Testing</a></h3>
<p>After applying a recipe:</p>
<ol>
<li>Reload configuration (<code>.reload</code> or restart)</li>
<li>Verify the feature works</li>
<li>Adjust as needed</li>
</ol>
<h2 id="contributing-recipes"><a class="header" href="#contributing-recipes">Contributing Recipes</a></h2>
<p>Have a useful configuration? Consider contributing:</p>
<ol>
<li>Document it following the recipe format</li>
<li>Test thoroughly</li>
<li>Submit via GitHub</li>
</ol>
<h2 id="see-also-46"><a class="header" href="#see-also-46">See Also</a></h2>
<ul>
<li><a href="tutorials/README.html">Tutorials</a> - Step-by-step guides</li>
<li><a href="configuration/README.html">Configuration</a> - Config reference</li>
<li><a href="customization/README.html">Customization</a> - Detailed customization</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="split-main-window"><a class="header" href="#split-main-window">Split Main Window</a></h1>
<p>Divide the main text area into multiple panels for better organization.</p>
<h2 id="goal-6"><a class="header" href="#goal-6">Goal</a></h2>
<p>Create separate text windows for different content types while maintaining a clean, organized layout.</p>
<h2 id="basic-split-combat--main"><a class="header" href="#basic-split-combat--main">Basic Split: Combat + Main</a></h2>
<p>Two-column layout with combat on the left, main text on the right.</p>
<pre><code class="language-toml"># Main game text (right side)
[[widgets]]
type = "text"
name = "main"
title = "Game"
x = 30
y = 0
width = 70
height = 85
streams = ["main", "room"]
scrollback = 5000

# Combat text (left side)
[[widgets]]
type = "text"
name = "combat"
title = "Combat"
x = 0
y = 0
width = 29
height = 85
streams = ["combat"]
scrollback = 2000
</code></pre>
<h2 id="horizontal-split-main--chat"><a class="header" href="#horizontal-split-main--chat">Horizontal Split: Main + Chat</a></h2>
<p>Main text on top, communications below.</p>
<pre><code class="language-toml"># Main game text (top)
[[widgets]]
type = "text"
name = "main"
title = "Game"
x = 0
y = 0
width = 100
height = 60
streams = ["main", "room", "combat"]
scrollback = 5000

# Chat window (bottom)
[[widgets]]
type = "text"
name = "chat"
title = "Chat"
x = 0
y = 61
width = 100
height = 24
streams = ["speech", "whisper", "thoughts"]
scrollback = 3000
</code></pre>
<h2 id="three-panel-layout"><a class="header" href="#three-panel-layout">Three-Panel Layout</a></h2>
<p>Combat left, main center, chat right.</p>
<pre><code class="language-toml"># Combat (left)
[[widgets]]
type = "text"
name = "combat"
title = "Combat"
x = 0
y = 0
width = 25
height = 85
streams = ["combat"]

# Main (center)
[[widgets]]
type = "text"
name = "main"
title = "Game"
x = 26
y = 0
width = 48
height = 85
streams = ["main", "room"]

# Chat (right)
[[widgets]]
type = "text"
name = "chat"
title = "Chat"
x = 75
y = 0
width = 25
height = 85
streams = ["speech", "whisper", "thoughts"]
</code></pre>
<h2 id="percentage-based-split"><a class="header" href="#percentage-based-split">Percentage-Based Split</a></h2>
<p>Adapts to terminal size.</p>
<pre><code class="language-toml"># Left panel (30% width)
[[widgets]]
type = "text"
name = "side"
x = "0%"
y = "0%"
width = "30%"
height = "80%"
streams = ["combat"]

# Right panel (70% width)
[[widgets]]
type = "text"
name = "main"
x = "30%"
y = "0%"
width = "70%"
height = "80%"
streams = ["main", "room"]
</code></pre>
<h2 id="how-it-works"><a class="header" href="#how-it-works">How It Works</a></h2>
<h3 id="stream-assignment"><a class="header" href="#stream-assignment">Stream Assignment</a></h3>
<p>Each widget shows only its assigned streams:</p>
<ul>
<li><code>main</code> - Primary game output</li>
<li><code>room</code> - Room descriptions</li>
<li><code>combat</code> - Combat messages</li>
<li><code>speech</code> - Character speech</li>
<li><code>whisper</code> - Private messages</li>
<li><code>thoughts</code> - Mental communications</li>
</ul>
<h3 id="position-calculation"><a class="header" href="#position-calculation">Position Calculation</a></h3>
<p>Widgets are positioned using x, y coordinates:</p>
<ul>
<li>Fixed numbers = absolute cells</li>
<li>Percentages = relative to terminal size</li>
</ul>
<h3 id="gap-prevention"><a class="header" href="#gap-prevention">Gap Prevention</a></h3>
<p>Leave 1 cell between widgets for borders:</p>
<pre><code class="language-toml"># Widget 1 ends at x=29
width = 29

# Widget 2 starts at x=30
x = 30
</code></pre>
<h2 id="variations"><a class="header" href="#variations">Variations</a></h2>
<h3 id="minimal-split"><a class="header" href="#minimal-split">Minimal Split</a></h3>
<p>Just main and combat:</p>
<pre><code class="language-toml">[[widgets]]
type = "text"
name = "main"
x = 0
width = "65%"
streams = ["main", "room", "speech", "whisper"]

[[widgets]]
type = "text"
name = "combat"
x = "66%"
width = "34%"
streams = ["combat"]
</code></pre>
<h3 id="stacked-chat"><a class="header" href="#stacked-chat">Stacked Chat</a></h3>
<p>Multiple chat streams in separate panels:</p>
<pre><code class="language-toml">[[widgets]]
type = "text"
name = "speech"
title = "Speech"
y = 0
height = "33%"
streams = ["speech"]

[[widgets]]
type = "text"
name = "whisper"
title = "Whispers"
y = "34%"
height = "33%"
streams = ["whisper"]

[[widgets]]
type = "text"
name = "thoughts"
title = "Thoughts"
y = "67%"
height = "33%"
streams = ["thoughts"]
</code></pre>
<h2 id="tips"><a class="header" href="#tips">Tips</a></h2>
<ol>
<li><strong>Consider Focus</strong>: Which panel needs most attention?</li>
<li><strong>Size by Importance</strong>: Larger panels for important content</li>
<li><strong>Test Scrollback</strong>: Reduce scrollback for secondary panels</li>
<li><strong>Add Borders</strong>: Visual separation helps readability</li>
</ol>
<h2 id="see-also-47"><a class="header" href="#see-also-47">See Also</a></h2>
<ul>
<li><a href="#layouttoml-reference">layout.toml Reference</a></li>
<li><a href="#text-windows-1">Text Windows</a></li>
<li><a href="#stream-ids">Stream IDs</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="floating-compass"><a class="header" href="#floating-compass">Floating Compass</a></h1>
<p>Overlay a compass on top of the main text window for space efficiency.</p>
<h2 id="goal-7"><a class="header" href="#goal-7">Goal</a></h2>
<p>Display the compass as a semi-transparent overlay, saving vertical space while keeping navigation visible.</p>
<h2 id="basic-floating-compass"><a class="header" href="#basic-floating-compass">Basic Floating Compass</a></h2>
<pre><code class="language-toml"># Main window (full width)
[[widgets]]
type = "text"
name = "main"
title = "Game"
x = 0
y = 0
width = 100
height = 85
streams = ["main", "room", "combat"]
z_index = 1

# Floating compass (top right corner)
[[widgets]]
type = "compass"
name = "compass"
x = 85
y = 1
width = 14
height = 7
z_index = 10
style = "compact"
border = false
clickable = true
</code></pre>
<h2 id="transparent-compass"><a class="header" href="#transparent-compass">Transparent Compass</a></h2>
<p>With transparency support:</p>
<pre><code class="language-toml">[[widgets]]
type = "compass"
name = "compass"
x = 85
y = 1
width = 14
height = 7
z_index = 10
style = "unicode"
transparent = true
opacity = 0.8
</code></pre>
<h2 id="corner-positions"><a class="header" href="#corner-positions">Corner Positions</a></h2>
<h3 id="top-right-default"><a class="header" href="#top-right-default">Top Right (Default)</a></h3>
<pre><code class="language-toml">[[widgets]]
type = "compass"
name = "compass"
x = "86%"
y = 1
anchor = "top_right"
</code></pre>
<h3 id="top-left"><a class="header" href="#top-left">Top Left</a></h3>
<pre><code class="language-toml">[[widgets]]
type = "compass"
name = "compass"
x = 1
y = 1
anchor = "top_left"
</code></pre>
<h3 id="bottom-right"><a class="header" href="#bottom-right">Bottom Right</a></h3>
<pre><code class="language-toml">[[widgets]]
type = "compass"
name = "compass"
x = "86%"
y = "78%"
anchor = "bottom_right"
</code></pre>
<h2 id="compact-styles"><a class="header" href="#compact-styles">Compact Styles</a></h2>
<h3 id="minimal-compass"><a class="header" href="#minimal-compass">Minimal Compass</a></h3>
<pre><code class="language-toml">[[widgets]]
type = "compass"
name = "compass"
style = "minimal"
width = 7
height = 3
# Shows: N E S W in a row
</code></pre>
<h3 id="icons-only-1"><a class="header" href="#icons-only-1">Icons Only</a></h3>
<pre><code class="language-toml">[[widgets]]
type = "compass"
name = "compass"
style = "icons"
width = 9
height = 5
# Shows directional arrows only
</code></pre>
<h3 id="full-rose"><a class="header" href="#full-rose">Full Rose</a></h3>
<pre><code class="language-toml">[[widgets]]
type = "compass"
name = "compass"
style = "rose"
width = 15
height = 9
# Shows full compass rose with all directions
</code></pre>
<h2 id="compass-with-room-name"><a class="header" href="#compass-with-room-name">Compass with Room Name</a></h2>
<p>Combine compass with room title:</p>
<pre><code class="language-toml">[[widgets]]
type = "compass"
name = "compass_with_room"
x = 75
y = 0
width = 25
height = 10
style = "unicode"
show_room_name = true
room_name_position = "top"
</code></pre>
<h2 id="toggle-visibility"><a class="header" href="#toggle-visibility">Toggle Visibility</a></h2>
<p>Keybind to show/hide compass:</p>
<pre><code class="language-toml">[keybinds."ctrl+c"]
action = "toggle_widget"
widget = "compass"
</code></pre>
<h2 id="how-it-works-1"><a class="header" href="#how-it-works-1">How It Works</a></h2>
<h3 id="z-index-layering"><a class="header" href="#z-index-layering">Z-Index Layering</a></h3>
<p>Higher <code>z_index</code> draws on top:</p>
<pre><code class="language-toml">z_index = 1   # Main window (bottom)
z_index = 10  # Compass (top)
</code></pre>
<h3 id="transparency"><a class="header" href="#transparency">Transparency</a></h3>
<p>When <code>transparent = true</code>:</p>
<ul>
<li>Background is not drawn</li>
<li>Text underneath may show through</li>
<li><code>opacity</code> controls visibility (0.0-1.0)</li>
</ul>
<h3 id="click-through"><a class="header" href="#click-through">Click-Through</a></h3>
<pre><code class="language-toml">click_through = true  # Clicks go to window below
click_through = false # Compass captures clicks
</code></pre>
<h2 id="variations-1"><a class="header" href="#variations-1">Variations</a></h2>
<h3 id="mini-compass"><a class="header" href="#mini-compass">Mini Compass</a></h3>
<p>Smallest possible:</p>
<pre><code class="language-toml">[[widgets]]
type = "compass"
name = "mini_compass"
style = "dots"
width = 5
height = 3
# Shows • for available directions
</code></pre>
<h3 id="direction-indicators-only"><a class="header" href="#direction-indicators-only">Direction Indicators Only</a></h3>
<p>Show only when exits available:</p>
<pre><code class="language-toml">[[widgets]]
type = "compass"
name = "compass"
style = "indicators"
hide_when_empty = true
</code></pre>
<h3 id="centered-floating"><a class="header" href="#centered-floating">Centered Floating</a></h3>
<pre><code class="language-toml">[[widgets]]
type = "compass"
name = "compass"
x = "center"
y = 2
width = 15
height = 7
z_index = 10
</code></pre>
<h2 id="tips-1"><a class="header" href="#tips-1">Tips</a></h2>
<ol>
<li><strong>Test Overlap</strong>: Ensure compass doesn’t cover important text</li>
<li><strong>Use Borders Wisely</strong>: Borderless saves space</li>
<li><strong>Consider Clickability</strong>: Click navigation is convenient</li>
<li><strong>Adjust Opacity</strong>: Find balance between visible and unobtrusive</li>
</ol>
<h2 id="troubleshooting-26"><a class="header" href="#troubleshooting-26">Troubleshooting</a></h2>
<h3 id="compass-covers-text"><a class="header" href="#compass-covers-text">Compass Covers Text</a></h3>
<ul>
<li>Reduce compass size</li>
<li>Move to corner with less activity</li>
<li>Add toggle keybind</li>
</ul>
<h3 id="clicks-not-working"><a class="header" href="#clicks-not-working">Clicks Not Working</a></h3>
<ul>
<li>Check <code>clickable = true</code></li>
<li>Verify <code>z_index</code> is highest</li>
<li>Ensure not blocked by <code>click_through</code></li>
</ul>
<h2 id="see-also-48"><a class="header" href="#see-also-48">See Also</a></h2>
<ul>
<li><a href="#compass-2">Compass Widget</a></li>
<li><a href="#layouttoml-reference">layout.toml Reference</a></li>
<li><a href="#transparent-overlays">Transparent Overlays</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="transparent-overlays"><a class="header" href="#transparent-overlays">Transparent Overlays</a></h1>
<p>Create semi-transparent widgets that layer over other content.</p>
<h2 id="goal-8"><a class="header" href="#goal-8">Goal</a></h2>
<p>Display status information as overlays without completely blocking the view of the main game window.</p>
<h2 id="basic-transparent-widget"><a class="header" href="#basic-transparent-widget">Basic Transparent Widget</a></h2>
<pre><code class="language-toml">[[widgets]]
type = "progress"
name = "health_overlay"
title = ""
x = 1
y = 1
width = 20
height = 1
data_source = "vitals.health"
z_index = 100
transparent = true
opacity = 0.7
border = false
</code></pre>
<h2 id="overlay-status-bar"><a class="header" href="#overlay-status-bar">Overlay Status Bar</a></h2>
<p>Minimal status overlay at top of screen:</p>
<pre><code class="language-toml"># Transparent status strip
[[widgets]]
type = "dashboard"
name = "status_overlay"
x = 0
y = 0
width = 100
height = 1
z_index = 100
transparent = true
opacity = 0.8
border = false
components = ["health_mini", "mana_mini", "rt_mini"]

# Component definitions
[widgets.status_overlay.health_mini]
type = "progress"
width = 15
data_source = "vitals.health"
format = "HP:{value}"

[widgets.status_overlay.mana_mini]
type = "progress"
width = 15
data_source = "vitals.mana"
format = "MP:{value}"

[widgets.status_overlay.rt_mini]
type = "countdown"
width = 10
data_source = "roundtime"
format = "RT:{value}"
</code></pre>
<h2 id="corner-vitals-overlay"><a class="header" href="#corner-vitals-overlay">Corner Vitals Overlay</a></h2>
<p>Health/mana in corner:</p>
<pre><code class="language-toml">[[widgets]]
type = "text"
name = "main"
x = 0
y = 0
width = 100
height = 100
z_index = 1

# Health overlay (top left)
[[widgets]]
type = "progress"
name = "health"
x = 1
y = 1
width = 15
height = 1
data_source = "vitals.health"
z_index = 50
transparent = true
opacity = 0.75
border = false
show_text = true
format = "❤ {percent}%"

# Mana overlay (below health)
[[widgets]]
type = "progress"
name = "mana"
x = 1
y = 2
width = 15
height = 1
data_source = "vitals.mana"
z_index = 50
transparent = true
opacity = 0.75
border = false
show_text = true
format = "✦ {percent}%"
</code></pre>
<h2 id="overlay-hud-panel"><a class="header" href="#overlay-hud-panel">Overlay HUD Panel</a></h2>
<p>Grouped status overlays:</p>
<pre><code class="language-toml">[[widgets]]
type = "dashboard"
name = "hud"
x = "75%"
y = 1
width = "24%"
height = 15
z_index = 100
transparent = true
opacity = 0.85
border_style = "rounded"
border_opacity = 0.5
components = ["vitals", "timers", "status"]

[widgets.hud.vitals]
layout = "vertical"
items = ["health", "mana", "stamina", "spirit"]

[widgets.hud.timers]
layout = "horizontal"
items = ["roundtime", "casttime"]

[widgets.hud.status]
type = "indicator"
indicators = ["hidden", "stunned", "prone"]
</code></pre>
<h2 id="notification-overlay"><a class="header" href="#notification-overlay">Notification Overlay</a></h2>
<p>Temporary overlay for alerts:</p>
<pre><code class="language-toml">[[widgets]]
type = "text"
name = "notification"
x = "center"
y = 5
width = 40
height = 3
z_index = 200
transparent = true
opacity = 0.9
visible = false
auto_hide = 3000
border_style = "double"
align = "center"
</code></pre>
<p>Trigger configuration:</p>
<pre><code class="language-toml">[[triggers]]
pattern = "You are stunned"
command = ".notify_show Stunned!"
</code></pre>
<h2 id="opacity-levels"><a class="header" href="#opacity-levels">Opacity Levels</a></h2>
<p>Recommended opacity settings:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Use Case</th><th>Opacity</th><th>Notes</th></tr>
</thead>
<tbody>
<tr><td>Critical alerts</td><td>0.95</td><td>Nearly opaque</td></tr>
<tr><td>Status bars</td><td>0.75-0.85</td><td>Readable but see-through</td></tr>
<tr><td>Background info</td><td>0.5-0.6</td><td>Subtle overlay</td></tr>
<tr><td>Watermark</td><td>0.2-0.3</td><td>Barely visible</td></tr>
</tbody>
</table>
</div>
<h2 id="how-it-works-2"><a class="header" href="#how-it-works-2">How It Works</a></h2>
<h3 id="transparency-rendering"><a class="header" href="#transparency-rendering">Transparency Rendering</a></h3>
<p>When <code>transparent = true</code>:</p>
<ol>
<li>Background is not filled</li>
<li>Only text/graphics are drawn</li>
<li><code>opacity</code> affects all rendering (0.0-1.0)</li>
</ol>
<h3 id="z-index-stacking"><a class="header" href="#z-index-stacking">Z-Index Stacking</a></h3>
<pre><code>z_index = 1    # Base layer (main window)
z_index = 50   # Mid layer (status)
z_index = 100  # Top layer (HUD)
z_index = 200  # Alert layer (notifications)
</code></pre>
<h3 id="color-blending"><a class="header" href="#color-blending">Color Blending</a></h3>
<p>With transparency, colors blend:</p>
<pre><code class="language-toml"># Original: #ff0000 (red) at 0.5 opacity
# Over:     #000000 (black) background
# Result:   ~#800000 (dark red)
</code></pre>
<h2 id="advanced-conditional-transparency"><a class="header" href="#advanced-conditional-transparency">Advanced: Conditional Transparency</a></h2>
<p>Change opacity based on state:</p>
<pre><code class="language-toml">[[widgets]]
type = "progress"
name = "health"
transparent = true
opacity = 0.5

# Increase opacity when low
[widgets.health.dynamic_opacity]
condition = "value &lt; 30"
opacity = 0.95
</code></pre>
<h2 id="tips-2"><a class="header" href="#tips-2">Tips</a></h2>
<ol>
<li><strong>Test Readability</strong>: Ensure text is readable over content</li>
<li><strong>Use High Contrast</strong>: Bright colors work better transparent</li>
<li><strong>Consider Activity</strong>: Busy areas need lower opacity</li>
<li><strong>Add Borders</strong>: Light borders improve definition</li>
</ol>
<h2 id="troubleshooting-27"><a class="header" href="#troubleshooting-27">Troubleshooting</a></h2>
<h3 id="text-hard-to-read"><a class="header" href="#text-hard-to-read">Text Hard to Read</a></h3>
<ul>
<li>Increase opacity</li>
<li>Add background blur (if supported)</li>
<li>Use high contrast colors</li>
<li>Add shadow/outline to text</li>
</ul>
<h3 id="overlay-blocks-interaction"><a class="header" href="#overlay-blocks-interaction">Overlay Blocks Interaction</a></h3>
<pre><code class="language-toml">click_through = true  # Pass clicks to window below
</code></pre>
<h3 id="flickering"><a class="header" href="#flickering">Flickering</a></h3>
<ul>
<li>Reduce render rate for overlay</li>
<li>Enable double buffering</li>
<li>Use solid backgrounds for fast-updating widgets</li>
</ul>
<h2 id="terminal-support"><a class="header" href="#terminal-support">Terminal Support</a></h2>
<p>Transparency requires terminal support:</p>
<ul>
<li><strong>Full support</strong>: iTerm2, Kitty, WezTerm</li>
<li><strong>Partial</strong>: Windows Terminal (with settings)</li>
<li><strong>None</strong>: Basic terminals, SSH</li>
</ul>
<p>Check support:</p>
<pre><code class="language-bash">echo $COLORTERM  # Should include "truecolor"
</code></pre>
<h2 id="see-also-49"><a class="header" href="#see-also-49">See Also</a></h2>
<ul>
<li><a href="#floating-compass">Floating Compass</a></li>
<li><a href="#creating-themes">Creating Themes</a></li>
<li><a href="#display-issues-2">Display Issues</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="combat-alerts-2"><a class="header" href="#combat-alerts-2">Combat Alerts</a></h1>
<p>Set up visual and audio notifications for combat events.</p>
<h2 id="goal-9"><a class="header" href="#goal-9">Goal</a></h2>
<p>Never miss critical combat information with customized alerts for stuns, low health, deaths, and other important events.</p>
<h2 id="visual-alerts"><a class="header" href="#visual-alerts">Visual Alerts</a></h2>
<h3 id="critical-highlight-pattern"><a class="header" href="#critical-highlight-pattern">Critical Highlight Pattern</a></h3>
<pre><code class="language-toml"># highlights.toml

# Stunned - high visibility
[[highlights]]
pattern = "(?i)you are stunned"
fg = "black"
bg = "yellow"
bold = true
flash = true

# Webbed
[[highlights]]
pattern = "(?i)webs? (stick|entangle|ensnare)"
fg = "black"
bg = "magenta"
bold = true

# Low health warning
[[highlights]]
pattern = "feel your life fading"
fg = "white"
bg = "red"
bold = true
flash = true

# Enemy death
[[highlights]]
pattern = "falls dead"
fg = "bright_yellow"
bold = true

# Critical hit received
[[highlights]]
pattern = "\\*\\* .+ \\*\\*"
fg = "bright_red"
bold = true
</code></pre>
<h2 id="audio-alerts"><a class="header" href="#audio-alerts">Audio Alerts</a></h2>
<h3 id="sound-triggers"><a class="header" href="#sound-triggers">Sound Triggers</a></h3>
<pre><code class="language-toml"># triggers.toml

# Stun alert
[[triggers]]
name = "stun_sound"
pattern = "(?i)you are stunned"
sound = "alert_high.wav"
cooldown = 500

# Low health alert
[[triggers]]
name = "health_critical"
pattern = "feel your life fading|growing weak|death is near"
sound = "alarm.wav"
cooldown = 2000

# Enemy dies
[[triggers]]
name = "kill_sound"
pattern = "falls dead|crumples to the ground"
sound = "success.wav"
cooldown = 100

# Webbed
[[triggers]]
name = "web_sound"
pattern = "(?i)webs? (stick|entangle)"
sound = "warning.wav"
</code></pre>
<h3 id="tts-alerts"><a class="header" href="#tts-alerts">TTS Alerts</a></h3>
<pre><code class="language-toml"># triggers.toml

[[triggers]]
name = "stun_tts"
pattern = "(?i)you are stunned"
tts = "Stunned!"
tts_priority = "high"

[[triggers]]
name = "health_tts"
pattern = "feel your life fading"
tts = "Health critical!"
tts_priority = "urgent"
</code></pre>
<h2 id="status-widget-alerts"><a class="header" href="#status-widget-alerts">Status Widget Alerts</a></h2>
<h3 id="flashing-indicators"><a class="header" href="#flashing-indicators">Flashing Indicators</a></h3>
<pre><code class="language-toml"># layout.toml

[[widgets]]
type = "indicator"
name = "combat_status"
x = 0
y = 85
width = 30
height = 3
indicators = ["stunned", "webbed", "prone", "bleeding"]

# Indicator styles
[widgets.combat_status.styles]
stunned = { fg = "black", bg = "yellow", flash = true }
webbed = { fg = "black", bg = "magenta", flash = true }
prone = { fg = "white", bg = "red" }
bleeding = { fg = "red", bg = "black", flash = true }
</code></pre>
<h3 id="health-bar-alerts"><a class="header" href="#health-bar-alerts">Health Bar Alerts</a></h3>
<pre><code class="language-toml">[[widgets]]
type = "progress"
name = "health"
data_source = "vitals.health"
# Color changes at thresholds
color_thresholds = [
    { value = 100, color = "health" },
    { value = 50, color = "health_low" },
    { value = 25, color = "health_critical", flash = true }
]
</code></pre>
<h2 id="combat-dashboard-1"><a class="header" href="#combat-dashboard-1">Combat Dashboard</a></h2>
<p>Combined alert display:</p>
<pre><code class="language-toml">[[widgets]]
type = "dashboard"
name = "combat_hud"
x = 75
y = 0
width = 25
height = 20
title = "Combat"

[widgets.combat_hud.components]
health = { type = "progress", data = "vitals.health" }
mana = { type = "progress", data = "vitals.mana" }
rt = { type = "countdown", data = "roundtime" }
status = { type = "indicator", items = ["stunned", "webbed", "prone"] }
target = { type = "text", data = "combat.target" }
</code></pre>
<h2 id="notification-system"><a class="header" href="#notification-system">Notification System</a></h2>
<h3 id="popup-notifications"><a class="header" href="#popup-notifications">Popup Notifications</a></h3>
<pre><code class="language-toml">[[triggers]]
name = "death_notify"
pattern = "seems to have died|falls dead"
command = ".notify Enemy Killed!"

[[triggers]]
name = "stun_notify"
pattern = "(?i)you are stunned"
command = ".notify STUNNED!"
notification_style = "urgent"
</code></pre>
<h3 id="screen-flash"><a class="header" href="#screen-flash">Screen Flash</a></h3>
<pre><code class="language-toml">[[triggers]]
name = "critical_flash"
pattern = "feel your life fading"
action = "flash_screen"
flash_color = "red"
flash_duration = 200
</code></pre>
<h2 id="complete-combat-setup"><a class="header" href="#complete-combat-setup">Complete Combat Setup</a></h2>
<h3 id="highlightstoml"><a class="header" href="#highlightstoml">highlights.toml</a></h3>
<pre><code class="language-toml"># Combat highlights

# Status effects
[[highlights]]
pattern = "(?i)you are stunned"
fg = "black"
bg = "yellow"
bold = true

[[highlights]]
pattern = "(?i)webs? (stick|entangle|ensnare)"
fg = "black"
bg = "magenta"
bold = true

[[highlights]]
pattern = "(?i)(knocked|fall) (down|prone|to the ground)"
fg = "black"
bg = "cyan"
bold = true

# Damage
[[highlights]]
pattern = "\\*\\* .+ \\*\\*"
fg = "bright_red"
bold = true

[[highlights]]
pattern = "\\d+ points? of damage"
fg = "red"

# Success
[[highlights]]
pattern = "falls dead|crumples"
fg = "bright_yellow"
bold = true

[[highlights]]
pattern = "(strike|hit|slash|stab).*(head|neck|chest)"
fg = "bright_green"
</code></pre>
<h3 id="triggerstoml"><a class="header" href="#triggerstoml">triggers.toml</a></h3>
<pre><code class="language-toml"># Combat triggers

[[triggers]]
name = "stun_alert"
pattern = "(?i)you are stunned"
sound = "stun.wav"
tts = "Stunned"
cooldown = 500
enabled = true

[[triggers]]
name = "web_alert"
pattern = "(?i)webs? (stick|entangle)"
sound = "web.wav"
cooldown = 500

[[triggers]]
name = "health_warning"
pattern = "feel your life fading|death is near"
sound = "alarm.wav"
tts = "Health critical"
tts_priority = "urgent"
cooldown = 3000

[[triggers]]
name = "kill_confirm"
pattern = "falls dead|crumples"
sound = "kill.wav"
cooldown = 100
</code></pre>
<h2 id="customizing-sounds"><a class="header" href="#customizing-sounds">Customizing Sounds</a></h2>
<h3 id="sound-file-locations"><a class="header" href="#sound-file-locations">Sound File Locations</a></h3>
<pre><code>~/.vellum-fe/sounds/
├── alert_high.wav
├── alarm.wav
├── success.wav
├── warning.wav
├── stun.wav
├── web.wav
└── kill.wav
</code></pre>
<h3 id="sound-settings"><a class="header" href="#sound-settings">Sound Settings</a></h3>
<pre><code class="language-toml"># config.toml
[sound]
enabled = true
volume = 0.7
alert_volume = 1.0  # Louder for alerts
</code></pre>
<h2 id="tips-3"><a class="header" href="#tips-3">Tips</a></h2>
<ol>
<li><strong>Prioritize Alerts</strong>: Not everything needs sound</li>
<li><strong>Use Cooldowns</strong>: Prevent alert spam</li>
<li><strong>Test Patterns</strong>: Verify regex matches correctly</li>
<li><strong>Balance Volume</strong>: Alerts should be noticeable but not jarring</li>
</ol>
<h2 id="see-also-50"><a class="header" href="#see-also-50">See Also</a></h2>
<ul>
<li><a href="#highlightstoml-reference">Highlights</a></li>
<li><a href="#triggers">Triggers</a></li>
<li><a href="#tts-setup">Text-to-Speech</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="custom-status-bar"><a class="header" href="#custom-status-bar">Custom Status Bar</a></h1>
<p>Create a personalized status display with exactly the information you need.</p>
<h2 id="goal-10"><a class="header" href="#goal-10">Goal</a></h2>
<p>Build a compact status bar showing vitals, timers, and status in a format you design.</p>
<h2 id="basic-status-bar"><a class="header" href="#basic-status-bar">Basic Status Bar</a></h2>
<p>Single-line status at bottom of screen:</p>
<pre><code class="language-toml">[[widgets]]
type = "dashboard"
name = "statusbar"
x = 0
y = 98
width = 100
height = 2
border = false
layout = "horizontal"
components = ["health", "mana", "stamina", "spirit", "rt", "stance"]
spacing = 2

[widgets.statusbar.health]
type = "text"
format = "HP:{vitals.health}%"
color_condition = [
    { if = "value &gt;= 70", color = "green" },
    { if = "value &gt;= 30", color = "yellow" },
    { if = "value &lt; 30", color = "red" }
]

[widgets.statusbar.mana]
type = "text"
format = "MP:{vitals.mana}%"
color = "blue"

[widgets.statusbar.stamina]
type = "text"
format = "ST:{vitals.stamina}%"
color = "orange"

[widgets.statusbar.spirit]
type = "text"
format = "SP:{vitals.spirit}%"
color = "magenta"

[widgets.statusbar.rt]
type = "text"
format = "RT:{roundtime}"
visible_when = "roundtime &gt; 0"
color = "cyan"

[widgets.statusbar.stance]
type = "text"
format = "[{stance}]"
color = "white"
</code></pre>
<h2 id="mini-vitals-bar"><a class="header" href="#mini-vitals-bar">Mini Vitals Bar</a></h2>
<p>Compact progress bars:</p>
<pre><code class="language-toml">[[widgets]]
type = "dashboard"
name = "mini_vitals"
x = 0
y = 0
width = 60
height = 1
border = false
layout = "horizontal"

[widgets.mini_vitals.components]
hp = { type = "progress", width = 12, data = "vitals.health", format = "♥{value}" }
mp = { type = "progress", width = 12, data = "vitals.mana", format = "♦{value}" }
st = { type = "progress", width = 12, data = "vitals.stamina", format = "⚡{value}" }
sp = { type = "progress", width = 12, data = "vitals.spirit", format = "✧{value}" }
</code></pre>
<h2 id="icon-status-bar"><a class="header" href="#icon-status-bar">Icon Status Bar</a></h2>
<p>Using Unicode symbols:</p>
<pre><code class="language-toml">[[widgets]]
type = "dashboard"
name = "icon_status"
x = 0
y = 99
width = 100
height = 1
border = false

# Format: ❤95 ♦100 ⚡87 ✧100 ⏱3 🛡Off 👁Hid
components = [
    { icon = "❤", data = "vitals.health", color = "health" },
    { icon = "♦", data = "vitals.mana", color = "mana" },
    { icon = "⚡", data = "vitals.stamina", color = "stamina" },
    { icon = "✧", data = "vitals.spirit", color = "spirit" },
    { icon = "⏱", data = "roundtime", visible_when = "&gt; 0" },
    { icon = "🛡", data = "stance", format = "{short}" },
    { icon = "👁", data = "hidden", format = "{status}" }
]
</code></pre>
<h2 id="two-line-status"><a class="header" href="#two-line-status">Two-Line Status</a></h2>
<p>More detailed status bar:</p>
<pre><code class="language-toml">[[widgets]]
type = "dashboard"
name = "status_two_line"
x = 0
y = 97
width = 100
height = 3

[widgets.status_two_line.line1]
layout = "horizontal"
items = [
    "HP: {vitals.health}%",
    "MP: {vitals.mana}%",
    "ST: {vitals.stamina}%",
    "SP: {vitals.spirit}%"
]

[widgets.status_two_line.line2]
layout = "horizontal"
items = [
    "RT: {roundtime}s",
    "CT: {casttime}s",
    "Stance: {stance}",
    "Room: {room.name}"
]
</code></pre>
<h2 id="status-with-indicators"><a class="header" href="#status-with-indicators">Status with Indicators</a></h2>
<p>Include status flags:</p>
<pre><code class="language-toml">[[widgets]]
type = "dashboard"
name = "full_status"
x = 0
y = 95
width = 100
height = 5

[widgets.full_status.sections]

vitals = { row = 1, content = "HP:{health}% MP:{mana}% ST:{stamina}% SP:{spirit}%" }

timers = { row = 2, content = "RT:{rt} CT:{ct}" }

flags = {
    row = 3,
    type = "indicators",
    items = ["hidden", "invisible", "stunned", "webbed", "prone"],
    style = "compact"
}

location = { row = 4, content = "[{room.name}]", align = "center" }
</code></pre>
<h2 id="minimal-status-1"><a class="header" href="#minimal-status-1">Minimal Status</a></h2>
<p>Just the essentials:</p>
<pre><code class="language-toml">[[widgets]]
type = "text"
name = "minimal_status"
x = 0
y = 99
width = 100
height = 1
border = false
content = "{health}❤ {mana}♦ {rt}⏱ {room.short_name}"
</code></pre>
<h2 id="contextual-status"><a class="header" href="#contextual-status">Contextual Status</a></h2>
<p>Shows different info based on situation:</p>
<pre><code class="language-toml">[[widgets]]
type = "dashboard"
name = "context_status"

[widgets.context_status.modes]

# Default mode
default = "HP:{health} MP:{mana} [{room.name}]"

# Combat mode (when in combat)
combat = "HP:{health} MP:{mana} RT:{rt} Target:{target}"

# Town mode (when in town)
town = "Silver:{silver} [{room.name}]"

[widgets.context_status.mode_triggers]
combat = "roundtime &gt; 0 OR target != ''"
town = "room.type == 'town'"
</code></pre>
<h2 id="color-themes"><a class="header" href="#color-themes">Color Themes</a></h2>
<h3 id="light-theme-status"><a class="header" href="#light-theme-status">Light Theme Status</a></h3>
<pre><code class="language-toml">[widgets.statusbar.theme]
background = "#e0e0e0"
text = "#333333"
health = "#00aa00"
health_low = "#aaaa00"
health_critical = "#aa0000"
mana = "#0000aa"
</code></pre>
<h3 id="dark-theme-status"><a class="header" href="#dark-theme-status">Dark Theme Status</a></h3>
<pre><code class="language-toml">[widgets.statusbar.theme]
background = "#1a1a1a"
text = "#c0c0c0"
health = "#00ff00"
health_low = "#ffff00"
health_critical = "#ff0000"
mana = "#0080ff"
</code></pre>
<h2 id="dynamic-updates"><a class="header" href="#dynamic-updates">Dynamic Updates</a></h2>
<h3 id="flashing-on-change"><a class="header" href="#flashing-on-change">Flashing on Change</a></h3>
<pre><code class="language-toml">[widgets.statusbar.health]
flash_on_decrease = true
flash_duration = 500
flash_color = "red"
</code></pre>
<h3 id="smooth-transitions"><a class="header" href="#smooth-transitions">Smooth Transitions</a></h3>
<pre><code class="language-toml">[widgets.statusbar.health]
animate_changes = true
animation_duration = 200
</code></pre>
<h2 id="tips-4"><a class="header" href="#tips-4">Tips</a></h2>
<ol>
<li><strong>Keep It Compact</strong>: Status bar should be quick to read</li>
<li><strong>Prioritize Information</strong>: Most important data first/largest</li>
<li><strong>Use Color Wisely</strong>: Colors should convey meaning</li>
<li><strong>Test Readability</strong>: Ensure text is readable at a glance</li>
</ol>
<h2 id="complete-example-4"><a class="header" href="#complete-example-4">Complete Example</a></h2>
<pre><code class="language-toml"># A complete status bar setup

[[widgets]]
type = "dashboard"
name = "main_status"
x = 0
y = 98
width = 100
height = 2
border = false
background = "#1a1a1a"

[widgets.main_status.row1]
items = [
    { text = "❤ ", color = "red" },
    { data = "vitals.health", width = 3, align = "right" },
    { text = "% " },
    { text = "♦ ", color = "blue" },
    { data = "vitals.mana", width = 3, align = "right" },
    { text = "% " },
    { text = "⚡ ", color = "orange" },
    { data = "vitals.stamina", width = 3, align = "right" },
    { text = "% " },
    { text = "│ ", color = "gray" },
    { text = "RT:", visible_when = "roundtime &gt; 0" },
    { data = "roundtime", visible_when = "roundtime &gt; 0" },
    { text = " │ ", color = "gray" },
    { indicators = ["hidden", "stunned", "prone"], style = "icons" }
]
</code></pre>
<h2 id="see-also-51"><a class="header" href="#see-also-51">See Also</a></h2>
<ul>
<li><a href="#dashboard-widget">Dashboard Widget</a></li>
<li><a href="#progress-bars-1">Progress Bars</a></li>
<li><a href="#creating-layouts">Creating Layouts</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="tabbed-channels"><a class="header" href="#tabbed-channels">Tabbed Channels</a></h1>
<p>Organize different communication streams into tabs for cleaner chat management.</p>
<h2 id="goal-11"><a class="header" href="#goal-11">Goal</a></h2>
<p>Separate game text, combat, and various chat channels into organized tabs you can quickly switch between.</p>
<h2 id="basic-tabbed-chat"><a class="header" href="#basic-tabbed-chat">Basic Tabbed Chat</a></h2>
<pre><code class="language-toml">[[widgets]]
type = "tabbed_text"
name = "channels"
x = 0
y = 60
width = 100
height = 25

[[widgets.channels.tabs]]
name = "All"
streams = ["speech", "whisper", "thoughts", "group"]
scrollback = 2000

[[widgets.channels.tabs]]
name = "Speech"
streams = ["speech"]
scrollback = 1000

[[widgets.channels.tabs]]
name = "Whispers"
streams = ["whisper"]
scrollback = 500
highlight_new = true

[[widgets.channels.tabs]]
name = "Thoughts"
streams = ["thoughts"]
scrollback = 500
</code></pre>
<h2 id="combat--chat-tabs"><a class="header" href="#combat--chat-tabs">Combat + Chat Tabs</a></h2>
<p>Separate combat from communication:</p>
<pre><code class="language-toml">[[widgets]]
type = "tabbed_text"
name = "main_tabs"
x = 0
y = 0
width = 75
height = 85

[[widgets.main_tabs.tabs]]
name = "Game"
streams = ["main", "room"]
scrollback = 5000
default = true

[[widgets.main_tabs.tabs]]
name = "Combat"
streams = ["combat"]
scrollback = 2000
notify_on_activity = true

[[widgets.main_tabs.tabs]]
name = "Chat"
streams = ["speech", "whisper", "thoughts"]
scrollback = 1000
notify_on_activity = true

[[widgets.main_tabs.tabs]]
name = "System"
streams = ["logons", "deaths", "experience"]
scrollback = 500
</code></pre>
<h2 id="notification-indicators"><a class="header" href="#notification-indicators">Notification Indicators</a></h2>
<p>Show unread indicators on tabs:</p>
<pre><code class="language-toml">[[widgets]]
type = "tabbed_text"
name = "chat_tabs"

[widgets.chat_tabs.settings]
show_unread_count = true
unread_indicator = "●"
unread_color = "yellow"
flash_on_highlight = true

[[widgets.chat_tabs.tabs]]
name = "Whisper"
streams = ["whisper"]
# Tab shows: "Whisper ●3" when 3 unread messages
notify_pattern = ".*"  # All messages count
</code></pre>
<h2 id="keybind-navigation"><a class="header" href="#keybind-navigation">Keybind Navigation</a></h2>
<p>Quick tab switching:</p>
<pre><code class="language-toml"># keybinds.toml

[keybinds."alt+1"]
action = "switch_tab"
widget = "channels"
tab = 0

[keybinds."alt+2"]
action = "switch_tab"
widget = "channels"
tab = 1

[keybinds."alt+3"]
action = "switch_tab"
widget = "channels"
tab = 2

[keybinds."alt+4"]
action = "switch_tab"
widget = "channels"
tab = 3

# Cycle tabs
[keybinds."ctrl+tab"]
action = "next_tab"
widget = "channels"

[keybinds."ctrl+shift+tab"]
action = "prev_tab"
widget = "channels"
</code></pre>
<h2 id="filtered-tabs"><a class="header" href="#filtered-tabs">Filtered Tabs</a></h2>
<p>Create tabs with filtered content:</p>
<pre><code class="language-toml">[[widgets.channels.tabs]]
name = "Trade"
streams = ["speech"]
filter_pattern = "(?i)(sell|buy|trade|silver|coin)"
scrollback = 500

[[widgets.channels.tabs]]
name = "Group"
streams = ["speech", "thoughts"]
filter_pattern = "\\[Group\\]|\\[Party\\]"
scrollback = 500
</code></pre>
<h2 id="tab-styles"><a class="header" href="#tab-styles">Tab Styles</a></h2>
<h3 id="minimal-tabs"><a class="header" href="#minimal-tabs">Minimal Tabs</a></h3>
<pre><code class="language-toml">[widgets.channels.style]
tab_position = "top"
tab_style = "minimal"
# Shows: [Game|Combat|Chat]
separator = "|"
active_indicator = "underline"
</code></pre>
<h3 id="full-tabs"><a class="header" href="#full-tabs">Full Tabs</a></h3>
<pre><code class="language-toml">[widgets.channels.style]
tab_position = "top"
tab_style = "full"
# Shows: ╔════════╗╔═══════╗
#        ║  Game  ║║Combat ║
active_bg = "blue"
inactive_bg = "gray"
</code></pre>
<h3 id="bottom-tabs"><a class="header" href="#bottom-tabs">Bottom Tabs</a></h3>
<pre><code class="language-toml">[widgets.channels.style]
tab_position = "bottom"
</code></pre>
<h2 id="per-tab-settings"><a class="header" href="#per-tab-settings">Per-Tab Settings</a></h2>
<p>Different settings per tab:</p>
<pre><code class="language-toml">[[widgets.channels.tabs]]
name = "Game"
streams = ["main", "room"]
scrollback = 5000
wrap = true
timestamps = false

[[widgets.channels.tabs]]
name = "Combat"
streams = ["combat"]
scrollback = 1000
wrap = false
timestamps = true
timestamp_format = "[%H:%M:%S]"

[[widgets.channels.tabs]]
name = "Log"
streams = ["experience", "logons", "deaths"]
scrollback = 500
timestamps = true
log_to_file = true
log_file = "~/.vellum-fe/logs/events.log"
</code></pre>
<h2 id="searchable-tabs"><a class="header" href="#searchable-tabs">Searchable Tabs</a></h2>
<p>Enable search within tabs:</p>
<pre><code class="language-toml">[widgets.channels.settings]
searchable = true
search_keybind = "ctrl+f"
search_highlight = "yellow"
</code></pre>
<h2 id="auto-focus-tab"><a class="header" href="#auto-focus-tab">Auto-Focus Tab</a></h2>
<p>Switch to tab on activity:</p>
<pre><code class="language-toml">[[widgets.channels.tabs]]
name = "Whispers"
streams = ["whisper"]
auto_focus_on_activity = true
# Automatically switches to this tab when whisper received
</code></pre>
<p>Or only for specific patterns:</p>
<pre><code class="language-toml">[[widgets.channels.tabs]]
name = "Important"
streams = ["whisper", "thoughts"]
auto_focus_pattern = "(?i)(urgent|emergency|help)"
</code></pre>
<h2 id="complete-setup"><a class="header" href="#complete-setup">Complete Setup</a></h2>
<h3 id="layouttoml"><a class="header" href="#layouttoml">layout.toml</a></h3>
<pre><code class="language-toml"># Main game area with tabs
[[widgets]]
type = "tabbed_text"
name = "main_tabs"
x = 0
y = 0
width = 75
height = 70

[widgets.main_tabs.settings]
tab_position = "top"
show_unread_count = true
default_tab = "Game"

[[widgets.main_tabs.tabs]]
name = "Game"
streams = ["main", "room"]
scrollback = 5000

[[widgets.main_tabs.tabs]]
name = "Combat"
streams = ["combat"]
scrollback = 2000

# Chat area with tabs
[[widgets]]
type = "tabbed_text"
name = "chat_tabs"
x = 0
y = 71
width = 75
height = 14

[widgets.chat_tabs.settings]
tab_position = "top"
show_unread_count = true

[[widgets.chat_tabs.tabs]]
name = "All"
streams = ["speech", "whisper", "thoughts"]
scrollback = 1000

[[widgets.chat_tabs.tabs]]
name = "Local"
streams = ["speech"]

[[widgets.chat_tabs.tabs]]
name = "Private"
streams = ["whisper"]
notify_on_activity = true

[[widgets.chat_tabs.tabs]]
name = "ESP"
streams = ["thoughts"]
</code></pre>
<h3 id="keybindstoml"><a class="header" href="#keybindstoml">keybinds.toml</a></h3>
<pre><code class="language-toml"># Tab navigation
[keybinds."f1"]
action = "focus_widget"
widget = "main_tabs"

[keybinds."f2"]
action = "focus_widget"
widget = "chat_tabs"

[keybinds."ctrl+1"]
action = "switch_tab"
widget = "main_tabs"
tab = 0

[keybinds."ctrl+2"]
action = "switch_tab"
widget = "main_tabs"
tab = 1
</code></pre>
<h2 id="tips-5"><a class="header" href="#tips-5">Tips</a></h2>
<ol>
<li><strong>Don’t Over-Tab</strong>: Too many tabs defeats organization</li>
<li><strong>Use Notifications</strong>: Visual cues for important tabs</li>
<li><strong>Set Keybinds</strong>: Quick switching is essential</li>
<li><strong>Filter Wisely</strong>: Regex filters can miss messages</li>
</ol>
<h2 id="see-also-52"><a class="header" href="#see-also-52">See Also</a></h2>
<ul>
<li><a href="#tabbed-text-windows">Tabbed Text Widget</a></li>
<li><a href="#stream-ids">Stream IDs</a></li>
<li><a href="#keybind-actions-1">Keybind Actions</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="architecture-overview"><a class="header" href="#architecture-overview">Architecture Overview</a></h1>
<p>VellumFE is built on a rigorous three-layer architecture designed for maintainability, testability, and future GUI support.</p>
<h2 id="design-philosophy-2"><a class="header" href="#design-philosophy-2">Design Philosophy</a></h2>
<p>VellumFE separates concerns into distinct layers:</p>
<ol>
<li><strong>Data Layer</strong> - Pure data structures, no rendering logic</li>
<li><strong>Core Layer</strong> - Business logic, message processing</li>
<li><strong>Frontend Layer</strong> - Rendering, user interaction</li>
</ol>
<p>This separation enables:</p>
<ul>
<li><strong>Multiple frontends</strong> - TUI now, GUI later, same logic</li>
<li><strong>Testability</strong> - Core logic without rendering dependencies</li>
<li><strong>Maintainability</strong> - Clear boundaries and responsibilities</li>
<li><strong>Performance</strong> - Efficient data flow and change detection</li>
</ul>
<h2 id="high-level-architecture"><a class="header" href="#high-level-architecture">High-Level Architecture</a></h2>
<pre><code>┌─────────────────────────────────────────────────────────────────┐
│                      FRONTEND LAYER                             │
│  ┌─────────────────┐              ┌─────────────────┐           │
│  │   TUI Frontend  │              │   GUI Frontend  │           │
│  │   (ratatui)     │              │   (egui)        │           │
│  │                 │              │   [planned]     │           │
│  └────────┬────────┘              └────────┬────────┘           │
│           │                                │                    │
│           │    Frontend Trait Interface    │                    │
│           └────────────────┬───────────────┘                    │
├────────────────────────────┼────────────────────────────────────┤
│                      CORE LAYER                                 │
│  ┌─────────────────────────┴─────────────────────────┐          │
│  │                    AppCore                        │          │
│  │  ┌─────────────┐ ┌─────────────┐ ┌─────────────┐  │          │
│  │  │MessageProc. │ │  Commands   │ │  Keybinds   │  │          │
│  │  └─────────────┘ └─────────────┘ └─────────────┘  │          │
│  └───────────────────────┬───────────────────────────┘          │
├──────────────────────────┼──────────────────────────────────────┤
│                      DATA LAYER                                 │
│  ┌───────────────────────┴───────────────────────────┐          │
│  │  ┌─────────────┐ ┌─────────────┐ ┌─────────────┐  │          │
│  │  │  GameState  │ │   UiState   │ │ WindowState │  │          │
│  │  └─────────────┘ └─────────────┘ └─────────────┘  │          │
│  └───────────────────────────────────────────────────┘          │
└─────────────────────────────────────────────────────────────────┘
                              │
                    ┌─────────┴─────────┐
                    │   Network Layer   │
                    │  (Tokio Async)    │
                    └───────────────────┘
</code></pre>
<h2 id="module-organization"><a class="header" href="#module-organization">Module Organization</a></h2>
<pre><code>src/
├── main.rs              # Entry point, CLI parsing
├── lib.rs               # Library exports
│
├── core/                # Business logic
│   ├── mod.rs
│   ├── state.rs         # GameState
│   ├── messages.rs      # MessageProcessor
│   ├── input_router.rs  # Input dispatch
│   ├── menu_actions.rs  # Menu action handlers
│   └── app_core/
│       ├── mod.rs
│       ├── state.rs     # AppCore
│       ├── commands.rs  # Built-in commands
│       ├── keybinds.rs  # Keybind dispatch
│       └── layout.rs    # Layout management
│
├── data/                # Data structures
│   ├── mod.rs
│   ├── ui_state.rs      # UiState, InputMode
│   ├── widget.rs        # TextContent, ProgressData
│   └── window.rs        # WindowState, WidgetType
│
├── frontend/            # Rendering
│   ├── mod.rs           # Frontend trait
│   ├── events.rs        # FrontendEvent
│   ├── common/          # Shared types
│   │   ├── color.rs
│   │   ├── input.rs
│   │   ├── rect.rs
│   │   └── text_input.rs
│   ├── tui/             # Terminal UI
│   │   ├── mod.rs
│   │   ├── runtime.rs   # Event loop
│   │   ├── widget_manager.rs
│   │   ├── text_window.rs
│   │   ├── progress_bar.rs
│   │   └── ... (30+ widget files)
│   └── gui/             # Native GUI (planned)
│       └── mod.rs
│
├── config.rs            # Configuration
├── config/
│   ├── highlights.rs
│   └── keybinds.rs
│
├── parser.rs            # XML parser
├── cmdlist.rs           # Context menu data
├── network.rs           # Network connections
├── theme.rs             # Theme system
├── sound.rs             # Audio playback
├── tts/                 # Text-to-speech
├── clipboard.rs         # Clipboard access
├── selection.rs         # Text selection
└── performance.rs       # Performance tracking
</code></pre>
<h2 id="layer-rules"><a class="header" href="#layer-rules">Layer Rules</a></h2>
<h3 id="import-restrictions"><a class="header" href="#import-restrictions">Import Restrictions</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Layer</th><th>Can Import From</th></tr>
</thead>
<tbody>
<tr><td>Data</td><td>Nothing else</td></tr>
<tr><td>Core</td><td>Data only</td></tr>
<tr><td>Frontend</td><td>Data and Core</td></tr>
</tbody>
</table>
</div>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// ✅ ALLOWED
// data/ imports nothing from core/ or frontend/
// core/ imports from data/
// frontend/ imports from data/ and core/

// ❌ FORBIDDEN
// data/ importing from core/ or frontend/
// core/ importing from frontend/
<span class="boring">}</span></code></pre>
<h3 id="responsibilities"><a class="header" href="#responsibilities">Responsibilities</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Layer</th><th>Responsibilities</th></tr>
</thead>
<tbody>
<tr><td><strong>Data</strong></td><td>Define state structures, no behavior</td></tr>
<tr><td><strong>Core</strong></td><td>Process messages, handle commands, manage state</td></tr>
<tr><td><strong>Frontend</strong></td><td>Render widgets, capture input, convert events</td></tr>
</tbody>
</table>
</div>
<h2 id="key-components"><a class="header" href="#key-components">Key Components</a></h2>
<h3 id="appcore"><a class="header" href="#appcore">AppCore</a></h3>
<p>The central orchestrator containing all state and logic:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct AppCore {
    pub config: Config,
    pub layout: Layout,
    pub game_state: GameState,
    pub ui_state: UiState,
    pub message_processor: MessageProcessor,
    pub parser: XmlParser,
}
<span class="boring">}</span></code></pre>
<h3 id="frontend-trait"><a class="header" href="#frontend-trait">Frontend Trait</a></h3>
<p>Interface for UI implementations:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub trait Frontend {
    fn poll_events(&amp;mut self) -&gt; Result&lt;Vec&lt;FrontendEvent&gt;&gt;;
    fn render(&amp;mut self, app: &amp;mut dyn Any) -&gt; Result&lt;()&gt;;
    fn cleanup(&amp;mut self) -&gt; Result&lt;()&gt;;
    fn size(&amp;self) -&gt; (u16, u16);
}
<span class="boring">}</span></code></pre>
<h3 id="event-loop"><a class="header" href="#event-loop">Event Loop</a></h3>
<p>The main loop coordinates all components:</p>
<ol>
<li>Poll user input (non-blocking)</li>
<li>Process server messages</li>
<li>Update state</li>
<li>Render frame</li>
<li>Sleep to maintain frame rate</li>
</ol>
<h2 id="architecture-sections"><a class="header" href="#architecture-sections">Architecture Sections</a></h2>
<p>This section covers:</p>
<ul>
<li><a href="#core-data-frontend-architecture">Core-Data-Frontend</a> - Three-layer architecture in depth</li>
<li><a href="#message-flow">Message Flow</a> - Data flow through the system</li>
<li><a href="#parser-protocol">Parser Protocol</a> - XML protocol handling</li>
<li><a href="#widget-synchronization">Widget Sync</a> - Generation-based synchronization</li>
<li><a href="#theme-system">Theme System</a> - Color resolution and theming</li>
<li><a href="#browser--editor-system">Browser Editors</a> - Popup configuration system</li>
<li><a href="#performance-optimization">Performance</a> - Optimization strategies</li>
</ul>
<h2 id="design-principles"><a class="header" href="#design-principles">Design Principles</a></h2>
<ol>
<li><strong>Separation of Concerns</strong> - Each layer has clear responsibilities</li>
<li><strong>Frontend Independence</strong> - Core logic works with any UI</li>
<li><strong>Event-Driven</strong> - Asynchronous network, synchronous rendering</li>
<li><strong>State Centralization</strong> - All state in Data layer</li>
<li><strong>Extensibility</strong> - New widgets/frontends plug in cleanly</li>
</ol>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="core-data-frontend-architecture"><a class="header" href="#core-data-frontend-architecture">Core-Data-Frontend Architecture</a></h1>
<p>VellumFE strictly separates code into three layers. This design enables frontend independence and clean testing.</p>
<h2 id="layer-overview"><a class="header" href="#layer-overview">Layer Overview</a></h2>
<pre><code>┌─────────────────────────────────────┐
│           FRONTEND                  │
│   • Renders widgets                 │
│   • Captures user input             │
│   • Converts events                 │
│   • NO business logic               │
├─────────────────────────────────────┤
│             CORE                    │
│   • Processes messages              │
│   • Handles commands                │
│   • Dispatches keybinds             │
│   • Routes data to state            │
├─────────────────────────────────────┤
│             DATA                    │
│   • Pure data structures            │
│   • No behavior                     │
│   • Owned by Core                   │
└─────────────────────────────────────┘
</code></pre>
<h2 id="data-layer"><a class="header" href="#data-layer">Data Layer</a></h2>
<p>Location: <code>src/data/</code></p>
<p>The data layer contains pure data structures with no logic or rendering.</p>
<h3 id="uistate"><a class="header" href="#uistate">UiState</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct UiState {
    pub windows: HashMap&lt;String, WindowState&gt;,
    pub focused_window: Option&lt;String&gt;,
    pub input_mode: InputMode,
    pub popup_menu: Option&lt;PopupMenu&gt;,
    pub selection_state: Option&lt;SelectionState&gt;,
    pub search_input: String,
}
<span class="boring">}</span></code></pre>
<h3 id="gamestate"><a class="header" href="#gamestate">GameState</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct GameState {
    pub connected: bool,
    pub character_name: Option&lt;String&gt;,
    pub room_id: Option&lt;String&gt;,
    pub room_name: Option&lt;String&gt;,
    pub exits: Vec&lt;String&gt;,
    pub vitals: Vitals,
    pub left_hand: Option&lt;String&gt;,
    pub right_hand: Option&lt;String&gt;,
    pub spell: Option&lt;String&gt;,
    pub status: StatusInfo,
}
<span class="boring">}</span></code></pre>
<h3 id="windowstate"><a class="header" href="#windowstate">WindowState</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct WindowState {
    pub name: String,
    pub widget_type: WidgetType,
    pub streams: Vec&lt;String&gt;,
    pub visible: bool,
    pub rect: Rect,

    // Content (varies by widget type)
    pub text_content: Option&lt;TextContent&gt;,
    pub progress_data: Option&lt;ProgressData&gt;,
    pub countdown_data: Option&lt;CountdownData&gt;,
    pub compass_data: Option&lt;CompassData&gt;,
}
<span class="boring">}</span></code></pre>
<h3 id="textcontent"><a class="header" href="#textcontent">TextContent</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct TextContent {
    pub lines: VecDeque&lt;StyledLine&gt;,
    pub scroll_offset: usize,
    pub max_lines: usize,
    pub title: String,
    pub generation: u64,  // Change counter
}
<span class="boring">}</span></code></pre>
<h3 id="input-modes"><a class="header" href="#input-modes">Input Modes</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub enum InputMode {
    // Standard modes
    Normal,              // Command input active
    Navigation,          // Vi-style navigation
    History,             // Scrolling command history
    Search,              // Text search mode
    Menu,                // Context menu open

    // Editor modes (priority windows)
    HighlightBrowser,
    HighlightForm,
    KeybindBrowser,
    KeybindForm,
    ColorPaletteBrowser,
    WindowEditor,
    // ...
}
<span class="boring">}</span></code></pre>
<h2 id="core-layer"><a class="header" href="#core-layer">Core Layer</a></h2>
<p>Location: <code>src/core/</code></p>
<p>The core layer contains all business logic but no rendering code.</p>
<h3 id="appcore-1"><a class="header" href="#appcore-1">AppCore</a></h3>
<p>The central orchestrator:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct AppCore {
    pub config: Config,
    pub layout: Layout,
    pub game_state: GameState,
    pub ui_state: UiState,
    pub message_processor: MessageProcessor,
    pub parser: XmlParser,
    pub performance_stats: PerformanceStats,
}
<span class="boring">}</span></code></pre>
<h3 id="appcore-methods"><a class="header" href="#appcore-methods">AppCore Methods</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>impl AppCore {
    // Message processing
    pub fn process_server_message(&amp;mut self, msg: &amp;str) { ... }

    // User input
    pub fn handle_command(&amp;mut self, cmd: &amp;str) { ... }
    pub fn dispatch_keybind(&amp;mut self, key: &amp;KeyEvent) { ... }

    // State management
    pub fn get_window_state(&amp;self, name: &amp;str) -&gt; Option&lt;&amp;WindowState&gt; { ... }
    pub fn get_window_state_mut(&amp;mut self, name: &amp;str) -&gt; Option&lt;&amp;mut WindowState&gt; { ... }

    // Layout
    pub fn apply_layout(&amp;mut self, layout: Layout) { ... }
}
<span class="boring">}</span></code></pre>
<h3 id="messageprocessor"><a class="header" href="#messageprocessor">MessageProcessor</a></h3>
<p>Routes parsed XML to appropriate state:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>impl MessageProcessor {
    pub fn process(
        &amp;mut self,
        element: ParsedElement,
        game_state: &amp;mut GameState,
        ui_state: &amp;mut UiState,
    ) {
        match element {
            ParsedElement::Text { content, stream, .. } =&gt; {
                // Route to appropriate window's text_content
            }
            ParsedElement::ProgressBar { id, value, max, .. } =&gt; {
                // Update vitals or progress widget
            }
            ParsedElement::Compass { directions } =&gt; {
                // Update game_state.exits
            }
            // ... handle all element types
        }
    }
}
<span class="boring">}</span></code></pre>
<h2 id="frontend-layer"><a class="header" href="#frontend-layer">Frontend Layer</a></h2>
<p>Location: <code>src/frontend/</code></p>
<p>The frontend layer renders UI and captures input. It has no business logic.</p>
<h3 id="frontend-trait-1"><a class="header" href="#frontend-trait-1">Frontend Trait</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub trait Frontend {
    fn poll_events(&amp;mut self) -&gt; Result&lt;Vec&lt;FrontendEvent&gt;&gt;;
    fn render(&amp;mut self, app: &amp;mut dyn Any) -&gt; Result&lt;()&gt;;
    fn cleanup(&amp;mut self) -&gt; Result&lt;()&gt;;
    fn size(&amp;self) -&gt; (u16, u16);
}
<span class="boring">}</span></code></pre>
<h3 id="frontendevent"><a class="header" href="#frontendevent">FrontendEvent</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub enum FrontendEvent {
    Key(KeyEvent),
    Mouse(MouseEvent),
    Resize(u16, u16),
    Paste(String),
    FocusGained,
    FocusLost,
}
<span class="boring">}</span></code></pre>
<h3 id="tui-frontend"><a class="header" href="#tui-frontend">TUI Frontend</a></h3>
<p>The terminal UI implementation:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct TuiFrontend {
    terminal: Terminal&lt;CrosstermBackend&lt;Stdout&gt;&gt;,
    widget_manager: WidgetManager,
}

impl Frontend for TuiFrontend {
    fn poll_events(&amp;mut self) -&gt; Result&lt;Vec&lt;FrontendEvent&gt;&gt; {
        // Convert crossterm events to FrontendEvent
    }

    fn render(&amp;mut self, app: &amp;mut dyn Any) -&gt; Result&lt;()&gt; {
        // Sync data to widgets
        // Render all visible widgets
    }
}
<span class="boring">}</span></code></pre>
<h3 id="widget-manager"><a class="header" href="#widget-manager">Widget Manager</a></h3>
<p>Caches and manages frontend widgets:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct WidgetManager {
    pub text_windows: HashMap&lt;String, TextWindow&gt;,
    pub tabbed_text_windows: HashMap&lt;String, TabbedTextWindow&gt;,
    pub command_inputs: HashMap&lt;String, CommandInput&gt;,
    pub progress_bars: HashMap&lt;String, ProgressBar&gt;,
    pub countdowns: HashMap&lt;String, Countdown&gt;,
    pub compass_widgets: HashMap&lt;String, Compass&gt;,
    // ... more widget types

    // Generation tracking
    pub last_synced_generation: HashMap&lt;String, u64&gt;,
}
<span class="boring">}</span></code></pre>
<h2 id="layer-communication"><a class="header" href="#layer-communication">Layer Communication</a></h2>
<h3 id="data-flow-pattern"><a class="header" href="#data-flow-pattern">Data Flow Pattern</a></h3>
<pre><code>Server Message
      ↓
[Network Layer] ──────→ Raw XML string
      ↓
[Parser]        ──────→ Vec&lt;ParsedElement&gt;
      ↓
[MessageProcessor] ───→ State updates
      ↓
[Data Layer]    ──────→ GameState, UiState, WindowState
      ↓
[Sync Functions] ─────→ Widget updates
      ↓
[Frontend]      ──────→ Rendered frame
</code></pre>
<h3 id="user-input-flow"><a class="header" href="#user-input-flow">User Input Flow</a></h3>
<pre><code>User Input
      ↓
[Frontend] ───────────→ FrontendEvent
      ↓
[Input Router] ───────→ Keybind match?
      ↓
[AppCore] ────────────→ Execute action
      ↓
Either:
  • UI Action (state change)
  • Game Command (send to server)
</code></pre>
<h2 id="strict-separation-benefits"><a class="header" href="#strict-separation-benefits">Strict Separation Benefits</a></h2>
<h3 id="1-frontend-independence"><a class="header" href="#1-frontend-independence">1. Frontend Independence</a></h3>
<p>Core and Data know nothing about rendering:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// In core/
// ❌ FORBIDDEN:
use ratatui::*;
use crossterm::*;

// ✅ ALLOWED:
use crate::data::*;
<span class="boring">}</span></code></pre>
<p>This enables adding a GUI frontend without modifying core logic.</p>
<h3 id="2-testability"><a class="header" href="#2-testability">2. Testability</a></h3>
<p>Core logic can be tested without a terminal:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[test]
fn test_message_processing() {
    let mut app = AppCore::new(test_config());

    // Simulate server message
    app.process_server_message("&lt;pushBold/&gt;A goblin&lt;popBold/&gt;");

    // Verify state without rendering
    let main_window = app.ui_state.windows.get("main").unwrap();
    assert!(main_window.text_content.as_ref().unwrap()
        .lines.back().unwrap().segments[0].bold);
}
<span class="boring">}</span></code></pre>
<h3 id="3-clear-boundaries"><a class="header" href="#3-clear-boundaries">3. Clear Boundaries</a></h3>
<p>Each layer has explicit responsibilities:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Question</th><th>Answer</th></tr>
</thead>
<tbody>
<tr><td>Where do I add a new data field?</td><td>Data layer</td></tr>
<tr><td>Where do I process server XML?</td><td>Core layer (parser/message processor)</td></tr>
<tr><td>Where do I render a new widget?</td><td>Frontend layer</td></tr>
<tr><td>Where do I handle a keybind?</td><td>Core layer (commands/keybinds)</td></tr>
</tbody>
</table>
</div>
<h3 id="4-maintainability"><a class="header" href="#4-maintainability">4. Maintainability</a></h3>
<p>Changes are localized:</p>
<ul>
<li>Change rendering style → Frontend only</li>
<li>Change data format → Data + consumers</li>
<li>Change business logic → Core only</li>
<li>Add new widget type → All layers, but well-defined boundaries</li>
</ul>
<h2 id="state-hierarchy"><a class="header" href="#state-hierarchy">State Hierarchy</a></h2>
<pre><code>AppCore
├── config: Config                    # Configuration (immutable)
│   ├── connection: ConnectionConfig
│   ├── ui: UiConfig
│   ├── highlights: HashMap&lt;String, HighlightPattern&gt;
│   ├── keybinds: HashMap&lt;String, KeyBindAction&gt;
│   └── colors: ColorConfig
│
├── layout: Layout                    # Current window layout
│   └── windows: Vec&lt;WindowDef&gt;
│
├── game_state: GameState             # Game session state
│   ├── connected: bool
│   ├── character_name: Option&lt;String&gt;
│   ├── room_id, room_name: Option&lt;String&gt;
│   ├── exits: Vec&lt;String&gt;
│   ├── vitals: Vitals
│   └── status: StatusInfo
│
├── ui_state: UiState                 # UI interaction state
│   ├── windows: HashMap&lt;String, WindowState&gt;
│   ├── focused_window: Option&lt;String&gt;
│   ├── input_mode: InputMode
│   └── popup_menu: Option&lt;PopupMenu&gt;
│
└── message_processor: MessageProcessor
    ├── current_stream: String
    └── squelch_matcher: Option&lt;AhoCorasick&gt;
</code></pre>
<h2 id="adding-a-new-feature"><a class="header" href="#adding-a-new-feature">Adding a New Feature</a></h2>
<h3 id="example-add-stance-display"><a class="header" href="#example-add-stance-display">Example: Add “Stance” Display</a></h3>
<p><strong>1. Data Layer</strong> - Add data structure:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// src/data/game_state.rs
pub struct GameState {
    // ... existing fields
    pub stance: Option&lt;Stance&gt;,
}

pub struct Stance {
    pub name: String,
    pub offensive: u8,
    pub defensive: u8,
}
<span class="boring">}</span></code></pre>
<p><strong>2. Core Layer</strong> - Handle the XML:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// src/core/messages.rs
ParsedElement::Stance { name, offensive, defensive } =&gt; {
    game_state.stance = Some(Stance { name, offensive, defensive });
}
<span class="boring">}</span></code></pre>
<p><strong>3. Frontend Layer</strong> - Render the widget:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// src/frontend/tui/stance_widget.rs
pub struct StanceWidget {
    stance: Option&lt;Stance&gt;,
}

impl Widget for &amp;StanceWidget {
    fn render(self, area: Rect, buf: &amp;mut Buffer) {
        // Render stance display
    }
}
<span class="boring">}</span></code></pre>
<p><strong>4. Sync Function</strong> - Connect data to widget:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// src/frontend/tui/sync.rs
pub fn sync_stance_widgets(
    game_state: &amp;GameState,
    widget_manager: &amp;mut WidgetManager,
) {
    if let Some(stance) = &amp;game_state.stance {
        let widget = widget_manager.stance_widgets
            .entry("stance".to_string())
            .or_insert_with(StanceWidget::new);
        widget.update(stance);
    }
}
<span class="boring">}</span></code></pre>
<h2 id="see-also-53"><a class="header" href="#see-also-53">See Also</a></h2>
<ul>
<li><a href="#message-flow">Message Flow</a> - Detailed data flow</li>
<li><a href="#widget-synchronization">Widget Sync</a> - Synchronization patterns</li>
<li><a href="#performance-optimization">Performance</a> - Optimization strategies</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="message-flow"><a class="header" href="#message-flow">Message Flow</a></h1>
<p>This document traces data flow through VellumFE from network to screen and from keyboard to game server.</p>
<h2 id="server--ui-flow"><a class="header" href="#server--ui-flow">Server → UI Flow</a></h2>
<h3 id="complete-flow-diagram"><a class="header" href="#complete-flow-diagram">Complete Flow Diagram</a></h3>
<pre><code>┌──────────────┐    ┌──────────────┐    ┌──────────────┐
│   Network    │───▶│    Parser    │───▶│   Message    │
│   (TCP/TLS)  │    │   (XML)      │    │  Processor   │
└──────────────┘    └──────────────┘    └──────────────┘
                                               │
                    ┌──────────────────────────┼──────────────────────────┐
                    │                          ▼                          │
              ┌─────┴─────┐            ┌──────────────┐            ┌──────┴─────┐
              │ GameState │            │   UiState    │            │  Windows   │
              │  (vitals, │            │  (streams,   │            │  (text     │
              │   room)   │            │   focus)     │            │   content) │
              └───────────┘            └──────────────┘            └────────────┘
                                               │
                                               ▼
                                       ┌──────────────┐
                                       │   Frontend   │
                                       │   Render     │
                                       └──────────────┘
</code></pre>
<h3 id="step-by-step-processing"><a class="header" href="#step-by-step-processing">Step-by-Step Processing</a></h3>
<h4 id="1-network-receives-data"><a class="header" href="#1-network-receives-data">1. Network Receives Data</a></h4>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>ServerMessage::Text(raw_xml)
// Example: "&lt;pushBold/&gt;A goblin&lt;popBold/&gt; attacks you!"
<span class="boring">}</span></code></pre>
<p>The network task runs asynchronously, sending messages via channel.</p>
<h4 id="2-parser-extracts-elements"><a class="header" href="#2-parser-extracts-elements">2. Parser Extracts Elements</a></h4>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let elements: Vec&lt;ParsedElement&gt; = parser.parse(&amp;raw_xml);

// Result:
// [
//   Text { content: "A goblin", bold: true, span_type: Monsterbold, ... },
//   Text { content: " attacks you!", bold: false, span_type: Normal, ... },
// ]
<span class="boring">}</span></code></pre>
<p>The parser maintains state (color stacks, current stream) across calls.</p>
<h4 id="3-messageprocessor-routes-to-state"><a class="header" href="#3-messageprocessor-routes-to-state">3. MessageProcessor Routes to State</a></h4>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>for element in elements {
    message_processor.process(element, &amp;mut game_state, &amp;mut ui_state);
}

// Processing logic:
match element {
    ParsedElement::Text { content, stream, fg_color, bg_color, bold, span_type, link_data } =&gt; {
        // Find window for this stream
        if let Some(window) = ui_state.windows.get_mut(&amp;stream) {
            if let Some(text_content) = &amp;mut window.text_content {
                // Create styled line
                let line = StyledLine::new(segments);
                text_content.add_line(line);  // Increments generation
            }
        }
    }

    ParsedElement::ProgressBar { id, value, max, text } =&gt; {
        // Update vitals
        match id.as_str() {
            "health" =&gt; game_state.vitals.health = (value, max),
            "mana" =&gt; game_state.vitals.mana = (value, max),
            // ...
        }
    }

    ParsedElement::Compass { directions } =&gt; {
        game_state.exits = directions;
    }

    // ... handle 30+ element types
}
<span class="boring">}</span></code></pre>
<h4 id="4-state-changes-detected"><a class="header" href="#4-state-changes-detected">4. State Changes Detected</a></h4>
<p>The sync system detects changes via generation counters:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Each text_content tracks changes
pub struct TextContent {
    pub lines: VecDeque&lt;StyledLine&gt;,
    pub generation: u64,  // Increments on every add_line()
}
<span class="boring">}</span></code></pre>
<h4 id="5-frontend-syncs-and-renders"><a class="header" href="#5-frontend-syncs-and-renders">5. Frontend Syncs and Renders</a></h4>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// In render loop:
sync_text_windows(&amp;app.ui_state, &amp;mut widget_manager);
sync_progress_bars(&amp;app.game_state, &amp;mut widget_manager);
sync_compass_widgets(&amp;app.game_state, &amp;mut widget_manager);
// ... more sync functions

// Render all widgets
terminal.draw(|frame| {
    for (name, widget) in &amp;widget_manager.text_windows {
        frame.render_widget(&amp;*widget, widget.rect());
    }
    // ... render other widget types
})?;
<span class="boring">}</span></code></pre>
<h2 id="user-input--game-flow"><a class="header" href="#user-input--game-flow">User Input → Game Flow</a></h2>
<h3 id="complete-flow-diagram-1"><a class="header" href="#complete-flow-diagram-1">Complete Flow Diagram</a></h3>
<pre><code>┌──────────────┐    ┌──────────────┐    ┌──────────────┐
│   Frontend   │───▶│   Keybind    │───▶│    Core      │
│   (events)   │    │   Dispatch   │    │   Commands   │
└──────────────┘    └──────────────┘    └──────────────┘
                                               │
                          ┌────────────────────┴────────────────────┐
                          ▼                                         ▼
                   ┌──────────────┐                          ┌──────────────┐
                   │  UI Action   │                          │ Game Command │
                   │ (open menu,  │                          │  (send to    │
                   │  scroll)     │                          │   server)    │
                   └──────────────┘                          └──────────────┘
</code></pre>
<h3 id="keybind-processing-layers"><a class="header" href="#keybind-processing-layers">Keybind Processing Layers</a></h3>
<p>Keybinds are processed in priority order:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Layer 1: Global keybinds (always active)
if let Some(action) = config.global_keybinds.match_key(&amp;key) {
    return handle_global_action(action);
}

// Layer 2: Menu keybinds (in priority windows)
if has_priority_window(&amp;ui_state.input_mode) {
    if let Some(action) = config.menu_keybinds.match_key(&amp;key, context) {
        return handle_menu_action(action);
    }
}

// Layer 3: User keybinds (game mode)
if let Some(action) = config.keybinds.get(&amp;key_string) {
    return handle_user_action(action);
}

// Layer 4: Default character input
command_input.insert_char(key.char);
<span class="boring">}</span></code></pre>
<h3 id="action-types"><a class="header" href="#action-types">Action Types</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Action Type</th><th>Example</th><th>Effect</th></tr>
</thead>
<tbody>
<tr><td><strong>UI Action</strong></td><td>Open menu, scroll</td><td>Modifies UiState</td></tr>
<tr><td><strong>Game Command</strong></td><td>Send “look”</td><td>Sent to server</td></tr>
<tr><td><strong>Macro</strong></td><td>Multi-command sequence</td><td>Multiple server sends</td></tr>
<tr><td><strong>Internal</strong></td><td>Change layout</td><td>Config/layout change</td></tr>
</tbody>
</table>
</div>
<h2 id="event-loop-1"><a class="header" href="#event-loop-1">Event Loop</a></h2>
<h3 id="main-loop-structure"><a class="header" href="#main-loop-structure">Main Loop Structure</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub fn run(config: Config) -&gt; Result&lt;()&gt; {
    // 1. Initialize
    let runtime = tokio::runtime::Builder::new_multi_thread().build()?;
    let mut app = AppCore::new(config)?;
    let mut frontend = TuiFrontend::new()?;

    // 2. Start network tasks
    let (server_tx, server_rx) = mpsc::unbounded_channel();
    let (command_tx, command_rx) = mpsc::unbounded_channel();
    runtime.spawn(network_task(server_tx, command_rx));

    // 3. Main event loop
    loop {
        // Poll for user input (non-blocking)
        let events = frontend.poll_events()?;

        for event in events {
            match event {
                FrontendEvent::Key(key) =&gt; {
                    if app.handle_key_event(key, &amp;command_tx)? == ControlFlow::Break {
                        return Ok(());
                    }
                }
                FrontendEvent::Mouse(mouse) =&gt; {
                    app.handle_mouse_event(mouse)?;
                }
                FrontendEvent::Resize(w, h) =&gt; {
                    app.handle_resize(w, h)?;
                }
            }
        }

        // Process server messages (non-blocking drain)
        while let Ok(msg) = server_rx.try_recv() {
            match msg {
                ServerMessage::Text(text) =&gt; {
                    app.process_server_message(&amp;text)?;
                }
                ServerMessage::Connected =&gt; { ... }
                ServerMessage::Disconnected =&gt; { ... }
            }
        }

        // Render frame
        frontend.render(&amp;mut app)?;

        // Sleep to maintain frame rate (~60 FPS)
        std::thread::sleep(Duration::from_millis(16));
    }
}
<span class="boring">}</span></code></pre>
<h3 id="async-network-integration"><a class="header" href="#async-network-integration">Async Network Integration</a></h3>
<p>Network I/O runs in separate Tokio tasks:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>async fn reader_task(
    stream: TcpStream,
    server_tx: UnboundedSender&lt;ServerMessage&gt;,
) {
    let mut reader = BufReader::new(stream);
    let mut line = String::new();

    loop {
        line.clear();
        match reader.read_line(&amp;mut line).await {
            Ok(0) =&gt; {
                server_tx.send(ServerMessage::Disconnected).ok();
                break;
            }
            Ok(_) =&gt; {
                server_tx.send(ServerMessage::Text(line.clone())).ok();
            }
            Err(_) =&gt; break,
        }
    }
}

async fn writer_task(
    mut stream: TcpStream,
    mut command_rx: UnboundedReceiver&lt;String&gt;,
) {
    while let Some(cmd) = command_rx.recv().await {
        if stream.write_all(cmd.as_bytes()).await.is_err() {
            break;
        }
    }
}
<span class="boring">}</span></code></pre>
<h2 id="detailed-scenarios"><a class="header" href="#detailed-scenarios">Detailed Scenarios</a></h2>
<h3 id="scenario-monster-attack-message"><a class="header" href="#scenario-monster-attack-message">Scenario: Monster Attack Message</a></h3>
<pre><code>Server sends: "&lt;pushBold/&gt;A massive troll&lt;popBold/&gt; swings at you!"

1. Network Task
   └─▶ Receives bytes, sends ServerMessage::Text(...)

2. Main Loop
   └─▶ Receives from channel, calls process_server_message()

3. Parser
   └─▶ Parses XML tags:
       • &lt;pushBold/&gt; → Push bold state
       • "A massive troll" → Text with bold=true, span_type=Monsterbold
       • &lt;popBold/&gt; → Pop bold state
       • " swings at you!" → Text with bold=false
   └─▶ Returns Vec&lt;ParsedElement&gt;

4. MessageProcessor
   └─▶ For each Text element:
       • Applies highlight patterns
       • Routes to "main" stream
       • Adds to main window's TextContent
       • Increments generation counter

5. Sync Functions
   └─▶ Detects generation change
   └─▶ Copies new line to TextWindow widget

6. Frontend Render
   └─▶ Renders TextWindow with new content
   └─▶ Bold "A massive troll" in monsterbold color
</code></pre>
<h3 id="scenario-user-types-command"><a class="header" href="#scenario-user-types-command">Scenario: User Types Command</a></h3>
<pre><code>User types: "attack troll" and presses Enter

1. Frontend
   └─▶ Captures key events: 'a', 't', 't', ..., Enter
   └─▶ Sends FrontendEvent::Key for each

2. Input Router (for each key)
   └─▶ Not a keybind → Insert into command input

3. On Enter
   └─▶ Get command text: "attack troll"
   └─▶ Check for client command (starts with '.')
   └─▶ Not client command → Send to server
   └─▶ command_tx.send("attack troll\n")

4. Writer Task
   └─▶ Receives from channel
   └─▶ Writes to TCP stream

5. Meanwhile
   └─▶ Command echoed to main window
   └─▶ Server response arrives via reader task
</code></pre>
<h3 id="scenario-progress-bar-update"><a class="header" href="#scenario-progress-bar-update">Scenario: Progress Bar Update</a></h3>
<pre><code>Server sends: &lt;progressBar id='health' value='75' text='health 375/500'/&gt;

1. Parser
   └─▶ Creates ParsedElement::ProgressBar {
         id: "health",
         value: 375,
         max: 500,
         text: "health 375/500"
       }

2. MessageProcessor
   └─▶ Updates game_state.vitals.health = (375, 500)

3. Sync Functions
   └─▶ sync_progress_bars() reads vitals
   └─▶ Updates ProgressBar widget

4. Frontend
   └─▶ Renders bar at 75% filled
</code></pre>
<h3 id="scenario-room-change"><a class="header" href="#scenario-room-change">Scenario: Room Change</a></h3>
<pre><code>Server sends multiple elements for room transition:
1. &lt;clearStream id='room'/&gt;
2. &lt;nav rm='12345'/&gt;
3. &lt;streamWindow id='room' subtitle='Town Square'/&gt;
4. &lt;component id='room desc'&gt;A bustling town square...&lt;/component&gt;
5. &lt;compass&gt;&lt;dir value='n'/&gt;&lt;dir value='e'/&gt;&lt;dir value='out'/&gt;&lt;/compass&gt;

Processing:

1. ClearStream
   └─▶ Clears room window content

2. RoomId
   └─▶ game_state.room_id = Some("12345")

3. StreamWindow
   └─▶ game_state.room_name = Some("Town Square")
   └─▶ Updates window title

4. Component
   └─▶ Adds description to room window

5. Compass
   └─▶ game_state.exits = ["n", "e", "out"]
   └─▶ Compass widget updates

All synced and rendered in next frame.
</code></pre>
<h2 id="channel-communication"><a class="header" href="#channel-communication">Channel Communication</a></h2>
<h3 id="channel-types"><a class="header" href="#channel-types">Channel Types</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Channel</th><th>Direction</th><th>Purpose</th></tr>
</thead>
<tbody>
<tr><td><code>server_tx</code></td><td>Network → Main</td><td>Server messages</td></tr>
<tr><td><code>command_tx</code></td><td>Main → Network</td><td>Game commands</td></tr>
</tbody>
</table>
</div>
<h3 id="message-types"><a class="header" href="#message-types">Message Types</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub enum ServerMessage {
    Text(String),       // Server XML data
    Connected,          // Connection established
    Disconnected,       // Connection lost
    Error(String),      // Network error
}
<span class="boring">}</span></code></pre>
<h2 id="error-handling"><a class="header" href="#error-handling">Error Handling</a></h2>
<h3 id="network-errors"><a class="header" href="#network-errors">Network Errors</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// In reader task
match reader.read_line(&amp;mut line).await {
    Ok(0) =&gt; {
        // EOF - server closed connection
        server_tx.send(ServerMessage::Disconnected).ok();
    }
    Err(e) =&gt; {
        // Read error
        server_tx.send(ServerMessage::Error(e.to_string())).ok();
    }
}
<span class="boring">}</span></code></pre>
<h3 id="parse-errors"><a class="header" href="#parse-errors">Parse Errors</a></h3>
<p>Parse errors are logged but don’t crash:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Invalid XML is skipped
if let Err(e) = parser.parse_chunk(&amp;data) {
    tracing::warn!("Parse error: {}", e);
    // Continue processing
}
<span class="boring">}</span></code></pre>
<h3 id="state-errors"><a class="header" href="#state-errors">State Errors</a></h3>
<p>Missing windows are handled gracefully:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// If window doesn't exist, message is silently dropped
if let Some(window) = ui_state.windows.get_mut(&amp;stream) {
    // Process
}
<span class="boring">}</span></code></pre>
<h2 id="see-also-54"><a class="header" href="#see-also-54">See Also</a></h2>
<ul>
<li><a href="#parser-protocol">Parser Protocol</a> - XML parsing details</li>
<li><a href="#widget-synchronization">Widget Sync</a> - Generation-based sync</li>
<li><a href="#performance-optimization">Performance</a> - Optimization strategies</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="parser-protocol"><a class="header" href="#parser-protocol">Parser Protocol</a></h1>
<p>VellumFE’s XML streaming parser converts GemStone IV/DragonRealms server data into strongly-typed Rust events.</p>
<h2 id="overview-23"><a class="header" href="#overview-23">Overview</a></h2>
<p>The game server sends an XML-based protocol called “Wizard Front End” (WFE) or “Stormfront” protocol. The <code>XmlParser</code> maintains state across chunks and emits high-level <code>ParsedElement</code> values.</p>
<h2 id="parser-architecture"><a class="header" href="#parser-architecture">Parser Architecture</a></h2>
<pre><code>Server XML Stream
       ↓
┌──────────────────────┐
│     XmlParser        │
│  ──────────────────  │
│  • Color stacks      │
│  • Stream tracking   │
│  • Link metadata     │
│  • Event matchers    │
└──────────────────────┘
       ↓
Vec&lt;ParsedElement&gt;
       ↓
AppCore (routes to widgets)
</code></pre>
<h2 id="parsedelement-variants"><a class="header" href="#parsedelement-variants">ParsedElement Variants</a></h2>
<p>The parser emits these typed events:</p>
<h3 id="text-content"><a class="header" href="#text-content">Text Content</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>ParsedElement::Text {
    content: String,           // Decoded text content
    stream: String,            // Target stream: "main", "speech", etc.
    fg_color: Option&lt;String&gt;,  // Foreground color "#RRGGBB"
    bg_color: Option&lt;String&gt;,  // Background color
    bold: bool,                // Bold styling
    span_type: SpanType,       // Semantic type
    link_data: Option&lt;LinkData&gt;, // Clickable link metadata
}
<span class="boring">}</span></code></pre>
<h3 id="spantype-enum"><a class="header" href="#spantype-enum">SpanType Enum</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>SpanType</th><th>Source</th><th>Purpose</th></tr>
</thead>
<tbody>
<tr><td><code>Normal</code></td><td>Plain text</td><td>Default text</td></tr>
<tr><td><code>Link</code></td><td><code>&lt;a&gt;</code> or <code>&lt;d&gt;</code> tags</td><td>Clickable game objects</td></tr>
<tr><td><code>Monsterbold</code></td><td><code>&lt;pushBold/&gt;</code></td><td>Monster/creature names</td></tr>
<tr><td><code>Spell</code></td><td><code>&lt;spell&gt;</code> tags</td><td>Spell names</td></tr>
<tr><td><code>Speech</code></td><td><code>&lt;preset id="speech"&gt;</code></td><td>Player dialogue</td></tr>
</tbody>
</table>
</div>
<h3 id="game-state-updates"><a class="header" href="#game-state-updates">Game State Updates</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Prompt (command input ready)
ParsedElement::Prompt {
    time: String,    // Unix timestamp
    text: String,    // Prompt character (e.g., "&gt;")
}

// Roundtime countdown
ParsedElement::RoundTime { value: u32 }   // Seconds

// Cast time countdown
ParsedElement::CastTime { value: u32 }    // Seconds

// Hand contents
ParsedElement::LeftHand { item: String, link: Option&lt;LinkData&gt; }
ParsedElement::RightHand { item: String, link: Option&lt;LinkData&gt; }
ParsedElement::SpellHand { spell: String }

// Progress bars (health, mana, etc.)
ParsedElement::ProgressBar {
    id: String,      // "health", "mana", "spirit", "stamina"
    value: u32,      // Current value
    max: u32,        // Maximum value
    text: String,    // Display text like "mana 407/407"
}

// Compass directions
ParsedElement::Compass {
    directions: Vec&lt;String&gt;,  // ["n", "e", "out", "up"]
}
<span class="boring">}</span></code></pre>
<h3 id="stream-control"><a class="header" href="#stream-control">Stream Control</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Push new stream context
ParsedElement::StreamPush { id: String }

// Pop stream (return to main)
ParsedElement::StreamPop

// Clear stream contents
ParsedElement::ClearStream { id: String }

// Stream window metadata
ParsedElement::StreamWindow {
    id: String,
    subtitle: Option&lt;String&gt;,  // Room name for "room" stream
}
<span class="boring">}</span></code></pre>
<h3 id="room-information"><a class="header" href="#room-information">Room Information</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Room ID for mapping
ParsedElement::RoomId { id: String }

// Room component (name, description, objects, players)
ParsedElement::Component {
    id: String,      // "room name", "room desc", "room objs", "room players"
    value: String,   // Component content
}
<span class="boring">}</span></code></pre>
<h3 id="combatstatus"><a class="header" href="#combatstatus">Combat/Status</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Injury display
ParsedElement::InjuryImage {
    id: String,     // Body part: "head", "leftArm", "chest"
    name: String,   // Level: "Injury1"-"Injury3", "Scar1"-"Scar3"
}

// Status indicators
ParsedElement::StatusIndicator {
    id: String,     // "poisoned", "diseased", "bleeding", "stunned", "hidden"
    active: bool,   // true = active, false = cleared
}

// Active effects (spells, buffs, debuffs)
ParsedElement::ActiveEffect {
    category: String,  // "ActiveSpells", "Buffs", "Debuffs", "Cooldowns"
    id: String,
    value: u32,        // Progress percentage
    text: String,      // Effect name
    time: String,      // "HH:MM:SS"
}

ParsedElement::ClearActiveEffects { category: String }
<span class="boring">}</span></code></pre>
<h3 id="interactive-elements"><a class="header" href="#interactive-elements">Interactive Elements</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Menu response (from INV SEARCH, etc.)
ParsedElement::MenuResponse {
    id: String,                            // Correlation ID
    coords: Vec&lt;(String, Option&lt;String&gt;)&gt;, // (coord, optional noun) pairs
}

// Pattern-matched events (stun, webbed, etc.)
ParsedElement::Event {
    event_type: String,    // "stun", "webbed", "prone"
    action: EventAction,   // Set, Clear, or Increment
    duration: u32,         // Seconds
}

// External URL launch
ParsedElement::LaunchURL { url: String }
<span class="boring">}</span></code></pre>
<h2 id="link-data-structure"><a class="header" href="#link-data-structure">Link Data Structure</a></h2>
<p>Clickable text carries metadata for game interaction:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct LinkData {
    pub exist_id: String,        // Object ID or "_direct_"
    pub noun: String,            // Object noun or command
    pub text: String,            // Display text
    pub coord: Option&lt;String&gt;,   // Optional coord for direct commands
}
<span class="boring">}</span></code></pre>
<h3 id="gemstone-iv-links-a-tags"><a class="header" href="#gemstone-iv-links-a-tags">GemStone IV Links (<code>&lt;a&gt;</code> tags)</a></h3>
<pre><code class="language-xml">&lt;a exist="12345" noun="sword"&gt;a rusty sword&lt;/a&gt;
</code></pre>
<ul>
<li><code>exist_id</code>: “12345” (server object ID)</li>
<li><code>noun</code>: “sword” (for commands like “get sword”)</li>
<li>Clicking sends: <code>_INSPECT 12345</code> or contextual command</li>
</ul>
<h3 id="dragonrealms-direct-commands-d-tags"><a class="header" href="#dragonrealms-direct-commands-d-tags">DragonRealms Direct Commands (<code>&lt;d&gt;</code> tags)</a></h3>
<pre><code class="language-xml">&lt;d cmd='get #8735861 in #8735860'&gt;Some item&lt;/d&gt;
</code></pre>
<ul>
<li><code>exist_id</code>: “<em>direct</em>” (marker for direct command)</li>
<li><code>noun</code>: “get #8735861 in #8735860” (full command)</li>
<li>Clicking sends the command directly</li>
</ul>
<h2 id="stream-system"><a class="header" href="#stream-system">Stream System</a></h2>
<p>The server uses streams to route content to different windows:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Stream</th><th>Purpose</th><th>Widget Type</th></tr>
</thead>
<tbody>
<tr><td><code>main</code></td><td>Primary game output</td><td>Main text window</td></tr>
<tr><td><code>speech</code></td><td>Player dialogue</td><td>Speech tab/window</td></tr>
<tr><td><code>thoughts</code></td><td>ESP/telepathy</td><td>Thoughts tab/window</td></tr>
<tr><td><code>inv</code></td><td>Inventory listings</td><td>Inventory window</td></tr>
<tr><td><code>room</code></td><td>Room descriptions</td><td>Room info widget</td></tr>
<tr><td><code>assess</code></td><td>Combat assessment</td><td>Assessment window</td></tr>
<tr><td><code>experience</code></td><td>Skill/XP info</td><td>Experience window</td></tr>
<tr><td><code>percWindow</code></td><td>Perception checks</td><td>Perception window</td></tr>
<tr><td><code>death</code></td><td>Death messaging</td><td>Death/recovery window</td></tr>
<tr><td><code>logons</code></td><td>Login/logout notices</td><td>Arrivals window</td></tr>
<tr><td><code>familiar</code></td><td>Familiar messages</td><td>Familiar window</td></tr>
<tr><td><code>group</code></td><td>Group information</td><td>Group window</td></tr>
</tbody>
</table>
</div>
<h3 id="stream-lifecycle"><a class="header" href="#stream-lifecycle">Stream Lifecycle</a></h3>
<pre><code class="language-xml">&lt;!-- Server pushes to speech stream --&gt;
&lt;pushStream id='speech'/&gt;
Soandso says, "Hello there!"
&lt;popStream/&gt;

&lt;!-- Text returns to main stream --&gt;
You nod to Soandso.
</code></pre>
<p>The parser tracks <code>current_stream</code> and emits <code>StreamPush</code>/<code>StreamPop</code> events.</p>
<h2 id="color-stack-system"><a class="header" href="#color-stack-system">Color Stack System</a></h2>
<p>The parser maintains multiple stacks for nested styling:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct XmlParser {
    color_stack: Vec&lt;ColorStyle&gt;,   // &lt;color&gt; tags
    preset_stack: Vec&lt;ColorStyle&gt;,  // &lt;preset&gt; tags
    style_stack: Vec&lt;ColorStyle&gt;,   // &lt;style&gt; tags
    bold_stack: Vec&lt;bool&gt;,          // &lt;pushBold&gt;/&lt;popBold&gt;
}
<span class="boring">}</span></code></pre>
<h3 id="priority-highest-to-lowest"><a class="header" href="#priority-highest-to-lowest">Priority (highest to lowest)</a></h3>
<ol>
<li><code>color_stack</code> - Explicit <code>&lt;color fg="..." bg="..."&gt;</code> tags</li>
<li><code>preset_stack</code> - Named presets like <code>&lt;preset id="speech"&gt;</code></li>
<li><code>style_stack</code> - Style IDs like <code>&lt;style id="roomName"&gt;</code></li>
</ol>
<h3 id="xml-color-tags"><a class="header" href="#xml-color-tags">XML Color Tags</a></h3>
<pre><code class="language-xml">&lt;!-- Explicit color --&gt;
&lt;color fg='#FF0000' bg='#000000'&gt;Red on black&lt;/color&gt;

&lt;!-- Named preset (from colors.toml) --&gt;
&lt;preset id='speech'&gt;Someone says, "Hello"&lt;/preset&gt;

&lt;!-- Bold/monsterbold --&gt;
&lt;pushBold/&gt;A goblin&lt;popBold/&gt; attacks you!

&lt;!-- Style (from colors.toml) --&gt;
&lt;style id='roomName'&gt;Town Square&lt;/style&gt;
</code></pre>
<h2 id="event-pattern-matching"><a class="header" href="#event-pattern-matching">Event Pattern Matching</a></h2>
<p>The parser checks text against configurable patterns for game events:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct EventPattern {
    pub pattern: String,           // Regex pattern
    pub event_type: String,        // "stun", "webbed", "prone"
    pub action: EventAction,       // Set, Clear, Increment
    pub duration: u32,             // Fixed duration (seconds)
    pub duration_capture: Option&lt;usize&gt;,  // Capture group for duration
    pub duration_multiplier: f32,  // Convert rounds to seconds
    pub enabled: bool,
}
<span class="boring">}</span></code></pre>
<h3 id="example-stun-detection"><a class="header" href="#example-stun-detection">Example: Stun Detection</a></h3>
<pre><code class="language-toml">[event_patterns.stun_start]
pattern = 'You are stunned!'
event_type = "stun"
action = "set"
duration = 5

[event_patterns.stun_with_rounds]
pattern = 'stunned for (\d+) rounds'
event_type = "stun"
action = "set"
duration_capture = 1
duration_multiplier = 5.0  # Rounds to seconds

[event_patterns.stun_end]
pattern = 'You are no longer stunned'
event_type = "stun"
action = "clear"
</code></pre>
<h2 id="xml-entity-decoding"><a class="header" href="#xml-entity-decoding">XML Entity Decoding</a></h2>
<p>The parser decodes standard XML entities:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Entity</th><th>Character</th></tr>
</thead>
<tbody>
<tr><td><code>&amp;lt;</code></td><td><code>&lt;</code></td></tr>
<tr><td><code>&amp;gt;</code></td><td><code>&gt;</code></td></tr>
<tr><td><code>&amp;amp;</code></td><td><code>&amp;</code></td></tr>
<tr><td><code>&amp;quot;</code></td><td><code>"</code></td></tr>
<tr><td><code>&amp;apos;</code></td><td><code>'</code></td></tr>
</tbody>
</table>
</div>
<h2 id="progress-bar-parsing"><a class="header" href="#progress-bar-parsing">Progress Bar Parsing</a></h2>
<p>Progress bars contain both percentage and actual values:</p>
<pre><code class="language-xml">&lt;progressBar id='health' value='85' text='health 425/500' /&gt;
</code></pre>
<p>The parser extracts:</p>
<ul>
<li><code>id</code>: “health”</li>
<li><code>value</code>: 425 (parsed from text, not the percentage)</li>
<li><code>max</code>: 500 (parsed from text)</li>
<li><code>text</code>: “health 425/500”</li>
</ul>
<h3 id="special-cases"><a class="header" href="#special-cases">Special Cases</a></h3>
<ul>
<li><code>mindState</code>: Text like “clear as a bell” (no numeric extraction)</li>
<li><code>encumlevel</code>: Encumbrance percentage</li>
<li><code>lblBPs</code>: Blood Points (Betrayer profession)</li>
</ul>
<h2 id="complete-xml-tag-reference"><a class="header" href="#complete-xml-tag-reference">Complete XML Tag Reference</a></h2>
<h3 id="handled-tags"><a class="header" href="#handled-tags">Handled Tags</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Tag</th><th>Purpose</th><th>ParsedElement</th></tr>
</thead>
<tbody>
<tr><td><code>&lt;prompt&gt;</code></td><td>Command ready</td><td><code>Prompt</code></td></tr>
<tr><td><code>&lt;roundTime&gt;</code></td><td>RT countdown</td><td><code>RoundTime</code></td></tr>
<tr><td><code>&lt;castTime&gt;</code></td><td>Cast countdown</td><td><code>CastTime</code></td></tr>
<tr><td><code>&lt;left&gt;</code></td><td>Left hand item</td><td><code>LeftHand</code></td></tr>
<tr><td><code>&lt;right&gt;</code></td><td>Right hand item</td><td><code>RightHand</code></td></tr>
<tr><td><code>&lt;spell&gt;</code></td><td>Prepared spell</td><td><code>SpellHand</code></td></tr>
<tr><td><code>&lt;compass&gt;</code></td><td>Available exits</td><td><code>Compass</code></td></tr>
<tr><td><code>&lt;progressBar&gt;</code></td><td>Stat bars</td><td><code>ProgressBar</code></td></tr>
<tr><td><code>&lt;indicator&gt;</code></td><td>Status icons</td><td><code>StatusIndicator</code></td></tr>
<tr><td><code>&lt;dialogData&gt;</code></td><td>Dialog updates</td><td>Various</td></tr>
<tr><td><code>&lt;component&gt;</code></td><td>Room components</td><td><code>Component</code></td></tr>
<tr><td><code>&lt;pushStream&gt;</code></td><td>Stream switch</td><td><code>StreamPush</code></td></tr>
<tr><td><code>&lt;popStream&gt;</code></td><td>Stream return</td><td><code>StreamPop</code></td></tr>
<tr><td><code>&lt;clearStream&gt;</code></td><td>Clear window</td><td><code>ClearStream</code></td></tr>
<tr><td><code>&lt;streamWindow&gt;</code></td><td>Window metadata</td><td><code>StreamWindow</code></td></tr>
<tr><td><code>&lt;nav&gt;</code></td><td>Room ID</td><td><code>RoomId</code></td></tr>
<tr><td><code>&lt;a&gt;</code></td><td>Object link</td><td><code>Text</code> with <code>LinkData</code></td></tr>
<tr><td><code>&lt;d&gt;</code></td><td>Direct command</td><td><code>Text</code> with <code>LinkData</code></td></tr>
<tr><td><code>&lt;menu&gt;</code></td><td>Menu container</td><td><code>MenuResponse</code></td></tr>
<tr><td><code>&lt;mi&gt;</code></td><td>Menu item</td><td>Part of <code>MenuResponse</code></td></tr>
<tr><td><code>&lt;preset&gt;</code></td><td>Named color</td><td>Color applied to <code>Text</code></td></tr>
<tr><td><code>&lt;color&gt;</code></td><td>Explicit color</td><td>Color applied to <code>Text</code></td></tr>
<tr><td><code>&lt;style&gt;</code></td><td>Style ID</td><td>Color applied to <code>Text</code></td></tr>
<tr><td><code>&lt;pushBold&gt;</code></td><td>Start bold</td><td>Bold applied to <code>Text</code></td></tr>
<tr><td><code>&lt;popBold&gt;</code></td><td>End bold</td><td>Bold removed</td></tr>
<tr><td><code>&lt;LaunchURL&gt;</code></td><td>External URL</td><td><code>LaunchURL</code></td></tr>
</tbody>
</table>
</div>
<h3 id="ignored-tags"><a class="header" href="#ignored-tags">Ignored Tags</a></h3>
<p>These tags are silently ignored:</p>
<ul>
<li><code>&lt;dropDownBox&gt;</code></li>
<li><code>&lt;skin&gt;</code></li>
<li><code>&lt;clearContainer&gt;</code></li>
<li><code>&lt;container&gt;</code></li>
<li><code>&lt;exposeContainer&gt;</code></li>
<li><code>&lt;inv&gt;</code> content (between open/close)</li>
</ul>
<h2 id="usage-example"><a class="header" href="#usage-example">Usage Example</a></h2>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use vellum_fe::parser::{XmlParser, ParsedElement};

// Create parser with presets and event patterns
let parser = XmlParser::with_presets(preset_list, event_patterns);

// Parse a line from the server
let elements = parser.parse_line("&lt;pushBold/&gt;A goblin&lt;popBold/&gt; attacks!");

// Route elements to appropriate widgets
for element in elements {
    match element {
        ParsedElement::Text { content, stream, bold, .. } =&gt; {
            // Route to text widget for `stream`
        }
        ParsedElement::RoundTime { value } =&gt; {
            // Update RT countdown widget
        }
        ParsedElement::Compass { directions } =&gt; {
            // Update compass widget
        }
        // ... handle other variants
    }
}
<span class="boring">}</span></code></pre>
<h2 id="see-also-55"><a class="header" href="#see-also-55">See Also</a></h2>
<ul>
<li><a href="#message-flow">Message Flow</a> - How parsed elements flow through the system</li>
<li><a href="#theme-system">Theme System</a> - How presets are resolved to colors</li>
<li><a href="#widget-synchronization">Widget Sync</a> - How parsed data reaches widgets</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="widget-synchronization"><a class="header" href="#widget-synchronization">Widget Synchronization</a></h1>
<p>VellumFE uses generation-based change detection to efficiently sync data to frontend widgets without full comparisons.</p>
<h2 id="overview-24"><a class="header" href="#overview-24">Overview</a></h2>
<p>The sync system:</p>
<ul>
<li>Detects changes via generation counters (not content comparison)</li>
<li>Syncs only changed data</li>
<li>Handles incremental updates</li>
<li>Supports full resyncs when needed</li>
</ul>
<h2 id="generation-based-change-detection"><a class="header" href="#generation-based-change-detection">Generation-Based Change Detection</a></h2>
<h3 id="textcontent-generation"><a class="header" href="#textcontent-generation">TextContent Generation</a></h3>
<p>Every <code>TextContent</code> has a generation counter:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct TextContent {
    pub lines: VecDeque&lt;StyledLine&gt;,
    pub scroll_offset: usize,
    pub max_lines: usize,
    pub title: String,
    pub generation: u64,  // Increments on every add_line()
}

impl TextContent {
    pub fn add_line(&amp;mut self, line: StyledLine) {
        self.lines.push_back(line);

        // Trim oldest lines when over limit
        while self.lines.len() &gt; self.max_lines {
            self.lines.pop_front();
        }

        self.generation += 1;  // Always increment
    }
}
<span class="boring">}</span></code></pre>
<h3 id="sync-logic"><a class="header" href="#sync-logic">Sync Logic</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Get last synced generation for this window
let last_synced_gen = last_synced_generation.get(name).copied().unwrap_or(0);
let current_gen = text_content.generation;

// Only sync if generation changed
if current_gen &gt; last_synced_gen {
    let gen_delta = (current_gen - last_synced_gen) as usize;

    // If delta &gt; line count, need full resync (wrapped around or cleared)
    let needs_full_resync = gen_delta &gt; text_content.lines.len();

    if needs_full_resync {
        text_window.clear();
    }

    // Add only new lines
    let lines_to_add = if needs_full_resync {
        text_content.lines.len()
    } else {
        gen_delta.min(text_content.lines.len())
    };

    let skip_count = text_content.lines.len().saturating_sub(lines_to_add);
    for line in text_content.lines.iter().skip(skip_count) {
        text_window.add_line(line.clone());
    }

    // Update synced generation
    last_synced_generation.insert(name.clone(), current_gen);
}
<span class="boring">}</span></code></pre>
<h3 id="benefits"><a class="header" href="#benefits">Benefits</a></h3>
<ol>
<li><strong>O(1) change detection</strong> - Compare numbers, not content</li>
<li><strong>Incremental updates</strong> - Only new lines synced</li>
<li><strong>Automatic full resync</strong> - Detects when buffer cleared</li>
<li><strong>Multi-window support</strong> - Each window tracked independently</li>
</ol>
<h2 id="sync-architecture"><a class="header" href="#sync-architecture">Sync Architecture</a></h2>
<h3 id="widgetmanager"><a class="header" href="#widgetmanager">WidgetManager</a></h3>
<p>The <code>WidgetManager</code> caches all frontend widgets and tracks sync state:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct WidgetManager {
    // Widget caches
    pub text_windows: HashMap&lt;String, TextWindow&gt;,
    pub tabbed_text_windows: HashMap&lt;String, TabbedTextWindow&gt;,
    pub command_inputs: HashMap&lt;String, CommandInput&gt;,
    pub progress_bars: HashMap&lt;String, ProgressBar&gt;,
    pub countdowns: HashMap&lt;String, Countdown&gt;,
    pub compass_widgets: HashMap&lt;String, Compass&gt;,
    pub hand_widgets: HashMap&lt;String, Hand&gt;,
    pub indicator_widgets: HashMap&lt;String, StatusIndicator&gt;,
    pub injury_doll_widgets: HashMap&lt;String, InjuryDoll&gt;,
    pub active_effects_widgets: HashMap&lt;String, ActiveEffects&gt;,
    pub room_windows: HashMap&lt;String, RoomWindow&gt;,
    pub dashboard_widgets: HashMap&lt;String, Dashboard&gt;,
    pub inventory_windows: HashMap&lt;String, Inventory&gt;,
    pub spell_windows: HashMap&lt;String, SpellList&gt;,
    pub performance_widgets: HashMap&lt;String, PerformanceWidget&gt;,

    // Generation tracking for incremental sync
    pub last_synced_generation: HashMap&lt;String, u64&gt;,
}
<span class="boring">}</span></code></pre>
<h3 id="sync-functions"><a class="header" href="#sync-functions">Sync Functions</a></h3>
<p>Each widget type has a dedicated sync function:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Function</th><th>Widget Type</th><th>Data Source</th></tr>
</thead>
<tbody>
<tr><td><code>sync_text_windows()</code></td><td>Text windows</td><td><code>WindowState.text_content</code></td></tr>
<tr><td><code>sync_tabbed_text_windows()</code></td><td>Tabbed text</td><td><code>WindowState.text_content</code> (per tab)</td></tr>
<tr><td><code>sync_command_inputs()</code></td><td>Command input</td><td><code>UiState.command_input</code></td></tr>
<tr><td><code>sync_progress_bars()</code></td><td>Progress bars</td><td><code>GameState.vitals</code></td></tr>
<tr><td><code>sync_countdowns()</code></td><td>Countdown timers</td><td><code>GameState.roundtime</code></td></tr>
<tr><td><code>sync_compass_widgets()</code></td><td>Compass</td><td><code>GameState.exits</code></td></tr>
<tr><td><code>sync_hand_widgets()</code></td><td>Hand display</td><td><code>GameState.left_hand/right_hand</code></td></tr>
<tr><td><code>sync_indicator_widgets()</code></td><td>Status indicators</td><td><code>GameState.status</code></td></tr>
<tr><td><code>sync_injury_doll_widgets()</code></td><td>Injury display</td><td><code>GameState.injuries</code></td></tr>
<tr><td><code>sync_active_effects()</code></td><td>Buffs/debuffs</td><td><code>GameState.active_effects</code></td></tr>
<tr><td><code>sync_room_windows()</code></td><td>Room description</td><td><code>GameState.room_*</code></td></tr>
<tr><td><code>sync_dashboard_widgets()</code></td><td>Dashboard</td><td>Multiple sources</td></tr>
<tr><td><code>sync_inventory_windows()</code></td><td>Inventory</td><td><code>GameState.inventory</code></td></tr>
<tr><td><code>sync_spells_windows()</code></td><td>Spells</td><td><code>GameState.spells</code></td></tr>
<tr><td><code>sync_performance_widgets()</code></td><td>Performance</td><td><code>PerformanceStats</code></td></tr>
</tbody>
</table>
</div>
<h3 id="sync-pattern"><a class="header" href="#sync-pattern">Sync Pattern</a></h3>
<p>Each sync function follows this pattern:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub fn sync_text_windows(
    ui_state: &amp;UiState,
    layout: &amp;Layout,
    widget_manager: &amp;mut WidgetManager,
    theme: &amp;Theme,
) {
    // 1. Find windows of this type in layout
    for window_def in layout.windows.iter().filter(|w| w.widget_type == WidgetType::Text) {
        let name = &amp;window_def.name;

        // 2. Get data from state
        let window_state = match ui_state.windows.get(name) {
            Some(ws) =&gt; ws,
            None =&gt; continue,
        };

        let text_content = match &amp;window_state.text_content {
            Some(tc) =&gt; tc,
            None =&gt; continue,
        };

        // 3. Ensure widget exists in cache
        let text_window = widget_manager.text_windows
            .entry(name.clone())
            .or_insert_with(|| TextWindow::new(name.clone()));

        // 4. Apply configuration
        text_window.set_width(window_def.width);
        text_window.set_colors(theme.resolve_window_colors(window_def));

        // 5. Check generation for changes
        let last_gen = widget_manager.last_synced_generation
            .get(name).copied().unwrap_or(0);
        let current_gen = text_content.generation;

        if current_gen &lt;= last_gen {
            continue;  // No changes
        }

        // 6. Sync content
        let delta = (current_gen - last_gen) as usize;
        let needs_full_resync = delta &gt; text_content.lines.len();

        if needs_full_resync {
            text_window.clear();
        }

        let lines_to_add = if needs_full_resync {
            text_content.lines.len()
        } else {
            delta.min(text_content.lines.len())
        };

        let skip = text_content.lines.len().saturating_sub(lines_to_add);
        for line in text_content.lines.iter().skip(skip) {
            text_window.add_line(line.clone());
        }

        // 7. Update generation
        widget_manager.last_synced_generation.insert(name.clone(), current_gen);
    }
}
<span class="boring">}</span></code></pre>
<h2 id="special-cases-1"><a class="header" href="#special-cases-1">Special Cases</a></h2>
<h3 id="tabbed-text-windows-1"><a class="header" href="#tabbed-text-windows-1">Tabbed Text Windows</a></h3>
<p>Tabbed windows track generation per tab:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct TabbedTextSyncState {
    pub tab_generations: HashMap&lt;String, u64&gt;,  // Per-tab tracking
}

// In sync:
for tab in &amp;tabbed_window.tabs {
    let tab_gen = sync_state.tab_generations.get(&amp;tab.name).copied().unwrap_or(0);
    let current_gen = tab.text_content.generation;

    if current_gen &gt; tab_gen {
        // Sync this tab
    }
}
<span class="boring">}</span></code></pre>
<h3 id="progress-bars-2"><a class="header" href="#progress-bars-2">Progress Bars</a></h3>
<p>Progress bars don’t use generations - they directly copy values:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub fn sync_progress_bars(
    game_state: &amp;GameState,
    widget_manager: &amp;mut WidgetManager,
) {
    // Direct sync - values are small, comparison is cheap
    if let Some(widget) = widget_manager.progress_bars.get_mut("health") {
        widget.set_value(game_state.vitals.health.0);
        widget.set_max(game_state.vitals.health.1);
    }
}
<span class="boring">}</span></code></pre>
<h3 id="countdowns-1"><a class="header" href="#countdowns-1">Countdowns</a></h3>
<p>Countdowns track their own state and update per-frame:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub fn sync_countdowns(
    game_state: &amp;GameState,
    widget_manager: &amp;mut WidgetManager,
) {
    if let Some(widget) = widget_manager.countdowns.get_mut("roundtime") {
        let remaining = game_state.roundtime_end
            .map(|end| end.saturating_duration_since(Instant::now()))
            .unwrap_or(Duration::ZERO);
        widget.set_remaining(remaining);
    }
}
<span class="boring">}</span></code></pre>
<h2 id="performance-optimizations"><a class="header" href="#performance-optimizations">Performance Optimizations</a></h2>
<h3 id="width-based-invalidation"><a class="header" href="#width-based-invalidation">Width-Based Invalidation</a></h3>
<p>Text windows invalidate wrap cache only when width changes:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>impl TextWindow {
    pub fn set_width(&amp;mut self, width: u16) {
        if self.current_width != width {
            self.current_width = width;
            self.invalidate_wrap_cache();
        }
    }
}
<span class="boring">}</span></code></pre>
<h3 id="lazy-line-wrapping"><a class="header" href="#lazy-line-wrapping">Lazy Line Wrapping</a></h3>
<p>Lines are wrapped on-demand during render, not during sync:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn render_visible_lines(&amp;self, visible_height: usize) -&gt; Vec&lt;WrappedLine&gt; {
    // Only wrap lines that will actually be displayed
    let visible_range = self.calculate_visible_range(visible_height);
    self.lines
        .iter()
        .skip(visible_range.start)
        .take(visible_range.len())
        .flat_map(|line| self.wrap_line(line))
        .collect()
}
<span class="boring">}</span></code></pre>
<h3 id="dirty-tracking"><a class="header" href="#dirty-tracking">Dirty Tracking</a></h3>
<p>Widgets track whether they need re-rendering:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>impl TextWindow {
    pub fn is_dirty(&amp;self) -&gt; bool {
        self.dirty
    }

    pub fn mark_clean(&amp;mut self) {
        self.dirty = false;
    }

    fn add_line(&amp;mut self, line: StyledLine) {
        // ...
        self.dirty = true;
    }
}
<span class="boring">}</span></code></pre>
<h2 id="sync-timing"><a class="header" href="#sync-timing">Sync Timing</a></h2>
<h3 id="when-sync-happens"><a class="header" href="#when-sync-happens">When Sync Happens</a></h3>
<p>Sync occurs every frame in the render loop:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// In TuiFrontend::render()
fn render(&amp;mut self, app: &amp;mut AppCore) -&gt; Result&lt;()&gt; {
    // Sync all widget types
    sync_text_windows(&amp;app.ui_state, &amp;app.layout, &amp;mut self.widget_manager, &amp;app.theme);
    sync_tabbed_text_windows(&amp;app.ui_state, &amp;app.layout, &amp;mut self.widget_manager, &amp;app.theme);
    sync_progress_bars(&amp;app.game_state, &amp;mut self.widget_manager);
    sync_countdowns(&amp;app.game_state, &amp;mut self.widget_manager);
    sync_compass_widgets(&amp;app.game_state, &amp;mut self.widget_manager);
    // ... more sync functions

    // Then render
    self.terminal.draw(|frame| {
        // Render all widgets
    })?;

    Ok(())
}
<span class="boring">}</span></code></pre>
<h3 id="sync-frequency"><a class="header" href="#sync-frequency">Sync Frequency</a></h3>
<ul>
<li><strong>~60 times per second</strong> - Once per frame</li>
<li><strong>Generation checks are O(1)</strong> - Very fast</li>
<li><strong>Only changed widgets sync content</strong> - Efficient</li>
</ul>
<h2 id="debugging-sync-issues"><a class="header" href="#debugging-sync-issues">Debugging Sync Issues</a></h2>
<h3 id="check-generation"><a class="header" href="#check-generation">Check Generation</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Debug: Print generation info
tracing::debug!(
    "Window '{}': gen={}, last_synced={}, lines={}",
    name,
    text_content.generation,
    last_synced_gen,
    text_content.lines.len()
);
<span class="boring">}</span></code></pre>
<h3 id="check-widget-cache"><a class="header" href="#check-widget-cache">Check Widget Cache</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Debug: Check if widget exists
if widget_manager.text_windows.contains_key(name) {
    tracing::debug!("Widget '{}' exists in cache", name);
} else {
    tracing::warn!("Widget '{}' NOT in cache", name);
}
<span class="boring">}</span></code></pre>
<h3 id="common-issues"><a class="header" href="#common-issues">Common Issues</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Symptom</th><th>Possible Cause</th><th>Solution</th></tr>
</thead>
<tbody>
<tr><td>Content not appearing</td><td>Widget not in layout</td><td>Add to layout.toml</td></tr>
<tr><td>Content appears late</td><td>High generation delta</td><td>Check buffer_size</td></tr>
<tr><td>Content duplicated</td><td>Generation not tracking</td><td>Check add_line increments</td></tr>
<tr><td>Old content showing</td><td>Full resync needed</td><td>Clear and resync</td></tr>
</tbody>
</table>
</div>
<h2 id="see-also-56"><a class="header" href="#see-also-56">See Also</a></h2>
<ul>
<li><a href="#message-flow">Message Flow</a> - How data reaches sync</li>
<li><a href="#performance-optimization">Performance</a> - Optimization details</li>
<li><a href="#core-data-frontend-architecture">Core-Data-Frontend</a> - Architecture overview</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="theme-system"><a class="header" href="#theme-system">Theme System</a></h1>
<p>VellumFE uses a layered color system for flexible theming and per-character customization.</p>
<h2 id="overview-25"><a class="header" href="#overview-25">Overview</a></h2>
<p>The theme system provides:</p>
<ol>
<li><strong>Presets</strong> - Named color schemes for game text (speech, monsterbold, etc.)</li>
<li><strong>Prompt Colors</strong> - Character-based prompt coloring (R, S, H, &gt;)</li>
<li><strong>Spell Colors</strong> - Spell-specific bar colors in active effects</li>
<li><strong>UI Colors</strong> - Border, text, background colors for the interface</li>
<li><strong>Color Palette</strong> - Named colors for highlights and quick access</li>
</ol>
<h2 id="configuration-files-1"><a class="header" href="#configuration-files-1">Configuration Files</a></h2>
<pre><code>~/.vellum-fe/
├── colors.toml              # Global colors
└── characters/
    └── CharName/
        └── colors.toml      # Per-character overrides
</code></pre>
<h3 id="loading-order-1"><a class="header" href="#loading-order-1">Loading Order</a></h3>
<ol>
<li>Load character-specific <code>colors.toml</code> if it exists</li>
<li>Fall back to global <code>~/.vellum-fe/colors.toml</code></li>
<li>Fall back to embedded defaults</li>
</ol>
<h2 id="presets"><a class="header" href="#presets">Presets</a></h2>
<p>Presets define colors for semantic text types from the game server.</p>
<h3 id="default-presets-1"><a class="header" href="#default-presets-1">Default Presets</a></h3>
<pre><code class="language-toml">[presets.links]
fg = "#477ab3"

[presets.commands]
fg = "#477ab3"

[presets.speech]
fg = "#53a684"

[presets.roomName]
fg = "#9BA2B2"
bg = "#395573"

[presets.monsterbold]
fg = "#a29900"

[presets.familiar]
fg = "#767339"

[presets.thought]
fg = "#FF8080"

[presets.whisper]
fg = "#60b4bf"
</code></pre>
<h3 id="preset-structure"><a class="header" href="#preset-structure">Preset Structure</a></h3>
<pre><code class="language-toml">[presets.my_preset]
fg = "#RRGGBB"     # Foreground color (hex)
bg = "#RRGGBB"     # Background color (optional)
</code></pre>
<h3 id="how-presets-are-applied"><a class="header" href="#how-presets-are-applied">How Presets Are Applied</a></h3>
<p>The parser applies presets when encountering specific XML tags:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Preset</th><th>Triggered By</th><th>Example</th></tr>
</thead>
<tbody>
<tr><td><code>speech</code></td><td><code>&lt;preset id="speech"&gt;</code></td><td>Player dialogue</td></tr>
<tr><td><code>monsterbold</code></td><td><code>&lt;pushBold/&gt;</code></td><td>Monster names</td></tr>
<tr><td><code>roomName</code></td><td><code>&lt;style id="roomName"&gt;</code></td><td>Room titles</td></tr>
<tr><td><code>links</code></td><td><code>&lt;a&gt;</code> tags</td><td>Clickable objects</td></tr>
<tr><td><code>commands</code></td><td><code>&lt;d&gt;</code> tags</td><td>Direct commands</td></tr>
<tr><td><code>whisper</code></td><td><code>&lt;preset id="whisper"&gt;</code></td><td>Whispers</td></tr>
<tr><td><code>thought</code></td><td><code>&lt;preset id="thought"&gt;</code></td><td>ESP/thoughts</td></tr>
<tr><td><code>familiar</code></td><td><code>&lt;preset id="familiar"&gt;</code></td><td>Familiar messages</td></tr>
</tbody>
</table>
</div>
<h2 id="prompt-colors-1"><a class="header" href="#prompt-colors-1">Prompt Colors</a></h2>
<p>Prompt colors apply to individual characters in the game prompt.</p>
<h3 id="configuration-19"><a class="header" href="#configuration-19">Configuration</a></h3>
<pre><code class="language-toml">[[prompt_colors]]
character = "R"
color = "#ff0000"

[[prompt_colors]]
character = "S"
color = "#ffff00"

[[prompt_colors]]
character = "H"
color = "#9370db"

[[prompt_colors]]
character = "&gt;"
color = "#a9a9a9"
</code></pre>
<h3 id="common-prompt-characters"><a class="header" href="#common-prompt-characters">Common Prompt Characters</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Character</th><th>Meaning</th><th>Suggested Color</th></tr>
</thead>
<tbody>
<tr><td><code>R</code></td><td>Roundtime</td><td>Red</td></tr>
<tr><td><code>S</code></td><td>Spell roundtime</td><td>Yellow</td></tr>
<tr><td><code>H</code></td><td>Hidden</td><td>Purple</td></tr>
<tr><td><code>&gt;</code></td><td>Ready</td><td>Gray</td></tr>
<tr><td><code>K</code></td><td>Kneeling</td><td>Custom</td></tr>
<tr><td><code>P</code></td><td>Prone</td><td>Custom</td></tr>
</tbody>
</table>
</div>
<h2 id="ui-colors-1"><a class="header" href="#ui-colors-1">UI Colors</a></h2>
<p>UI colors control the application interface appearance.</p>
<h3 id="configuration-1-1"><a class="header" href="#configuration-1-1">Configuration</a></h3>
<pre><code class="language-toml">[ui]
command_echo_color = "#ffffff"      # Echo of typed commands
border_color = "#00ffff"            # Unfocused widget borders
focused_border_color = "#ffff00"    # Focused widget borders
text_color = "#ffffff"              # Default text color
background_color = "#000000"        # Widget background
selection_bg_color = "#4a4a4a"      # Text selection background
textarea_background = "-"           # Input field background ("-" = transparent)
</code></pre>
<h3 id="transparent-background"><a class="header" href="#transparent-background">Transparent Background</a></h3>
<p>Set <code>textarea_background = "-"</code> to use a transparent background for the command input area.</p>
<h2 id="spell-colors-2"><a class="header" href="#spell-colors-2">Spell Colors</a></h2>
<p>Spell colors assign colors to specific spell numbers in the Active Spells widget.</p>
<h3 id="configuration-2-1"><a class="header" href="#configuration-2-1">Configuration</a></h3>
<pre><code class="language-toml">[[spell_colors]]
spells = [503, 506, 507, 508, 509]    # Spell numbers
color = "#5c0000"                      # Bar color
bar_color = "#5c0000"                  # Same as color
text_color = "#909090"                 # Text on the bar
bg_color = "#000000"                   # Background behind bar
</code></pre>
<h3 id="spell-circle-examples"><a class="header" href="#spell-circle-examples">Spell Circle Examples</a></h3>
<pre><code class="language-toml"># Minor Spirit (500s) - Dark Red
[[spell_colors]]
spells = [503, 506, 507, 508, 509, 513, 515, 520, 525, 535, 540]
color = "#5c0000"

# Major Spirit (900s) - Purple
[[spell_colors]]
spells = [905, 911, 913, 918, 919, 920, 925, 930, 940]
color = "#9370db"

# Ranger (600s) - Green
[[spell_colors]]
spells = [601, 602, 604, 605, 606, 608, 612, 613, 617, 618, 620, 625, 640, 650]
color = "#1c731c"

# Sorcerer (700s) - Indigo
[[spell_colors]]
spells = [701, 703, 705, 708, 712, 713, 715, 720, 725, 730, 735, 740]
color = "#4b0082"
</code></pre>
<h2 id="color-palette-1"><a class="header" href="#color-palette-1">Color Palette</a></h2>
<p>The color palette provides named colors for highlights and quick access.</p>
<h3 id="structure-1"><a class="header" href="#structure-1">Structure</a></h3>
<pre><code class="language-toml">[[color_palette]]
name = "red"
color = "#FF0000"
category = "red"

[[color_palette]]
name = "crimson"
color = "#DC143C"
category = "red"

[[color_palette]]
name = "forestgreen"
color = "#228B22"
category = "green"
</code></pre>
<h3 id="default-categories-1"><a class="header" href="#default-categories-1">Default Categories</a></h3>
<ul>
<li><strong>red</strong> - Red, crimson, darkred, firebrick, indianred</li>
<li><strong>orange</strong> - Orange, darkorange, coral, tomato</li>
<li><strong>yellow</strong> - Yellow, gold, khaki, lightyellow</li>
<li><strong>green</strong> - Green, lime, darkgreen, forestgreen, seagreen</li>
<li><strong>cyan</strong> - Cyan, aqua, darkcyan, teal, turquoise</li>
<li><strong>blue</strong> - Blue, darkblue, navy, royalblue, steelblue</li>
<li><strong>purple</strong> - Purple, darkviolet, darkorchid, indigo, violet</li>
<li><strong>magenta</strong> - Magenta, fuchsia, deeppink, hotpink, pink</li>
<li><strong>brown</strong> - Brown, saddlebrown, sienna, chocolate, tan</li>
<li><strong>gray</strong> - White, black, gray, darkgray, lightgray, silver</li>
</ul>
<h3 id="using-palette-colors-1"><a class="header" href="#using-palette-colors-1">Using Palette Colors</a></h3>
<p>In highlights, reference palette colors by name:</p>
<pre><code class="language-toml">[death_blow]
pattern = "death blow"
fg = "crimson"          # Resolved to #DC143C
bg = "darkred"          # Resolved to #8B0000
</code></pre>
<h2 id="color-abstraction-layer"><a class="header" href="#color-abstraction-layer">Color Abstraction Layer</a></h2>
<p>VellumFE provides a frontend-agnostic color system.</p>
<h3 id="color-struct"><a class="header" href="#color-struct">Color Struct</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct Color {
    pub r: u8,
    pub g: u8,
    pub b: u8,
}

impl Color {
    pub const fn rgb(r: u8, g: u8, b: u8) -&gt; Self;
    pub fn from_hex(hex: &amp;str) -&gt; Option&lt;Self&gt;;
    pub fn to_hex(&amp;self) -&gt; String;

    // Constants
    pub const BLACK: Self = Self::rgb(0, 0, 0);
    pub const WHITE: Self = Self::rgb(255, 255, 255);
    pub const RED: Self = Self::rgb(255, 0, 0);
    // ... more constants
}
<span class="boring">}</span></code></pre>
<h3 id="namedcolor-enum"><a class="header" href="#namedcolor-enum">NamedColor Enum</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub enum NamedColor {
    // Standard ANSI colors
    Black, Red, Green, Yellow, Blue, Magenta, Cyan,
    Gray, DarkGray, LightRed, LightGreen, LightYellow,
    LightBlue, LightMagenta, LightCyan, White,

    // RGB color
    Rgb(u8, u8, u8),

    // ANSI 256-color palette (0-255)
    Indexed(u8),

    // Reset to default
    Reset,
}
<span class="boring">}</span></code></pre>
<h3 id="ansi-256-color-support"><a class="header" href="#ansi-256-color-support">ANSI 256-Color Support</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Range</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>0-15</td><td>Standard 16 ANSI colors</td></tr>
<tr><td>16-231</td><td>6×6×6 color cube (216 colors)</td></tr>
<tr><td>232-255</td><td>Grayscale ramp (24 grays)</td></tr>
</tbody>
</table>
</div>
<h2 id="color-resolution"><a class="header" href="#color-resolution">Color Resolution</a></h2>
<p>When resolving a color reference:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub fn resolve_palette_color(&amp;self, input: &amp;str) -&gt; String {
    // If starts with #, use as-is
    if input.starts_with('#') {
        return input.to_string();
    }

    // Look up in palette (case-insensitive)
    for entry in &amp;self.color_palette {
        if entry.name.eq_ignore_ascii_case(input) {
            return entry.color.clone();
        }
    }

    // Return original if not found
    input.to_string()
}
<span class="boring">}</span></code></pre>
<h2 id="hot-switching"><a class="header" href="#hot-switching">Hot-Switching</a></h2>
<p>Reload colors without restarting:</p>
<pre><code>.reload colors
</code></pre>
<p>This:</p>
<ol>
<li>Reloads <code>colors.toml</code> from disk</li>
<li>Updates parser presets</li>
<li>Refreshes all widgets</li>
<li>Applies immediately to new text</li>
</ol>
<h2 id="creating-custom-themes"><a class="header" href="#creating-custom-themes">Creating Custom Themes</a></h2>
<h3 id="step-1-copy-defaults"><a class="header" href="#step-1-copy-defaults">Step 1: Copy Defaults</a></h3>
<pre><code class="language-bash">cp ~/.vellum-fe/colors.toml ~/.vellum-fe/colors-backup.toml
</code></pre>
<h3 id="step-2-edit-colorstoml"><a class="header" href="#step-2-edit-colorstoml">Step 2: Edit colors.toml</a></h3>
<pre><code class="language-toml"># Dark theme with blue accents
[presets.speech]
fg = "#6eb5ff"

[presets.monsterbold]
fg = "#ffd700"

[presets.links]
fg = "#87ceeb"

[ui]
border_color = "#2196f3"
focused_border_color = "#64b5f6"
text_color = "#e0e0e0"
background_color = "#121212"
</code></pre>
<h3 id="step-3-reload"><a class="header" href="#step-3-reload">Step 3: Reload</a></h3>
<pre><code>.reload colors
</code></pre>
<h2 id="theme-examples"><a class="header" href="#theme-examples">Theme Examples</a></h2>
<h3 id="high-contrast-accessibility"><a class="header" href="#high-contrast-accessibility">High Contrast (Accessibility)</a></h3>
<pre><code class="language-toml">[ui]
text_color = "#ffffff"
background_color = "#000000"
focused_border_color = "#ffff00"

[presets.monsterbold]
fg = "#ff0000"

[presets.speech]
fg = "#00ff00"
</code></pre>
<h3 id="solarized-dark-1"><a class="header" href="#solarized-dark-1">Solarized Dark</a></h3>
<pre><code class="language-toml">[ui]
background_color = "#002b36"
text_color = "#839496"
border_color = "#073642"
focused_border_color = "#2aa198"

[presets.speech]
fg = "#859900"

[presets.monsterbold]
fg = "#cb4b16"
</code></pre>
<h3 id="nord-theme-1"><a class="header" href="#nord-theme-1">Nord Theme</a></h3>
<pre><code class="language-toml">[ui]
background_color = "#2e3440"
text_color = "#d8dee9"
border_color = "#3b4252"
focused_border_color = "#88c0d0"

[presets.speech]
fg = "#a3be8c"

[presets.monsterbold]
fg = "#d08770"
</code></pre>
<h2 id="color-format-reference"><a class="header" href="#color-format-reference">Color Format Reference</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Format</th><th>Example</th><th>Notes</th></tr>
</thead>
<tbody>
<tr><td><code>#RRGGBB</code></td><td><code>#FF5733</code></td><td>Standard hex</td></tr>
<tr><td><code>#rrggbb</code></td><td><code>#ff5733</code></td><td>Lowercase also valid</td></tr>
<tr><td>Named</td><td><code>crimson</code></td><td>From color_palette</td></tr>
<tr><td>Empty</td><td><code>""</code></td><td>Use default/transparent</td></tr>
<tr><td>Dash</td><td><code>"-"</code></td><td>Transparent (textarea only)</td></tr>
</tbody>
</table>
</div>
<h2 id="browser-commands"><a class="header" href="#browser-commands">Browser Commands</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Command</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>.colors</code></td><td>Browse color palette</td></tr>
<tr><td><code>.spellcolors</code></td><td>Browse/edit spell colors</td></tr>
<tr><td><code>.addspellcolor &lt;spell&gt; &lt;color&gt;</code></td><td>Add spell color</td></tr>
<tr><td><code>.reload colors</code></td><td>Hot-reload colors.toml</td></tr>
</tbody>
</table>
</div>
<h2 id="see-also-57"><a class="header" href="#see-also-57">See Also</a></h2>
<ul>
<li><a href="#colorstoml-reference">Colors Configuration</a> - Full colors.toml reference</li>
<li><a href="#highlightstoml-reference">Highlights Configuration</a> - Using colors in highlights</li>
<li><a href="#parser-protocol">Parser Protocol</a> - How presets are applied</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="browser--editor-system"><a class="header" href="#browser--editor-system">Browser &amp; Editor System</a></h1>
<p>VellumFE provides interactive popup interfaces for browsing and editing configuration without leaving the application.</p>
<h2 id="overview-26"><a class="header" href="#overview-26">Overview</a></h2>
<p>The browser/editor system includes:</p>
<ul>
<li><strong>Browsers</strong> - Read-only lists with selection (highlights, keybinds, colors)</li>
<li><strong>Editors</strong> - Forms for creating/modifying configuration</li>
<li><strong>Window Editor</strong> - Complex form for widget configuration</li>
</ul>
<h2 id="architecture"><a class="header" href="#architecture">Architecture</a></h2>
<pre><code>┌─────────────────────────────────────────────────────────────────┐
│                        User Interface                           │
├─────────────────────────────────────────────────────────────────┤
│  ┌──────────────┐  ┌──────────────┐  ┌───────────────────────┐ │
│  │   Browser    │  │    Editor    │  │    WindowEditor       │ │
│  │  (List View) │  │  (Form View) │  │  (Complex Form)       │ │
│  └──────────────┘  └──────────────┘  └───────────────────────┘ │
├─────────────────────────────────────────────────────────────────┤
│                        Widget Traits                            │
│  ┌───────────┐ ┌───────────┐ ┌──────────┐ ┌────────────────┐   │
│  │ Navigable │ │ Selectable│ │ Saveable │ │ TextEditable   │   │
│  └───────────┘ └───────────┘ └──────────┘ └────────────────┘   │
└─────────────────────────────────────────────────────────────────┘
</code></pre>
<h2 id="widget-traits"><a class="header" href="#widget-traits">Widget Traits</a></h2>
<p>All browsers and editors implement behavior traits.</p>
<h3 id="navigable"><a class="header" href="#navigable">Navigable</a></h3>
<p>For list navigation:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub trait Navigable {
    fn navigate_up(&amp;mut self);      // Move selection up
    fn navigate_down(&amp;mut self);    // Move selection down
    fn page_up(&amp;mut self);          // Move up ~10 items
    fn page_down(&amp;mut self);        // Move down ~10 items
    fn home(&amp;mut self) {}           // Move to first (optional)
    fn end(&amp;mut self) {}            // Move to last (optional)
}
<span class="boring">}</span></code></pre>
<h3 id="selectable"><a class="header" href="#selectable">Selectable</a></h3>
<p>For selecting items:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub trait Selectable {
    fn get_selected(&amp;self) -&gt; Option&lt;String&gt;;
    fn delete_selected(&amp;mut self) -&gt; Option&lt;String&gt;;
}
<span class="boring">}</span></code></pre>
<h3 id="texteditable"><a class="header" href="#texteditable">TextEditable</a></h3>
<p>For text input fields:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub trait TextEditable {
    fn get_focused_field(&amp;self) -&gt; Option&lt;&amp;TextArea&lt;'static&gt;&gt;;
    fn get_focused_field_mut(&amp;mut self) -&gt; Option&lt;&amp;mut TextArea&lt;'static&gt;&gt;;
    fn select_all(&amp;mut self);           // Ctrl+A
    fn copy_to_clipboard(&amp;self);        // Ctrl+C
    fn cut_to_clipboard(&amp;mut self);     // Ctrl+X
    fn paste_from_clipboard(&amp;mut self); // Ctrl+V
}
<span class="boring">}</span></code></pre>
<h3 id="fieldnavigable"><a class="header" href="#fieldnavigable">FieldNavigable</a></h3>
<p>For form field navigation:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub trait FieldNavigable {
    fn next_field(&amp;mut self);       // Tab
    fn previous_field(&amp;mut self);   // Shift+Tab
    fn field_count(&amp;self) -&gt; usize;
    fn current_field(&amp;self) -&gt; usize;
}
<span class="boring">}</span></code></pre>
<h3 id="saveable"><a class="header" href="#saveable">Saveable</a></h3>
<p>For forms that persist data:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub trait Saveable {
    type SaveResult;
    fn try_save(&amp;mut self) -&gt; Option&lt;Self::SaveResult&gt;;
    fn is_modified(&amp;self) -&gt; bool;
}
<span class="boring">}</span></code></pre>
<h3 id="toggleable--cyclable"><a class="header" href="#toggleable--cyclable">Toggleable / Cyclable</a></h3>
<p>For boolean and enum fields:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub trait Toggleable {
    fn toggle_focused(&amp;mut self) -&gt; Option&lt;bool&gt;;
}

pub trait Cyclable {
    fn cycle_forward(&amp;mut self);   // Space/Down
    fn cycle_backward(&amp;mut self);  // Up
}
<span class="boring">}</span></code></pre>
<h2 id="browser-types"><a class="header" href="#browser-types">Browser Types</a></h2>
<h3 id="highlightbrowser"><a class="header" href="#highlightbrowser">HighlightBrowser</a></h3>
<p>Browse configured text highlights.</p>
<p><strong>Command</strong>: <code>.highlights</code></p>
<p><strong>Features</strong>:</p>
<ul>
<li>Sorted by category, then name</li>
<li>Color preview with sample text</li>
<li>Category filtering</li>
<li>Shows squelch status</li>
<li>Shows sound indicator</li>
<li>Shows redirect info</li>
</ul>
<pre><code>┌─ Highlights ────────────────────────────────────────┐
│                                                     │
│ ═══ Combat ═══                                      │
│ &gt; critical_hit    "critical hit"   [█████]          │
│   damage_taken    "strikes you"    [█████]          │
│   damage_dealt    "You hit"        [█████]          │
│                                                     │
│ ═══ Chat ═══                                        │
│   speech          "^\\w+ says"     [█████]          │
│   whisper         "whispers"       [█████] ♪        │
│                                                     │
│ [Enter] Edit  [Delete] Remove  [Escape] Close       │
└─────────────────────────────────────────────────────┘
</code></pre>
<h3 id="keybindbrowser"><a class="header" href="#keybindbrowser">KeybindBrowser</a></h3>
<p>Browse configured keybinds.</p>
<p><strong>Command</strong>: <code>.keybinds</code></p>
<p><strong>Features</strong>:</p>
<ul>
<li>Grouped by type (Actions, Macros)</li>
<li>Shows key combo and action</li>
<li>Columnar layout</li>
</ul>
<pre><code>┌─ Keybinds ──────────────────────────────────────────┐
│                                                     │
│ ═══ Actions ═══                                     │
│ &gt; Ctrl+L         layout_editor                      │
│   Ctrl+H         highlight_browser                  │
│   F1             help                               │
│                                                     │
│ ═══ Macros ═══                                      │
│   Ctrl+1         "attack target"                    │
│   Ctrl+2         "stance defensive"                 │
│                                                     │
│ [Enter] Edit  [Delete] Remove  [Escape] Close       │
└─────────────────────────────────────────────────────┘
</code></pre>
<h3 id="colorpalettebrowser"><a class="header" href="#colorpalettebrowser">ColorPaletteBrowser</a></h3>
<p>Browse named color palette.</p>
<p><strong>Command</strong>: <code>.colors</code></p>
<p><strong>Features</strong>:</p>
<ul>
<li>Grouped by color category</li>
<li>Visual color swatches</li>
<li>Hex code display</li>
</ul>
<pre><code>┌─ Color Palette ─────────────────────────────────────┐
│                                                     │
│ ═══ Red ═══                                         │
│ &gt; ██ red         #FF0000                            │
│   ██ crimson     #DC143C                            │
│   ██ darkred     #8B0000                            │
│                                                     │
│ ═══ Green ═══                                       │
│   ██ green       #00FF00                            │
│   ██ forestgreen #228B22                            │
│                                                     │
│ [Escape] Close                                      │
└─────────────────────────────────────────────────────┘
</code></pre>
<h3 id="spellcolorbrowser"><a class="header" href="#spellcolorbrowser">SpellColorBrowser</a></h3>
<p>Browse spell-specific colors.</p>
<p><strong>Command</strong>: <code>.spellcolors</code></p>
<p><strong>Features</strong>:</p>
<ul>
<li>Spell number to color mapping</li>
<li>Color preview bars</li>
<li>Add/edit/delete support</li>
</ul>
<h3 id="themebrowser"><a class="header" href="#themebrowser">ThemeBrowser</a></h3>
<p>Browse available themes.</p>
<p><strong>Command</strong>: <code>.themes</code></p>
<p><strong>Features</strong>:</p>
<ul>
<li>List saved theme profiles</li>
<li>Preview theme colors</li>
<li>Apply/save themes</li>
</ul>
<h2 id="window-editor"><a class="header" href="#window-editor">Window Editor</a></h2>
<p>The WindowEditor provides comprehensive widget configuration.</p>
<p><strong>Command</strong>: <code>.window &lt;widget_name&gt;</code></p>
<h3 id="field-categories"><a class="header" href="#field-categories">Field Categories</a></h3>
<p><strong>Geometry</strong>:</p>
<ul>
<li><code>row</code>, <code>col</code> - Position</li>
<li><code>rows</code>, <code>cols</code> - Size</li>
<li><code>min_rows</code>, <code>min_cols</code> - Minimum size</li>
<li><code>max_rows</code>, <code>max_cols</code> - Maximum size</li>
</ul>
<p><strong>Appearance</strong>:</p>
<ul>
<li><code>title</code> - Window title</li>
<li><code>show_title</code> - Toggle title display</li>
<li><code>title_position</code> - Title placement</li>
<li><code>bg_color</code> - Background color</li>
<li><code>text_color</code> - Text color</li>
<li><code>transparent_bg</code> - Use terminal background</li>
</ul>
<p><strong>Borders</strong>:</p>
<ul>
<li><code>show_border</code> - Enable borders</li>
<li><code>border_style</code> - Style (plain, rounded, double)</li>
<li><code>border_color</code> - Border color</li>
<li><code>border_top/bottom/left/right</code> - Individual sides</li>
</ul>
<p><strong>Content</strong>:</p>
<ul>
<li><code>streams</code> - Stream IDs for text widgets</li>
<li><code>buffer_size</code> - Max line count</li>
<li><code>wordwrap</code> - Enable word wrapping</li>
<li><code>timestamps</code> - Show timestamps</li>
<li><code>content_align</code> - Text alignment</li>
</ul>
<h3 id="widget-specific-fields"><a class="header" href="#widget-specific-fields">Widget-Specific Fields</a></h3>
<p><strong>Tabbed Text</strong>:</p>
<ul>
<li><code>tab_bar_position</code> - Top or bottom</li>
<li><code>tab_active_color</code> - Active tab color</li>
<li><code>tab_inactive_color</code> - Inactive tab color</li>
</ul>
<p><strong>Compass</strong>:</p>
<ul>
<li><code>compass_active_color</code> - Available direction color</li>
<li><code>compass_inactive_color</code> - Unavailable direction color</li>
</ul>
<p><strong>Progress Bars</strong>:</p>
<ul>
<li><code>progress_label</code> - Bar label</li>
<li><code>progress_color</code> - Bar fill color</li>
</ul>
<p><strong>Dashboard</strong>:</p>
<ul>
<li><code>dashboard_layout</code> - Horizontal or vertical</li>
<li><code>dashboard_spacing</code> - Item spacing</li>
</ul>
<h2 id="common-browser-features"><a class="header" href="#common-browser-features">Common Browser Features</a></h2>
<h3 id="popup-dragging"><a class="header" href="#popup-dragging">Popup Dragging</a></h3>
<p>All browsers support dragging by the title bar:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub fn handle_mouse(
    &amp;mut self,
    mouse_col: u16,
    mouse_row: u16,
    mouse_down: bool,
    area: Rect,
) -&gt; bool {
    let on_title_bar = mouse_row == self.popup_y
        &amp;&amp; mouse_col &gt; self.popup_x
        &amp;&amp; mouse_col &lt; self.popup_x + popup_width - 1;

    if mouse_down &amp;&amp; on_title_bar &amp;&amp; !self.is_dragging {
        self.is_dragging = true;
        self.drag_offset_x = mouse_col.saturating_sub(self.popup_x);
        self.drag_offset_y = mouse_row.saturating_sub(self.popup_y);
        return true;
    }
    // ...
}
<span class="boring">}</span></code></pre>
<h3 id="scroll-with-category-headers"><a class="header" href="#scroll-with-category-headers">Scroll with Category Headers</a></h3>
<p>Browsers with categories handle scrolling with sticky headers for context.</p>
<h2 id="menu-keybinds"><a class="header" href="#menu-keybinds">Menu Keybinds</a></h2>
<p>Common keybinds for browsers and editors:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Key</th><th>Action</th><th>Context</th></tr>
</thead>
<tbody>
<tr><td><code>Up/k</code></td><td>Navigate up</td><td>All browsers</td></tr>
<tr><td><code>Down/j</code></td><td>Navigate down</td><td>All browsers</td></tr>
<tr><td><code>PageUp</code></td><td>Page up</td><td>All browsers</td></tr>
<tr><td><code>PageDown</code></td><td>Page down</td><td>All browsers</td></tr>
<tr><td><code>Enter</code></td><td>Select/confirm</td><td>Browsers → Editor</td></tr>
<tr><td><code>Escape</code></td><td>Close/cancel</td><td>All</td></tr>
<tr><td><code>Tab</code></td><td>Next field</td><td>Editors</td></tr>
<tr><td><code>Shift+Tab</code></td><td>Previous field</td><td>Editors</td></tr>
<tr><td><code>Space</code></td><td>Toggle/cycle</td><td>Toggleable/Cyclable</td></tr>
<tr><td><code>Delete</code></td><td>Delete selected</td><td>Selectable</td></tr>
<tr><td><code>Ctrl+S</code></td><td>Save</td><td>Saveable</td></tr>
</tbody>
</table>
</div>
<h2 id="form-validation"><a class="header" href="#form-validation">Form Validation</a></h2>
<p>Editors validate input before saving:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>impl Saveable for HighlightForm {
    type SaveResult = HighlightPattern;

    fn try_save(&amp;mut self) -&gt; Option&lt;Self::SaveResult&gt; {
        // Validate required fields
        let name = self.name_field.lines()[0].trim();
        if name.is_empty() {
            self.error_message = Some("Name is required".to_string());
            return None;
        }

        // Validate pattern syntax
        let pattern = self.pattern_field.lines()[0].trim();
        if let Err(e) = regex::Regex::new(pattern) {
            self.error_message = Some(format!("Invalid regex: {}", e));
            return None;
        }

        // Build result
        Some(HighlightPattern {
            name: name.to_string(),
            pattern: pattern.to_string(),
            // ...
        })
    }
}
<span class="boring">}</span></code></pre>
<h2 id="integration-points"><a class="header" href="#integration-points">Integration Points</a></h2>
<h3 id="commands"><a class="header" href="#commands">Commands</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Command</th><th>Browser/Editor</th><th>Function</th></tr>
</thead>
<tbody>
<tr><td><code>.highlights</code></td><td>HighlightBrowser</td><td>Browse highlights</td></tr>
<tr><td><code>.highlight &lt;name&gt;</code></td><td>HighlightForm</td><td>Edit highlight</td></tr>
<tr><td><code>.addhighlight</code></td><td>HighlightForm</td><td>Add highlight</td></tr>
<tr><td><code>.keybinds</code></td><td>KeybindBrowser</td><td>Browse keybinds</td></tr>
<tr><td><code>.keybind &lt;key&gt;</code></td><td>KeybindForm</td><td>Edit keybind</td></tr>
<tr><td><code>.addkeybind</code></td><td>KeybindForm</td><td>Add keybind</td></tr>
<tr><td><code>.colors</code></td><td>ColorPaletteBrowser</td><td>Browse palette</td></tr>
<tr><td><code>.spellcolors</code></td><td>SpellColorBrowser</td><td>Browse spell colors</td></tr>
<tr><td><code>.themes</code></td><td>ThemeBrowser</td><td>Browse themes</td></tr>
<tr><td><code>.window &lt;name&gt;</code></td><td>WindowEditor</td><td>Edit widget</td></tr>
<tr><td><code>.layout</code></td><td>LayoutEditor</td><td>Edit layout</td></tr>
</tbody>
</table>
</div>
<h3 id="ui-state"><a class="header" href="#ui-state">UI State</a></h3>
<p>Browsers are tracked in <code>MenuState</code>:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub enum MenuState {
    None,
    HighlightBrowser(HighlightBrowser),
    HighlightForm(HighlightForm),
    KeybindBrowser(KeybindBrowser),
    KeybindForm(KeybindForm),
    ColorPaletteBrowser(ColorPaletteBrowser),
    SpellColorBrowser(SpellColorBrowser),
    ThemeBrowser(ThemeBrowser),
    WindowEditor(WindowEditor),
    // ...
}
<span class="boring">}</span></code></pre>
<h2 id="creating-a-new-browser"><a class="header" href="#creating-a-new-browser">Creating a New Browser</a></h2>
<h3 id="1-define-entry-structure"><a class="header" href="#1-define-entry-structure">1. Define Entry Structure</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[derive(Clone)]
pub struct MyEntry {
    pub id: String,
    pub name: String,
    pub value: String,
}
<span class="boring">}</span></code></pre>
<h3 id="2-create-browser-struct"><a class="header" href="#2-create-browser-struct">2. Create Browser Struct</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct MyBrowser {
    entries: Vec&lt;MyEntry&gt;,
    selected_index: usize,
    scroll_offset: usize,

    // Popup dragging
    pub popup_x: u16,
    pub popup_y: u16,
    pub is_dragging: bool,
    pub drag_offset_x: u16,
    pub drag_offset_y: u16,
}
<span class="boring">}</span></code></pre>
<h3 id="3-implement-traits"><a class="header" href="#3-implement-traits">3. Implement Traits</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>impl Navigable for MyBrowser {
    fn navigate_up(&amp;mut self) {
        if self.selected_index &gt; 0 {
            self.selected_index -= 1;
            self.adjust_scroll();
        }
    }
    // ...
}

impl Selectable for MyBrowser {
    fn get_selected(&amp;self) -&gt; Option&lt;String&gt; {
        self.entries.get(self.selected_index).map(|e| e.id.clone())
    }
    // ...
}
<span class="boring">}</span></code></pre>
<h3 id="4-implement-widget-rendering"><a class="header" href="#4-implement-widget-rendering">4. Implement Widget Rendering</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>impl Widget for &amp;MyBrowser {
    fn render(self, area: Rect, buf: &amp;mut Buffer) {
        // Clear popup area
        Clear.render(area, buf);

        // Draw border and title
        let block = Block::default()
            .borders(Borders::ALL)
            .title(" My Browser ");
        block.render(area, buf);

        // Render entries with selection highlighting
        for (idx, entry) in self.visible_entries().enumerate() {
            let style = if idx == self.selected_index {
                Style::default().add_modifier(Modifier::REVERSED)
            } else {
                Style::default()
            };
            // ... render entry
        }
    }
}
<span class="boring">}</span></code></pre>
<h3 id="5-register-command"><a class="header" href="#5-register-command">5. Register Command</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>".mybrowser" =&gt; {
    let browser = MyBrowser::new(&amp;config.my_data);
    app.ui_state.menu_state = MenuState::MyBrowser(browser);
}
<span class="boring">}</span></code></pre>
<h2 id="see-also-58"><a class="header" href="#see-also-58">See Also</a></h2>
<ul>
<li><a href="#cli-options">Commands</a> - All browser commands</li>
<li><a href="#keybindstoml-reference">Keybinds Configuration</a> - Browser keybinds</li>
<li><a href="#highlightstoml-reference">Highlights Configuration</a> - Highlight editing</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="performance-optimization"><a class="header" href="#performance-optimization">Performance Optimization</a></h1>
<p>VellumFE is designed for smooth, low-latency gameplay with 60+ FPS rendering and sub-millisecond event processing.</p>
<h2 id="performance-goals"><a class="header" href="#performance-goals">Performance Goals</a></h2>
<ul>
<li><strong>60+ FPS</strong> - Smooth terminal rendering</li>
<li><strong>Sub-millisecond event processing</strong> - Responsive input</li>
<li><strong>Efficient memory usage</strong> - Bounded buffers</li>
<li><strong>Low network overhead</strong> - Streaming parser</li>
</ul>
<h2 id="performance-telemetry"><a class="header" href="#performance-telemetry">Performance Telemetry</a></h2>
<h3 id="performancestats"><a class="header" href="#performancestats">PerformanceStats</a></h3>
<p>The centralized telemetry collector:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct PerformanceStats {
    // Frame timing
    frame_times: VecDeque&lt;Duration&gt;,
    last_frame_time: Instant,
    max_frame_samples: usize,      // Default: 60

    // Network stats
    bytes_received: u64,
    bytes_sent: u64,
    bytes_received_last_second: u64,
    bytes_sent_last_second: u64,

    // Parser stats
    parse_times: VecDeque&lt;Duration&gt;,
    chunks_parsed: u64,
    chunks_parsed_last_second: u64,

    // Render timing
    render_times: VecDeque&lt;Duration&gt;,
    ui_render_times: VecDeque&lt;Duration&gt;,
    text_wrap_times: VecDeque&lt;Duration&gt;,

    // Event processing
    event_process_times: VecDeque&lt;Duration&gt;,
    events_processed: u64,

    // Memory tracking
    total_lines_buffered: usize,
    active_window_count: usize,

    // Application uptime
    app_start_time: Instant,
}
<span class="boring">}</span></code></pre>
<h3 id="recording-methods"><a class="header" href="#recording-methods">Recording Methods</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Frame timing
stats.record_frame();                    // Called each frame
stats.record_render_time(duration);      // Total render
stats.record_ui_render_time(duration);   // UI widgets
stats.record_text_wrap_time(duration);   // Text wrapping

// Network
stats.record_bytes_received(bytes);
stats.record_bytes_sent(bytes);

// Parser
stats.record_parse(duration);
stats.record_elements_parsed(count);

// Events
stats.record_event_process_time(duration);

// Memory
stats.update_memory_stats(total_lines, window_count);
<span class="boring">}</span></code></pre>
<h3 id="available-metrics"><a class="header" href="#available-metrics">Available Metrics</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Metric</th><th>Method</th><th>Unit</th></tr>
</thead>
<tbody>
<tr><td>FPS</td><td><code>fps()</code></td><td>frames/sec</td></tr>
<tr><td>Avg frame time</td><td><code>avg_frame_time_ms()</code></td><td>ms</td></tr>
<tr><td>Min frame time</td><td><code>min_frame_time_ms()</code></td><td>ms</td></tr>
<tr><td>Max frame time</td><td><code>max_frame_time_ms()</code></td><td>ms</td></tr>
<tr><td>Frame jitter</td><td><code>frame_jitter_ms()</code></td><td>ms (stddev)</td></tr>
<tr><td>Frame spikes</td><td><code>frame_spike_count()</code></td><td>count &gt;33ms</td></tr>
<tr><td>Network in</td><td><code>bytes_received_per_sec()</code></td><td>bytes/sec</td></tr>
<tr><td>Network out</td><td><code>bytes_sent_per_sec()</code></td><td>bytes/sec</td></tr>
<tr><td>Parse time</td><td><code>avg_parse_time_us()</code></td><td>μs</td></tr>
<tr><td>Chunks/sec</td><td><code>chunks_per_sec()</code></td><td>count/sec</td></tr>
<tr><td>Render time</td><td><code>avg_render_time_ms()</code></td><td>ms</td></tr>
<tr><td>Lines buffered</td><td><code>total_lines_buffered()</code></td><td>count</td></tr>
<tr><td>Memory estimate</td><td><code>estimated_memory_mb()</code></td><td>MB</td></tr>
<tr><td>Uptime</td><td><code>uptime()</code></td><td>Duration</td></tr>
</tbody>
</table>
</div>
<h2 id="generation-based-change-detection-1"><a class="header" href="#generation-based-change-detection-1">Generation-Based Change Detection</a></h2>
<h3 id="efficient-change-tracking"><a class="header" href="#efficient-change-tracking">Efficient Change Tracking</a></h3>
<p>Widgets use generation counters instead of content comparison:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct TextContent {
    pub lines: VecDeque&lt;StyledLine&gt;,
    pub generation: u64,  // Increments on every add_line()
}
<span class="boring">}</span></code></pre>
<h3 id="sync-logic-1"><a class="header" href="#sync-logic-1">Sync Logic</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let last_gen = last_synced_generation.get(name).unwrap_or(0);
let current_gen = text_content.generation;

// Only sync if generation changed - O(1) check
if current_gen &gt; last_gen {
    let delta = (current_gen - last_gen) as usize;
    // Sync only new lines
}
<span class="boring">}</span></code></pre>
<h3 id="benefits-1"><a class="header" href="#benefits-1">Benefits</a></h3>
<ol>
<li><strong>O(1) change detection</strong> - Compare numbers, not content</li>
<li><strong>Incremental updates</strong> - Only new lines synced</li>
<li><strong>Automatic full resync</strong> - Detects when buffer cleared</li>
</ol>
<h2 id="text-wrapping-optimization"><a class="header" href="#text-wrapping-optimization">Text Wrapping Optimization</a></h2>
<p>Text wrapping is expensive. VellumFE optimizes it through:</p>
<h3 id="width-based-invalidation-1"><a class="header" href="#width-based-invalidation-1">Width-Based Invalidation</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub fn set_width(&amp;mut self, width: u16) {
    if self.current_width != width {
        self.current_width = width;
        self.invalidate_wrap_cache();
    }
}
<span class="boring">}</span></code></pre>
<h3 id="lazy-wrapping"><a class="header" href="#lazy-wrapping">Lazy Wrapping</a></h3>
<p>Lines wrapped on-demand during render:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn render_visible_lines(&amp;self, visible_height: usize) -&gt; Vec&lt;WrappedLine&gt; {
    // Only wrap lines that will be displayed
    let visible_range = self.calculate_visible_range(visible_height);
    self.lines
        .iter()
        .skip(visible_range.start)
        .take(visible_range.len())
        .flat_map(|line| self.wrap_line(line))
        .collect()
}
<span class="boring">}</span></code></pre>
<h3 id="segment-aware-wrapping"><a class="header" href="#segment-aware-wrapping">Segment-Aware Wrapping</a></h3>
<p>Preserves styling across word boundaries:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn wrap_line(&amp;self, line: &amp;StyledLine) -&gt; Vec&lt;WrappedLine&gt; {
    for segment in &amp;line.segments {
        for word in segment.text.split_whitespace() {
            if current_width + word_width &gt; self.max_width {
                // Emit current line, start new
            }
            // Add word with segment's style
        }
    }
}
<span class="boring">}</span></code></pre>
<h2 id="memory-management-1"><a class="header" href="#memory-management-1">Memory Management</a></h2>
<h3 id="line-buffer-limits"><a class="header" href="#line-buffer-limits">Line Buffer Limits</a></h3>
<p>Each text window has a maximum:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct TextContent {
    pub lines: VecDeque&lt;StyledLine&gt;,
    pub max_lines: usize,  // Default: 1000
}

impl TextContent {
    pub fn add_line(&amp;mut self, line: StyledLine) {
        self.lines.push_back(line);

        // Trim oldest lines
        while self.lines.len() &gt; self.max_lines {
            self.lines.pop_front();
        }

        self.generation += 1;
    }
}
<span class="boring">}</span></code></pre>
<h3 id="vecdeque-efficiency"><a class="header" href="#vecdeque-efficiency">VecDeque Efficiency</a></h3>
<p><code>VecDeque</code> provides O(1) operations at both ends:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>lines.push_back(new_line);  // O(1) add to end
lines.pop_front();           // O(1) remove from start
<span class="boring">}</span></code></pre>
<h3 id="memory-estimation"><a class="header" href="#memory-estimation">Memory Estimation</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub fn estimated_memory_mb(&amp;self) -&gt; f64 {
    // ~200 bytes per line average
    let line_bytes = self.total_lines_buffered * 200;
    line_bytes as f64 / (1024.0 * 1024.0)
}
<span class="boring">}</span></code></pre>
<h3 id="per-window-configuration"><a class="header" href="#per-window-configuration">Per-Window Configuration</a></h3>
<pre><code class="language-toml">[[windows]]
name = "main"
buffer_size = 2000  # More history for main

[[windows]]
name = "thoughts"
buffer_size = 500   # Less for secondary
</code></pre>
<h2 id="render-optimization"><a class="header" href="#render-optimization">Render Optimization</a></h2>
<h3 id="dirty-tracking-1"><a class="header" href="#dirty-tracking-1">Dirty Tracking</a></h3>
<p>Widgets track whether they need re-rendering:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>impl TextWindow {
    pub fn is_dirty(&amp;self) -&gt; bool {
        self.dirty
    }

    fn add_line(&amp;mut self, line: StyledLine) {
        self.dirty = true;
    }
}
<span class="boring">}</span></code></pre>
<h3 id="double-buffering"><a class="header" href="#double-buffering">Double Buffering</a></h3>
<p>Ratatui uses double-buffered rendering to minimize flicker.</p>
<h3 id="partial-rendering"><a class="header" href="#partial-rendering">Partial Rendering</a></h3>
<p>Only changed widgets are re-rendered when possible.</p>
<h2 id="highlight-pattern-optimization"><a class="header" href="#highlight-pattern-optimization">Highlight Pattern Optimization</a></h2>
<h3 id="regex-caching"><a class="header" href="#regex-caching">Regex Caching</a></h3>
<p>Patterns compiled once at load:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub fn compile_highlight_patterns(highlights: &amp;mut HashMap&lt;String, HighlightPattern&gt;) {
    for (name, pattern) in highlights.iter_mut() {
        if !pattern.fast_parse {
            pattern.compiled_regex = Some(regex::Regex::new(&amp;pattern.pattern)?);
        }
    }
}
<span class="boring">}</span></code></pre>
<h3 id="fast-parse-mode-2"><a class="header" href="#fast-parse-mode-2">Fast Parse Mode</a></h3>
<p>For simple literals, Aho-Corasick is faster:</p>
<pre><code class="language-toml">[highlights.names]
pattern = "Bob|Alice|Charlie"
fg = "#ffff00"
fast_parse = true  # Uses Aho-Corasick
</code></pre>
<h3 id="early-exit"><a class="header" href="#early-exit">Early Exit</a></h3>
<p>Skip highlight if text already styled:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>if segment.span_type != SpanType::Normal {
    continue;  // Monsterbold, Link, etc. take priority
}
<span class="boring">}</span></code></pre>
<h2 id="network-optimization"><a class="header" href="#network-optimization">Network Optimization</a></h2>
<h3 id="buffered-io"><a class="header" href="#buffered-io">Buffered I/O</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let reader = BufReader::new(stream);
<span class="boring">}</span></code></pre>
<h3 id="non-blocking-polling"><a class="header" href="#non-blocking-polling">Non-Blocking Polling</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>if crossterm::event::poll(Duration::from_millis(10))? {
    // Handle event
}
<span class="boring">}</span></code></pre>
<h3 id="streaming-parser"><a class="header" href="#streaming-parser">Streaming Parser</a></h3>
<p>Processes data as it arrives, not waiting for complete messages.</p>
<h2 id="performance-widget"><a class="header" href="#performance-widget">Performance Widget</a></h2>
<p>Display real-time metrics:</p>
<pre><code class="language-toml">[[windows]]
name = "performance"
type = "performance"
show_fps = true
show_frame_times = true
show_render_times = true
show_net = true
show_parse = true
show_memory = true
show_lines = true
show_uptime = true
</code></pre>
<h3 id="selective-collection"><a class="header" href="#selective-collection">Selective Collection</a></h3>
<p>Enable only displayed metrics to reduce overhead:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>stats.apply_enabled_from(&amp;performance_widget_data);
<span class="boring">}</span></code></pre>
<h2 id="profiling"><a class="header" href="#profiling">Profiling</a></h2>
<h3 id="built-in-metrics"><a class="header" href="#built-in-metrics">Built-in Metrics</a></h3>
<p>Use the performance widget for real-time profiling.</p>
<h3 id="tracing"><a class="header" href="#tracing">Tracing</a></h3>
<pre><code class="language-bash">RUST_LOG=vellum_fe=debug cargo run
</code></pre>
<h3 id="release-build"><a class="header" href="#release-build">Release Build</a></h3>
<p>Always profile with release builds:</p>
<pre><code class="language-bash">cargo build --release
</code></pre>
<p>Release optimizations:</p>
<ul>
<li>Full optimization (<code>opt-level = 3</code>)</li>
<li>Link-time optimization (<code>lto = true</code>)</li>
<li>Single codegen unit</li>
</ul>
<h2 id="best-practices-1"><a class="header" href="#best-practices-1">Best Practices</a></h2>
<h3 id="for-users"><a class="header" href="#for-users">For Users</a></h3>
<ol>
<li><strong>Reduce buffer sizes</strong> for secondary windows</li>
<li><strong>Use fast_parse</strong> for simple highlight patterns</li>
<li><strong>Disable unused performance metrics</strong></li>
<li><strong>Keep highlight count reasonable</strong> (&lt;100 patterns)</li>
<li><strong>Use compact layouts</strong> when possible</li>
</ol>
<h3 id="for-developers"><a class="header" href="#for-developers">For Developers</a></h3>
<ol>
<li><strong>Use generation counters</strong> for change detection</li>
<li><strong>Avoid content comparison</strong> - use flags or counters</li>
<li><strong>Batch updates</strong> when possible</li>
<li><strong>Profile with release builds</strong></li>
<li><strong>Use VecDeque</strong> for FIFO buffers</li>
<li><strong>Cache expensive computations</strong></li>
</ol>
<h2 id="performance-troubleshooting"><a class="header" href="#performance-troubleshooting">Performance Troubleshooting</a></h2>
<h3 id="low-fps-1"><a class="header" href="#low-fps-1">Low FPS</a></h3>
<ol>
<li>Reduce buffer sizes</li>
<li>Disable unused widgets</li>
<li>Reduce highlight patterns</li>
<li>Use <code>fast_parse = true</code></li>
</ol>
<h3 id="high-memory-1"><a class="header" href="#high-memory-1">High Memory</a></h3>
<ol>
<li>Reduce <code>buffer_size</code> on windows</li>
<li>Close unused tabs</li>
<li>Check for memory leaks (rising delta)</li>
</ol>
<h3 id="high-latency"><a class="header" href="#high-latency">High Latency</a></h3>
<ol>
<li>Check network connection</li>
<li>Reduce highlight patterns</li>
<li>Simplify layout</li>
</ol>
<h3 id="frame-spikes-1"><a class="header" href="#frame-spikes-1">Frame Spikes</a></h3>
<ol>
<li>Check text wrapping (long lines)</li>
<li>Reduce highlight complexity</li>
<li>Profile with tracing</li>
</ol>
<h2 id="see-also-59"><a class="header" href="#see-also-59">See Also</a></h2>
<ul>
<li><a href="#widget-synchronization">Widget Sync</a> - Generation-based sync details</li>
<li><a href="#configtoml-reference">Configuration</a> - Performance settings</li>
<li><a href="#performance-issues-3">Troubleshooting</a> - Performance fixes</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="network-overview"><a class="header" href="#network-overview">Network Overview</a></h1>
<p>VellumFE supports two connection modes for connecting to GemStone IV and DragonRealms servers.</p>
<h2 id="connection-modes-2"><a class="header" href="#connection-modes-2">Connection Modes</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Mode</th><th>Description</th><th>Use Case</th></tr>
</thead>
<tbody>
<tr><td><strong>Lich Proxy</strong></td><td>Connect through Lich middleware</td><td>Standard setup, script support</td></tr>
<tr><td><strong>Direct eAccess</strong></td><td>Authenticate directly with Simutronics</td><td>Standalone, no Lich required</td></tr>
</tbody>
</table>
</div>
<h2 id="quick-comparison"><a class="header" href="#quick-comparison">Quick Comparison</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Feature</th><th>Lich Proxy</th><th>Direct eAccess</th></tr>
</thead>
<tbody>
<tr><td>Lich scripts</td><td>✓ Yes</td><td>✗ No</td></tr>
<tr><td>Setup complexity</td><td>Medium</td><td>Simple</td></tr>
<tr><td>Dependencies</td><td>Lich, Ruby</td><td>OpenSSL</td></tr>
<tr><td>Authentication</td><td>Handled by Lich</td><td>Built-in</td></tr>
<tr><td>Latency</td><td>Slightly higher</td><td>Minimal</td></tr>
</tbody>
</table>
</div>
<h2 id="connection-flow"><a class="header" href="#connection-flow">Connection Flow</a></h2>
<h3 id="lich-proxy-mode"><a class="header" href="#lich-proxy-mode">Lich Proxy Mode</a></h3>
<pre><code>┌─────────┐     ┌──────┐     ┌────────────┐     ┌──────────┐
│VellumFE │────▶│ Lich │────▶│ Game Server │────▶│ Response │
└─────────┘     └──────┘     └────────────┘     └──────────┘
     ▲              │                                │
     └──────────────┴────────────────────────────────┘
</code></pre>
<p>VellumFE connects to Lich’s local proxy port (typically 8000). Lich handles authentication and provides script execution capabilities.</p>
<h3 id="direct-eaccess-mode"><a class="header" href="#direct-eaccess-mode">Direct eAccess Mode</a></h3>
<pre><code>┌─────────┐     ┌─────────┐     ┌────────────┐
│VellumFE │────▶│ eAccess │────▶│ Game Server │
└─────────┘     └─────────┘     └────────────┘
     │               │                │
     └───────────────┴────────────────┘
         Direct TLS connection
</code></pre>
<p>VellumFE authenticates directly with Simutronics’ eAccess servers, then connects to the game server.</p>
<h2 id="which-mode-should-i-use"><a class="header" href="#which-mode-should-i-use">Which Mode Should I Use?</a></h2>
<h3 id="use-lich-proxy-if"><a class="header" href="#use-lich-proxy-if">Use Lich Proxy If:</a></h3>
<ul>
<li>You use Lich scripts (recommended for most players)</li>
<li>You want the Lich ecosystem (scripts, plugins)</li>
<li>You’re already familiar with Lich</li>
<li>You need advanced automation</li>
</ul>
<h3 id="use-direct-eaccess-if"><a class="header" href="#use-direct-eaccess-if">Use Direct eAccess If:</a></h3>
<ul>
<li>You want a standalone client</li>
<li>You don’t use Lich scripts</li>
<li>You want minimal latency</li>
<li>You prefer fewer dependencies</li>
<li>Lich isn’t available for your platform</li>
</ul>
<h2 id="network-requirements"><a class="header" href="#network-requirements">Network Requirements</a></h2>
<h3 id="ports"><a class="header" href="#ports">Ports</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Service</th><th>Port</th><th>Protocol</th></tr>
</thead>
<tbody>
<tr><td>Lich proxy</td><td>8000 (configurable)</td><td>TCP</td></tr>
<tr><td>eAccess</td><td>7900/7910</td><td>TLS</td></tr>
<tr><td>Game servers</td><td>Various</td><td>TCP</td></tr>
</tbody>
</table>
</div>
<h3 id="firewall-rules"><a class="header" href="#firewall-rules">Firewall Rules</a></h3>
<p>If behind a firewall, ensure outbound connections to:</p>
<ul>
<li><code>eaccess.play.net</code> (port 7900/7910)</li>
<li>Game server IPs (assigned dynamically)</li>
</ul>
<h2 id="security"><a class="header" href="#security">Security</a></h2>
<h3 id="lich-mode"><a class="header" href="#lich-mode">Lich Mode</a></h3>
<ul>
<li>Lich handles credential storage</li>
<li>Connection to Lich is local (127.0.0.1)</li>
<li>Game traffic may or may not be encrypted depending on Lich version</li>
</ul>
<h3 id="direct-mode"><a class="header" href="#direct-mode">Direct Mode</a></h3>
<ul>
<li>TLS encryption to eAccess</li>
<li>Certificate pinning for authentication servers</li>
<li>Credentials passed at runtime (not stored)</li>
</ul>
<h2 id="configuration-20"><a class="header" href="#configuration-20">Configuration</a></h2>
<h3 id="lich-mode-1"><a class="header" href="#lich-mode-1">Lich Mode</a></h3>
<pre><code class="language-toml"># config.toml
[connection]
mode = "lich"
host = "127.0.0.1"
port = 8000
</code></pre>
<h3 id="direct-mode-1"><a class="header" href="#direct-mode-1">Direct Mode</a></h3>
<pre><code class="language-toml"># config.toml
[connection]
mode = "direct"
game = "gs4"          # or "dr" for DragonRealms
</code></pre>
<p>Credentials are provided via command line or environment variables (never stored in config).</p>
<h2 id="guides"><a class="header" href="#guides">Guides</a></h2>
<p>This section covers:</p>
<ul>
<li><a href="#lich-proxy-connection">Lich Proxy</a> - Setting up Lich connection</li>
<li><a href="#direct-eaccess-connection">Direct eAccess</a> - Direct authentication</li>
<li><a href="#tls-certificates">TLS Certificates</a> - Certificate management</li>
<li><a href="#network-troubleshooting">Troubleshooting</a> - Connection problems</li>
</ul>
<h2 id="quick-start-2"><a class="header" href="#quick-start-2">Quick Start</a></h2>
<h3 id="lich-mode-recommended"><a class="header" href="#lich-mode-recommended">Lich Mode (Recommended)</a></h3>
<ol>
<li>Install and configure Lich</li>
<li>Start Lich and log into your character</li>
<li>Launch VellumFE: <code>vellum-fe --host 127.0.0.1 --port 8000</code></li>
</ol>
<h3 id="direct-mode-2"><a class="header" href="#direct-mode-2">Direct Mode</a></h3>
<ol>
<li>Launch VellumFE with credentials:
<pre><code class="language-bash">vellum-fe --direct \
  --account YOUR_ACCOUNT \
  --password YOUR_PASSWORD \
  --game prime \
  --character CHARACTER_NAME
</code></pre>
</li>
</ol>
<h2 id="see-also-60"><a class="header" href="#see-also-60">See Also</a></h2>
<ul>
<li><a href="#installation">Installation</a></li>
<li><a href="#first-launch">First Launch</a></li>
<li><a href="#configtoml-reference">Configuration</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="lich-proxy-connection"><a class="header" href="#lich-proxy-connection">Lich Proxy Connection</a></h1>
<p>Connect VellumFE through Lich for full script support and the Lich ecosystem.</p>
<h2 id="overview-27"><a class="header" href="#overview-27">Overview</a></h2>
<p>Lich is a middleware application that sits between your client and the game server. It provides:</p>
<ul>
<li>Script execution (Ruby-based automation)</li>
<li>Plugin support</li>
<li>Community scripts repository</li>
<li>Character management</li>
</ul>
<p>VellumFE connects to Lich’s local proxy port, receiving game data and sending commands through Lich.</p>
<h2 id="prerequisites-9"><a class="header" href="#prerequisites-9">Prerequisites</a></h2>
<ul>
<li>Lich installed and configured</li>
<li>Ruby (required by Lich)</li>
<li>Game account and subscription</li>
</ul>
<h2 id="installing-lich"><a class="header" href="#installing-lich">Installing Lich</a></h2>
<h3 id="download-lich"><a class="header" href="#download-lich">Download Lich</a></h3>
<p>Visit the Lich Project website or community resources to download Lich.</p>
<h3 id="install-ruby"><a class="header" href="#install-ruby">Install Ruby</a></h3>
<p>Lich requires Ruby. Install the appropriate version for your platform:</p>
<p><strong>Windows</strong>:</p>
<ul>
<li>Download RubyInstaller from https://rubyinstaller.org/</li>
<li>Install with DevKit option</li>
</ul>
<p><strong>macOS</strong>:</p>
<pre><code class="language-bash">brew install ruby
</code></pre>
<p><strong>Linux</strong>:</p>
<pre><code class="language-bash">sudo apt install ruby ruby-dev
</code></pre>
<h3 id="configure-lich"><a class="header" href="#configure-lich">Configure Lich</a></h3>
<ol>
<li>Run Lich setup wizard</li>
<li>Enter your Simutronics credentials</li>
<li>Select your character</li>
<li>Configure proxy port (default: 8000)</li>
</ol>
<h2 id="connecting-vellum-fe"><a class="header" href="#connecting-vellum-fe">Connecting VellumFE</a></h2>
<h3 id="basic-connection"><a class="header" href="#basic-connection">Basic Connection</a></h3>
<p>Once Lich is running and logged in:</p>
<pre><code class="language-bash">vellum-fe --host 127.0.0.1 --port 8000
</code></pre>
<h3 id="configuration-file"><a class="header" href="#configuration-file">Configuration File</a></h3>
<p>Add to <code>~/.vellum-fe/config.toml</code>:</p>
<pre><code class="language-toml">[connection]
mode = "lich"
host = "127.0.0.1"
port = 8000
auto_reconnect = true
reconnect_delay = 5
</code></pre>
<h3 id="command-line-options"><a class="header" href="#command-line-options">Command Line Options</a></h3>
<pre><code class="language-bash">vellum-fe --host HOST --port PORT [OPTIONS]

Options:
  --host HOST      Lich proxy host (default: 127.0.0.1)
  --port PORT      Lich proxy port (default: 8000)
  --no-reconnect   Disable auto-reconnect
</code></pre>
<h2 id="connection-workflow"><a class="header" href="#connection-workflow">Connection Workflow</a></h2>
<h3 id="step-by-step"><a class="header" href="#step-by-step">Step-by-Step</a></h3>
<ol>
<li>
<p><strong>Start Lich</strong></p>
<pre><code class="language-bash">ruby lich.rb
</code></pre>
</li>
<li>
<p><strong>Log into character via Lich</strong></p>
<ul>
<li>Use Lich’s login interface</li>
<li>Select character</li>
<li>Wait for game connection</li>
</ul>
</li>
<li>
<p><strong>Verify Lich is listening</strong></p>
<ul>
<li>Lich should show proxy port status</li>
<li>Default: listening on port 8000</li>
</ul>
</li>
<li>
<p><strong>Connect VellumFE</strong></p>
<pre><code class="language-bash">vellum-fe --host 127.0.0.1 --port 8000
</code></pre>
</li>
<li>
<p><strong>Verify connection</strong></p>
<ul>
<li>VellumFE should display game output</li>
<li>Commands typed in VellumFE should work in game</li>
</ul>
</li>
</ol>
<h3 id="diagram"><a class="header" href="#diagram">Diagram</a></h3>
<pre><code>┌──────────────────────────────────────────────────────────────┐
│                       Your Computer                          │
│                                                              │
│  ┌───────────┐         ┌──────────┐         ┌──────────┐    │
│  │ VellumFE  │◄───────▶│   Lich   │◄───────▶│ Scripts  │    │
│  └───────────┘         └──────────┘         └──────────┘    │
│       │                     │                               │
│       │                     │ Port 8000                     │
│       └─────────────────────┘                               │
│                             │                               │
└─────────────────────────────┼───────────────────────────────┘
                              │
                              ▼ Internet
                    ┌──────────────────┐
                    │   Game Server    │
                    └──────────────────┘
</code></pre>
<h2 id="multi-character-setup"><a class="header" href="#multi-character-setup">Multi-Character Setup</a></h2>
<h3 id="different-ports-per-character"><a class="header" href="#different-ports-per-character">Different Ports per Character</a></h3>
<p>If running multiple characters:</p>
<p><strong>Lich configuration</strong>:</p>
<ul>
<li>Character 1: Port 8000</li>
<li>Character 2: Port 8001</li>
<li>Character 3: Port 8002</li>
</ul>
<p><strong>VellumFE instances</strong>:</p>
<pre><code class="language-bash"># Terminal 1
vellum-fe --port 8000

# Terminal 2
vellum-fe --port 8001

# Terminal 3
vellum-fe --port 8002
</code></pre>
<h3 id="profile-based-configuration"><a class="header" href="#profile-based-configuration">Profile-Based Configuration</a></h3>
<p>Create character profiles in <code>~/.vellum-fe/profiles/</code>:</p>
<pre><code class="language-toml"># ~/.vellum-fe/profiles/warrior.toml
[connection]
port = 8000

# ~/.vellum-fe/profiles/wizard.toml
[connection]
port = 8001
</code></pre>
<p>Launch with profile:</p>
<pre><code class="language-bash">vellum-fe --profile warrior
vellum-fe --profile wizard
</code></pre>
<h2 id="lich-script-integration"><a class="header" href="#lich-script-integration">Lich Script Integration</a></h2>
<h3 id="running-scripts"><a class="header" href="#running-scripts">Running Scripts</a></h3>
<p>Lich scripts are controlled through Lich, not VellumFE. Common commands:</p>
<pre><code>;script_name          # Run a script
;kill script_name     # Stop a script
;pause script_name    # Pause a script
;unpause script_name  # Resume a script
;list                 # List running scripts
</code></pre>
<p>These commands are sent to Lich, which executes them.</p>
<h3 id="script-output"><a class="header" href="#script-output">Script Output</a></h3>
<p>Script output appears in VellumFE’s main text window alongside game output. You can filter script messages using stream filtering if Lich tags them appropriately.</p>
<h3 id="script-commands-vs-game-commands"><a class="header" href="#script-commands-vs-game-commands">Script Commands vs Game Commands</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Prefix</th><th>Destination</th><th>Example</th></tr>
</thead>
<tbody>
<tr><td><code>;</code></td><td>Lich (scripts)</td><td><code>;go2 bank</code></td></tr>
<tr><td><code>.</code></td><td>VellumFE (client)</td><td><code>.reload config</code></td></tr>
<tr><td>(none)</td><td>Game server</td><td><code>north</code></td></tr>
</tbody>
</table>
</div>
<h2 id="lich-settings"><a class="header" href="#lich-settings">Lich Settings</a></h2>
<h3 id="proxy-configuration"><a class="header" href="#proxy-configuration">Proxy Configuration</a></h3>
<p>In Lich’s configuration:</p>
<pre><code class="language-ruby"># Listen on all interfaces (for remote access)
proxy_host = "0.0.0.0"
proxy_port = 8000

# Listen on localhost only (more secure)
proxy_host = "127.0.0.1"
proxy_port = 8000
</code></pre>
<h3 id="xml-mode"><a class="header" href="#xml-mode">XML Mode</a></h3>
<p>Ensure Lich is configured to pass through game XML:</p>
<pre><code class="language-ruby">xml_passthrough = true
</code></pre>
<p>VellumFE requires XML tags to properly parse game state.</p>
<h2 id="performance-considerations-1"><a class="header" href="#performance-considerations-1">Performance Considerations</a></h2>
<h3 id="latency"><a class="header" href="#latency">Latency</a></h3>
<p>Lich adds minimal latency (typically &lt;10ms) due to local proxy processing.</p>
<h3 id="memory-1"><a class="header" href="#memory-1">Memory</a></h3>
<p>Running Lich + Ruby + scripts uses additional memory. Typical usage:</p>
<ul>
<li>Lich base: ~50-100MB</li>
<li>Per character: +20-50MB</li>
<li>Scripts: Varies by script</li>
</ul>
<h3 id="cpu"><a class="header" href="#cpu">CPU</a></h3>
<p>Script execution uses CPU. Complex scripts may impact performance during heavy automation.</p>
<h2 id="troubleshooting-28"><a class="header" href="#troubleshooting-28">Troubleshooting</a></h2>
<h3 id="connection-refused-1"><a class="header" href="#connection-refused-1">Connection Refused</a></h3>
<pre><code>Error: Connection refused to 127.0.0.1:8000
</code></pre>
<p><strong>Solutions</strong>:</p>
<ol>
<li>Verify Lich is running</li>
<li>Check Lich has logged into a character</li>
<li>Confirm proxy port matches (check Lich status)</li>
<li>Try a different port if 8000 is in use</li>
</ol>
<h3 id="lich-not-receiving-commands"><a class="header" href="#lich-not-receiving-commands">Lich Not Receiving Commands</a></h3>
<p><strong>Solutions</strong>:</p>
<ol>
<li>Check VellumFE is connected (look for game output)</li>
<li>Verify commands aren’t being intercepted</li>
<li>Check for Lich script conflicts</li>
</ol>
<h3 id="xml-not-parsing"><a class="header" href="#xml-not-parsing">XML Not Parsing</a></h3>
<p>If widgets aren’t updating:</p>
<p><strong>Solutions</strong>:</p>
<ol>
<li>Enable XML passthrough in Lich</li>
<li>Check Lich version supports XML</li>
<li>Verify game has XML mode enabled</li>
</ol>
<h3 id="disconnects"><a class="header" href="#disconnects">Disconnects</a></h3>
<p>If connection drops frequently:</p>
<p><strong>Solutions</strong>:</p>
<ol>
<li>Check network stability</li>
<li>Enable auto-reconnect:
<pre><code class="language-toml">[connection]
auto_reconnect = true
reconnect_delay = 5
</code></pre>
</li>
<li>Check Lich logs for errors</li>
</ol>
<h3 id="port-already-in-use"><a class="header" href="#port-already-in-use">Port Already in Use</a></h3>
<pre><code>Error: Port 8000 already in use
</code></pre>
<p><strong>Solutions</strong>:</p>
<ol>
<li>Close other applications using the port</li>
<li>Change Lich’s proxy port</li>
<li>Find the process using the port:
<pre><code class="language-bash"># Linux/macOS
lsof -i :8000

# Windows
netstat -ano | findstr :8000
</code></pre>
</li>
</ol>
<h2 id="advanced-configuration"><a class="header" href="#advanced-configuration">Advanced Configuration</a></h2>
<h3 id="remote-lich-access"><a class="header" href="#remote-lich-access">Remote Lich Access</a></h3>
<p>To connect from a different machine (advanced):</p>
<ol>
<li>
<p>Configure Lich to listen on network:</p>
<pre><code class="language-ruby">proxy_host = "0.0.0.0"
</code></pre>
</li>
<li>
<p>Connect from VellumFE:</p>
<pre><code class="language-bash">vellum-fe --host 192.168.1.100 --port 8000
</code></pre>
</li>
<li>
<p><strong>Security warning</strong>: Only do this on trusted networks!</p>
</li>
</ol>
<h3 id="ssh-tunneling"><a class="header" href="#ssh-tunneling">SSH Tunneling</a></h3>
<p>For secure remote access:</p>
<pre><code class="language-bash"># On remote machine
ssh -L 8000:localhost:8000 user@lich-server

# Then connect VellumFE locally
vellum-fe --host 127.0.0.1 --port 8000
</code></pre>
<h2 id="see-also-61"><a class="header" href="#see-also-61">See Also</a></h2>
<ul>
<li><a href="#direct-eaccess-connection">Direct eAccess</a> - Alternative without Lich</li>
<li><a href="#network-troubleshooting">Troubleshooting</a> - More connection issues</li>
<li><a href="#configtoml-reference">Configuration</a> - Full config reference</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="direct-eaccess-connection"><a class="header" href="#direct-eaccess-connection">Direct eAccess Connection</a></h1>
<p>Connect directly to GemStone IV and DragonRealms without requiring Lich as middleware.</p>
<h2 id="overview-28"><a class="header" href="#overview-28">Overview</a></h2>
<p>Direct eAccess mode allows VellumFE to authenticate directly with Simutronics’ servers, bypassing the need for Lich. This provides:</p>
<ul>
<li>Standalone operation</li>
<li>Lower latency</li>
<li>Fewer dependencies</li>
<li>Simpler setup</li>
</ul>
<p><strong>Trade-off</strong>: No Lich script support in this mode.</p>
<h2 id="prerequisites-10"><a class="header" href="#prerequisites-10">Prerequisites</a></h2>
<ul>
<li>OpenSSL library</li>
<li>Game account and subscription</li>
<li>Character already created</li>
</ul>
<h2 id="installation-requirements"><a class="header" href="#installation-requirements">Installation Requirements</a></h2>
<h3 id="windows-2"><a class="header" href="#windows-2">Windows</a></h3>
<p>OpenSSL is installed via vcpkg during the build process:</p>
<ol>
<li>Ensure <code>VCPKG_ROOT</code> environment variable is set</li>
<li>vcpkg handles OpenSSL installation automatically</li>
</ol>
<p>If building from source:</p>
<pre><code class="language-bash">vcpkg install openssl:x64-windows
</code></pre>
<h3 id="macos-2"><a class="header" href="#macos-2">macOS</a></h3>
<p>OpenSSL is typically available via Homebrew:</p>
<pre><code class="language-bash">brew install openssl
</code></pre>
<h3 id="linux-2"><a class="header" href="#linux-2">Linux</a></h3>
<p>Install OpenSSL development package:</p>
<pre><code class="language-bash"># Debian/Ubuntu
sudo apt install libssl-dev

# Fedora/RHEL
sudo dnf install openssl-devel

# Arch
sudo pacman -S openssl
</code></pre>
<h2 id="connecting"><a class="header" href="#connecting">Connecting</a></h2>
<h3 id="command-line"><a class="header" href="#command-line">Command Line</a></h3>
<pre><code class="language-bash">vellum-fe --direct \
  --account YOUR_ACCOUNT \
  --password YOUR_PASSWORD \
  --game prime \
  --character CHARACTER_NAME
</code></pre>
<h3 id="options"><a class="header" href="#options">Options</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Option</th><th>Description</th><th>Example</th></tr>
</thead>
<tbody>
<tr><td><code>--direct</code></td><td>Enable direct eAccess mode</td><td>Required flag</td></tr>
<tr><td><code>--account</code></td><td>Simutronics account name</td><td><code>myaccount</code></td></tr>
<tr><td><code>--password</code></td><td>Account password</td><td><code>mypassword</code></td></tr>
<tr><td><code>--game</code></td><td>Game instance</td><td><code>prime</code>, <code>test</code>, <code>dr</code></td></tr>
<tr><td><code>--character</code></td><td>Character name</td><td><code>Mycharacter</code></td></tr>
</tbody>
</table>
</div>
<h3 id="game-instance-values"><a class="header" href="#game-instance-values">Game Instance Values</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Value</th><th>Game</th></tr>
</thead>
<tbody>
<tr><td><code>prime</code></td><td>GemStone IV (Prime)</td></tr>
<tr><td><code>test</code></td><td>GemStone IV (Test)</td></tr>
<tr><td><code>plat</code></td><td>GemStone IV (Platinum)</td></tr>
<tr><td><code>dr</code></td><td>DragonRealms</td></tr>
<tr><td><code>drt</code></td><td>DragonRealms (Test)</td></tr>
</tbody>
</table>
</div>
<h3 id="environment-variables"><a class="header" href="#environment-variables">Environment Variables</a></h3>
<p>For security, credentials can be passed via environment:</p>
<pre><code class="language-bash">export TF_ACCOUNT="myaccount"
export TF_PASSWORD="mypassword"
export TF_GAME="prime"
export TF_CHARACTER="Mycharacter"

vellum-fe --direct
</code></pre>
<h2 id="authentication-flow"><a class="header" href="#authentication-flow">Authentication Flow</a></h2>
<h3 id="how-it-works-3"><a class="header" href="#how-it-works-3">How It Works</a></h3>
<pre><code>┌──────────────────────────────────────────────────────────────────┐
│                    Direct eAccess Flow                           │
│                                                                  │
│  ┌─────────┐    TLS     ┌─────────────┐                         │
│  │VellumFE │◄──────────▶│   eAccess   │  1. TLS Handshake       │
│  └─────────┘            │  7900/7910  │  2. Request hash key    │
│       │                 └─────────────┘  3. Send credentials    │
│       │                       │          4. Get character list  │
│       │                       │          5. Request launch key  │
│       │                       ▼                                  │
│       │                 ┌─────────────┐                         │
│       └────────────────▶│ Game Server │  6. Connect with key    │
│                         └─────────────┘                         │
└──────────────────────────────────────────────────────────────────┘
</code></pre>
<h3 id="technical-details"><a class="header" href="#technical-details">Technical Details</a></h3>
<ol>
<li><strong>TLS Connection</strong>: Connects to <code>eaccess.play.net:7910</code> using TLS</li>
<li><strong>Challenge-Response</strong>:
<ul>
<li>Requests 32-byte hash key from server</li>
<li>Password is obfuscated: <code>((char - 32) ^ hashkey[i]) + 32</code></li>
</ul>
</li>
<li><strong>Session Creation</strong>: Receives character list and subscription info</li>
<li><strong>Launch Ticket</strong>: Requests and receives game server connection key</li>
<li><strong>Game Connection</strong>: Connects to assigned game server with launch key</li>
</ol>
<h3 id="security-implementation"><a class="header" href="#security-implementation">Security Implementation</a></h3>
<ul>
<li><strong>TLS Encryption</strong>: All eAccess communication is encrypted</li>
<li><strong>Certificate Pinning</strong>: Server certificate is verified (stored at <code>~/.vellum-fe/simu.pem</code>)</li>
<li><strong>No SNI</strong>: Server Name Indication is disabled to match protocol requirements</li>
<li><strong>Single-Write TLS</strong>: Commands sent as single TLS records for compatibility</li>
</ul>
<h2 id="certificate-management"><a class="header" href="#certificate-management">Certificate Management</a></h2>
<h3 id="first-connection"><a class="header" href="#first-connection">First Connection</a></h3>
<p>On first direct connection, VellumFE:</p>
<ol>
<li>Downloads the eAccess server certificate</li>
<li>Stores it at <code>~/.vellum-fe/simu.pem</code></li>
<li>Uses it for verification on subsequent connections</li>
</ol>
<h3 id="certificate-location"><a class="header" href="#certificate-location">Certificate Location</a></h3>
<pre><code>~/.vellum-fe/
└── simu.pem        # eAccess TLS certificate
</code></pre>
<h3 id="refreshing-certificate"><a class="header" href="#refreshing-certificate">Refreshing Certificate</a></h3>
<p>If authentication fails due to certificate issues:</p>
<pre><code class="language-bash"># Delete stored certificate
rm ~/.vellum-fe/simu.pem

# Reconnect to download fresh certificate
vellum-fe --direct --account ... --password ... --game ... --character ...
</code></pre>
<h2 id="configuration-21"><a class="header" href="#configuration-21">Configuration</a></h2>
<h3 id="config-file-partial"><a class="header" href="#config-file-partial">Config File (Partial)</a></h3>
<p>You can specify some options in config, but credentials should not be stored:</p>
<pre><code class="language-toml"># ~/.vellum-fe/config.toml
[connection]
mode = "direct"
game = "prime"

# Do NOT store credentials in config file!
</code></pre>
<h3 id="recommended-approach"><a class="header" href="#recommended-approach">Recommended Approach</a></h3>
<p>Use a wrapper script or shell alias:</p>
<pre><code class="language-bash"># ~/.bashrc or ~/.zshrc
alias gs4='vellum-fe --direct --game prime --account $GS4_ACCOUNT --password $GS4_PASSWORD --character'

# Usage
gs4 Mycharacter
</code></pre>
<p>Or a script with secure password handling:</p>
<pre><code class="language-bash">#!/bin/bash
# gs4-connect.sh

read -sp "Password: " PASSWORD
echo

vellum-fe --direct \
  --account "$1" \
  --password "$PASSWORD" \
  --game prime \
  --character "$2"
</code></pre>
<h2 id="multi-character"><a class="header" href="#multi-character">Multi-Character</a></h2>
<h3 id="sequential-characters"><a class="header" href="#sequential-characters">Sequential Characters</a></h3>
<p>Direct mode connects one character at a time. To switch:</p>
<ol>
<li>Exit VellumFE</li>
<li>Reconnect with different <code>--character</code> parameter</li>
</ol>
<h3 id="parallel-characters"><a class="header" href="#parallel-characters">Parallel Characters</a></h3>
<p>Run multiple VellumFE instances in separate terminals:</p>
<pre><code class="language-bash"># Terminal 1
vellum-fe --direct --account myaccount --password mypass --game prime --character Warrior

# Terminal 2
vellum-fe --direct --account myaccount --password mypass --game prime --character Wizard
</code></pre>
<p>Each instance maintains its own connection.</p>
<h2 id="performance-1"><a class="header" href="#performance-1">Performance</a></h2>
<h3 id="latency-comparison"><a class="header" href="#latency-comparison">Latency Comparison</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Mode</th><th>Typical Latency</th></tr>
</thead>
<tbody>
<tr><td>Direct</td><td>~50-100ms (network only)</td></tr>
<tr><td>Lich</td><td>~60-120ms (network + proxy)</td></tr>
</tbody>
</table>
</div>
<p>Direct mode eliminates the local proxy hop, providing marginally lower latency.</p>
<h3 id="resource-usage"><a class="header" href="#resource-usage">Resource Usage</a></h3>
<ul>
<li><strong>Memory</strong>: ~20-30MB base (no Lich overhead)</li>
<li><strong>CPU</strong>: Minimal (only TLS processing)</li>
<li><strong>Network</strong>: Standard game traffic</li>
</ul>
<h2 id="troubleshooting-29"><a class="header" href="#troubleshooting-29">Troubleshooting</a></h2>
<h3 id="authentication-failed"><a class="header" href="#authentication-failed">Authentication Failed</a></h3>
<pre><code>Error: Authentication failed
</code></pre>
<p><strong>Solutions</strong>:</p>
<ol>
<li>Verify account credentials are correct</li>
<li>Test login via official client or Lich</li>
<li>Check account is active (not banned/suspended)</li>
<li>Delete and re-download certificate: <code>rm ~/.vellum-fe/simu.pem</code></li>
</ol>
<h3 id="invalid-character"><a class="header" href="#invalid-character">Invalid Character</a></h3>
<pre><code>Error: Character not found
</code></pre>
<p><strong>Solutions</strong>:</p>
<ol>
<li>Check character name spelling (case-sensitive)</li>
<li>Verify character exists on specified game instance</li>
<li>Check account has access to that game</li>
</ol>
<h3 id="connection-timeout"><a class="header" href="#connection-timeout">Connection Timeout</a></h3>
<pre><code>Error: Connection to eaccess.play.net timed out
</code></pre>
<p><strong>Solutions</strong>:</p>
<ol>
<li>Check internet connectivity</li>
<li>Verify firewall allows port 7910 outbound</li>
<li>Try again (may be temporary server issue)</li>
</ol>
<h3 id="tls-handshake-failed"><a class="header" href="#tls-handshake-failed">TLS Handshake Failed</a></h3>
<pre><code>Error: TLS handshake failed
</code></pre>
<p><strong>Solutions</strong>:</p>
<ol>
<li>Update OpenSSL to latest version</li>
<li>Delete certificate and retry: <code>rm ~/.vellum-fe/simu.pem</code></li>
<li>Check system time is correct (TLS requires accurate time)</li>
</ol>
<h3 id="openssl-not-found"><a class="header" href="#openssl-not-found">OpenSSL Not Found</a></h3>
<pre><code>Error: OpenSSL library not found
</code></pre>
<p><strong>Solutions</strong>:</p>
<ol>
<li>Install OpenSSL for your platform</li>
<li>Set library path if non-standard location</li>
<li>On Windows, verify vcpkg installation</li>
</ol>
<h2 id="security-considerations"><a class="header" href="#security-considerations">Security Considerations</a></h2>
<h3 id="credential-handling"><a class="header" href="#credential-handling">Credential Handling</a></h3>
<ul>
<li><strong>Never store passwords in config files</strong></li>
<li>Use environment variables or interactive prompts</li>
<li>Clear shell history if credentials were typed</li>
</ul>
<h3 id="network-security"><a class="header" href="#network-security">Network Security</a></h3>
<ul>
<li>All eAccess traffic is TLS encrypted</li>
<li>Game server traffic uses standard (unencrypted) protocol</li>
<li>Certificate pinning prevents MITM attacks on authentication</li>
</ul>
<h3 id="logging-1"><a class="header" href="#logging-1">Logging</a></h3>
<p>Debug logs may contain sensitive information:</p>
<ul>
<li>Don’t share logs publicly without redaction</li>
<li>Logs are stored in <code>~/.vellum-fe/vellum-fe.log</code></li>
</ul>
<h2 id="comparison-with-lich-mode"><a class="header" href="#comparison-with-lich-mode">Comparison with Lich Mode</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Aspect</th><th>Direct eAccess</th><th>Lich Proxy</th></tr>
</thead>
<tbody>
<tr><td>Scripts</td><td>✗ None</td><td>✓ Full Lich scripts</td></tr>
<tr><td>Setup</td><td>Simple</td><td>Medium</td></tr>
<tr><td>Dependencies</td><td>OpenSSL</td><td>Lich + Ruby</td></tr>
<tr><td>Latency</td><td>Lower</td><td>Slightly higher</td></tr>
<tr><td>Memory</td><td>Lower</td><td>Higher</td></tr>
<tr><td>Multi-char</td><td>Separate instances</td><td>Lich manages</td></tr>
<tr><td>Community</td><td>Limited</td><td>Large ecosystem</td></tr>
</tbody>
</table>
</div>
<h2 id="when-to-use-direct-mode"><a class="header" href="#when-to-use-direct-mode">When to Use Direct Mode</a></h2>
<p><strong>Good for</strong>:</p>
<ul>
<li>Players who don’t use scripts</li>
<li>Minimal installations</li>
<li>Performance-sensitive setups</li>
<li>Learning/testing the game</li>
</ul>
<p><strong>Not recommended for</strong>:</p>
<ul>
<li>Heavy script users</li>
<li>Automation needs</li>
<li>Community script ecosystem access</li>
</ul>
<h2 id="see-also-62"><a class="header" href="#see-also-62">See Also</a></h2>
<ul>
<li><a href="#lich-proxy-connection">Lich Proxy</a> - Alternative with script support</li>
<li><a href="#tls-certificates">TLS Certificates</a> - Certificate details</li>
<li><a href="#network-troubleshooting">Troubleshooting</a> - More connection issues</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="tls-certificates"><a class="header" href="#tls-certificates">TLS Certificates</a></h1>
<p>Understanding and managing TLS certificates for secure connections.</p>
<h2 id="overview-29"><a class="header" href="#overview-29">Overview</a></h2>
<p>VellumFE uses TLS (Transport Layer Security) for encrypted communication with Simutronics’ eAccess authentication servers. This page covers certificate management for direct eAccess mode.</p>
<h2 id="certificate-architecture"><a class="header" href="#certificate-architecture">Certificate Architecture</a></h2>
<h3 id="connection-security"><a class="header" href="#connection-security">Connection Security</a></h3>
<pre><code>┌─────────────────────────────────────────────────────────────┐
│                  TLS Connection Flow                        │
│                                                             │
│  VellumFE                    eAccess Server                 │
│     │                             │                         │
│     │──── ClientHello ───────────▶│                         │
│     │                             │                         │
│     │◀─── ServerHello + Cert ─────│                         │
│     │                             │                         │
│     │  Verify cert against        │                         │
│     │  stored simu.pem            │                         │
│     │                             │                         │
│     │──── Key Exchange ──────────▶│                         │
│     │                             │                         │
│     │◀═══ Encrypted Channel ═════▶│                         │
│                                                             │
└─────────────────────────────────────────────────────────────┘
</code></pre>
<h3 id="why-certificate-pinning"><a class="header" href="#why-certificate-pinning">Why Certificate Pinning?</a></h3>
<p>The eAccess server uses a self-signed certificate. Certificate pinning:</p>
<ol>
<li><strong>First connection</strong>: Downloads and stores the certificate</li>
<li><strong>Subsequent connections</strong>: Verifies server presents the same certificate</li>
<li><strong>Protection</strong>: Prevents man-in-the-middle attacks</li>
</ol>
<h2 id="certificate-storage"><a class="header" href="#certificate-storage">Certificate Storage</a></h2>
<h3 id="location-5"><a class="header" href="#location-5">Location</a></h3>
<pre><code>~/.vellum-fe/
└── simu.pem        # eAccess server certificate
</code></pre>
<h3 id="file-format"><a class="header" href="#file-format">File Format</a></h3>
<p>The certificate is stored in PEM format:</p>
<pre><code>-----BEGIN CERTIFICATE-----
MIIDxTCCAq2gAwIBAgIJAK... (base64 encoded)
-----END CERTIFICATE-----
</code></pre>
<h3 id="permissions"><a class="header" href="#permissions">Permissions</a></h3>
<p>The certificate file should have restricted permissions:</p>
<pre><code class="language-bash"># Linux/macOS
chmod 600 ~/.vellum-fe/simu.pem

# Windows
# File inherits user permissions from .vellum-fe folder
</code></pre>
<h2 id="certificate-lifecycle"><a class="header" href="#certificate-lifecycle">Certificate Lifecycle</a></h2>
<h3 id="first-connection-1"><a class="header" href="#first-connection-1">First Connection</a></h3>
<p>On first direct eAccess connection:</p>
<ol>
<li>VellumFE connects to <code>eaccess.play.net:7910</code></li>
<li>Server sends its certificate during TLS handshake</li>
<li>VellumFE saves certificate to <code>~/.vellum-fe/simu.pem</code></li>
<li>Connection continues with authentication</li>
</ol>
<h3 id="subsequent-connections"><a class="header" href="#subsequent-connections">Subsequent Connections</a></h3>
<p>On later connections:</p>
<ol>
<li>VellumFE loads stored certificate</li>
<li>During TLS handshake, compares server’s certificate</li>
<li>If match: connection proceeds</li>
<li>If mismatch: connection fails (security protection)</li>
</ol>
<h3 id="certificate-renewal"><a class="header" href="#certificate-renewal">Certificate Renewal</a></h3>
<p>If Simutronics updates their certificate:</p>
<ol>
<li>Connection will fail (certificate mismatch)</li>
<li>Delete the old certificate: <code>rm ~/.vellum-fe/simu.pem</code></li>
<li>Reconnect to download new certificate</li>
<li>Future connections use new certificate</li>
</ol>
<h2 id="managing-certificates"><a class="header" href="#managing-certificates">Managing Certificates</a></h2>
<h3 id="viewing-certificate"><a class="header" href="#viewing-certificate">Viewing Certificate</a></h3>
<pre><code class="language-bash"># View certificate details
openssl x509 -in ~/.vellum-fe/simu.pem -text -noout

# View expiration date
openssl x509 -in ~/.vellum-fe/simu.pem -enddate -noout

# View fingerprint
openssl x509 -in ~/.vellum-fe/simu.pem -fingerprint -noout
</code></pre>
<h3 id="example-output"><a class="header" href="#example-output">Example Output</a></h3>
<pre><code>Certificate:
    Data:
        Version: 3 (0x2)
        Serial Number: ...
        Signature Algorithm: sha256WithRSAEncryption
        Issuer: C=US, ST=..., O=Simutronics...
        Validity
            Not Before: Jan  1 00:00:00 2020 GMT
            Not After : Dec 31 23:59:59 2030 GMT
        Subject: CN=eaccess.play.net...
</code></pre>
<h3 id="deleting-certificate"><a class="header" href="#deleting-certificate">Deleting Certificate</a></h3>
<p>To force certificate refresh:</p>
<pre><code class="language-bash"># Linux/macOS
rm ~/.vellum-fe/simu.pem

# Windows (PowerShell)
Remove-Item ~\.vellum-fe\simu.pem

# Windows (Command Prompt)
del %USERPROFILE%\.vellum-fe\simu.pem
</code></pre>
<h3 id="backing-up-certificate"><a class="header" href="#backing-up-certificate">Backing Up Certificate</a></h3>
<p>If you want to preserve your certificate:</p>
<pre><code class="language-bash">cp ~/.vellum-fe/simu.pem ~/.vellum-fe/simu.pem.backup
</code></pre>
<h2 id="troubleshooting-30"><a class="header" href="#troubleshooting-30">Troubleshooting</a></h2>
<h3 id="certificate-verification-failed"><a class="header" href="#certificate-verification-failed">Certificate Verification Failed</a></h3>
<pre><code>Error: Certificate verification failed
</code></pre>
<p><strong>Causes</strong>:</p>
<ul>
<li>Certificate changed on server</li>
<li>Certificate file corrupted</li>
<li>System time incorrect</li>
</ul>
<p><strong>Solutions</strong>:</p>
<ol>
<li>Delete and re-download:
<pre><code class="language-bash">rm ~/.vellum-fe/simu.pem
</code></pre>
</li>
<li>Check system time is accurate</li>
<li>Verify network isn’t intercepting traffic</li>
</ol>
<h3 id="certificate-not-found"><a class="header" href="#certificate-not-found">Certificate Not Found</a></h3>
<pre><code>Error: Could not load certificate from ~/.vellum-fe/simu.pem
</code></pre>
<p><strong>Causes</strong>:</p>
<ul>
<li>First connection hasn’t occurred</li>
<li>Certificate was deleted</li>
<li>Permission issues</li>
</ul>
<p><strong>Solutions</strong>:</p>
<ol>
<li>Run direct connection to auto-download</li>
<li>Check folder permissions</li>
<li>Verify path is correct</li>
</ol>
<h3 id="tls-handshake-error"><a class="header" href="#tls-handshake-error">TLS Handshake Error</a></h3>
<pre><code>Error: TLS handshake failed
</code></pre>
<p><strong>Causes</strong>:</p>
<ul>
<li>OpenSSL version incompatibility</li>
<li>Network proxy interference</li>
<li>Server configuration changed</li>
</ul>
<p><strong>Solutions</strong>:</p>
<ol>
<li>Update OpenSSL</li>
<li>Disable network proxies</li>
<li>Delete certificate and retry</li>
</ol>
<h3 id="self-signed-certificate-warning"><a class="header" href="#self-signed-certificate-warning">Self-Signed Certificate Warning</a></h3>
<p>The eAccess certificate is self-signed, which is expected. VellumFE handles this through certificate pinning rather than chain validation.</p>
<h2 id="advanced-topics"><a class="header" href="#advanced-topics">Advanced Topics</a></h2>
<h3 id="manual-certificate-download"><a class="header" href="#manual-certificate-download">Manual Certificate Download</a></h3>
<p>If auto-download fails, manually retrieve:</p>
<pre><code class="language-bash"># Connect and save certificate
openssl s_client -connect eaccess.play.net:7910 \
  -servername "" \
  &lt;/dev/null 2&gt;/dev/null | \
  openssl x509 -outform PEM &gt; ~/.vellum-fe/simu.pem
</code></pre>
<p>Note: The empty <code>-servername ""</code> disables SNI, which is required.</p>
<h3 id="certificate-validation"><a class="header" href="#certificate-validation">Certificate Validation</a></h3>
<p>To manually verify a certificate:</p>
<pre><code class="language-bash"># Compare fingerprints
openssl x509 -in ~/.vellum-fe/simu.pem -fingerprint -sha256 -noout
</code></pre>
<p>Compare the fingerprint with known-good values from the community.</p>
<h3 id="multiple-certificates"><a class="header" href="#multiple-certificates">Multiple Certificates</a></h3>
<p>If connecting to different game servers (test vs production):</p>
<pre><code>~/.vellum-fe/
├── simu.pem           # Production eAccess
├── simu-test.pem      # Test server (if different)
</code></pre>
<p>Configure via:</p>
<pre><code class="language-toml">[connection]
certificate = "simu.pem"  # or "simu-test.pem"
</code></pre>
<h2 id="security-best-practices"><a class="header" href="#security-best-practices">Security Best Practices</a></h2>
<h3 id="do"><a class="header" href="#do">Do</a></h3>
<ul>
<li>✓ Keep certificate file permissions restrictive</li>
<li>✓ Verify certificate fingerprint periodically</li>
<li>✓ Delete and refresh if authentication fails unexpectedly</li>
<li>✓ Keep OpenSSL updated</li>
</ul>
<h3 id="dont"><a class="header" href="#dont">Don’t</a></h3>
<ul>
<li>✗ Share your certificate file publicly</li>
<li>✗ Ignore certificate verification failures</li>
<li>✗ Use the same certificate across different machines (download fresh)</li>
<li>✗ Disable certificate verification</li>
</ul>
<h2 id="technical-details-1"><a class="header" href="#technical-details-1">Technical Details</a></h2>
<h3 id="tls-configuration"><a class="header" href="#tls-configuration">TLS Configuration</a></h3>
<p>VellumFE’s TLS connection uses:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Setting</th><th>Value</th><th>Reason</th></tr>
</thead>
<tbody>
<tr><td>Protocol</td><td>TLS 1.2+</td><td>Security</td></tr>
<tr><td>SNI</td><td>Disabled</td><td>Server requirement</td></tr>
<tr><td>Session caching</td><td>Disabled</td><td>Protocol compatibility</td></tr>
<tr><td>Cipher suites</td><td>System default</td><td>OpenSSL manages</td></tr>
</tbody>
</table>
</div>
<h3 id="single-write-requirement"><a class="header" href="#single-write-requirement">Single-Write Requirement</a></h3>
<p>A critical implementation detail: commands must be sent as single TLS Application Data records. VellumFE ensures this by building complete messages in memory before writing to the TLS stream.</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Correct: Single write
let message = format!("{}\n", line);
stream.write_all(message.as_bytes())?;

// Incorrect: Multiple writes (would fail)
stream.write_all(line.as_bytes())?;
stream.write_all(b"\n")?;
<span class="boring">}</span></code></pre>
<h2 id="see-also-63"><a class="header" href="#see-also-63">See Also</a></h2>
<ul>
<li><a href="#direct-eaccess-connection">Direct eAccess</a> - Direct connection setup</li>
<li><a href="#network-troubleshooting">Troubleshooting</a> - Connection problems</li>
<li><a href="network/README.html">Network Overview</a> - Connection modes</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="network-troubleshooting"><a class="header" href="#network-troubleshooting">Network Troubleshooting</a></h1>
<p>Solutions for common connection issues with VellumFE.</p>
<h2 id="quick-diagnostics"><a class="header" href="#quick-diagnostics">Quick Diagnostics</a></h2>
<h3 id="check-connection-status"><a class="header" href="#check-connection-status">Check Connection Status</a></h3>
<pre><code class="language-bash"># Verify VellumFE is running
ps aux | grep vellum-fe

# Check if port is in use (Lich mode)
netstat -an | grep 8000

# Test internet connectivity
ping eaccess.play.net
</code></pre>
<h3 id="view-logs"><a class="header" href="#view-logs">View Logs</a></h3>
<pre><code class="language-bash"># Tail the log file
tail -f ~/.vellum-fe/vellum-fe.log

# Search for errors
grep -i error ~/.vellum-fe/vellum-fe.log
</code></pre>
<h2 id="common-issues-1"><a class="header" href="#common-issues-1">Common Issues</a></h2>
<h3 id="connection-refused-2"><a class="header" href="#connection-refused-2">Connection Refused</a></h3>
<p><strong>Symptom</strong>:</p>
<pre><code>Error: Connection refused to 127.0.0.1:8000
</code></pre>
<p><strong>Cause</strong>: Lich proxy isn’t running or listening on the expected port.</p>
<p><strong>Solutions</strong>:</p>
<ol>
<li>
<p><strong>Verify Lich is running</strong>:</p>
<pre><code class="language-bash"># Check for Lich process
ps aux | grep -i lich
</code></pre>
</li>
<li>
<p><strong>Check Lich has connected to game</strong>:</p>
<ul>
<li>Lich must be logged into a character</li>
<li>The proxy only starts after game connection</li>
</ul>
</li>
<li>
<p><strong>Verify port number</strong>:</p>
<ul>
<li>Check Lich’s configured proxy port</li>
<li>Default is 8000, but may be different</li>
</ul>
</li>
<li>
<p><strong>Try a different port</strong>:</p>
<pre><code class="language-bash"># If 8000 is blocked, configure Lich for 8001
vellum-fe --port 8001
</code></pre>
</li>
</ol>
<h3 id="connection-timeout-1"><a class="header" href="#connection-timeout-1">Connection Timeout</a></h3>
<p><strong>Symptom</strong>:</p>
<pre><code>Error: Connection timed out
</code></pre>
<p><strong>Cause</strong>: Network issue between VellumFE and the target.</p>
<p><strong>Solutions</strong>:</p>
<ol>
<li>
<p><strong>Lich mode</strong> - Check Lich is responding:</p>
<pre><code class="language-bash">telnet 127.0.0.1 8000
</code></pre>
</li>
<li>
<p><strong>Direct mode</strong> - Check internet connectivity:</p>
<pre><code class="language-bash"># Test eAccess server
nc -zv eaccess.play.net 7910

# Or with OpenSSL
openssl s_client -connect eaccess.play.net:7910
</code></pre>
</li>
<li>
<p><strong>Firewall check</strong>:</p>
<ul>
<li>Ensure port 7910 is allowed outbound</li>
<li>Check corporate/school firewall policies</li>
</ul>
</li>
<li>
<p><strong>Try again later</strong>:</p>
<ul>
<li>Simutronics servers may be temporarily unavailable</li>
<li>Check official forums for server status</li>
</ul>
</li>
</ol>
<h3 id="authentication-failed-1"><a class="header" href="#authentication-failed-1">Authentication Failed</a></h3>
<p><strong>Symptom</strong>:</p>
<pre><code>Error: Authentication failed
</code></pre>
<p><strong>Cause</strong>: Invalid credentials or account issue.</p>
<p><strong>Solutions</strong>:</p>
<ol>
<li>
<p><strong>Verify credentials</strong>:</p>
<ul>
<li>Double-check account name (case-insensitive)</li>
<li>Verify password (case-sensitive)</li>
<li>Test login via official client first</li>
</ul>
</li>
<li>
<p><strong>Account status</strong>:</p>
<ul>
<li>Ensure subscription is active</li>
<li>Check account isn’t banned/suspended</li>
<li>Verify no billing issues</li>
</ul>
</li>
<li>
<p><strong>Character name</strong>:</p>
<ul>
<li>Confirm character exists</li>
<li>Check spelling (often case-sensitive)</li>
<li>Verify character is on correct game instance</li>
</ul>
</li>
<li>
<p><strong>Certificate issue</strong> (direct mode):</p>
<pre><code class="language-bash"># Reset certificate
rm ~/.vellum-fe/simu.pem
# Retry connection
</code></pre>
</li>
</ol>
<h3 id="tls-handshake-failed-1"><a class="header" href="#tls-handshake-failed-1">TLS Handshake Failed</a></h3>
<p><strong>Symptom</strong>:</p>
<pre><code>Error: TLS handshake failed
</code></pre>
<p><strong>Cause</strong>: SSL/TLS configuration issue.</p>
<p><strong>Solutions</strong>:</p>
<ol>
<li>
<p><strong>Update OpenSSL</strong>:</p>
<pre><code class="language-bash"># Check version
openssl version

# Update (varies by OS)
# macOS: brew upgrade openssl
# Ubuntu: sudo apt update &amp;&amp; sudo apt upgrade openssl
</code></pre>
</li>
<li>
<p><strong>Reset certificate</strong>:</p>
<pre><code class="language-bash">rm ~/.vellum-fe/simu.pem
</code></pre>
</li>
<li>
<p><strong>Check system time</strong>:</p>
<ul>
<li>TLS requires accurate system time</li>
<li>Sync with NTP server</li>
</ul>
</li>
<li>
<p><strong>Network proxy</strong>:</p>
<ul>
<li>Disable SSL inspection proxies</li>
<li>Corporate proxies may intercept TLS</li>
</ul>
</li>
</ol>
<h3 id="character-not-found"><a class="header" href="#character-not-found">Character Not Found</a></h3>
<p><strong>Symptom</strong>:</p>
<pre><code>Error: Character 'Mychar' not found on account
</code></pre>
<p><strong>Cause</strong>: Character doesn’t exist or wrong game instance.</p>
<p><strong>Solutions</strong>:</p>
<ol>
<li>
<p><strong>Check character name spelling</strong>:</p>
<ul>
<li>Some systems are case-sensitive</li>
<li>No spaces or special characters</li>
</ul>
</li>
<li>
<p><strong>Verify game instance</strong>:</p>
<pre><code class="language-bash"># GemStone IV Prime
--game prime

# GemStone IV Platinum
--game plat

# GemStone IV Test
--game test

# DragonRealms
--game dr
</code></pre>
</li>
<li>
<p><strong>List characters</strong>:</p>
<ul>
<li>Login via official client to see character list</li>
<li>Verify account has characters on that game</li>
</ul>
</li>
</ol>
<h3 id="disconnected-unexpectedly"><a class="header" href="#disconnected-unexpectedly">Disconnected Unexpectedly</a></h3>
<p><strong>Symptom</strong>: Connection drops during gameplay.</p>
<p><strong>Cause</strong>: Network instability, server kick, or timeout.</p>
<p><strong>Solutions</strong>:</p>
<ol>
<li>
<p><strong>Enable auto-reconnect</strong>:</p>
<pre><code class="language-toml">[connection]
auto_reconnect = true
reconnect_delay = 5
</code></pre>
</li>
<li>
<p><strong>Check network stability</strong>:</p>
<pre><code class="language-bash"># Monitor packet loss
ping -c 100 eaccess.play.net
</code></pre>
</li>
<li>
<p><strong>Idle timeout</strong>:</p>
<ul>
<li>Game may disconnect idle connections</li>
<li>Configure keepalive if available</li>
</ul>
</li>
<li>
<p><strong>Server-side kick</strong>:</p>
<ul>
<li>Check for policy violations</li>
<li>Too many connections from same IP</li>
<li>Anti-automation detection</li>
</ul>
</li>
</ol>
<h3 id="port-already-in-use-1"><a class="header" href="#port-already-in-use-1">Port Already in Use</a></h3>
<p><strong>Symptom</strong>:</p>
<pre><code>Error: Address already in use: 0.0.0.0:8000
</code></pre>
<p><strong>Cause</strong>: Another application is using the port.</p>
<p><strong>Solutions</strong>:</p>
<ol>
<li>
<p><strong>Find the process</strong>:</p>
<pre><code class="language-bash"># Linux/macOS
lsof -i :8000

# Windows
netstat -ano | findstr :8000
</code></pre>
</li>
<li>
<p><strong>Kill the process</strong>:</p>
<pre><code class="language-bash"># Linux/macOS
kill -9 &lt;PID&gt;

# Windows
taskkill /F /PID &lt;PID&gt;
</code></pre>
</li>
<li>
<p><strong>Use different port</strong>:</p>
<ul>
<li>Configure Lich for different port</li>
<li>Connect VellumFE to new port</li>
</ul>
</li>
</ol>
<h3 id="no-data-received"><a class="header" href="#no-data-received">No Data Received</a></h3>
<p><strong>Symptom</strong>: Connected but no game output appears.</p>
<p><strong>Cause</strong>: Stream configuration or parsing issue.</p>
<p><strong>Solutions</strong>:</p>
<ol>
<li>
<p><strong>Check stream configuration</strong>:</p>
<pre><code class="language-toml"># Ensure main window has appropriate streams
[[widgets]]
type = "text"
streams = ["main", "room", "combat"]
</code></pre>
</li>
<li>
<p><strong>Verify XML passthrough</strong> (Lich mode):</p>
<ul>
<li>Lich must pass through game XML</li>
<li>Check Lich configuration</li>
</ul>
</li>
<li>
<p><strong>Test with simple layout</strong>:</p>
<pre><code class="language-toml"># Minimal test layout
[[widgets]]
type = "text"
streams = []  # Empty = all streams
x = 0
y = 0
width = 100
height = 100
</code></pre>
</li>
<li>
<p><strong>Check logs for parsing errors</strong>:</p>
<pre><code class="language-bash">grep -i parse ~/.vellum-fe/vellum-fe.log
</code></pre>
</li>
</ol>
<h3 id="ssl-certificate-error"><a class="header" href="#ssl-certificate-error">SSL Certificate Error</a></h3>
<p><strong>Symptom</strong>:</p>
<pre><code>Error: SSL certificate problem: self signed certificate
</code></pre>
<p><strong>Cause</strong>: Certificate verification issue (expected for eAccess).</p>
<p><strong>Solutions</strong>:</p>
<ol>
<li>
<p>This is normal for first connection - certificate should be pinned automatically</p>
</li>
<li>
<p>If persistent, reset certificate:</p>
<pre><code class="language-bash">rm ~/.vellum-fe/simu.pem
</code></pre>
</li>
<li>
<p>Check no MITM proxy is intercepting traffic</p>
</li>
</ol>
<h2 id="platform-specific-issues"><a class="header" href="#platform-specific-issues">Platform-Specific Issues</a></h2>
<h3 id="windows-3"><a class="header" href="#windows-3">Windows</a></h3>
<p><strong>OpenSSL not found</strong>:</p>
<pre><code class="language-bash"># Ensure vcpkg installed OpenSSL
vcpkg list | findstr openssl

# Set VCPKG_ROOT
set VCPKG_ROOT=C:\path\to\vcpkg
</code></pre>
<p><strong>Permission denied on config</strong>:</p>
<ul>
<li>Run as Administrator once to create directories</li>
<li>Or manually create <code>%USERPROFILE%\.vellum-fe\</code></li>
</ul>
<h3 id="macos-3"><a class="header" href="#macos-3">macOS</a></h3>
<p><strong>OpenSSL version mismatch</strong>:</p>
<pre><code class="language-bash"># Use Homebrew OpenSSL
export OPENSSL_DIR=$(brew --prefix openssl)

# Or install specific version
brew install openssl@3
</code></pre>
<p><strong>Keychain access</strong>:</p>
<ul>
<li>macOS may prompt for keychain access</li>
<li>Allow VellumFE to access certificates</li>
</ul>
<h3 id="linux-3"><a class="header" href="#linux-3">Linux</a></h3>
<p><strong>Missing libraries</strong>:</p>
<pre><code class="language-bash"># Debian/Ubuntu
sudo apt install libssl-dev ca-certificates

# Fedora
sudo dnf install openssl-devel ca-certificates

# Arch
sudo pacman -S openssl
</code></pre>
<p><strong>SELinux blocking</strong>:</p>
<pre><code class="language-bash"># Check for denials
ausearch -m AVC -ts recent

# Temporarily permissive (testing only)
sudo setenforce 0
</code></pre>
<h2 id="advanced-diagnostics"><a class="header" href="#advanced-diagnostics">Advanced Diagnostics</a></h2>
<h3 id="network-capture"><a class="header" href="#network-capture">Network Capture</a></h3>
<pre><code class="language-bash"># Capture Lich traffic
tcpdump -i lo port 8000 -w lich_traffic.pcap

# Capture eAccess traffic
tcpdump -i eth0 host eaccess.play.net -w eaccess_traffic.pcap
</code></pre>
<h3 id="debug-logging"><a class="header" href="#debug-logging">Debug Logging</a></h3>
<p>Enable verbose logging:</p>
<pre><code class="language-toml"># config.toml
[logging]
level = "debug"
file = "~/.vellum-fe/debug.log"
</code></pre>
<h3 id="test-mode"><a class="header" href="#test-mode">Test Mode</a></h3>
<p>Some issues can be isolated with test connections:</p>
<pre><code class="language-bash"># Test Lich connection
echo "look" | nc localhost 8000

# Test eAccess with OpenSSL
openssl s_client -connect eaccess.play.net:7910 -quiet
</code></pre>
<h2 id="getting-help-1"><a class="header" href="#getting-help-1">Getting Help</a></h2>
<p>If issues persist:</p>
<ol>
<li><strong>Check logs</strong>: <code>~/.vellum-fe/vellum-fe.log</code></li>
<li><strong>Reproduce minimally</strong>: Simple config, default layout</li>
<li><strong>Search issues</strong>: Check GitHub issues for similar problems</li>
<li><strong>Report bug</strong>: Include:
<ul>
<li>VellumFE version</li>
<li>OS and version</li>
<li>Connection mode</li>
<li>Relevant log excerpts (redact credentials!)</li>
<li>Steps to reproduce</li>
</ul>
</li>
</ol>
<h2 id="see-also-64"><a class="header" href="#see-also-64">See Also</a></h2>
<ul>
<li><a href="#lich-proxy-connection">Lich Proxy</a> - Lich connection details</li>
<li><a href="#direct-eaccess-connection">Direct eAccess</a> - Direct connection details</li>
<li><a href="#tls-certificates">TLS Certificates</a> - Certificate management</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="development-guide"><a class="header" href="#development-guide">Development Guide</a></h1>
<p>Resources for developers who want to build, modify, or contribute to VellumFE.</p>
<h2 id="overview-30"><a class="header" href="#overview-30">Overview</a></h2>
<p>VellumFE is written in Rust, targeting terminal-based user interfaces. This section covers:</p>
<ul>
<li>Building from source</li>
<li>Understanding the codebase</li>
<li>Extending functionality</li>
<li>Contributing to the project</li>
</ul>
<h2 id="quick-start-3"><a class="header" href="#quick-start-3">Quick Start</a></h2>
<h3 id="clone-and-build"><a class="header" href="#clone-and-build">Clone and Build</a></h3>
<pre><code class="language-bash"># Clone the repository
git clone https://github.com/your-repo/vellum-fe.git
cd vellum-fe

# Build in release mode
cargo build --release

# Run
./target/release/vellum-fe --help
</code></pre>
<h3 id="prerequisites-11"><a class="header" href="#prerequisites-11">Prerequisites</a></h3>
<ul>
<li>Rust 1.70+ (latest stable recommended)</li>
<li>Cargo (comes with Rust)</li>
<li>OpenSSL development libraries</li>
<li>Platform-specific build tools</li>
</ul>
<h2 id="documentation-structure-1"><a class="header" href="#documentation-structure-1">Documentation Structure</a></h2>
<h3 id="building"><a class="header" href="#building"><a href="#building-from-source-2">Building</a></a></h3>
<p>Complete build instructions for all platforms:</p>
<ul>
<li>Development builds</li>
<li>Release builds</li>
<li>Cross-compilation</li>
<li>Troubleshooting build issues</li>
</ul>
<h3 id="project-structure"><a class="header" href="#project-structure"><a href="#project-structure-1">Project Structure</a></a></h3>
<p>Tour of the codebase:</p>
<ul>
<li>Directory layout</li>
<li>Module organization</li>
<li>Key files and their purposes</li>
<li>Architecture overview</li>
</ul>
<h3 id="adding-widgets"><a class="header" href="#adding-widgets"><a href="#adding-widgets-1">Adding Widgets</a></a></h3>
<p>Create new widget types:</p>
<ul>
<li>Widget trait implementation</li>
<li>State management</li>
<li>Rendering</li>
<li>Testing widgets</li>
</ul>
<h3 id="adding-browsers"><a class="header" href="#adding-browsers"><a href="#adding-browsers-1">Adding Browsers</a></a></h3>
<p>Create new popup browser windows:</p>
<ul>
<li>Browser trait implementation</li>
<li>Integration with widget system</li>
<li>Event handling</li>
</ul>
<h3 id="parser-extensions"><a class="header" href="#parser-extensions"><a href="#parser-extensions-1">Parser Extensions</a></a></h3>
<p>Extend the XML parser:</p>
<ul>
<li>Adding new element types</li>
<li>Custom parsing logic</li>
<li>Stream handling</li>
</ul>
<h3 id="testing-1"><a class="header" href="#testing-1"><a href="#testing-2">Testing</a></a></h3>
<p>Test patterns and practices:</p>
<ul>
<li>Unit tests</li>
<li>Integration tests</li>
<li>Manual testing</li>
<li>CI/CD</li>
</ul>
<h3 id="contributing-1"><a class="header" href="#contributing-1"><a href="#contributing-guide">Contributing</a></a></h3>
<p>How to contribute:</p>
<ul>
<li>Code style</li>
<li>Pull request process</li>
<li>Issue reporting</li>
<li>Community guidelines</li>
</ul>
<h2 id="development-workflow"><a class="header" href="#development-workflow">Development Workflow</a></h2>
<h3 id="typical-development-cycle"><a class="header" href="#typical-development-cycle">Typical Development Cycle</a></h3>
<pre><code>1. Create feature branch
   git checkout -b feature/my-feature

2. Make changes
   - Write code
   - Add tests
   - Update documentation

3. Test locally
   cargo test
   cargo run -- [test args]

4. Format and lint
   cargo fmt
   cargo clippy

5. Submit PR
   git push origin feature/my-feature
</code></pre>
<h3 id="development-build-vs-release"><a class="header" href="#development-build-vs-release">Development Build vs Release</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Aspect</th><th>Debug</th><th>Release</th></tr>
</thead>
<tbody>
<tr><td>Command</td><td><code>cargo build</code></td><td><code>cargo build --release</code></td></tr>
<tr><td>Speed</td><td>Slow</td><td>Fast</td></tr>
<tr><td>Binary size</td><td>Large</td><td>Optimized</td></tr>
<tr><td>Debug symbols</td><td>Yes</td><td>No (by default)</td></tr>
<tr><td>Compile time</td><td>Fast</td><td>Slower</td></tr>
</tbody>
</table>
</div>
<p>Use debug builds for development, release for testing performance.</p>
<h2 id="architecture-overview-1"><a class="header" href="#architecture-overview-1">Architecture Overview</a></h2>
<h3 id="three-layer-design"><a class="header" href="#three-layer-design">Three-Layer Design</a></h3>
<pre><code>┌───────────────────────────────────────────────┐
│                  Frontend (TUI)               │
│        Rendering, Input Handling, Themes      │
├───────────────────────────────────────────────┤
│                    Core                       │
│   State Management, Business Logic, Events    │
├───────────────────────────────────────────────┤
│                    Data                       │
│        Parsing, Models, Serialization         │
└───────────────────────────────────────────────┘
</code></pre>
<h3 id="key-components-1"><a class="header" href="#key-components-1">Key Components</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Component</th><th>Purpose</th><th>Location</th></tr>
</thead>
<tbody>
<tr><td>Parser</td><td>XML protocol handling</td><td><code>src/parser.rs</code></td></tr>
<tr><td>Widgets</td><td>UI components</td><td><code>src/data/widget.rs</code></td></tr>
<tr><td>State</td><td>Application state</td><td><code>src/core/</code></td></tr>
<tr><td>TUI</td><td>Terminal rendering</td><td><code>src/frontend/tui/</code></td></tr>
<tr><td>Config</td><td>Configuration loading</td><td><code>src/config.rs</code></td></tr>
<tr><td>Network</td><td>Connection handling</td><td><code>src/network.rs</code></td></tr>
</tbody>
</table>
</div>
<h2 id="getting-help-2"><a class="header" href="#getting-help-2">Getting Help</a></h2>
<h3 id="documentation"><a class="header" href="#documentation">Documentation</a></h3>
<ul>
<li>This guide (you’re reading it)</li>
<li>Inline code documentation (<code>cargo doc --open</code>)</li>
<li>Architecture docs in <code>docs/</code></li>
</ul>
<h3 id="community"><a class="header" href="#community">Community</a></h3>
<ul>
<li>GitHub Issues for bugs and features</li>
<li>Discussions for questions</li>
</ul>
<h3 id="code-questions"><a class="header" href="#code-questions">Code Questions</a></h3>
<ul>
<li>Read existing similar code</li>
<li>Check test files for usage examples</li>
<li>Ask in GitHub Discussions</li>
</ul>
<h2 id="tools"><a class="header" href="#tools">Tools</a></h2>
<h3 id="recommended-ide"><a class="header" href="#recommended-ide">Recommended IDE</a></h3>
<ul>
<li>VS Code with rust-analyzer</li>
<li>IntelliJ IDEA with Rust plugin</li>
<li>Vim/Neovim with rust.vim</li>
</ul>
<h3 id="useful-commands"><a class="header" href="#useful-commands">Useful Commands</a></h3>
<pre><code class="language-bash"># Generate documentation
cargo doc --open

# Run specific test
cargo test test_name

# Check without building
cargo check

# Format code
cargo fmt

# Lint code
cargo clippy

# Watch for changes
cargo watch -x check
</code></pre>
<h2 id="see-also-65"><a class="header" href="#see-also-65">See Also</a></h2>
<ul>
<li><a href="architecture/README.html">Architecture Overview</a> - System design</li>
<li><a href="configuration/README.html">Configuration</a> - Config file format</li>
<li><a href="widgets/README.html">Widget Reference</a> - Widget documentation</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="building-from-source-2"><a class="header" href="#building-from-source-2">Building from Source</a></h1>
<p>Complete instructions for building VellumFE on all supported platforms.</p>
<h2 id="prerequisites-12"><a class="header" href="#prerequisites-12">Prerequisites</a></h2>
<h3 id="rust-toolchain"><a class="header" href="#rust-toolchain">Rust Toolchain</a></h3>
<p>Install Rust via rustup:</p>
<pre><code class="language-bash"># Install rustup (Linux/macOS)
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh

# Or on Windows, download from https://rustup.rs/
</code></pre>
<p>Verify installation:</p>
<pre><code class="language-bash">rustc --version  # Should be 1.70+
cargo --version
</code></pre>
<h3 id="platform-specific-dependencies"><a class="header" href="#platform-specific-dependencies">Platform-Specific Dependencies</a></h3>
<h4 id="windows-4"><a class="header" href="#windows-4">Windows</a></h4>
<p><strong>Option 1: Visual Studio Build Tools</strong></p>
<ol>
<li>Install <a href="https://visualstudio.microsoft.com/downloads/">Visual Studio Build Tools</a></li>
<li>Select “Desktop development with C++”</li>
</ol>
<p><strong>Option 2: vcpkg for OpenSSL</strong></p>
<pre><code class="language-bash"># Clone vcpkg
git clone https://github.com/Microsoft/vcpkg.git
cd vcpkg
./bootstrap-vcpkg.bat

# Install OpenSSL
./vcpkg install openssl:x64-windows

# Set environment variable
set VCPKG_ROOT=C:\path\to\vcpkg
</code></pre>
<h4 id="macos-4"><a class="header" href="#macos-4">macOS</a></h4>
<pre><code class="language-bash"># Install Xcode Command Line Tools
xcode-select --install

# Install OpenSSL via Homebrew
brew install openssl

# Set OpenSSL path (add to ~/.zshrc or ~/.bashrc)
export OPENSSL_DIR=$(brew --prefix openssl)
</code></pre>
<h4 id="linux-debianubuntu"><a class="header" href="#linux-debianubuntu">Linux (Debian/Ubuntu)</a></h4>
<pre><code class="language-bash">sudo apt update
sudo apt install build-essential pkg-config libssl-dev
</code></pre>
<h4 id="linux-fedorarhel"><a class="header" href="#linux-fedorarhel">Linux (Fedora/RHEL)</a></h4>
<pre><code class="language-bash">sudo dnf install gcc openssl-devel pkg-config
</code></pre>
<h4 id="linux-arch"><a class="header" href="#linux-arch">Linux (Arch)</a></h4>
<pre><code class="language-bash">sudo pacman -S base-devel openssl pkg-config
</code></pre>
<h2 id="basic-build"><a class="header" href="#basic-build">Basic Build</a></h2>
<h3 id="clone-repository"><a class="header" href="#clone-repository">Clone Repository</a></h3>
<pre><code class="language-bash">git clone https://github.com/your-repo/vellum-fe.git
cd vellum-fe
</code></pre>
<h3 id="debug-build"><a class="header" href="#debug-build">Debug Build</a></h3>
<p>For development with debug symbols:</p>
<pre><code class="language-bash">cargo build
</code></pre>
<p>Binary location: <code>target/debug/vellum-fe</code></p>
<h3 id="release-build-1"><a class="header" href="#release-build-1">Release Build</a></h3>
<p>For optimized production build:</p>
<pre><code class="language-bash">cargo build --release
</code></pre>
<p>Binary location: <code>target/release/vellum-fe</code></p>
<h3 id="run-directly"><a class="header" href="#run-directly">Run Directly</a></h3>
<p>Without building separately:</p>
<pre><code class="language-bash"># Debug mode
cargo run -- --help

# Release mode
cargo run --release -- --host 127.0.0.1 --port 8000
</code></pre>
<h2 id="build-profiles"><a class="header" href="#build-profiles">Build Profiles</a></h2>
<h3 id="debug-profile-default"><a class="header" href="#debug-profile-default">Debug Profile (default)</a></h3>
<pre><code class="language-toml"># Cargo.toml [profile.dev]
opt-level = 0
debug = true
</code></pre>
<p>Fast compilation, slow execution, large binary.</p>
<h3 id="release-profile"><a class="header" href="#release-profile">Release Profile</a></h3>
<pre><code class="language-toml"># Cargo.toml [profile.release]
opt-level = 3
lto = true
codegen-units = 1
</code></pre>
<p>Slow compilation, fast execution, small binary.</p>
<h3 id="custom-profile"><a class="header" href="#custom-profile">Custom Profile</a></h3>
<p>Create a custom profile in <code>Cargo.toml</code>:</p>
<pre><code class="language-toml">[profile.release-with-debug]
inherits = "release"
debug = true
</code></pre>
<p>Build with: <code>cargo build --profile release-with-debug</code></p>
<h2 id="feature-flags"><a class="header" href="#feature-flags">Feature Flags</a></h2>
<p>VellumFE may have optional features:</p>
<pre><code class="language-bash"># Build with specific features
cargo build --features "feature1,feature2"

# Build with all features
cargo build --all-features

# Build without default features
cargo build --no-default-features
</code></pre>
<p>Check <code>Cargo.toml</code> for available features.</p>
<h2 id="cross-compilation"><a class="header" href="#cross-compilation">Cross-Compilation</a></h2>
<h3 id="setup"><a class="header" href="#setup">Setup</a></h3>
<p>Install cross-compilation targets:</p>
<pre><code class="language-bash"># List available targets
rustup target list

# Add a target
rustup target add x86_64-unknown-linux-gnu
rustup target add x86_64-pc-windows-gnu
rustup target add aarch64-apple-darwin
</code></pre>
<h3 id="build-for-target"><a class="header" href="#build-for-target">Build for Target</a></h3>
<pre><code class="language-bash">cargo build --release --target x86_64-unknown-linux-gnu
</code></pre>
<h3 id="using-cross"><a class="header" href="#using-cross">Using cross</a></h3>
<p>For easier cross-compilation with Docker:</p>
<pre><code class="language-bash"># Install cross
cargo install cross

# Build for Linux from any platform
cross build --release --target x86_64-unknown-linux-gnu
</code></pre>
<h2 id="build-optimization"><a class="header" href="#build-optimization">Build Optimization</a></h2>
<h3 id="link-time-optimization-lto"><a class="header" href="#link-time-optimization-lto">Link-Time Optimization (LTO)</a></h3>
<p>Already enabled in release profile:</p>
<pre><code class="language-toml">[profile.release]
lto = true
</code></pre>
<h3 id="strip-symbols"><a class="header" href="#strip-symbols">Strip Symbols</a></h3>
<p>Reduce binary size:</p>
<pre><code class="language-bash"># After building
strip target/release/vellum-fe
</code></pre>
<p>Or configure in <code>Cargo.toml</code>:</p>
<pre><code class="language-toml">[profile.release]
strip = true
</code></pre>
<h3 id="size-optimization"><a class="header" href="#size-optimization">Size Optimization</a></h3>
<p>For minimal binary size:</p>
<pre><code class="language-toml">[profile.release]
opt-level = "z"  # Optimize for size
lto = true
strip = true
panic = "abort"
codegen-units = 1
</code></pre>
<h2 id="dependency-management"><a class="header" href="#dependency-management">Dependency Management</a></h2>
<h3 id="update-dependencies"><a class="header" href="#update-dependencies">Update Dependencies</a></h3>
<pre><code class="language-bash"># Check for outdated dependencies
cargo outdated

# Update all dependencies
cargo update

# Update specific dependency
cargo update -p package_name
</code></pre>
<h3 id="audit-dependencies"><a class="header" href="#audit-dependencies">Audit Dependencies</a></h3>
<pre><code class="language-bash"># Install cargo-audit
cargo install cargo-audit

# Check for security vulnerabilities
cargo audit
</code></pre>
<h2 id="build-troubleshooting"><a class="header" href="#build-troubleshooting">Build Troubleshooting</a></h2>
<h3 id="openssl-not-found-1"><a class="header" href="#openssl-not-found-1">OpenSSL Not Found</a></h3>
<p><strong>Error</strong>: <code>Could not find directory of OpenSSL installation</code></p>
<p><strong>Windows Solution</strong>:</p>
<pre><code class="language-bash"># Set vcpkg root
set VCPKG_ROOT=C:\path\to\vcpkg

# Or set OpenSSL dir directly
set OPENSSL_DIR=C:\path\to\openssl
</code></pre>
<p><strong>macOS Solution</strong>:</p>
<pre><code class="language-bash">export OPENSSL_DIR=$(brew --prefix openssl)
export OPENSSL_INCLUDE_DIR=$OPENSSL_DIR/include
export OPENSSL_LIB_DIR=$OPENSSL_DIR/lib
</code></pre>
<p><strong>Linux Solution</strong>:</p>
<pre><code class="language-bash"># Debian/Ubuntu
sudo apt install libssl-dev pkg-config

# Ensure pkg-config can find it
pkg-config --libs openssl
</code></pre>
<h3 id="linker-errors"><a class="header" href="#linker-errors">Linker Errors</a></h3>
<p><strong>Error</strong>: <code>linking with cc failed</code></p>
<p><strong>Solutions</strong>:</p>
<ol>
<li>Install build tools for your platform</li>
<li>Check library paths are correct</li>
<li>Ensure all dependencies are installed</li>
</ol>
<h3 id="out-of-memory"><a class="header" href="#out-of-memory">Out of Memory</a></h3>
<p><strong>Error</strong>: <code>out of memory during compilation</code></p>
<p><strong>Solutions</strong>:</p>
<ol>
<li>Use fewer codegen units:
<pre><code class="language-toml">[profile.release]
codegen-units = 1
</code></pre>
</li>
<li>Reduce parallel jobs:
<pre><code class="language-bash">cargo build -j 2
</code></pre>
</li>
<li>Close other applications</li>
</ol>
<h3 id="slow-builds"><a class="header" href="#slow-builds">Slow Builds</a></h3>
<p><strong>Improve build times</strong>:</p>
<ol>
<li>
<p>Use <code>sccache</code>:</p>
<pre><code class="language-bash">cargo install sccache
export RUSTC_WRAPPER=sccache
</code></pre>
</li>
<li>
<p>Use <code>mold</code> linker (Linux):</p>
<pre><code class="language-bash"># Install mold
sudo apt install mold

# Configure in .cargo/config.toml
[target.x86_64-unknown-linux-gnu]
linker = "clang"
rustflags = ["-C", "link-arg=-fuse-ld=mold"]
</code></pre>
</li>
<li>
<p>Incremental compilation (default in debug)</p>
</li>
</ol>
<h2 id="cicd"><a class="header" href="#cicd">CI/CD</a></h2>
<h3 id="github-actions-example"><a class="header" href="#github-actions-example">GitHub Actions Example</a></h3>
<pre><code class="language-yaml">name: Build

on: [push, pull_request]

jobs:
  build:
    runs-on: ${{ matrix.os }}
    strategy:
      matrix:
        os: [ubuntu-latest, windows-latest, macos-latest]

    steps:
      - uses: actions/checkout@v3

      - name: Install Rust
        uses: dtolnay/rust-action@stable

      - name: Build
        run: cargo build --release

      - name: Test
        run: cargo test
</code></pre>
<h2 id="verification"><a class="header" href="#verification">Verification</a></h2>
<h3 id="run-tests"><a class="header" href="#run-tests">Run Tests</a></h3>
<pre><code class="language-bash">cargo test
</code></pre>
<h3 id="run-application"><a class="header" href="#run-application">Run Application</a></h3>
<pre><code class="language-bash"># Show help
./target/release/vellum-fe --help

# Test connection
./target/release/vellum-fe --host 127.0.0.1 --port 8000
</code></pre>
<h3 id="check-binary"><a class="header" href="#check-binary">Check Binary</a></h3>
<pre><code class="language-bash"># File type
file target/release/vellum-fe

# Dependencies (Linux)
ldd target/release/vellum-fe

# Size
ls -lh target/release/vellum-fe
</code></pre>
<h2 id="see-also-66"><a class="header" href="#see-also-66">See Also</a></h2>
<ul>
<li><a href="#project-structure-1">Project Structure</a> - Codebase overview</li>
<li><a href="#testing-2">Testing</a> - Test patterns</li>
<li><a href="#contributing-guide">Contributing</a> - Contribution guide</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="project-structure-1"><a class="header" href="#project-structure-1">Project Structure</a></h1>
<p>A guided tour of the VellumFE codebase.</p>
<h2 id="directory-layout"><a class="header" href="#directory-layout">Directory Layout</a></h2>
<pre><code>vellum-fe/
├── Cargo.toml           # Project manifest
├── Cargo.lock           # Dependency lock file
├── CLAUDE.md            # Development notes
├── README.md            # Project readme
│
├── src/
│   ├── main.rs          # Entry point
│   ├── lib.rs           # Library root (if applicable)
│   ├── config.rs        # Configuration loading
│   ├── parser.rs        # XML protocol parser
│   ├── network.rs       # Network connections
│   │
│   ├── core/            # Core business logic
│   │   ├── mod.rs
│   │   ├── app_core/    # Application state
│   │   │   ├── mod.rs
│   │   │   ├── state.rs
│   │   │   └── layout.rs
│   │   └── menu_actions.rs
│   │
│   ├── data/            # Data models
│   │   ├── mod.rs
│   │   └── widget.rs    # Widget data structures
│   │
│   └── frontend/        # User interface
│       └── tui/         # Terminal UI
│           ├── mod.rs
│           ├── input.rs
│           ├── input_handlers.rs
│           ├── command_input.rs
│           ├── text_window.rs
│           ├── tabbed_text_window.rs
│           ├── search.rs
│           ├── sync.rs
│           ├── menu_actions.rs
│           └── window_editor.rs
│
├── book/                # mdbook documentation
│   ├── book.toml
│   └── src/
│       └── *.md
│
├── tests/               # Integration tests
│   └── *.rs
│
└── docs/                # Additional documentation
</code></pre>
<h2 id="module-organization-1"><a class="header" href="#module-organization-1">Module Organization</a></h2>
<h3 id="three-layer-architecture"><a class="header" href="#three-layer-architecture">Three-Layer Architecture</a></h3>
<pre><code>┌─────────────────────────────────────────────────────────────┐
│                    src/frontend/tui/                        │
│                                                             │
│    Terminal rendering, input handling, visual themes        │
│    Knows about: core, data                                  │
└─────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────┐
│                        src/core/                            │
│                                                             │
│    Application state, business logic, event processing      │
│    Knows about: data                                        │
└─────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────┐
│                        src/data/                            │
│                                                             │
│    Data models, parsing, serialization                      │
│    Knows about: nothing (foundation layer)                  │
└─────────────────────────────────────────────────────────────┘
</code></pre>
<p><strong>Import rule</strong>: Upper layers can import lower layers, not vice versa.</p>
<h2 id="key-files"><a class="header" href="#key-files">Key Files</a></h2>
<h3 id="entry-point-srcmainrs"><a class="header" href="#entry-point-srcmainrs">Entry Point: <code>src/main.rs</code></a></h3>
<pre class="playground"><code class="language-rust">// Typical structure
fn main() {
    // Parse command line arguments
    let args = Args::parse();

    // Load configuration
    let config = Config::load(&amp;args)?;

    // Initialize application
    let app = App::new(config)?;

    // Run main loop
    app.run()?;
}</code></pre>
<p>Responsibilities:</p>
<ul>
<li>CLI argument parsing</li>
<li>Configuration loading</li>
<li>Application initialization</li>
<li>Main event loop</li>
</ul>
<h3 id="configuration-srcconfigrs"><a class="header" href="#configuration-srcconfigrs">Configuration: <code>src/config.rs</code></a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Configuration structures
pub struct Config {
    pub connection: ConnectionConfig,
    pub layout: LayoutConfig,
    pub colors: ColorConfig,
    pub keybinds: KeybindConfig,
    // ...
}

impl Config {
    pub fn load(path: &amp;Path) -&gt; Result&lt;Self&gt; { ... }
    pub fn save(&amp;self, path: &amp;Path) -&gt; Result&lt;()&gt; { ... }
}
<span class="boring">}</span></code></pre>
<p>Responsibilities:</p>
<ul>
<li>TOML parsing</li>
<li>Default values</li>
<li>Validation</li>
<li>Serialization</li>
</ul>
<h3 id="parser-srcparserrs"><a class="header" href="#parser-srcparserrs">Parser: <code>src/parser.rs</code></a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// XML protocol parsing
pub enum ParsedElement {
    Text(String),
    RoomName(String),
    RoomDesc(String),
    Prompt(PromptData),
    Vitals(VitalsData),
    // Many more variants...
}

pub struct Parser {
    // Parser state
}

impl Parser {
    pub fn parse(&amp;mut self, input: &amp;str) -&gt; Vec&lt;ParsedElement&gt; { ... }
}
<span class="boring">}</span></code></pre>
<p>Responsibilities:</p>
<ul>
<li>XML tag recognition</li>
<li>State machine parsing</li>
<li>Element extraction</li>
<li>Stream identification</li>
</ul>
<h3 id="network-srcnetworkrs"><a class="header" href="#network-srcnetworkrs">Network: <code>src/network.rs</code></a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Connection handling
pub enum ConnectionMode {
    Lich { host: String, port: u16 },
    Direct { account: String, ... },
}

pub struct Connection {
    mode: ConnectionMode,
    stream: TcpStream,
}

impl Connection {
    pub fn connect(mode: ConnectionMode) -&gt; Result&lt;Self&gt; { ... }
    pub fn send(&amp;mut self, data: &amp;str) -&gt; Result&lt;()&gt; { ... }
    pub fn receive(&amp;mut self) -&gt; Result&lt;String&gt; { ... }
}
<span class="boring">}</span></code></pre>
<p>Responsibilities:</p>
<ul>
<li>Connection establishment</li>
<li>TLS handling (direct mode)</li>
<li>Data transmission</li>
<li>Reconnection logic</li>
</ul>
<h3 id="widget-data-srcdatawidgetrs"><a class="header" href="#widget-data-srcdatawidgetrs">Widget Data: <code>src/data/widget.rs</code></a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Widget type definitions
pub enum WidgetType {
    Text,
    TabbedText,
    Progress,
    Compass,
    // ...
}

pub struct WidgetConfig {
    pub widget_type: WidgetType,
    pub name: String,
    pub x: u16,
    pub y: u16,
    pub width: u16,
    pub height: u16,
    // Type-specific config...
}
<span class="boring">}</span></code></pre>
<p>Responsibilities:</p>
<ul>
<li>Widget type enumeration</li>
<li>Configuration structures</li>
<li>Layout data</li>
<li>Serialization traits</li>
</ul>
<h3 id="application-state-srccoreapp_corestaters"><a class="header" href="#application-state-srccoreapp_corestaters">Application State: <code>src/core/app_core/state.rs</code></a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Application state management
pub struct AppState {
    pub vitals: Vitals,
    pub room: RoomInfo,
    pub inventory: Inventory,
    pub indicators: Indicators,
    // ...
    generation: u64,  // Change tracking
}

impl AppState {
    pub fn update(&amp;mut self, element: ParsedElement) {
        // Update state based on parsed element
        self.generation += 1;
    }
}
<span class="boring">}</span></code></pre>
<p>Responsibilities:</p>
<ul>
<li>Game state tracking</li>
<li>Update processing</li>
<li>Change notification</li>
<li>Generation counting</li>
</ul>
<h3 id="layout-srccoreapp_corelayoutrs"><a class="header" href="#layout-srccoreapp_corelayoutrs">Layout: <code>src/core/app_core/layout.rs</code></a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Layout management
pub struct Layout {
    widgets: Vec&lt;Widget&gt;,
    focus_index: usize,
}

impl Layout {
    pub fn load(config: &amp;LayoutConfig) -&gt; Result&lt;Self&gt; { ... }
    pub fn render(&amp;self, frame: &amp;mut Frame) { ... }
    pub fn handle_input(&amp;mut self, key: KeyEvent) { ... }
}
<span class="boring">}</span></code></pre>
<p>Responsibilities:</p>
<ul>
<li>Widget arrangement</li>
<li>Focus management</li>
<li>Layout loading</li>
<li>Coordinate calculation</li>
</ul>
<h3 id="tui-module-srcfrontendtuimodrs"><a class="header" href="#tui-module-srcfrontendtuimodrs">TUI Module: <code>src/frontend/tui/mod.rs</code></a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Terminal UI main module
pub struct Tui {
    terminal: Terminal&lt;Backend&gt;,
    layout: Layout,
    state: AppState,
}

impl Tui {
    pub fn new() -&gt; Result&lt;Self&gt; { ... }
    pub fn run(&amp;mut self) -&gt; Result&lt;()&gt; { ... }
    pub fn render(&amp;mut self) -&gt; Result&lt;()&gt; { ... }
    pub fn handle_event(&amp;mut self, event: Event) -&gt; Result&lt;()&gt; { ... }
}
<span class="boring">}</span></code></pre>
<p>Responsibilities:</p>
<ul>
<li>Terminal setup/teardown</li>
<li>Event loop</li>
<li>Rendering coordination</li>
<li>Input routing</li>
</ul>
<h2 id="data-flow"><a class="header" href="#data-flow">Data Flow</a></h2>
<h3 id="incoming-data"><a class="header" href="#incoming-data">Incoming Data</a></h3>
<pre><code>Network → Parser → State Update → Widget Sync → Render
   │         │           │              │           │
   │         │           │              │           └─ TUI draws frame
   │         │           │              └─ Widgets check generation
   │         │           └─ AppState updates, bumps generation
   │         └─ Raw XML → ParsedElements
   └─ TCP/TLS receives bytes
</code></pre>
<h3 id="user-input"><a class="header" href="#user-input">User Input</a></h3>
<pre><code>Terminal Event → TUI → Handler → Action → Effect
      │           │        │        │         │
      │           │        │        │         └─ State change or command send
      │           │        │        └─ Keybind lookup / macro expansion
      │           │        └─ Input type routing (key/mouse/resize)
      │           └─ Event loop captures
      └─ User presses key
</code></pre>
<h2 id="testing-structure"><a class="header" href="#testing-structure">Testing Structure</a></h2>
<pre><code>tests/
├── integration_test.rs   # Full application tests
├── parser_tests.rs       # Parser-specific tests
└── widget_tests.rs       # Widget rendering tests

src/
├── parser.rs
│   └── #[cfg(test)] mod tests { ... }  # Unit tests
└── config.rs
    └── #[cfg(test)] mod tests { ... }  # Unit tests
</code></pre>
<h2 id="configuration-files-2"><a class="header" href="#configuration-files-2">Configuration Files</a></h2>
<p>User configuration (runtime):</p>
<pre><code>~/.vellum-fe/
├── config.toml
├── layout.toml
├── colors.toml
├── highlights.toml
├── keybinds.toml
├── triggers.toml
└── simu.pem
</code></pre>
<h2 id="documentation-1"><a class="header" href="#documentation-1">Documentation</a></h2>
<pre><code>book/                    # mdbook documentation (this!)
├── book.toml
└── src/
    ├── SUMMARY.md
    └── *.md

docs/                    # Additional docs
└── *.md
</code></pre>
<h2 id="build-artifacts"><a class="header" href="#build-artifacts">Build Artifacts</a></h2>
<pre><code>target/
├── debug/               # Debug build
│   └── vellum-fe
├── release/             # Release build
│   └── vellum-fe
└── doc/                 # Generated documentation
    └── vellum_fe/
</code></pre>
<h2 id="see-also-67"><a class="header" href="#see-also-67">See Also</a></h2>
<ul>
<li><a href="architecture/README.html">Architecture</a> - System design</li>
<li><a href="#adding-widgets-1">Adding Widgets</a> - Extend widget system</li>
<li><a href="#parser-extensions-1">Parser Extensions</a> - Extend parser</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="adding-widgets-1"><a class="header" href="#adding-widgets-1">Adding Widgets</a></h1>
<p>Guide to creating new widget types for VellumFE.</p>
<h2 id="overview-31"><a class="header" href="#overview-31">Overview</a></h2>
<p>Widgets are the visual building blocks of VellumFE. Each widget type:</p>
<ul>
<li>Displays specific data</li>
<li>Has its own rendering logic</li>
<li>Responds to state changes</li>
<li>May handle user input</li>
</ul>
<h2 id="widget-architecture"><a class="header" href="#widget-architecture">Widget Architecture</a></h2>
<h3 id="widget-lifecycle"><a class="header" href="#widget-lifecycle">Widget Lifecycle</a></h3>
<pre><code>Configuration → Creation → State Sync → Render → Input (optional)
     │             │            │          │           │
     │             │            │          │           └─ Handle focus/keys
     │             │            │          └─ Draw to terminal frame
     │             │            └─ Check generation, update data
     │             └─ Instantiate from config
     └─ TOML defines type and properties
</code></pre>
<h3 id="key-traits"><a class="header" href="#key-traits">Key Traits</a></h3>
<p>Widgets implement several traits:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Core widget behavior
pub trait Widget {
    fn render(&amp;self, frame: &amp;mut Frame, area: Rect);
    fn name(&amp;self) -&gt; &amp;str;
    fn can_focus(&amp;self) -&gt; bool;
}

// State synchronization
pub trait Syncable {
    fn sync(&amp;mut self, state: &amp;AppState) -&gt; bool;
    fn last_generation(&amp;self) -&gt; u64;
}

// Input handling (optional)
pub trait Interactive {
    fn handle_key(&amp;mut self, key: KeyEvent) -&gt; bool;
    fn handle_mouse(&amp;mut self, mouse: MouseEvent) -&gt; bool;
}
<span class="boring">}</span></code></pre>
<h2 id="step-by-step-new-widget"><a class="header" href="#step-by-step-new-widget">Step-by-Step: New Widget</a></h2>
<p>Let’s create a “SpellTimer” widget that displays active spell durations.</p>
<h3 id="step-1-define-the-widget-type"><a class="header" href="#step-1-define-the-widget-type">Step 1: Define the Widget Type</a></h3>
<p>Add to <code>src/data/widget.rs</code>:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[derive(Debug, Clone, Serialize, Deserialize)]
pub enum WidgetType {
    Text,
    Progress,
    Compass,
    // ... existing types ...
    SpellTimer,  // Add new type
}
<span class="boring">}</span></code></pre>
<h3 id="step-2-create-widget-configuration"><a class="header" href="#step-2-create-widget-configuration">Step 2: Create Widget Configuration</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// In src/data/widget.rs or dedicated file

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct SpellTimerConfig {
    pub name: String,
    pub x: u16,
    pub y: u16,
    pub width: u16,
    pub height: u16,

    // Widget-specific options
    pub show_duration: bool,
    pub group_by_circle: bool,
    pub max_display: usize,
}

impl Default for SpellTimerConfig {
    fn default() -&gt; Self {
        Self {
            name: "spell_timer".into(),
            x: 0,
            y: 0,
            width: 20,
            height: 10,
            show_duration: true,
            group_by_circle: false,
            max_display: 10,
        }
    }
}
<span class="boring">}</span></code></pre>
<h3 id="step-3-create-widget-structure"><a class="header" href="#step-3-create-widget-structure">Step 3: Create Widget Structure</a></h3>
<p>Create <code>src/frontend/tui/spell_timer.rs</code>:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use crate::core::AppState;
use crate::data::SpellTimerConfig;
use ratatui::prelude::*;
use ratatui::widgets::*;

pub struct SpellTimerWidget {
    config: SpellTimerConfig,
    spells: Vec&lt;ActiveSpell&gt;,
    last_generation: u64,
}

#[derive(Clone)]
struct ActiveSpell {
    name: String,
    duration: u32,
    circle: u8,
}

impl SpellTimerWidget {
    pub fn new(config: SpellTimerConfig) -&gt; Self {
        Self {
            config,
            spells: Vec::new(),
            last_generation: 0,
        }
    }
}
<span class="boring">}</span></code></pre>
<h3 id="step-4-implement-widget-trait"><a class="header" href="#step-4-implement-widget-trait">Step 4: Implement Widget Trait</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>impl Widget for SpellTimerWidget {
    fn render(&amp;self, frame: &amp;mut Frame, area: Rect) {
        // Create border
        let block = Block::default()
            .title("Spells")
            .borders(Borders::ALL);

        let inner = block.inner(area);
        frame.render_widget(block, area);

        // Render spell list
        let items: Vec&lt;ListItem&gt; = self.spells
            .iter()
            .take(self.config.max_display)
            .map(|spell| {
                let text = if self.config.show_duration {
                    format!("{}: {}s", spell.name, spell.duration)
                } else {
                    spell.name.clone()
                };
                ListItem::new(text)
            })
            .collect();

        let list = List::new(items);
        frame.render_widget(list, inner);
    }

    fn name(&amp;self) -&gt; &amp;str {
        &amp;self.config.name
    }

    fn can_focus(&amp;self) -&gt; bool {
        false  // This widget doesn't need focus
    }
}
<span class="boring">}</span></code></pre>
<h3 id="step-5-implement-syncable-trait"><a class="header" href="#step-5-implement-syncable-trait">Step 5: Implement Syncable Trait</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>impl Syncable for SpellTimerWidget {
    fn sync(&amp;mut self, state: &amp;AppState) -&gt; bool {
        // Check if state has changed
        if state.generation() == self.last_generation {
            return false;  // No changes
        }

        // Update spell list from state
        self.spells = state.active_spells()
            .iter()
            .map(|s| ActiveSpell {
                name: s.name.clone(),
                duration: s.remaining_seconds,
                circle: s.circle,
            })
            .collect();

        // Apply grouping if configured
        if self.config.group_by_circle {
            self.spells.sort_by_key(|s| s.circle);
        }

        self.last_generation = state.generation();
        true  // Widget needs redraw
    }

    fn last_generation(&amp;self) -&gt; u64 {
        self.last_generation
    }
}
<span class="boring">}</span></code></pre>
<h3 id="step-6-register-widget-type"><a class="header" href="#step-6-register-widget-type">Step 6: Register Widget Type</a></h3>
<p>In the widget factory (typically <code>src/frontend/tui/mod.rs</code> or dedicated factory):</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub fn create_widget(config: &amp;WidgetConfig) -&gt; Box&lt;dyn Widget&gt; {
    match config.widget_type {
        WidgetType::Text =&gt; Box::new(TextWidget::new(config.into())),
        WidgetType::Progress =&gt; Box::new(ProgressWidget::new(config.into())),
        // ... existing types ...
        WidgetType::SpellTimer =&gt; Box::new(SpellTimerWidget::new(config.into())),
    }
}
<span class="boring">}</span></code></pre>
<h3 id="step-7-add-to-module"><a class="header" href="#step-7-add-to-module">Step 7: Add to Module</a></h3>
<p>In <code>src/frontend/tui/mod.rs</code>:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>mod spell_timer;
pub use spell_timer::SpellTimerWidget;
<span class="boring">}</span></code></pre>
<h3 id="step-8-document-configuration"><a class="header" href="#step-8-document-configuration">Step 8: Document Configuration</a></h3>
<p>Update TOML documentation:</p>
<pre><code class="language-toml"># Example spell timer configuration
[[widgets]]
type = "spell_timer"
name = "spells"
x = 80
y = 0
width = 20
height = 15
show_duration = true
group_by_circle = true
max_display = 10
</code></pre>
<h2 id="widget-best-practices"><a class="header" href="#widget-best-practices">Widget Best Practices</a></h2>
<h3 id="state-management"><a class="header" href="#state-management">State Management</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// GOOD: Check generation before updating
fn sync(&amp;mut self, state: &amp;AppState) -&gt; bool {
    if state.generation() == self.last_generation {
        return false;
    }
    // ... update ...
    self.last_generation = state.generation();
    true
}

// BAD: Always update (wasteful)
fn sync(&amp;mut self, state: &amp;AppState) -&gt; bool {
    // ... update ...
    true  // Always redraws
}
<span class="boring">}</span></code></pre>
<h3 id="efficient-rendering"><a class="header" href="#efficient-rendering">Efficient Rendering</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// GOOD: Cache computed values
struct MyWidget {
    cached_lines: Vec&lt;Line&lt;'static&gt;&gt;,
    // ...
}

fn sync(&amp;mut self, state: &amp;AppState) -&gt; bool {
    // Rebuild cache only when data changes
    self.cached_lines = self.compute_lines(state);
    true
}

fn render(&amp;self, frame: &amp;mut Frame, area: Rect) {
    // Use cached data
    let paragraph = Paragraph::new(self.cached_lines.clone());
    frame.render_widget(paragraph, area);
}
<span class="boring">}</span></code></pre>
<h3 id="configuration-validation"><a class="header" href="#configuration-validation">Configuration Validation</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>impl SpellTimerConfig {
    pub fn validate(&amp;self) -&gt; Result&lt;(), String&gt; {
        if self.width == 0 || self.height == 0 {
            return Err("Widget must have non-zero dimensions".into());
        }
        if self.max_display == 0 {
            return Err("max_display must be at least 1".into());
        }
        Ok(())
    }
}
<span class="boring">}</span></code></pre>
<h3 id="error-handling-1"><a class="header" href="#error-handling-1">Error Handling</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn render(&amp;self, frame: &amp;mut Frame, area: Rect) {
    // Handle edge cases gracefully
    if area.width &lt; 3 || area.height &lt; 3 {
        // Area too small to render
        return;
    }

    if self.spells.is_empty() {
        // Show placeholder
        let text = Paragraph::new("No active spells");
        frame.render_widget(text, area);
        return;
    }

    // Normal rendering...
}
<span class="boring">}</span></code></pre>
<h2 id="testing-widgets"><a class="header" href="#testing-widgets">Testing Widgets</a></h2>
<h3 id="unit-tests"><a class="header" href="#unit-tests">Unit Tests</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[cfg(test)]
mod tests {
    use super::*;

    #[test]
    fn test_widget_creation() {
        let config = SpellTimerConfig::default();
        let widget = SpellTimerWidget::new(config);
        assert_eq!(widget.name(), "spell_timer");
    }

    #[test]
    fn test_sync_updates_generation() {
        let mut widget = SpellTimerWidget::new(Default::default());
        let mut state = AppState::new();

        state.set_generation(1);
        assert!(widget.sync(&amp;state));
        assert_eq!(widget.last_generation(), 1);

        // Same generation shouldn't trigger update
        assert!(!widget.sync(&amp;state));
    }
}
<span class="boring">}</span></code></pre>
<h3 id="visual-testing"><a class="header" href="#visual-testing">Visual Testing</a></h3>
<p>Create a test layout that isolates your widget:</p>
<pre><code class="language-toml"># test_layout.toml
[[widgets]]
type = "spell_timer"
name = "test"
x = 0
y = 0
width = 100
height = 100
</code></pre>
<h2 id="see-also-68"><a class="header" href="#see-also-68">See Also</a></h2>
<ul>
<li><a href="widgets/README.html">Widget Reference</a> - Existing widgets</li>
<li><a href="#project-structure-1">Project Structure</a> - Code organization</li>
<li><a href="#widget-synchronization">Architecture</a> - Sync system</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="adding-browsers-1"><a class="header" href="#adding-browsers-1">Adding Browsers</a></h1>
<p>Guide to creating new browser (popup window) types for VellumFE.</p>
<h2 id="overview-32"><a class="header" href="#overview-32">Overview</a></h2>
<p>Browsers are popup windows that provide extended functionality:</p>
<ul>
<li>Configuration editors</li>
<li>Search interfaces</li>
<li>Help dialogs</li>
<li>Selection menus</li>
</ul>
<p>They overlay the main interface temporarily and capture input focus.</p>
<h2 id="browser-architecture"><a class="header" href="#browser-architecture">Browser Architecture</a></h2>
<h3 id="browser-lifecycle"><a class="header" href="#browser-lifecycle">Browser Lifecycle</a></h3>
<pre><code>Trigger → Creation → Render → Input Loop → Result → Cleanup
   │          │         │          │          │         │
   │          │         │          │          │         └─ Restore main UI
   │          │         │          │          └─ Return data or action
   │          │         │          └─ Handle keys until dismiss
   │          │         └─ Draw overlay on screen
   │          └─ Instantiate browser with context
   └─ Keybind or menu action
</code></pre>
<h3 id="key-components-2"><a class="header" href="#key-components-2">Key Components</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Browser trait defines popup behavior
pub trait Browser {
    fn render(&amp;self, frame: &amp;mut Frame, area: Rect);
    fn handle_input(&amp;mut self, key: KeyEvent) -&gt; BrowserResult;
    fn title(&amp;self) -&gt; &amp;str;
}

// Result of browser interaction
pub enum BrowserResult {
    Continue,           // Keep browser open
    Close,              // Close without action
    Action(BrowserAction),  // Close with action
}

pub enum BrowserAction {
    SelectItem(String),
    UpdateConfig(ConfigChange),
    ExecuteCommand(String),
    // ...
}
<span class="boring">}</span></code></pre>
<h2 id="step-by-step-new-browser"><a class="header" href="#step-by-step-new-browser">Step-by-Step: New Browser</a></h2>
<p>Let’s create a “HighlightEditor” browser for editing highlight patterns.</p>
<h3 id="step-1-define-browser-structure"><a class="header" href="#step-1-define-browser-structure">Step 1: Define Browser Structure</a></h3>
<p>Create <code>src/frontend/tui/highlight_editor.rs</code>:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use ratatui::prelude::*;
use ratatui::widgets::*;

pub struct HighlightEditor {
    highlights: Vec&lt;HighlightEntry&gt;,
    selected: usize,
    editing: Option&lt;EditField&gt;,
    scroll_offset: usize,
}

struct HighlightEntry {
    pattern: String,
    foreground: String,
    background: Option&lt;String&gt;,
    enabled: bool,
}

enum EditField {
    Pattern,
    Foreground,
    Background,
}

impl HighlightEditor {
    pub fn new(highlights: Vec&lt;HighlightConfig&gt;) -&gt; Self {
        let entries = highlights.into_iter()
            .map(|h| HighlightEntry {
                pattern: h.pattern,
                foreground: h.fg,
                background: h.bg,
                enabled: h.enabled,
            })
            .collect();

        Self {
            highlights: entries,
            selected: 0,
            editing: None,
            scroll_offset: 0,
        }
    }
}
<span class="boring">}</span></code></pre>
<h3 id="step-2-implement-browser-trait"><a class="header" href="#step-2-implement-browser-trait">Step 2: Implement Browser Trait</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>impl Browser for HighlightEditor {
    fn title(&amp;self) -&gt; &amp;str {
        "Highlight Editor"
    }

    fn render(&amp;self, frame: &amp;mut Frame, area: Rect) {
        // Calculate centered popup area
        let popup_area = centered_rect(80, 80, area);

        // Clear background
        frame.render_widget(Clear, popup_area);

        // Draw border
        let block = Block::default()
            .title(self.title())
            .borders(Borders::ALL)
            .border_style(Style::default().fg(Color::Cyan));

        let inner = block.inner(popup_area);
        frame.render_widget(block, popup_area);

        // Split into list and detail areas
        let chunks = Layout::default()
            .direction(Direction::Horizontal)
            .constraints([
                Constraint::Percentage(50),
                Constraint::Percentage(50),
            ])
            .split(inner);

        // Render highlight list
        self.render_list(frame, chunks[0]);

        // Render selected highlight details
        self.render_details(frame, chunks[1]);

        // Render help bar at bottom
        self.render_help(frame, popup_area);
    }

    fn handle_input(&amp;mut self, key: KeyEvent) -&gt; BrowserResult {
        match key.code {
            KeyCode::Esc =&gt; {
                if self.editing.is_some() {
                    self.editing = None;
                    BrowserResult::Continue
                } else {
                    BrowserResult::Close
                }
            }
            KeyCode::Enter =&gt; {
                if self.editing.is_some() {
                    self.commit_edit();
                    self.editing = None;
                } else {
                    self.start_edit();
                }
                BrowserResult::Continue
            }
            KeyCode::Up =&gt; {
                self.move_selection(-1);
                BrowserResult::Continue
            }
            KeyCode::Down =&gt; {
                self.move_selection(1);
                BrowserResult::Continue
            }
            KeyCode::Char('s') if key.modifiers.contains(KeyModifiers::CONTROL) =&gt; {
                BrowserResult::Action(BrowserAction::UpdateConfig(
                    self.build_config_change()
                ))
            }
            KeyCode::Char('n') if key.modifiers.contains(KeyModifiers::CONTROL) =&gt; {
                self.add_new_highlight();
                BrowserResult::Continue
            }
            KeyCode::Delete =&gt; {
                self.delete_selected();
                BrowserResult::Continue
            }
            _ =&gt; {
                if self.editing.is_some() {
                    self.handle_edit_key(key);
                }
                BrowserResult::Continue
            }
        }
    }
}
<span class="boring">}</span></code></pre>
<h3 id="step-3-implement-helper-methods"><a class="header" href="#step-3-implement-helper-methods">Step 3: Implement Helper Methods</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>impl HighlightEditor {
    fn render_list(&amp;self, frame: &amp;mut Frame, area: Rect) {
        let items: Vec&lt;ListItem&gt; = self.highlights
            .iter()
            .enumerate()
            .skip(self.scroll_offset)
            .map(|(i, h)| {
                let style = if i == self.selected {
                    Style::default().bg(Color::DarkGray)
                } else {
                    Style::default()
                };

                let enabled = if h.enabled { "✓" } else { " " };
                let text = format!("[{}] {}", enabled, h.pattern);
                ListItem::new(text).style(style)
            })
            .collect();

        let list = List::new(items)
            .block(Block::default().title("Patterns").borders(Borders::ALL));

        frame.render_widget(list, area);
    }

    fn render_details(&amp;self, frame: &amp;mut Frame, area: Rect) {
        if let Some(highlight) = self.highlights.get(self.selected) {
            let details = vec![
                Line::from(vec![
                    Span::raw("Pattern: "),
                    Span::styled(&amp;highlight.pattern, Style::default().fg(Color::Yellow)),
                ]),
                Line::from(vec![
                    Span::raw("FG: "),
                    Span::styled(&amp;highlight.foreground, Style::default().fg(Color::Green)),
                ]),
                Line::from(vec![
                    Span::raw("BG: "),
                    Span::raw(highlight.background.as_deref().unwrap_or("none")),
                ]),
            ];

            let paragraph = Paragraph::new(details)
                .block(Block::default().title("Details").borders(Borders::ALL));

            frame.render_widget(paragraph, area);
        }
    }

    fn render_help(&amp;self, frame: &amp;mut Frame, area: Rect) {
        let help = " Enter: Edit | Ctrl+S: Save | Ctrl+N: New | Del: Delete | Esc: Close ";
        let help_area = Rect {
            x: area.x,
            y: area.y + area.height - 1,
            width: area.width,
            height: 1,
        };
        let help_text = Paragraph::new(help)
            .style(Style::default().bg(Color::DarkGray));
        frame.render_widget(help_text, help_area);
    }

    fn move_selection(&amp;mut self, delta: i32) {
        let new_idx = (self.selected as i32 + delta)
            .max(0)
            .min(self.highlights.len() as i32 - 1) as usize;
        self.selected = new_idx;
    }

    fn start_edit(&amp;mut self) {
        self.editing = Some(EditField::Pattern);
    }

    fn commit_edit(&amp;mut self) {
        // Apply edit changes
    }

    fn add_new_highlight(&amp;mut self) {
        self.highlights.push(HighlightEntry {
            pattern: "new_pattern".into(),
            foreground: "white".into(),
            background: None,
            enabled: true,
        });
        self.selected = self.highlights.len() - 1;
    }

    fn delete_selected(&amp;mut self) {
        if !self.highlights.is_empty() {
            self.highlights.remove(self.selected);
            if self.selected &gt;= self.highlights.len() &amp;&amp; self.selected &gt; 0 {
                self.selected -= 1;
            }
        }
    }

    fn build_config_change(&amp;self) -&gt; ConfigChange {
        // Convert entries back to config format
        ConfigChange::Highlights(
            self.highlights.iter()
                .map(|h| HighlightConfig {
                    pattern: h.pattern.clone(),
                    fg: h.foreground.clone(),
                    bg: h.background.clone(),
                    enabled: h.enabled,
                })
                .collect()
        )
    }
}

// Helper function for centered popups
fn centered_rect(percent_x: u16, percent_y: u16, area: Rect) -&gt; Rect {
    let popup_layout = Layout::default()
        .direction(Direction::Vertical)
        .constraints([
            Constraint::Percentage((100 - percent_y) / 2),
            Constraint::Percentage(percent_y),
            Constraint::Percentage((100 - percent_y) / 2),
        ])
        .split(area);

    Layout::default()
        .direction(Direction::Horizontal)
        .constraints([
            Constraint::Percentage((100 - percent_x) / 2),
            Constraint::Percentage(percent_x),
            Constraint::Percentage((100 - percent_x) / 2),
        ])
        .split(popup_layout[1])[1]
}
<span class="boring">}</span></code></pre>
<h3 id="step-4-register-browser"><a class="header" href="#step-4-register-browser">Step 4: Register Browser</a></h3>
<p>Add to browser registry:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub enum BrowserType {
    Search,
    Help,
    LayoutEditor,
    HighlightEditor,  // New browser
}

pub fn open_browser(browser_type: BrowserType, context: BrowserContext) -&gt; Box&lt;dyn Browser&gt; {
    match browser_type {
        BrowserType::Search =&gt; Box::new(SearchBrowser::new(context)),
        BrowserType::Help =&gt; Box::new(HelpBrowser::new()),
        BrowserType::LayoutEditor =&gt; Box::new(LayoutEditor::new(context)),
        BrowserType::HighlightEditor =&gt; Box::new(HighlightEditor::new(context.highlights)),
    }
}
<span class="boring">}</span></code></pre>
<h3 id="step-5-add-keybind"><a class="header" href="#step-5-add-keybind">Step 5: Add Keybind</a></h3>
<p>Allow users to open the browser:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// In keybind action handling
KeybindAction::OpenHighlightEditor =&gt; {
    self.active_browser = Some(open_browser(
        BrowserType::HighlightEditor,
        self.build_browser_context()
    ));
}
<span class="boring">}</span></code></pre>
<h2 id="browser-best-practices"><a class="header" href="#browser-best-practices">Browser Best Practices</a></h2>
<h3 id="input-handling"><a class="header" href="#input-handling">Input Handling</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Always allow Escape to close
fn handle_input(&amp;mut self, key: KeyEvent) -&gt; BrowserResult {
    match key.code {
        KeyCode::Esc =&gt; BrowserResult::Close,
        // ... other handling
    }
}

// Provide keyboard help
fn render_help(&amp;self) {
    // Always show available key commands
}
<span class="boring">}</span></code></pre>
<h3 id="state-management-1"><a class="header" href="#state-management-1">State Management</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Keep original data for cancel
struct MyBrowser {
    original: Vec&lt;Item&gt;,  // For reverting
    modified: Vec&lt;Item&gt;,  // Working copy
}

fn handle_input(&amp;mut self, key: KeyEvent) -&gt; BrowserResult {
    match key.code {
        KeyCode::Esc =&gt; {
            // Discard changes
            BrowserResult::Close
        }
        KeyCode::Char('s') if ctrl =&gt; {
            // Save changes
            BrowserResult::Action(self.build_action())
        }
    }
}
<span class="boring">}</span></code></pre>
<h3 id="visual-feedback"><a class="header" href="#visual-feedback">Visual Feedback</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Indicate edit mode
fn render(&amp;self, frame: &amp;mut Frame, area: Rect) {
    let title = if self.editing.is_some() {
        format!("{} [EDITING]", self.title())
    } else {
        self.title().to_string()
    };
    // ...
}

// Highlight modified fields
fn render_field(&amp;self, value: &amp;str, modified: bool) -&gt; Span {
    let style = if modified {
        Style::default().fg(Color::Yellow)  // Modified indicator
    } else {
        Style::default()
    };
    Span::styled(value, style)
}
<span class="boring">}</span></code></pre>
<h2 id="testing-browsers"><a class="header" href="#testing-browsers">Testing Browsers</a></h2>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[cfg(test)]
mod tests {
    use super::*;

    #[test]
    fn test_browser_escape_closes() {
        let mut browser = HighlightEditor::new(vec![]);
        let result = browser.handle_input(KeyEvent::new(KeyCode::Esc, KeyModifiers::NONE));
        assert!(matches!(result, BrowserResult::Close));
    }

    #[test]
    fn test_selection_movement() {
        let mut browser = HighlightEditor::new(vec![
            HighlightConfig::default(),
            HighlightConfig::default(),
        ]);
        assert_eq!(browser.selected, 0);

        browser.handle_input(KeyEvent::new(KeyCode::Down, KeyModifiers::NONE));
        assert_eq!(browser.selected, 1);

        browser.handle_input(KeyEvent::new(KeyCode::Up, KeyModifiers::NONE));
        assert_eq!(browser.selected, 0);
    }
}
<span class="boring">}</span></code></pre>
<h2 id="see-also-69"><a class="header" href="#see-also-69">See Also</a></h2>
<ul>
<li><a href="#browser--editor-system">Browser System Architecture</a></li>
<li><a href="#adding-widgets-1">Adding Widgets</a></li>
<li><a href="#project-structure-1">Project Structure</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="parser-extensions-1"><a class="header" href="#parser-extensions-1">Parser Extensions</a></h1>
<p>Guide to extending the XML protocol parser for new game elements.</p>
<h2 id="overview-33"><a class="header" href="#overview-33">Overview</a></h2>
<p>The parser converts raw game XML into structured data that widgets can display. Extending the parser allows VellumFE to:</p>
<ul>
<li>Recognize new game elements</li>
<li>Extract additional data</li>
<li>Support new game features</li>
<li>Handle protocol changes</li>
</ul>
<h2 id="parser-architecture-1"><a class="header" href="#parser-architecture-1">Parser Architecture</a></h2>
<h3 id="data-flow-1"><a class="header" href="#data-flow-1">Data Flow</a></h3>
<pre><code>Raw Input → Tokenizer → Parser State Machine → ParsedElements
    │           │              │                    │
    │           │              │                    └─ Vec&lt;ParsedElement&gt;
    │           │              └─ Match patterns, build elements
    │           └─ Split into tags/text
    └─ Bytes from network
</code></pre>
<h3 id="key-types"><a class="header" href="#key-types">Key Types</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Parser output - each element represents parsed game data
pub enum ParsedElement {
    Text(String),
    RoomName(String),
    RoomDesc(String),
    Prompt(PromptData),
    Vitals(VitalsData),
    Indicator(IndicatorData),
    Compass(CompassData),
    Stream { id: String, content: String },
    // ... many more
}

// Parser state tracks context
pub struct Parser {
    state: ParserState,
    buffer: String,
    current_stream: Option&lt;String&gt;,
    // ...
}

enum ParserState {
    Normal,
    InTag(String),
    InStream(String),
    // ...
}
<span class="boring">}</span></code></pre>
<h2 id="step-by-step-new-element"><a class="header" href="#step-by-step-new-element">Step-by-Step: New Element</a></h2>
<p>Let’s add parsing for a hypothetical “spell_active” element.</p>
<h3 id="step-1-analyze-the-protocol"><a class="header" href="#step-1-analyze-the-protocol">Step 1: Analyze the Protocol</a></h3>
<p>First, understand the XML format:</p>
<pre><code class="language-xml">&lt;!-- Example game XML --&gt;
&lt;spell_active id="107" name="Spirit Shield" duration="300" circle="1"/&gt;
&lt;spell_expire id="107"/&gt;
</code></pre>
<p>Document what data we need:</p>
<ul>
<li>Spell ID</li>
<li>Spell name</li>
<li>Duration (seconds)</li>
<li>Circle</li>
</ul>
<h3 id="step-2-define-the-parsedelement-variant"><a class="header" href="#step-2-define-the-parsedelement-variant">Step 2: Define the ParsedElement Variant</a></h3>
<p>Add to <code>src/parser.rs</code>:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub enum ParsedElement {
    // ... existing variants ...

    /// Active spell notification
    SpellActive {
        id: u32,
        name: String,
        duration: u32,
        circle: u8,
    },

    /// Spell expiration notification
    SpellExpire {
        id: u32,
    },
}
<span class="boring">}</span></code></pre>
<h3 id="step-3-create-data-structures"><a class="header" href="#step-3-create-data-structures">Step 3: Create Data Structures</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[derive(Debug, Clone)]
pub struct SpellActiveData {
    pub id: u32,
    pub name: String,
    pub duration: u32,
    pub circle: u8,
}

impl SpellActiveData {
    pub fn from_attributes(attrs: &amp;HashMap&lt;String, String&gt;) -&gt; Option&lt;Self&gt; {
        Some(Self {
            id: attrs.get("id")?.parse().ok()?,
            name: attrs.get("name")?.clone(),
            duration: attrs.get("duration")?.parse().ok()?,
            circle: attrs.get("circle")?.parse().ok()?,
        })
    }
}
<span class="boring">}</span></code></pre>
<h3 id="step-4-add-parsing-logic"><a class="header" href="#step-4-add-parsing-logic">Step 4: Add Parsing Logic</a></h3>
<p>In the parser’s tag handling:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>impl Parser {
    fn handle_tag(&amp;mut self, tag: &amp;str) -&gt; Option&lt;ParsedElement&gt; {
        let (name, attrs) = self.parse_tag(tag)?;

        match name.as_str() {
            // ... existing tags ...

            "spell_active" =&gt; {
                let data = SpellActiveData::from_attributes(&amp;attrs)?;
                Some(ParsedElement::SpellActive {
                    id: data.id,
                    name: data.name,
                    duration: data.duration,
                    circle: data.circle,
                })
            }

            "spell_expire" =&gt; {
                let id = attrs.get("id")?.parse().ok()?;
                Some(ParsedElement::SpellExpire { id })
            }

            _ =&gt; None,
        }
    }
}
<span class="boring">}</span></code></pre>
<h3 id="step-5-handle-in-application-state"><a class="header" href="#step-5-handle-in-application-state">Step 5: Handle in Application State</a></h3>
<p>In <code>src/core/app_core/state.rs</code>:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>impl AppState {
    pub fn process_element(&amp;mut self, element: ParsedElement) {
        match element {
            // ... existing handlers ...

            ParsedElement::SpellActive { id, name, duration, circle } =&gt; {
                self.active_spells.insert(id, ActiveSpell {
                    id,
                    name,
                    remaining: duration,
                    circle,
                });
                self.generation += 1;
            }

            ParsedElement::SpellExpire { id } =&gt; {
                self.active_spells.remove(&amp;id);
                self.generation += 1;
            }

            // ...
        }
    }
}
<span class="boring">}</span></code></pre>
<h3 id="step-6-add-tests"><a class="header" href="#step-6-add-tests">Step 6: Add Tests</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[cfg(test)]
mod tests {
    use super::*;

    #[test]
    fn test_parse_spell_active() {
        let mut parser = Parser::new();
        let input = r#"&lt;spell_active id="107" name="Spirit Shield" duration="300" circle="1"/&gt;"#;

        let elements = parser.parse(input);

        assert_eq!(elements.len(), 1);
        match &amp;elements[0] {
            ParsedElement::SpellActive { id, name, duration, circle } =&gt; {
                assert_eq!(*id, 107);
                assert_eq!(name, "Spirit Shield");
                assert_eq!(*duration, 300);
                assert_eq!(*circle, 1);
            }
            _ =&gt; panic!("Expected SpellActive"),
        }
    }

    #[test]
    fn test_parse_spell_expire() {
        let mut parser = Parser::new();
        let input = r#"&lt;spell_expire id="107"/&gt;"#;

        let elements = parser.parse(input);

        assert_eq!(elements.len(), 1);
        match &amp;elements[0] {
            ParsedElement::SpellExpire { id } =&gt; {
                assert_eq!(*id, 107);
            }
            _ =&gt; panic!("Expected SpellExpire"),
        }
    }

    #[test]
    fn test_missing_attributes() {
        let mut parser = Parser::new();
        // Missing required 'name' attribute
        let input = r#"&lt;spell_active id="107" duration="300"/&gt;"#;

        let elements = parser.parse(input);

        // Should not produce SpellActive (missing name)
        assert!(elements.iter().all(|e| !matches!(e, ParsedElement::SpellActive { .. })));
    }
}
<span class="boring">}</span></code></pre>
<h2 id="common-patterns-3"><a class="header" href="#common-patterns-3">Common Patterns</a></h2>
<h3 id="self-closing-tags"><a class="header" href="#self-closing-tags">Self-Closing Tags</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// &lt;tag attr="value"/&gt;
fn parse_self_closing(&amp;mut self, tag: &amp;str) -&gt; Option&lt;ParsedElement&gt; {
    if !tag.ends_with('/') {
        return None;
    }
    let clean = tag.trim_end_matches('/');
    self.handle_tag(clean)
}
<span class="boring">}</span></code></pre>
<h3 id="paired-tags-with-content"><a class="header" href="#paired-tags-with-content">Paired Tags with Content</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// &lt;tag&gt;content&lt;/tag&gt;
fn handle_open_tag(&amp;mut self, name: &amp;str, attrs: &amp;HashMap&lt;String, String&gt;) {
    match name {
        "room_desc" =&gt; {
            self.state = ParserState::InRoomDesc;
            self.buffer.clear();
        }
        // ...
    }
}

fn handle_close_tag(&amp;mut self, name: &amp;str) -&gt; Option&lt;ParsedElement&gt; {
    match name {
        "room_desc" =&gt; {
            let desc = std::mem::take(&amp;mut self.buffer);
            self.state = ParserState::Normal;
            Some(ParsedElement::RoomDesc(desc))
        }
        // ...
    }
}
<span class="boring">}</span></code></pre>
<h3 id="streaming-content"><a class="header" href="#streaming-content">Streaming Content</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// &lt;pushStream id="combat"/&gt;...&lt;popStream/&gt;
fn handle_push_stream(&amp;mut self, id: &amp;str) {
    self.stream_stack.push(id.to_string());
    self.current_stream = Some(id.to_string());
}

fn handle_pop_stream(&amp;mut self) {
    self.stream_stack.pop();
    self.current_stream = self.stream_stack.last().cloned();
}
<span class="boring">}</span></code></pre>
<h3 id="attribute-extraction"><a class="header" href="#attribute-extraction">Attribute Extraction</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn parse_attributes(tag_content: &amp;str) -&gt; HashMap&lt;String, String&gt; {
    let mut attrs = HashMap::new();
    let re = regex::Regex::new(r#"(\w+)="([^"]*)""#).unwrap();

    for cap in re.captures_iter(tag_content) {
        attrs.insert(cap[1].to_string(), cap[2].to_string());
    }

    attrs
}
<span class="boring">}</span></code></pre>
<h2 id="best-practices-2"><a class="header" href="#best-practices-2">Best Practices</a></h2>
<h3 id="graceful-degradation"><a class="header" href="#graceful-degradation">Graceful Degradation</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// GOOD: Handle missing attributes
fn from_attributes(attrs: &amp;HashMap&lt;String, String&gt;) -&gt; Option&lt;Self&gt; {
    Some(Self {
        required: attrs.get("required")?.clone(),
        optional: attrs.get("optional").cloned(),  // Optional field
    })
}

// BAD: Panic on missing data
fn from_attributes(attrs: &amp;HashMap&lt;String, String&gt;) -&gt; Self {
    Self {
        required: attrs["required"].clone(),  // Panics if missing!
    }
}
<span class="boring">}</span></code></pre>
<h3 id="preserve-unknown-elements"><a class="header" href="#preserve-unknown-elements">Preserve Unknown Elements</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Don't discard unrecognized tags
fn handle_unknown_tag(&amp;mut self, tag: &amp;str) -&gt; ParsedElement {
    ParsedElement::Unknown {
        tag: tag.to_string(),
        raw: self.current_raw.clone(),
    }
}
<span class="boring">}</span></code></pre>
<h3 id="performance-2"><a class="header" href="#performance-2">Performance</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// GOOD: Compile regex once
lazy_static! {
    static ref ATTR_REGEX: Regex = Regex::new(r#"(\w+)="([^"]*)""#).unwrap();
}

// BAD: Compile regex every time
fn parse_attrs(s: &amp;str) {
    let re = Regex::new(r#"(\w+)="([^"]*)""#).unwrap();  // Slow!
}
<span class="boring">}</span></code></pre>
<h2 id="debugging-parser-issues"><a class="header" href="#debugging-parser-issues">Debugging Parser Issues</a></h2>
<h3 id="logging-2"><a class="header" href="#logging-2">Logging</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn handle_tag(&amp;mut self, tag: &amp;str) -&gt; Option&lt;ParsedElement&gt; {
    log::trace!("Parsing tag: {}", tag);

    let result = self.parse_tag_internal(tag);

    if result.is_none() {
        log::debug!("Unhandled tag: {}", tag);
    }

    result
}
<span class="boring">}</span></code></pre>
<h3 id="test-with-real-data"><a class="header" href="#test-with-real-data">Test with Real Data</a></h3>
<p>Save actual game output for test fixtures:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[test]
fn test_real_game_output() {
    let input = include_str!("../test_fixtures/combat_sample.xml");
    let mut parser = Parser::new();
    let elements = parser.parse(input);

    // Verify expected elements are present
    assert!(elements.iter().any(|e| matches!(e, ParsedElement::Combat { .. })));
}
<span class="boring">}</span></code></pre>
<h2 id="see-also-70"><a class="header" href="#see-also-70">See Also</a></h2>
<ul>
<li><a href="#parser-protocol">Parser Protocol</a> - Protocol details</li>
<li><a href="#message-flow">Message Flow</a> - Data flow</li>
<li><a href="#adding-widgets-1">Adding Widgets</a> - Use parsed data</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="testing-2"><a class="header" href="#testing-2">Testing</a></h1>
<p>Test patterns and practices for VellumFE development.</p>
<h2 id="testing-philosophy"><a class="header" href="#testing-philosophy">Testing Philosophy</a></h2>
<p>VellumFE testing prioritizes:</p>
<ol>
<li><strong>Parser accuracy</strong> - Correctly parse game protocol</li>
<li><strong>State consistency</strong> - Updates propagate correctly</li>
<li><strong>Widget rendering</strong> - Display matches data</li>
<li><strong>Configuration loading</strong> - Files parse without errors</li>
</ol>
<h2 id="test-organization"><a class="header" href="#test-organization">Test Organization</a></h2>
<pre><code>vellum-fe/
├── src/
│   ├── parser.rs
│   │   └── #[cfg(test)] mod tests { ... }
│   ├── config.rs
│   │   └── #[cfg(test)] mod tests { ... }
│   └── ...
│
├── tests/                    # Integration tests
│   ├── parser_integration.rs
│   ├── config_loading.rs
│   └── widget_tests.rs
│
└── test_fixtures/            # Test data
    ├── sample_input.xml
    └── sample_config.toml
</code></pre>
<h2 id="unit-tests-1"><a class="header" href="#unit-tests-1">Unit Tests</a></h2>
<h3 id="basic-structure"><a class="header" href="#basic-structure">Basic Structure</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[cfg(test)]
mod tests {
    use super::*;

    #[test]
    fn test_function_name() {
        // Arrange
        let input = "test data";

        // Act
        let result = function_under_test(input);

        // Assert
        assert_eq!(result, expected_value);
    }
}
<span class="boring">}</span></code></pre>
<h3 id="parser-tests"><a class="header" href="#parser-tests">Parser Tests</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[cfg(test)]
mod tests {
    use super::*;

    #[test]
    fn test_parse_room_name() {
        let mut parser = Parser::new();
        let input = "&lt;roomName&gt;Town Square&lt;/roomName&gt;";

        let elements = parser.parse(input);

        assert_eq!(elements.len(), 1);
        assert!(matches!(
            &amp;elements[0],
            ParsedElement::RoomName(name) if name == "Town Square"
        ));
    }

    #[test]
    fn test_parse_vitals() {
        let mut parser = Parser::new();
        let input = r#"&lt;progressBar id="health" value="75"/&gt;"#;

        let elements = parser.parse(input);

        assert_eq!(elements.len(), 1);
        if let ParsedElement::Vitals(data) = &amp;elements[0] {
            assert_eq!(data.health, Some(75));
        } else {
            panic!("Expected Vitals element");
        }
    }

    #[test]
    fn test_parse_malformed_input() {
        let mut parser = Parser::new();
        let input = "&lt;unclosed tag without closing";

        // Should not panic, may return empty or partial results
        let elements = parser.parse(input);
        // Parser should handle gracefully
    }

    #[test]
    fn test_parse_empty_input() {
        let mut parser = Parser::new();
        let elements = parser.parse("");
        assert!(elements.is_empty());
    }
}
<span class="boring">}</span></code></pre>
<h3 id="configuration-tests"><a class="header" href="#configuration-tests">Configuration Tests</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[cfg(test)]
mod tests {
    use super::*;

    #[test]
    fn test_default_config() {
        let config = Config::default();

        assert_eq!(config.connection.port, 8000);
        assert!(config.connection.auto_reconnect);
    }

    #[test]
    fn test_load_valid_config() {
        let toml = r#"
            [connection]
            host = "127.0.0.1"
            port = 8001

            [[widgets]]
            type = "text"
            name = "main"
            x = 0
            y = 0
            width = 100
            height = 100
        "#;

        let config: Config = toml::from_str(toml).unwrap();

        assert_eq!(config.connection.port, 8001);
        assert_eq!(config.widgets.len(), 1);
    }

    #[test]
    fn test_invalid_config() {
        let toml = "invalid toml [[[";

        let result: Result&lt;Config, _&gt; = toml::from_str(toml);
        assert!(result.is_err());
    }

    #[test]
    fn test_config_validation() {
        let mut config = Config::default();
        config.widgets.push(WidgetConfig {
            width: 0,  // Invalid
            height: 0, // Invalid
            ..Default::default()
        });

        let result = config.validate();
        assert!(result.is_err());
    }
}
<span class="boring">}</span></code></pre>
<h3 id="widget-tests"><a class="header" href="#widget-tests">Widget Tests</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[cfg(test)]
mod tests {
    use super::*;

    #[test]
    fn test_widget_creation() {
        let config = TextWidgetConfig {
            name: "test".into(),
            width: 80,
            height: 24,
            ..Default::default()
        };

        let widget = TextWidget::new(config);

        assert_eq!(widget.name(), "test");
        assert!(widget.can_focus());
    }

    #[test]
    fn test_widget_sync() {
        let mut widget = TextWidget::new(Default::default());
        let mut state = AppState::new();

        // Initial sync
        state.set_generation(1);
        assert!(widget.sync(&amp;state));
        assert_eq!(widget.last_generation(), 1);

        // No change
        assert!(!widget.sync(&amp;state));

        // After state change
        state.add_text("Hello");
        state.set_generation(2);
        assert!(widget.sync(&amp;state));
        assert_eq!(widget.last_generation(), 2);
    }

    #[test]
    fn test_scrollback_limit() {
        let config = TextWidgetConfig {
            scrollback: 100,
            ..Default::default()
        };
        let mut widget = TextWidget::new(config);

        // Add more lines than scrollback limit
        for i in 0..200 {
            widget.add_line(format!("Line {}", i));
        }

        assert!(widget.line_count() &lt;= 100);
    }
}
<span class="boring">}</span></code></pre>
<h2 id="integration-tests"><a class="header" href="#integration-tests">Integration Tests</a></h2>
<h3 id="full-flow-tests"><a class="header" href="#full-flow-tests">Full Flow Tests</a></h3>
<p>Create <code>tests/integration.rs</code>:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use vellum_fe::*;

#[test]
fn test_full_parse_and_state_update() {
    let mut parser = Parser::new();
    let mut state = AppState::new();

    // Simulate game input
    let input = r#"
        &lt;roomName&gt;Town Square&lt;/roomName&gt;
        &lt;roomDesc&gt;A busy town square.&lt;/roomDesc&gt;
        &lt;progressBar id="health" value="100"/&gt;
        &lt;progressBar id="mana" value="75"/&gt;
    "#;

    let elements = parser.parse(input);

    for element in elements {
        state.process_element(element);
    }

    assert_eq!(state.room_name(), Some("Town Square"));
    assert_eq!(state.vitals().health, 100);
    assert_eq!(state.vitals().mana, 75);
}

#[test]
fn test_config_load_and_layout_creation() {
    let config_str = include_str!("../test_fixtures/sample_config.toml");
    let config: Config = toml::from_str(config_str).unwrap();

    let layout = Layout::from_config(&amp;config.layout).unwrap();

    assert!(layout.widget_count() &gt; 0);
}
<span class="boring">}</span></code></pre>
<h3 id="file-based-tests"><a class="header" href="#file-based-tests">File-Based Tests</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[test]
fn test_parse_sample_game_output() {
    let input = include_str!("../test_fixtures/combat_session.xml");
    let mut parser = Parser::new();

    let elements = parser.parse(input);

    // Verify we parsed expected element types
    let has_room = elements.iter().any(|e| matches!(e, ParsedElement::RoomName(_)));
    let has_combat = elements.iter().any(|e| matches!(e, ParsedElement::Combat(_)));

    assert!(has_room);
    assert!(has_combat);
}
<span class="boring">}</span></code></pre>
<h2 id="test-fixtures"><a class="header" href="#test-fixtures">Test Fixtures</a></h2>
<h3 id="creating-fixtures"><a class="header" href="#creating-fixtures">Creating Fixtures</a></h3>
<p>Save real game output for testing:</p>
<pre><code class="language-bash"># Capture game session
vellum-fe --debug-log session.xml
</code></pre>
<p>Store in <code>test_fixtures/</code>:</p>
<pre><code>test_fixtures/
├── login_sequence.xml
├── combat_session.xml
├── room_descriptions.xml
├── sample_config.toml
└── sample_layout.toml
</code></pre>
<h3 id="using-fixtures"><a class="header" href="#using-fixtures">Using Fixtures</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>const COMBAT_FIXTURE: &amp;str = include_str!("../test_fixtures/combat_session.xml");

#[test]
fn test_with_fixture() {
    let elements = Parser::new().parse(COMBAT_FIXTURE);
    // ...
}
<span class="boring">}</span></code></pre>
<h2 id="running-tests"><a class="header" href="#running-tests">Running Tests</a></h2>
<h3 id="all-tests"><a class="header" href="#all-tests">All Tests</a></h3>
<pre><code class="language-bash">cargo test
</code></pre>
<h3 id="specific-test"><a class="header" href="#specific-test">Specific Test</a></h3>
<pre><code class="language-bash">cargo test test_parse_room_name
</code></pre>
<h3 id="specific-module"><a class="header" href="#specific-module">Specific Module</a></h3>
<pre><code class="language-bash">cargo test parser::tests
</code></pre>
<h3 id="with-output"><a class="header" href="#with-output">With Output</a></h3>
<pre><code class="language-bash">cargo test -- --nocapture
</code></pre>
<h3 id="verbose"><a class="header" href="#verbose">Verbose</a></h3>
<pre><code class="language-bash">cargo test -- --show-output
</code></pre>
<h2 id="test-patterns"><a class="header" href="#test-patterns">Test Patterns</a></h2>
<h3 id="table-driven-tests"><a class="header" href="#table-driven-tests">Table-Driven Tests</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[test]
fn test_parse_indicators() {
    let cases = vec![
        ("&lt;indicator id='IconHIDDEN' visible='y'/&gt;", "hidden", true),
        ("&lt;indicator id='IconHIDDEN' visible='n'/&gt;", "hidden", false),
        ("&lt;indicator id='IconSTUNNED' visible='y'/&gt;", "stunned", true),
        ("&lt;indicator id='IconPRONE' visible='y'/&gt;", "prone", true),
    ];

    for (input, expected_name, expected_visible) in cases {
        let mut parser = Parser::new();
        let elements = parser.parse(input);

        if let ParsedElement::Indicator { name, visible } = &amp;elements[0] {
            assert_eq!(name, expected_name, "Failed for input: {}", input);
            assert_eq!(*visible, expected_visible, "Failed for input: {}", input);
        } else {
            panic!("Expected Indicator for input: {}", input);
        }
    }
}
<span class="boring">}</span></code></pre>
<h3 id="property-based-testing"><a class="header" href="#property-based-testing">Property-Based Testing</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use proptest::prelude::*;

proptest! {
    #[test]
    fn test_scrollback_never_exceeds_limit(lines in 1..1000usize, limit in 1..500usize) {
        let mut widget = TextWidget::new(TextWidgetConfig {
            scrollback: limit,
            ..Default::default()
        });

        for i in 0..lines {
            widget.add_line(format!("Line {}", i));
        }

        prop_assert!(widget.line_count() &lt;= limit);
    }
}
<span class="boring">}</span></code></pre>
<h3 id="snapshot-testing"><a class="header" href="#snapshot-testing">Snapshot Testing</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[test]
fn test_render_snapshot() {
    let widget = ProgressWidget::new(Default::default());
    let mut state = AppState::new();
    state.vitals_mut().health = 75;

    widget.sync(&amp;state);

    // Render to string buffer
    let rendered = widget.render_to_string();

    // Compare with stored snapshot
    insta::assert_snapshot!(rendered);
}
<span class="boring">}</span></code></pre>
<h2 id="mocking"><a class="header" href="#mocking">Mocking</a></h2>
<h3 id="mock-network"><a class="header" href="#mock-network">Mock Network</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>struct MockConnection {
    responses: Vec&lt;String&gt;,
    index: usize,
}

impl MockConnection {
    fn new(responses: Vec&lt;String&gt;) -&gt; Self {
        Self { responses, index: 0 }
    }
}

impl Connection for MockConnection {
    fn receive(&amp;mut self) -&gt; Result&lt;String&gt; {
        if self.index &lt; self.responses.len() {
            let response = self.responses[self.index].clone();
            self.index += 1;
            Ok(response)
        } else {
            Err(Error::EndOfStream)
        }
    }
}

#[test]
fn test_with_mock_connection() {
    let mock = MockConnection::new(vec![
        "&lt;roomName&gt;Test Room&lt;/roomName&gt;".into(),
    ]);

    let mut app = App::with_connection(mock);
    app.tick();

    assert_eq!(app.state().room_name(), Some("Test Room"));
}
<span class="boring">}</span></code></pre>
<h2 id="continuous-integration"><a class="header" href="#continuous-integration">Continuous Integration</a></h2>
<h3 id="github-actions"><a class="header" href="#github-actions">GitHub Actions</a></h3>
<pre><code class="language-yaml">name: Tests

on: [push, pull_request]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: dtolnay/rust-action@stable
      - run: cargo test --all-features
</code></pre>
<h3 id="coverage"><a class="header" href="#coverage">Coverage</a></h3>
<pre><code class="language-bash"># Install tarpaulin
cargo install cargo-tarpaulin

# Run coverage
cargo tarpaulin --out Html
</code></pre>
<h2 id="see-also-71"><a class="header" href="#see-also-71">See Also</a></h2>
<ul>
<li><a href="#building-from-source-2">Building</a> - Build process</li>
<li><a href="#contributing-guide">Contributing</a> - Contribution guide</li>
<li><a href="#project-structure-1">Project Structure</a> - Code organization</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="contributing-guide"><a class="header" href="#contributing-guide">Contributing Guide</a></h1>
<p>How to contribute to VellumFE development.</p>
<h2 id="welcome"><a class="header" href="#welcome">Welcome!</a></h2>
<p>Thank you for considering contributing to VellumFE! This document provides guidelines and information for contributors.</p>
<h2 id="ways-to-contribute"><a class="header" href="#ways-to-contribute">Ways to Contribute</a></h2>
<h3 id="code-contributions"><a class="header" href="#code-contributions">Code Contributions</a></h3>
<ul>
<li>Bug fixes</li>
<li>New features</li>
<li>Performance improvements</li>
<li>Widget implementations</li>
<li>Parser extensions</li>
</ul>
<h3 id="non-code-contributions"><a class="header" href="#non-code-contributions">Non-Code Contributions</a></h3>
<ul>
<li>Documentation improvements</li>
<li>Bug reports</li>
<li>Feature suggestions</li>
<li>User support</li>
<li>Testing and feedback</li>
</ul>
<h2 id="getting-started-1"><a class="header" href="#getting-started-1">Getting Started</a></h2>
<h3 id="1-fork-and-clone"><a class="header" href="#1-fork-and-clone">1. Fork and Clone</a></h3>
<pre><code class="language-bash"># Fork on GitHub, then clone your fork
git clone https://github.com/YOUR_USERNAME/vellum-fe.git
cd vellum-fe
</code></pre>
<h3 id="2-set-up-development-environment"><a class="header" href="#2-set-up-development-environment">2. Set Up Development Environment</a></h3>
<pre><code class="language-bash"># Install Rust
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh

# Install dependencies (varies by platform)
# See building.md for platform-specific instructions

# Build
cargo build

# Run tests
cargo test
</code></pre>
<h3 id="3-create-a-branch"><a class="header" href="#3-create-a-branch">3. Create a Branch</a></h3>
<pre><code class="language-bash">git checkout -b feature/my-feature
# or
git checkout -b fix/bug-description
</code></pre>
<h2 id="development-workflow-1"><a class="header" href="#development-workflow-1">Development Workflow</a></h2>
<h3 id="making-changes"><a class="header" href="#making-changes">Making Changes</a></h3>
<ol>
<li><strong>Write code</strong> following the style guide</li>
<li><strong>Add tests</strong> for new functionality</li>
<li><strong>Update documentation</strong> if needed</li>
<li><strong>Run checks</strong> before committing</li>
</ol>
<h3 id="pre-commit-checks"><a class="header" href="#pre-commit-checks">Pre-Commit Checks</a></h3>
<pre><code class="language-bash"># Format code
cargo fmt

# Run linter
cargo clippy -- -D warnings

# Run tests
cargo test

# Check documentation
cargo doc --no-deps
</code></pre>
<h3 id="commit-messages"><a class="header" href="#commit-messages">Commit Messages</a></h3>
<p>Follow conventional commit format:</p>
<pre><code>type(scope): description

[optional body]

[optional footer]
</code></pre>
<p>Types:</p>
<ul>
<li><code>feat</code>: New feature</li>
<li><code>fix</code>: Bug fix</li>
<li><code>docs</code>: Documentation</li>
<li><code>refactor</code>: Code restructuring</li>
<li><code>test</code>: Adding tests</li>
<li><code>chore</code>: Maintenance</li>
</ul>
<p>Examples:</p>
<pre><code>feat(parser): add spell duration parsing

fix(widget): correct scrollback overflow

docs: update installation instructions

refactor(tui): extract render helpers
</code></pre>
<h2 id="pull-request-process"><a class="header" href="#pull-request-process">Pull Request Process</a></h2>
<h3 id="before-submitting"><a class="header" href="#before-submitting">Before Submitting</a></h3>
<ul>
<li><input disabled="" type="checkbox"> Code follows style guide</li>
<li><input disabled="" type="checkbox"> All tests pass</li>
<li><input disabled="" type="checkbox"> No clippy warnings</li>
<li><input disabled="" type="checkbox"> Documentation updated</li>
<li><input disabled="" type="checkbox"> Commit messages are clear</li>
</ul>
<h3 id="pr-description-template"><a class="header" href="#pr-description-template">PR Description Template</a></h3>
<pre><code class="language-markdown">## Description
Brief description of changes

## Type of Change
- [ ] Bug fix
- [ ] New feature
- [ ] Breaking change
- [ ] Documentation update

## Testing
How was this tested?

## Checklist
- [ ] Tests added
- [ ] Documentation updated
- [ ] No breaking changes (or documented)
</code></pre>
<h3 id="review-process"><a class="header" href="#review-process">Review Process</a></h3>
<ol>
<li>Submit PR against <code>main</code> branch</li>
<li>CI checks run automatically</li>
<li>Maintainers review code</li>
<li>Address feedback</li>
<li>Merge when approved</li>
</ol>
<h2 id="code-style"><a class="header" href="#code-style">Code Style</a></h2>
<h3 id="rust-style"><a class="header" href="#rust-style">Rust Style</a></h3>
<p>Follow standard Rust conventions:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Use rustfmt defaults
cargo fmt

// Naming
fn function_name() {}       // snake_case for functions
struct StructName {}        // PascalCase for types
const CONSTANT: u32 = 1;    // SCREAMING_SNAKE_CASE for constants
let variable_name = 1;      // snake_case for variables
<span class="boring">}</span></code></pre>
<h3 id="documentation-2"><a class="header" href="#documentation-2">Documentation</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>/// Brief description of the function.
///
/// More detailed explanation if needed.
///
/// # Arguments
///
/// * `param` - Description of parameter
///
/// # Returns
///
/// Description of return value
///
/// # Examples
///
/// ```
/// let result = my_function("input");
/// assert_eq!(result, expected);
/// ```
pub fn my_function(param: &amp;str) -&gt; Result&lt;Output&gt; {
    // ...
}
<span class="boring">}</span></code></pre>
<h3 id="error-handling-2"><a class="header" href="#error-handling-2">Error Handling</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Use Result for recoverable errors
fn parse_config(path: &amp;Path) -&gt; Result&lt;Config, ConfigError&gt; {
    let content = fs::read_to_string(path)?;
    let config: Config = toml::from_str(&amp;content)?;
    Ok(config)
}

// Use Option for optional values
fn find_widget(&amp;self, name: &amp;str) -&gt; Option&lt;&amp;Widget&gt; {
    self.widgets.iter().find(|w| w.name() == name)
}
<span class="boring">}</span></code></pre>
<h3 id="testing-3"><a class="header" href="#testing-3">Testing</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[cfg(test)]
mod tests {
    use super::*;

    #[test]
    fn test_descriptive_name() {
        // Arrange
        let input = setup_test_data();

        // Act
        let result = function_under_test(input);

        // Assert
        assert_eq!(result, expected);
    }
}
<span class="boring">}</span></code></pre>
<h2 id="issue-guidelines"><a class="header" href="#issue-guidelines">Issue Guidelines</a></h2>
<h3 id="bug-reports"><a class="header" href="#bug-reports">Bug Reports</a></h3>
<p>Include:</p>
<ul>
<li>VellumFE version</li>
<li>Operating system</li>
<li>Steps to reproduce</li>
<li>Expected behavior</li>
<li>Actual behavior</li>
<li>Relevant logs</li>
</ul>
<p>Template:</p>
<pre><code class="language-markdown">**Version**: 0.1.0
**OS**: Windows 10 / macOS 14 / Ubuntu 22.04

**Steps to Reproduce**:
1. Do this
2. Then this
3. See error

**Expected**: What should happen
**Actual**: What actually happens

**Logs**:
</code></pre>
<p>relevant log output</p>
<pre><code></code></pre>
<h3 id="feature-requests"><a class="header" href="#feature-requests">Feature Requests</a></h3>
<p>Include:</p>
<ul>
<li>Use case description</li>
<li>Proposed solution</li>
<li>Alternatives considered</li>
</ul>
<p>Template:</p>
<pre><code class="language-markdown">**Use Case**:
Why do you need this feature?

**Proposed Solution**:
How should it work?

**Alternatives**:
What other approaches did you consider?
</code></pre>
<h2 id="community-guidelines"><a class="header" href="#community-guidelines">Community Guidelines</a></h2>
<h3 id="code-of-conduct"><a class="header" href="#code-of-conduct">Code of Conduct</a></h3>
<ul>
<li>Be respectful and inclusive</li>
<li>Focus on constructive feedback</li>
<li>Help others learn</li>
<li>Credit others’ work</li>
<li>Assume good intentions</li>
</ul>
<h3 id="communication"><a class="header" href="#communication">Communication</a></h3>
<ul>
<li>GitHub Issues for bugs and features</li>
<li>GitHub Discussions for questions</li>
<li>Pull Request comments for code review</li>
</ul>
<h3 id="getting-help-3"><a class="header" href="#getting-help-3">Getting Help</a></h3>
<ul>
<li>Check existing documentation</li>
<li>Search closed issues</li>
<li>Ask in GitHub Discussions</li>
<li>Be specific in your questions</li>
</ul>
<h2 id="release-process"><a class="header" href="#release-process">Release Process</a></h2>
<h3 id="version-numbering"><a class="header" href="#version-numbering">Version Numbering</a></h3>
<p>Follow Semantic Versioning (SemVer):</p>
<ul>
<li>MAJOR: Breaking changes</li>
<li>MINOR: New features (backwards compatible)</li>
<li>PATCH: Bug fixes</li>
</ul>
<h3 id="changelog"><a class="header" href="#changelog">Changelog</a></h3>
<p>Update <code>CHANGELOG.md</code> with:</p>
<ul>
<li>Version number and date</li>
<li>Breaking changes (if any)</li>
<li>New features</li>
<li>Bug fixes</li>
<li>Known issues</li>
</ul>
<h2 id="recognition"><a class="header" href="#recognition">Recognition</a></h2>
<p>Contributors are recognized in:</p>
<ul>
<li><code>CONTRIBUTORS.md</code></li>
<li>Release notes</li>
<li>Project README</li>
</ul>
<p>Thank you for contributing to VellumFE!</p>
<h2 id="see-also-72"><a class="header" href="#see-also-72">See Also</a></h2>
<ul>
<li><a href="#building-from-source-2">Building</a> - Build instructions</li>
<li><a href="#project-structure-1">Project Structure</a> - Code organization</li>
<li><a href="#testing-2">Testing</a> - Test guidelines</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="reference"><a class="header" href="#reference">Reference</a></h1>
<p>Comprehensive reference documentation for VellumFE.</p>
<h2 id="quick-access"><a class="header" href="#quick-access">Quick Access</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Reference</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><a href="#cli-options">CLI Options</a></td><td>Command line flags</td></tr>
<tr><td><a href="#config-schema">Config Schema</a></td><td>Complete configuration reference</td></tr>
<tr><td><a href="#keybind-actions-1">Keybind Actions</a></td><td>All keybind actions A-Z</td></tr>
<tr><td><a href="#parsed-elements">Parsed Elements</a></td><td>All ParsedElement variants</td></tr>
<tr><td><a href="#stream-ids">Stream IDs</a></td><td>All stream identifiers</td></tr>
<tr><td><a href="#preset-colors">Preset Colors</a></td><td>Named color presets</td></tr>
<tr><td><a href="#environment-variables-1">Environment Variables</a></td><td>Environment configuration</td></tr>
<tr><td><a href="#default-files-1">Default Files</a></td><td>Default configuration contents</td></tr>
</tbody>
</table>
</div>
<h2 id="how-to-use-this-section"><a class="header" href="#how-to-use-this-section">How to Use This Section</a></h2>
<p>This reference section is designed for <strong>lookup</strong>, not learning. Use it when you:</p>
<ul>
<li>Need exact syntax for a configuration option</li>
<li>Want to know all available values for a setting</li>
<li>Need to look up a specific color name or stream ID</li>
<li>Are troubleshooting a configuration issue</li>
</ul>
<p>For learning and tutorials, see:</p>
<ul>
<li><a href="getting-started/README.html">Getting Started</a> - Initial setup</li>
<li><a href="tutorials/README.html">Tutorials</a> - Step-by-step guides</li>
<li><a href="configuration/README.html">Configuration</a> - Configuration concepts</li>
</ul>
<h2 id="quick-reference-cards"><a class="header" href="#quick-reference-cards">Quick Reference Cards</a></h2>
<h3 id="common-cli-flags"><a class="header" href="#common-cli-flags">Common CLI Flags</a></h3>
<pre><code class="language-bash">vellum-fe --host HOST --port PORT    # Lich mode
vellum-fe --direct --account X ...   # Direct mode
vellum-fe --config PATH              # Custom config
vellum-fe --debug                    # Debug logging
</code></pre>
<h3 id="essential-config-keys"><a class="header" href="#essential-config-keys">Essential Config Keys</a></h3>
<pre><code class="language-toml">[connection]
mode = "lich"           # or "direct"
host = "127.0.0.1"
port = 8000

[[widgets]]
type = "text"           # Widget type
name = "main"           # Unique name
x = 0                   # Position (0-100)
y = 0
width = 100             # Size (0-100)
height = 100
</code></pre>
<h3 id="common-keybind-actions"><a class="header" href="#common-keybind-actions">Common Keybind Actions</a></h3>
<pre><code class="language-toml">[keybinds."key"]
action = "scroll_up"        # Widget action
macro = "command"           # Send command
</code></pre>
<h3 id="stream-quick-reference"><a class="header" href="#stream-quick-reference">Stream Quick Reference</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Stream</th><th>Content</th></tr>
</thead>
<tbody>
<tr><td>main</td><td>Primary game output</td></tr>
<tr><td>room</td><td>Room descriptions</td></tr>
<tr><td>combat</td><td>Combat messages</td></tr>
<tr><td>speech</td><td>Player speech</td></tr>
<tr><td>thoughts</td><td>ESP/thoughts</td></tr>
<tr><td>whisper</td><td>Whispers</td></tr>
</tbody>
</table>
</div>
<h2 id="conventions"><a class="header" href="#conventions">Conventions</a></h2>
<h3 id="value-types"><a class="header" href="#value-types">Value Types</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Type</th><th>Example</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>string</td><td><code>"value"</code></td><td>Text in quotes</td></tr>
<tr><td>integer</td><td><code>100</code></td><td>Whole number</td></tr>
<tr><td>float</td><td><code>1.5</code></td><td>Decimal number</td></tr>
<tr><td>boolean</td><td><code>true</code></td><td>true or false</td></tr>
<tr><td>array</td><td><code>["a", "b"]</code></td><td>List of values</td></tr>
</tbody>
</table>
</div>
<h3 id="color-values-1"><a class="header" href="#color-values-1">Color Values</a></h3>
<p>Colors can be specified as:</p>
<ul>
<li>Preset name: <code>"red"</code>, <code>"bright_blue"</code></li>
<li>Hex code: <code>"#ff0000"</code></li>
<li>RGB: (in some contexts)</li>
</ul>
<h3 id="path-values"><a class="header" href="#path-values">Path Values</a></h3>
<p>Paths support:</p>
<ul>
<li>Absolute: <code>/home/user/.vellum-fe/</code></li>
<li>Home expansion: <code>~/.vellum-fe/</code></li>
<li>Relative (from config location)</li>
</ul>
<h2 id="see-also-73"><a class="header" href="#see-also-73">See Also</a></h2>
<ul>
<li><a href="configuration/README.html">Configuration Guide</a></li>
<li><a href="tutorials/README.html">Tutorials</a></li>
<li><a href="troubleshooting/README.html">Troubleshooting</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="cli-options"><a class="header" href="#cli-options">CLI Options</a></h1>
<p>Complete command line interface reference for VellumFE.</p>
<h2 id="usage-1"><a class="header" href="#usage-1">Usage</a></h2>
<pre><code class="language-bash">vellum-fe [OPTIONS]
</code></pre>
<h2 id="connection-options"><a class="header" href="#connection-options">Connection Options</a></h2>
<h3 id="lich-proxy-mode-1"><a class="header" href="#lich-proxy-mode-1">Lich Proxy Mode</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Option</th><th>Type</th><th>Default</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>--host</code></td><td>string</td><td><code>127.0.0.1</code></td><td>Lich proxy hostname</td></tr>
<tr><td><code>--port</code></td><td>integer</td><td><code>8000</code></td><td>Lich proxy port</td></tr>
</tbody>
</table>
</div>
<pre><code class="language-bash">vellum-fe --host 127.0.0.1 --port 8000
</code></pre>
<h3 id="direct-eaccess-mode-1"><a class="header" href="#direct-eaccess-mode-1">Direct eAccess Mode</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Option</th><th>Type</th><th>Required</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>--direct</code></td><td>flag</td><td>Yes</td><td>Enable direct mode</td></tr>
<tr><td><code>--account</code></td><td>string</td><td>Yes</td><td>Simutronics account</td></tr>
<tr><td><code>--password</code></td><td>string</td><td>Yes</td><td>Account password</td></tr>
<tr><td><code>--game</code></td><td>string</td><td>Yes</td><td>Game instance</td></tr>
<tr><td><code>--character</code></td><td>string</td><td>Yes</td><td>Character name</td></tr>
</tbody>
</table>
</div>
<pre><code class="language-bash">vellum-fe --direct \
  --account myaccount \
  --password mypassword \
  --game prime \
  --character Mycharacter
</code></pre>
<h3 id="game-instance-values-1"><a class="header" href="#game-instance-values-1">Game Instance Values</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Value</th><th>Game</th></tr>
</thead>
<tbody>
<tr><td><code>prime</code></td><td>GemStone IV (Prime)</td></tr>
<tr><td><code>test</code></td><td>GemStone IV (Test)</td></tr>
<tr><td><code>plat</code></td><td>GemStone IV (Platinum)</td></tr>
<tr><td><code>dr</code></td><td>DragonRealms (Prime)</td></tr>
<tr><td><code>drt</code></td><td>DragonRealms (Test)</td></tr>
</tbody>
</table>
</div>
<h2 id="configuration-options"><a class="header" href="#configuration-options">Configuration Options</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Option</th><th>Type</th><th>Default</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>--config</code></td><td>path</td><td><code>~/.vellum-fe/config.toml</code></td><td>Main config file</td></tr>
<tr><td><code>--layout</code></td><td>path</td><td><code>~/.vellum-fe/layout.toml</code></td><td>Layout config file</td></tr>
<tr><td><code>--colors</code></td><td>path</td><td><code>~/.vellum-fe/colors.toml</code></td><td>Color theme file</td></tr>
<tr><td><code>--keybinds</code></td><td>path</td><td><code>~/.vellum-fe/keybinds.toml</code></td><td>Keybinds file</td></tr>
<tr><td><code>--profile</code></td><td>string</td><td>none</td><td>Load named profile</td></tr>
</tbody>
</table>
</div>
<pre><code class="language-bash"># Custom config location
vellum-fe --config /path/to/config.toml

# Load profile
vellum-fe --profile warrior
</code></pre>
<h2 id="logging-options"><a class="header" href="#logging-options">Logging Options</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Option</th><th>Type</th><th>Default</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>--debug</code></td><td>flag</td><td>false</td><td>Enable debug logging</td></tr>
<tr><td><code>--log-file</code></td><td>path</td><td><code>~/.vellum-fe/vellum-fe.log</code></td><td>Log file location</td></tr>
<tr><td><code>--log-level</code></td><td>string</td><td><code>info</code></td><td>Log verbosity</td></tr>
</tbody>
</table>
</div>
<h3 id="log-levels"><a class="header" href="#log-levels">Log Levels</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Level</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>error</code></td><td>Errors only</td></tr>
<tr><td><code>warn</code></td><td>Warnings and errors</td></tr>
<tr><td><code>info</code></td><td>General information (default)</td></tr>
<tr><td><code>debug</code></td><td>Debug information</td></tr>
<tr><td><code>trace</code></td><td>Verbose tracing</td></tr>
</tbody>
</table>
</div>
<pre><code class="language-bash"># Debug logging
vellum-fe --debug

# Custom log file
vellum-fe --log-file /tmp/debug.log --log-level trace
</code></pre>
<h2 id="display-options"><a class="header" href="#display-options">Display Options</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Option</th><th>Type</th><th>Default</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>--no-color</code></td><td>flag</td><td>false</td><td>Disable colors</td></tr>
<tr><td><code>--force-color</code></td><td>flag</td><td>false</td><td>Force color output</td></tr>
</tbody>
</table>
</div>
<pre><code class="language-bash"># Disable colors (for logging/piping)
vellum-fe --no-color
</code></pre>
<h2 id="miscellaneous-options"><a class="header" href="#miscellaneous-options">Miscellaneous Options</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Option</th><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>--version</code>, <code>-V</code></td><td>flag</td><td>Print version</td></tr>
<tr><td><code>--help</code>, <code>-h</code></td><td>flag</td><td>Print help</td></tr>
<tr><td><code>--dump-config</code></td><td>flag</td><td>Print default config</td></tr>
</tbody>
</table>
</div>
<pre><code class="language-bash"># Show version
vellum-fe --version

# Show help
vellum-fe --help

# Print default configuration
vellum-fe --dump-config &gt; ~/.vellum-fe/config.toml
</code></pre>
<h2 id="option-precedence"><a class="header" href="#option-precedence">Option Precedence</a></h2>
<p>Options are applied in this order (later overrides earlier):</p>
<ol>
<li>Default values</li>
<li>Configuration files</li>
<li>Environment variables</li>
<li>Command line arguments</li>
</ol>
<h2 id="examples-17"><a class="header" href="#examples-17">Examples</a></h2>
<h3 id="basic-lich-connection"><a class="header" href="#basic-lich-connection">Basic Lich Connection</a></h3>
<pre><code class="language-bash">vellum-fe --host 127.0.0.1 --port 8000
</code></pre>
<h3 id="direct-connection-with-debug"><a class="header" href="#direct-connection-with-debug">Direct Connection with Debug</a></h3>
<pre><code class="language-bash">vellum-fe --direct \
  --account myaccount \
  --password mypassword \
  --game prime \
  --character Warrior \
  --debug
</code></pre>
<h3 id="custom-configuration"><a class="header" href="#custom-configuration">Custom Configuration</a></h3>
<pre><code class="language-bash">vellum-fe \
  --config ~/games/vellum-fe/config.toml \
  --layout ~/games/vellum-fe/hunting.toml
</code></pre>
<h3 id="profile-based-launch"><a class="header" href="#profile-based-launch">Profile-Based Launch</a></h3>
<pre><code class="language-bash"># Assumes ~/.vellum-fe/profiles/wizard.toml exists
vellum-fe --profile wizard
</code></pre>
<h3 id="scripted-launch-lich"><a class="header" href="#scripted-launch-lich">Scripted Launch (Lich)</a></h3>
<pre><code class="language-bash">#!/bin/bash
# launch_gs4.sh

# Start Lich in background
lich &amp;
sleep 5

# Connect VellumFE
vellum-fe --host 127.0.0.1 --port 8000
</code></pre>
<h3 id="environment-based-direct"><a class="header" href="#environment-based-direct">Environment-Based (Direct)</a></h3>
<pre><code class="language-bash">#!/bin/bash
# Credentials from environment
export TF_ACCOUNT="myaccount"
export TF_PASSWORD="mypassword"
export TF_GAME="prime"

vellum-fe --direct --character "$1"
</code></pre>
<h2 id="short-options"><a class="header" href="#short-options">Short Options</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Short</th><th>Long</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>-h</code></td><td><code>--host</code></td><td>Host (Lich mode)</td></tr>
<tr><td><code>-p</code></td><td><code>--port</code></td><td>Port (Lich mode)</td></tr>
<tr><td><code>-c</code></td><td><code>--config</code></td><td>Config file</td></tr>
<tr><td><code>-d</code></td><td><code>--debug</code></td><td>Debug mode</td></tr>
<tr><td><code>-V</code></td><td><code>--version</code></td><td>Version</td></tr>
</tbody>
</table>
</div>
<pre><code class="language-bash"># Short form
vellum-fe -h 127.0.0.1 -p 8000 -d
</code></pre>
<h2 id="exit-codes"><a class="header" href="#exit-codes">Exit Codes</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Code</th><th>Meaning</th></tr>
</thead>
<tbody>
<tr><td>0</td><td>Success</td></tr>
<tr><td>1</td><td>General error</td></tr>
<tr><td>2</td><td>Configuration error</td></tr>
<tr><td>3</td><td>Connection error</td></tr>
<tr><td>4</td><td>Authentication error</td></tr>
</tbody>
</table>
</div>
<h2 id="see-also-74"><a class="header" href="#see-also-74">See Also</a></h2>
<ul>
<li><a href="configuration/README.html">Configuration</a></li>
<li><a href="#environment-variables-1">Environment Variables</a></li>
<li><a href="network/README.html">Network Overview</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="config-schema"><a class="header" href="#config-schema">Config Schema</a></h1>
<p>Complete configuration file reference for VellumFE.</p>
<h2 id="file-overview"><a class="header" href="#file-overview">File Overview</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>File</th><th>Purpose</th></tr>
</thead>
<tbody>
<tr><td><code>config.toml</code></td><td>Main configuration</td></tr>
<tr><td><code>layout.toml</code></td><td>Widget layout</td></tr>
<tr><td><code>colors.toml</code></td><td>Color theme</td></tr>
<tr><td><code>keybinds.toml</code></td><td>Key bindings</td></tr>
<tr><td><code>highlights.toml</code></td><td>Text patterns</td></tr>
<tr><td><code>triggers.toml</code></td><td>Automation triggers</td></tr>
</tbody>
</table>
</div>
<h2 id="configtoml"><a class="header" href="#configtoml">config.toml</a></h2>
<h3 id="connection-section"><a class="header" href="#connection-section">Connection Section</a></h3>
<pre><code class="language-toml">[connection]
mode = "lich"           # "lich" or "direct"
host = "127.0.0.1"      # Lich host (lich mode)
port = 8000             # Lich port (lich mode)
auto_reconnect = true   # Auto-reconnect on disconnect
reconnect_delay = 5     # Seconds between reconnect attempts
game = "prime"          # Game instance (direct mode)
</code></pre>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Key</th><th>Type</th><th>Default</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>mode</code></td><td>string</td><td><code>"lich"</code></td><td>Connection mode</td></tr>
<tr><td><code>host</code></td><td>string</td><td><code>"127.0.0.1"</code></td><td>Proxy host</td></tr>
<tr><td><code>port</code></td><td>integer</td><td><code>8000</code></td><td>Proxy port</td></tr>
<tr><td><code>auto_reconnect</code></td><td>boolean</td><td><code>true</code></td><td>Enable auto-reconnect</td></tr>
<tr><td><code>reconnect_delay</code></td><td>integer</td><td><code>5</code></td><td>Reconnect delay (seconds)</td></tr>
<tr><td><code>game</code></td><td>string</td><td><code>"prime"</code></td><td>Game instance (direct)</td></tr>
</tbody>
</table>
</div>
<h3 id="tts-section"><a class="header" href="#tts-section">TTS Section</a></h3>
<pre><code class="language-toml">[tts]
enabled = false
engine = "default"      # "sapi", "say", "espeak"
voice = "default"
rate = 1.0              # 0.5 to 2.0
volume = 1.0            # 0.0 to 1.0

speak_room_descriptions = true
speak_combat = false
speak_speech = true
speak_whispers = true
speak_thoughts = false
</code></pre>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Key</th><th>Type</th><th>Default</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>enabled</code></td><td>boolean</td><td><code>false</code></td><td>Enable TTS</td></tr>
<tr><td><code>engine</code></td><td>string</td><td><code>"default"</code></td><td>TTS engine</td></tr>
<tr><td><code>voice</code></td><td>string</td><td><code>"default"</code></td><td>Voice name</td></tr>
<tr><td><code>rate</code></td><td>float</td><td><code>1.0</code></td><td>Speech rate</td></tr>
<tr><td><code>volume</code></td><td>float</td><td><code>1.0</code></td><td>Volume level</td></tr>
<tr><td><code>speak_*</code></td><td>boolean</td><td>varies</td><td>Speak stream types</td></tr>
</tbody>
</table>
</div>
<h3 id="logging-section"><a class="header" href="#logging-section">Logging Section</a></h3>
<pre><code class="language-toml">[logging]
level = "info"          # "error", "warn", "info", "debug", "trace"
file = "~/.vellum-fe/vellum-fe.log"
max_size = 10485760     # 10MB
rotate = true
</code></pre>
<h3 id="performance-section"><a class="header" href="#performance-section">Performance Section</a></h3>
<pre><code class="language-toml">[performance]
render_rate = 60        # Target FPS
batch_updates = true
lazy_render = true
max_scrollback = 10000
</code></pre>
<h2 id="layouttoml-1"><a class="header" href="#layouttoml-1">layout.toml</a></h2>
<h3 id="widget-definition"><a class="header" href="#widget-definition">Widget Definition</a></h3>
<pre><code class="language-toml">[[widgets]]
type = "text"           # Widget type (required)
name = "main"           # Unique name (required)
x = 0                   # X position (0-100)
y = 0                   # Y position (0-100)
width = 100             # Width (0-100)
height = 100            # Height (0-100)

# Optional common properties
title = "Main"          # Widget title
border = true           # Show border
border_color = "white"  # Border color
focus_order = 1         # Tab order
visible = true          # Initial visibility
</code></pre>
<h3 id="widget-types-1"><a class="header" href="#widget-types-1">Widget Types</a></h3>
<h4 id="text"><a class="header" href="#text">text</a></h4>
<pre><code class="language-toml">[[widgets]]
type = "text"
streams = ["main", "room"]
scrollback = 5000
auto_scroll = true
show_timestamps = false
wrap = true
</code></pre>
<h4 id="tabbed_text"><a class="header" href="#tabbed_text">tabbed_text</a></h4>
<pre><code class="language-toml">[[widgets]]
type = "tabbed_text"
tabs = [
    { name = "All", streams = ["main", "room", "combat"] },
    { name = "Combat", streams = ["combat"] },
    { name = "Chat", streams = ["speech", "thoughts"] },
]
</code></pre>
<h4 id="progress"><a class="header" href="#progress">progress</a></h4>
<pre><code class="language-toml">[[widgets]]
type = "progress"
data_source = "vitals.health"
color = "health"
show_text = true
show_percentage = true
</code></pre>
<h4 id="countdown-1"><a class="header" href="#countdown-1">countdown</a></h4>
<pre><code class="language-toml">[[widgets]]
type = "countdown"
data_source = "roundtime"
warning_threshold = 2
critical_threshold = 0
</code></pre>
<h4 id="compass-3"><a class="header" href="#compass-3">compass</a></h4>
<pre><code class="language-toml">[[widgets]]
type = "compass"
style = "unicode"       # "ascii", "unicode", "minimal"
clickable = true
</code></pre>
<h4 id="indicator-1"><a class="header" href="#indicator-1">indicator</a></h4>
<pre><code class="language-toml">[[widgets]]
type = "indicator"
indicators = ["hidden", "stunned", "prone"]
columns = 2
</code></pre>
<h4 id="room"><a class="header" href="#room">room</a></h4>
<pre><code class="language-toml">[[widgets]]
type = "room"
show_exits = true
show_creatures = true
show_players = false
</code></pre>
<h4 id="command_input"><a class="header" href="#command_input">command_input</a></h4>
<pre><code class="language-toml">[[widgets]]
type = "command_input"
prompt = "&gt; "
history_size = 500
show_roundtime = true
</code></pre>
<h2 id="colorstoml"><a class="header" href="#colorstoml">colors.toml</a></h2>
<h3 id="theme-definition"><a class="header" href="#theme-definition">Theme Definition</a></h3>
<pre><code class="language-toml">[theme]
name = "Custom Theme"

# Base colors
background = "#000000"
text = "#ffffff"
text_dim = "#808080"

# Borders
border = "#404040"
border_focused = "#ffffff"

# Vitals
health = "#00ff00"
health_low = "#ffff00"
health_critical = "#ff0000"
mana = "#0080ff"
stamina = "#ff8000"
spirit = "#ff00ff"

# Streams
main = "#ffffff"
combat = "#ff4444"
speech = "#00ffff"
thoughts = "#00ff00"
whisper = "#ff00ff"
room = "#ffff00"

# Indicators
hidden = "#00ff00"
stunned = "#ffff00"
prone = "#00ffff"
</code></pre>
<h3 id="color-values-2"><a class="header" href="#color-values-2">Color Values</a></h3>
<p>Colors accept:</p>
<ul>
<li>Preset names: <code>"red"</code>, <code>"bright_blue"</code></li>
<li>Hex codes: <code>"#ff0000"</code>, <code>"#f00"</code></li>
</ul>
<h2 id="keybindstoml-1"><a class="header" href="#keybindstoml-1">keybinds.toml</a></h2>
<h3 id="keybind-definition"><a class="header" href="#keybind-definition">Keybind Definition</a></h3>
<pre><code class="language-toml">[keybinds."key_name"]
action = "action_name"  # Widget action

# OR

[keybinds."key_name"]
macro = "game command"  # Send command
</code></pre>
<h3 id="key-names"><a class="header" href="#key-names">Key Names</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Category</th><th>Examples</th></tr>
</thead>
<tbody>
<tr><td>Letters</td><td><code>"a"</code>, <code>"z"</code>, <code>"A"</code> (shift+a)</td></tr>
<tr><td>Numbers</td><td><code>"1"</code>, <code>"0"</code></td></tr>
<tr><td>Function</td><td><code>"f1"</code>, <code>"f12"</code></td></tr>
<tr><td>Navigation</td><td><code>"up"</code>, <code>"down"</code>, <code>"left"</code>, <code>"right"</code></td></tr>
<tr><td>Editing</td><td><code>"enter"</code>, <code>"tab"</code>, <code>"backspace"</code>, <code>"delete"</code></td></tr>
<tr><td>Special</td><td><code>"escape"</code>, <code>"space"</code>, <code>"home"</code>, <code>"end"</code></td></tr>
<tr><td>Numpad</td><td><code>"numpad0"</code>, <code>"numpad_plus"</code></td></tr>
</tbody>
</table>
</div>
<h3 id="modifiers-2"><a class="header" href="#modifiers-2">Modifiers</a></h3>
<p>Combine with <code>+</code>:</p>
<ul>
<li><code>"ctrl+a"</code></li>
<li><code>"shift+f1"</code></li>
<li><code>"alt+enter"</code></li>
<li><code>"ctrl+shift+s"</code></li>
</ul>
<h2 id="highlightstoml-1"><a class="header" href="#highlightstoml-1">highlights.toml</a></h2>
<h3 id="highlight-definition"><a class="header" href="#highlight-definition">Highlight Definition</a></h3>
<pre><code class="language-toml">[[highlights]]
pattern = "regex pattern"
fg = "color"            # Foreground color
bg = "color"            # Background color (optional)
bold = false
italic = false
underline = false

# Optional
enabled = true
priority = 100
fast_parse = false      # Use literal matching
</code></pre>
<h2 id="triggerstoml-1"><a class="header" href="#triggerstoml-1">triggers.toml</a></h2>
<h3 id="trigger-definition"><a class="header" href="#trigger-definition">Trigger Definition</a></h3>
<pre><code class="language-toml">[[triggers]]
name = "trigger_name"
pattern = "regex pattern"
command = "action"

# Optional
enabled = true
priority = 100
cooldown = 1000         # Milliseconds
category = "combat"
stream = "main"         # Limit to stream
</code></pre>
<h2 id="type-reference"><a class="header" href="#type-reference">Type Reference</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Type</th><th>Format</th><th>Example</th></tr>
</thead>
<tbody>
<tr><td>string</td><td>Quoted text</td><td><code>"value"</code></td></tr>
<tr><td>integer</td><td>Whole number</td><td><code>100</code></td></tr>
<tr><td>float</td><td>Decimal number</td><td><code>1.5</code></td></tr>
<tr><td>boolean</td><td>true/false</td><td><code>true</code></td></tr>
<tr><td>array</td><td>Brackets</td><td><code>["a", "b"]</code></td></tr>
<tr><td>table</td><td>Section</td><td><code>[section]</code></td></tr>
</tbody>
</table>
</div>
<h2 id="see-also-75"><a class="header" href="#see-also-75">See Also</a></h2>
<ul>
<li><a href="configuration/README.html">Configuration Guide</a></li>
<li><a href="#keybind-actions-1">Keybind Actions</a></li>
<li><a href="#preset-colors">Preset Colors</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="keybind-actions-1"><a class="header" href="#keybind-actions-1">Keybind Actions</a></h1>
<p>Complete reference of all available keybind actions.</p>
<h2 id="action-syntax"><a class="header" href="#action-syntax">Action Syntax</a></h2>
<pre><code class="language-toml">[keybinds."key"]
action = "action_name"
</code></pre>
<h2 id="navigation-actions-2"><a class="header" href="#navigation-actions-2">Navigation Actions</a></h2>
<h3 id="widget-focus"><a class="header" href="#widget-focus">Widget Focus</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Action</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>next_widget</code></td><td>Focus next widget in tab order</td></tr>
<tr><td><code>prev_widget</code></td><td>Focus previous widget</td></tr>
<tr><td><code>focus_input</code></td><td>Focus command input</td></tr>
<tr><td><code>focus_widget</code></td><td>Focus specific widget (requires <code>widget</code> param)</td></tr>
</tbody>
</table>
</div>
<pre><code class="language-toml">[keybinds."tab"]
action = "next_widget"

[keybinds."shift+tab"]
action = "prev_widget"

[keybinds."escape"]
action = "focus_input"

[keybinds."alt+m"]
action = "focus_widget"
widget = "main"
</code></pre>
<h3 id="scrolling-2"><a class="header" href="#scrolling-2">Scrolling</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Action</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>scroll_up</code></td><td>Scroll up one page</td></tr>
<tr><td><code>scroll_down</code></td><td>Scroll down one page</td></tr>
<tr><td><code>scroll_half_up</code></td><td>Scroll up half page</td></tr>
<tr><td><code>scroll_half_down</code></td><td>Scroll down half page</td></tr>
<tr><td><code>scroll_line_up</code></td><td>Scroll up one line</td></tr>
<tr><td><code>scroll_line_down</code></td><td>Scroll down one line</td></tr>
<tr><td><code>scroll_top</code></td><td>Scroll to top</td></tr>
<tr><td><code>scroll_bottom</code></td><td>Scroll to bottom</td></tr>
</tbody>
</table>
</div>
<pre><code class="language-toml">[keybinds."page_up"]
action = "scroll_up"

[keybinds."page_down"]
action = "scroll_down"

[keybinds."home"]
action = "scroll_top"

[keybinds."end"]
action = "scroll_bottom"
</code></pre>
<h2 id="input-actions-2"><a class="header" href="#input-actions-2">Input Actions</a></h2>
<h3 id="command-input-3"><a class="header" href="#command-input-3">Command Input</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Action</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>submit_input</code></td><td>Submit current input</td></tr>
<tr><td><code>clear_input</code></td><td>Clear input line</td></tr>
<tr><td><code>history_prev</code></td><td>Previous command in history</td></tr>
<tr><td><code>history_next</code></td><td>Next command in history</td></tr>
<tr><td><code>history_search</code></td><td>Search command history</td></tr>
</tbody>
</table>
</div>
<pre><code class="language-toml">[keybinds."enter"]
action = "submit_input"

[keybinds."ctrl+u"]
action = "clear_input"

[keybinds."up"]
action = "history_prev"
</code></pre>
<h3 id="text-editing"><a class="header" href="#text-editing">Text Editing</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Action</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>cursor_left</code></td><td>Move cursor left</td></tr>
<tr><td><code>cursor_right</code></td><td>Move cursor right</td></tr>
<tr><td><code>cursor_home</code></td><td>Move to line start</td></tr>
<tr><td><code>cursor_end</code></td><td>Move to line end</td></tr>
<tr><td><code>delete_char</code></td><td>Delete character at cursor</td></tr>
<tr><td><code>delete_word</code></td><td>Delete word at cursor</td></tr>
<tr><td><code>backspace</code></td><td>Delete character before cursor</td></tr>
</tbody>
</table>
</div>
<h2 id="browser-actions"><a class="header" href="#browser-actions">Browser Actions</a></h2>
<h3 id="open-browsers"><a class="header" href="#open-browsers">Open Browsers</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Action</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>open_search</code></td><td>Open text search</td></tr>
<tr><td><code>open_help</code></td><td>Open help browser</td></tr>
<tr><td><code>open_layout_editor</code></td><td>Open layout editor</td></tr>
<tr><td><code>open_highlight_editor</code></td><td>Open highlight editor</td></tr>
<tr><td><code>open_keybind_editor</code></td><td>Open keybind editor</td></tr>
</tbody>
</table>
</div>
<pre><code class="language-toml">[keybinds."ctrl+f"]
action = "open_search"

[keybinds."f1"]
action = "open_help"
</code></pre>
<h3 id="search-actions"><a class="header" href="#search-actions">Search Actions</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Action</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>search_next</code></td><td>Find next match</td></tr>
<tr><td><code>search_prev</code></td><td>Find previous match</td></tr>
<tr><td><code>close_search</code></td><td>Close search</td></tr>
</tbody>
</table>
</div>
<h2 id="widget-actions"><a class="header" href="#widget-actions">Widget Actions</a></h2>
<h3 id="tabbed-text"><a class="header" href="#tabbed-text">Tabbed Text</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Action</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>next_tab</code></td><td>Switch to next tab</td></tr>
<tr><td><code>prev_tab</code></td><td>Switch to previous tab</td></tr>
<tr><td><code>tab_1</code> through <code>tab_9</code></td><td>Switch to numbered tab</td></tr>
<tr><td><code>close_tab</code></td><td>Close current tab</td></tr>
</tbody>
</table>
</div>
<pre><code class="language-toml">[keybinds."ctrl+tab"]
action = "next_tab"

[keybinds."ctrl+shift+tab"]
action = "prev_tab"

[keybinds."ctrl+1"]
action = "tab_1"
</code></pre>
<h3 id="compass-4"><a class="header" href="#compass-4">Compass</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Action</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>compass_north</code></td><td>Go north</td></tr>
<tr><td><code>compass_south</code></td><td>Go south</td></tr>
<tr><td><code>compass_east</code></td><td>Go east</td></tr>
<tr><td><code>compass_west</code></td><td>Go west</td></tr>
<tr><td><code>compass_northeast</code></td><td>Go northeast</td></tr>
<tr><td><code>compass_northwest</code></td><td>Go northwest</td></tr>
<tr><td><code>compass_southeast</code></td><td>Go southeast</td></tr>
<tr><td><code>compass_southwest</code></td><td>Go southwest</td></tr>
<tr><td><code>compass_out</code></td><td>Go out</td></tr>
<tr><td><code>compass_up</code></td><td>Go up</td></tr>
<tr><td><code>compass_down</code></td><td>Go down</td></tr>
</tbody>
</table>
</div>
<h2 id="application-actions-1"><a class="header" href="#application-actions-1">Application Actions</a></h2>
<h3 id="general-1"><a class="header" href="#general-1">General</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Action</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>quit</code></td><td>Exit application</td></tr>
<tr><td><code>reload_config</code></td><td>Reload all configuration</td></tr>
<tr><td><code>toggle_debug</code></td><td>Toggle debug overlay</td></tr>
</tbody>
</table>
</div>
<pre><code class="language-toml">[keybinds."ctrl+q"]
action = "quit"

[keybinds."ctrl+r"]
action = "reload_config"
</code></pre>
<h3 id="layout-2"><a class="header" href="#layout-2">Layout</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Action</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>toggle_widget</code></td><td>Toggle widget visibility</td></tr>
<tr><td><code>maximize_widget</code></td><td>Maximize focused widget</td></tr>
<tr><td><code>restore_layout</code></td><td>Restore default layout</td></tr>
</tbody>
</table>
</div>
<pre><code class="language-toml">[keybinds."ctrl+h"]
action = "toggle_widget"
widget = "health"
</code></pre>
<h2 id="tts-actions"><a class="header" href="#tts-actions">TTS Actions</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Action</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>toggle_tts</code></td><td>Enable/disable TTS</td></tr>
<tr><td><code>speak_status</code></td><td>Speak current status</td></tr>
<tr><td><code>speak_room</code></td><td>Speak room description</td></tr>
<tr><td><code>speak_last</code></td><td>Repeat last spoken text</td></tr>
<tr><td><code>stop_speaking</code></td><td>Stop current speech</td></tr>
<tr><td><code>tts_rate_up</code></td><td>Increase speech rate</td></tr>
<tr><td><code>tts_rate_down</code></td><td>Decrease speech rate</td></tr>
<tr><td><code>tts_volume_up</code></td><td>Increase volume</td></tr>
<tr><td><code>tts_volume_down</code></td><td>Decrease volume</td></tr>
</tbody>
</table>
</div>
<pre><code class="language-toml">[keybinds."ctrl+space"]
action = "toggle_tts"

[keybinds."f1"]
action = "speak_status"
</code></pre>
<h2 id="macro-actions"><a class="header" href="#macro-actions">Macro Actions</a></h2>
<p>Send game commands:</p>
<pre><code class="language-toml">[keybinds."f1"]
macro = "attack target"

[keybinds."ctrl+1"]
macro = "prep 101;cast"

# With delay
[keybinds."f5"]
macro = "prep 901;{2000};cast"

# With input prompt
[keybinds."ctrl+g"]
macro = "go $input"
</code></pre>
<h3 id="macro-variables"><a class="header" href="#macro-variables">Macro Variables</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Variable</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>$input</code></td><td>Prompt for input</td></tr>
<tr><td><code>$target</code></td><td>Current target</td></tr>
<tr><td><code>$lasttarget</code></td><td>Last targeted creature</td></tr>
<tr><td><code>{N}</code></td><td>Delay N milliseconds</td></tr>
</tbody>
</table>
</div>
<h2 id="action-parameters"><a class="header" href="#action-parameters">Action Parameters</a></h2>
<p>Some actions require additional parameters:</p>
<pre><code class="language-toml">[keybinds."alt+m"]
action = "focus_widget"
widget = "main"          # Required: widget name

[keybinds."ctrl+h"]
action = "toggle_widget"
widget = "health"        # Required: widget name
</code></pre>
<h2 id="complete-example-5"><a class="header" href="#complete-example-5">Complete Example</a></h2>
<pre><code class="language-toml"># keybinds.toml

# Navigation
[keybinds."tab"]
action = "next_widget"

[keybinds."shift+tab"]
action = "prev_widget"

[keybinds."escape"]
action = "focus_input"

# Scrolling
[keybinds."page_up"]
action = "scroll_up"

[keybinds."page_down"]
action = "scroll_down"

# Movement macros
[keybinds."numpad8"]
macro = "north"

[keybinds."numpad2"]
macro = "south"

# Combat macros
[keybinds."f1"]
macro = "attack target"

[keybinds."f2"]
macro = "stance defensive"

# Application
[keybinds."ctrl+q"]
action = "quit"

[keybinds."ctrl+f"]
action = "open_search"
</code></pre>
<h2 id="see-also-76"><a class="header" href="#see-also-76">See Also</a></h2>
<ul>
<li><a href="#keybindstoml-reference">Keybinds Configuration</a></li>
<li><a href="#macros-1">Macros</a></li>
<li><a href="#config-schema">Config Schema</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="parsed-elements"><a class="header" href="#parsed-elements">Parsed Elements</a></h1>
<p>Reference of all ParsedElement variants from the game protocol parser.</p>
<h2 id="overview-34"><a class="header" href="#overview-34">Overview</a></h2>
<p>ParsedElements are the structured output of the XML parser. Each variant represents a specific type of game data.</p>
<h2 id="text-elements"><a class="header" href="#text-elements">Text Elements</a></h2>
<h3 id="text-1"><a class="header" href="#text-1">Text</a></h3>
<p>Plain text content.</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>ParsedElement::Text(String)
<span class="boring">}</span></code></pre>
<p><strong>Source</strong>: Untagged text between XML elements.</p>
<h3 id="styledtext"><a class="header" href="#styledtext">StyledText</a></h3>
<p>Text with formatting.</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>ParsedElement::StyledText {
    text: String,
    bold: bool,
    preset: Option&lt;String&gt;,
}
<span class="boring">}</span></code></pre>
<p><strong>Source</strong>: <code>&lt;pushBold/&gt;</code>, <code>&lt;popBold/&gt;</code>, <code>&lt;preset id="..."/&gt;</code></p>
<h2 id="room-elements"><a class="header" href="#room-elements">Room Elements</a></h2>
<h3 id="roomname"><a class="header" href="#roomname">RoomName</a></h3>
<p>Current room name.</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>ParsedElement::RoomName(String)
<span class="boring">}</span></code></pre>
<p><strong>Source</strong>: <code>&lt;roomName&gt;...&lt;/roomName&gt;</code></p>
<h3 id="roomdesc"><a class="header" href="#roomdesc">RoomDesc</a></h3>
<p>Room description text.</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>ParsedElement::RoomDesc(String)
<span class="boring">}</span></code></pre>
<p><strong>Source</strong>: <code>&lt;roomDesc&gt;...&lt;/roomDesc&gt;</code></p>
<h3 id="roomobjects"><a class="header" href="#roomobjects">RoomObjects</a></h3>
<p>Objects in the room.</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>ParsedElement::RoomObjects(String)
<span class="boring">}</span></code></pre>
<p><strong>Source</strong>: <code>&lt;roomObjs&gt;...&lt;/roomObjs&gt;</code></p>
<h3 id="roomplayers"><a class="header" href="#roomplayers">RoomPlayers</a></h3>
<p>Players in the room.</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>ParsedElement::RoomPlayers(String)
<span class="boring">}</span></code></pre>
<p><strong>Source</strong>: <code>&lt;roomPlayers&gt;...&lt;/roomPlayers&gt;</code></p>
<h3 id="roomexits"><a class="header" href="#roomexits">RoomExits</a></h3>
<p>Available exits.</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>ParsedElement::RoomExits(String)
<span class="boring">}</span></code></pre>
<p><strong>Source</strong>: <code>&lt;roomExits&gt;...&lt;/roomExits&gt;</code></p>
<h2 id="vitals-elements"><a class="header" href="#vitals-elements">Vitals Elements</a></h2>
<h3 id="vitals-1"><a class="header" href="#vitals-1">Vitals</a></h3>
<p>Character vital statistics.</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>ParsedElement::Vitals {
    health: Option&lt;u8&gt;,
    mana: Option&lt;u8&gt;,
    stamina: Option&lt;u8&gt;,
    spirit: Option&lt;u8&gt;,
}
<span class="boring">}</span></code></pre>
<p><strong>Source</strong>: <code>&lt;progressBar id="..." value="..."/&gt;</code></p>
<p>Progress bar IDs:</p>
<ul>
<li><code>health</code>, <code>manapoints</code>, <code>stamina</code>, <code>spirit</code></li>
<li><code>encumlevel</code>, <code>mindState</code>, <code>nextLvlPB</code></li>
</ul>
<h2 id="timing-elements"><a class="header" href="#timing-elements">Timing Elements</a></h2>
<h3 id="roundtime-1"><a class="header" href="#roundtime-1">Roundtime</a></h3>
<p>Action roundtime.</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>ParsedElement::Roundtime(u32)
<span class="boring">}</span></code></pre>
<p><strong>Source</strong>: <code>&lt;roundTime value="..."/&gt;</code> or <code>Roundtime: N sec</code></p>
<h3 id="casttime"><a class="header" href="#casttime">CastTime</a></h3>
<p>Spell casting time.</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>ParsedElement::CastTime(u32)
<span class="boring">}</span></code></pre>
<p><strong>Source</strong>: <code>&lt;castTime value="..."/&gt;</code></p>
<h2 id="status-elements"><a class="header" href="#status-elements">Status Elements</a></h2>
<h3 id="indicator-2"><a class="header" href="#indicator-2">Indicator</a></h3>
<p>Status indicator change.</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>ParsedElement::Indicator {
    id: String,
    visible: bool,
}
<span class="boring">}</span></code></pre>
<p><strong>Source</strong>: <code>&lt;indicator id="..." visible="y|n"/&gt;</code></p>
<p>Common indicator IDs:</p>
<ul>
<li><code>IconHIDDEN</code>, <code>IconSTUNNED</code>, <code>IconWEBBED</code></li>
<li><code>IconPRONE</code>, <code>IconKNEELING</code>, <code>IconSITTING</code></li>
<li><code>IconBLEEDING</code>, <code>IconPOISONED</code>, <code>IconDISEASED</code></li>
<li><code>IconINVISIBLE</code>, <code>IconDEAD</code></li>
</ul>
<h3 id="stance-1"><a class="header" href="#stance-1">Stance</a></h3>
<p>Combat stance.</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>ParsedElement::Stance(String)
<span class="boring">}</span></code></pre>
<p><strong>Source</strong>: <code>&lt;stance id="..."/&gt;</code></p>
<p>Values: <code>offensive</code>, <code>forward</code>, <code>neutral</code>, <code>guarded</code>, <code>defensive</code></p>
<h2 id="navigation-elements"><a class="header" href="#navigation-elements">Navigation Elements</a></h2>
<h3 id="compass-5"><a class="header" href="#compass-5">Compass</a></h3>
<p>Available directions.</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>ParsedElement::Compass {
    directions: Vec&lt;String&gt;,
}
<span class="boring">}</span></code></pre>
<p><strong>Source</strong>: <code>&lt;compass&gt;&lt;dir value="..."/&gt;...&lt;/compass&gt;</code></p>
<p>Direction values:</p>
<ul>
<li><code>n</code>, <code>s</code>, <code>e</code>, <code>w</code> (cardinal)</li>
<li><code>ne</code>, <code>nw</code>, <code>se</code>, <code>sw</code> (diagonal)</li>
<li><code>up</code>, <code>down</code>, <code>out</code></li>
</ul>
<h2 id="hand-elements"><a class="header" href="#hand-elements">Hand Elements</a></h2>
<h3 id="lefthand"><a class="header" href="#lefthand">LeftHand</a></h3>
<p>Item in left hand.</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>ParsedElement::LeftHand {
    noun: String,
    name: String,
    exist: Option&lt;String&gt;,
}
<span class="boring">}</span></code></pre>
<p><strong>Source</strong>: <code>&lt;left exist="..." noun="..."&gt;...&lt;/left&gt;</code></p>
<h3 id="righthand"><a class="header" href="#righthand">RightHand</a></h3>
<p>Item in right hand.</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>ParsedElement::RightHand {
    noun: String,
    name: String,
    exist: Option&lt;String&gt;,
}
<span class="boring">}</span></code></pre>
<p><strong>Source</strong>: <code>&lt;right exist="..." noun="..."&gt;...&lt;/right&gt;</code></p>
<h3 id="spell"><a class="header" href="#spell">Spell</a></h3>
<p>Prepared spell.</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>ParsedElement::Spell(String)
<span class="boring">}</span></code></pre>
<p><strong>Source</strong>: <code>&lt;spell&gt;...&lt;/spell&gt;</code></p>
<h2 id="stream-elements"><a class="header" href="#stream-elements">Stream Elements</a></h2>
<h3 id="pushstream"><a class="header" href="#pushstream">PushStream</a></h3>
<p>Start of named stream.</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>ParsedElement::PushStream(String)
<span class="boring">}</span></code></pre>
<p><strong>Source</strong>: <code>&lt;pushStream id="..."/&gt;</code></p>
<h3 id="popstream"><a class="header" href="#popstream">PopStream</a></h3>
<p>End of current stream.</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>ParsedElement::PopStream
<span class="boring">}</span></code></pre>
<p><strong>Source</strong>: <code>&lt;popStream/&gt;</code></p>
<h3 id="streamcontent"><a class="header" href="#streamcontent">StreamContent</a></h3>
<p>Content within a stream.</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>ParsedElement::StreamContent {
    stream: String,
    content: String,
}
<span class="boring">}</span></code></pre>
<h2 id="prompt-elements"><a class="header" href="#prompt-elements">Prompt Elements</a></h2>
<h3 id="prompt-1"><a class="header" href="#prompt-1">Prompt</a></h3>
<p>Game prompt.</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>ParsedElement::Prompt {
    text: String,
    time: Option&lt;String&gt;,
}
<span class="boring">}</span></code></pre>
<p><strong>Source</strong>: <code>&lt;prompt time="..."&gt;...&lt;/prompt&gt;</code></p>
<h2 id="link-elements"><a class="header" href="#link-elements">Link Elements</a></h2>
<h3 id="link"><a class="header" href="#link">Link</a></h3>
<p>Clickable object link.</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>ParsedElement::Link {
    exist: String,
    noun: String,
    text: String,
}
<span class="boring">}</span></code></pre>
<p><strong>Source</strong>: <code>&lt;a exist="..." noun="..."&gt;...&lt;/a&gt;</code></p>
<h3 id="commandlink"><a class="header" href="#commandlink">CommandLink</a></h3>
<p>Clickable command link.</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>ParsedElement::CommandLink {
    cmd: String,
    text: String,
}
<span class="boring">}</span></code></pre>
<p><strong>Source</strong>: <code>&lt;d cmd="..."&gt;...&lt;/d&gt;</code></p>
<h2 id="combat-elements"><a class="header" href="#combat-elements">Combat Elements</a></h2>
<h3 id="combat"><a class="header" href="#combat">Combat</a></h3>
<p>Combat message.</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>ParsedElement::Combat {
    text: String,
}
<span class="boring">}</span></code></pre>
<p><strong>Source</strong>: Text within combat stream.</p>
<h3 id="damage"><a class="header" href="#damage">Damage</a></h3>
<p>Damage dealt or received.</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>ParsedElement::Damage {
    amount: u32,
    target: Option&lt;String&gt;,
}
<span class="boring">}</span></code></pre>
<h2 id="container-elements"><a class="header" href="#container-elements">Container Elements</a></h2>
<h3 id="container"><a class="header" href="#container">Container</a></h3>
<p>Container contents.</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>ParsedElement::Container {
    id: String,
    name: String,
    contents: Vec&lt;ContainerItem&gt;,
}
<span class="boring">}</span></code></pre>
<h3 id="containeritem"><a class="header" href="#containeritem">ContainerItem</a></h3>
<p>Item within container.</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>ContainerItem {
    exist: String,
    noun: String,
    name: String,
}
<span class="boring">}</span></code></pre>
<h2 id="spell-elements"><a class="header" href="#spell-elements">Spell Elements</a></h2>
<h3 id="activespell"><a class="header" href="#activespell">ActiveSpell</a></h3>
<p>Currently active spell.</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>ParsedElement::ActiveSpell {
    name: String,
    duration: Option&lt;u32&gt;,
}
<span class="boring">}</span></code></pre>
<p><strong>Source</strong>: <code>&lt;spell&gt;...&lt;/spell&gt;</code> with duration</p>
<h3 id="spellexpire"><a class="header" href="#spellexpire">SpellExpire</a></h3>
<p>Spell expired notification.</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>ParsedElement::SpellExpire {
    name: String,
}
<span class="boring">}</span></code></pre>
<h2 id="system-elements"><a class="header" href="#system-elements">System Elements</a></h2>
<h3 id="mode"><a class="header" href="#mode">Mode</a></h3>
<p>Game mode change.</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>ParsedElement::Mode {
    mode: String,
}
<span class="boring">}</span></code></pre>
<p><strong>Source</strong>: <code>&lt;mode id="..."/&gt;</code></p>
<h3 id="output"><a class="header" href="#output">Output</a></h3>
<p>Output configuration.</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>ParsedElement::Output {
    class: String,
}
<span class="boring">}</span></code></pre>
<p><strong>Source</strong>: <code>&lt;output class="..."/&gt;</code></p>
<h3 id="clearstream"><a class="header" href="#clearstream">ClearStream</a></h3>
<p>Clear stream content.</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>ParsedElement::ClearStream(String)
<span class="boring">}</span></code></pre>
<p><strong>Source</strong>: <code>&lt;clearStream id="..."/&gt;</code></p>
<h2 id="unknown-element"><a class="header" href="#unknown-element">Unknown Element</a></h2>
<p>Unrecognized XML.</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>ParsedElement::Unknown {
    tag: String,
    content: String,
}
<span class="boring">}</span></code></pre>
<p>Preserves unhandled elements for debugging.</p>
<h2 id="element-processing"><a class="header" href="#element-processing">Element Processing</a></h2>
<p>Elements are processed in order:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>for element in parser.parse(input) {
    match element {
        ParsedElement::RoomName(name) =&gt; {
            state.room.name = name;
        }
        ParsedElement::Vitals { health, .. } =&gt; {
            if let Some(h) = health {
                state.vitals.health = h;
            }
        }
        // ...
    }
}
<span class="boring">}</span></code></pre>
<h2 id="see-also-77"><a class="header" href="#see-also-77">See Also</a></h2>
<ul>
<li><a href="#parser-protocol">Parser Protocol</a></li>
<li><a href="#parser-extensions-1">Parser Extensions</a></li>
<li><a href="#stream-ids">Stream IDs</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="stream-ids"><a class="header" href="#stream-ids">Stream IDs</a></h1>
<p>Reference of all game stream identifiers.</p>
<h2 id="overview-35"><a class="header" href="#overview-35">Overview</a></h2>
<p>Streams categorize game output. Each text window can subscribe to specific streams to filter content.</p>
<h2 id="core-streams"><a class="header" href="#core-streams">Core Streams</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Stream ID</th><th>Description</th><th>Content Type</th></tr>
</thead>
<tbody>
<tr><td><code>main</code></td><td>Primary game output</td><td>General text, actions, results</td></tr>
<tr><td><code>room</code></td><td>Room descriptions</td><td>Room name, description, exits, objects</td></tr>
<tr><td><code>combat</code></td><td>Combat messages</td><td>Attacks, damage, death</td></tr>
<tr><td><code>speech</code></td><td>Spoken communication</td><td>Say, ask, exclaim</td></tr>
<tr><td><code>whisper</code></td><td>Private messages</td><td>Whispers</td></tr>
<tr><td><code>thoughts</code></td><td>ESP/mental communication</td><td>Think, group chat</td></tr>
</tbody>
</table>
</div>
<h2 id="communication-streams"><a class="header" href="#communication-streams">Communication Streams</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Stream ID</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>speech</code></td><td>Player speech (say, ask)</td></tr>
<tr><td><code>whisper</code></td><td>Private whispers</td></tr>
<tr><td><code>thoughts</code></td><td>ESP channel (think)</td></tr>
<tr><td><code>shout</code></td><td>Shouted messages</td></tr>
<tr><td><code>sing</code></td><td>Sung messages</td></tr>
</tbody>
</table>
</div>
<h2 id="game-state-streams"><a class="header" href="#game-state-streams">Game State Streams</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Stream ID</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>room</code></td><td>Room information</td></tr>
<tr><td><code>inv</code></td><td>Inventory updates</td></tr>
<tr><td><code>percWindow</code></td><td>Perception window</td></tr>
<tr><td><code>familiar</code></td><td>Familiar view</td></tr>
<tr><td><code>bounty</code></td><td>Bounty task info</td></tr>
</tbody>
</table>
</div>
<h2 id="combat-streams"><a class="header" href="#combat-streams">Combat Streams</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Stream ID</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>combat</code></td><td>Combat actions and results</td></tr>
<tr><td><code>assess</code></td><td>Creature assessments</td></tr>
<tr><td><code>death</code></td><td>Death notifications</td></tr>
</tbody>
</table>
</div>
<h2 id="specialty-streams"><a class="header" href="#specialty-streams">Specialty Streams</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Stream ID</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>logons</code></td><td>Player login/logout</td></tr>
<tr><td><code>atmospherics</code></td><td>Weather and atmosphere</td></tr>
<tr><td><code>loot</code></td><td>Loot messages</td></tr>
<tr><td><code>group</code></td><td>Group/party messages</td></tr>
</tbody>
</table>
</div>
<h2 id="system-streams"><a class="header" href="#system-streams">System Streams</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Stream ID</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>raw</code></td><td>Unprocessed output</td></tr>
<tr><td><code>debug</code></td><td>Debug information</td></tr>
<tr><td><code>script</code></td><td>Script output (Lich)</td></tr>
</tbody>
</table>
</div>
<h2 id="using-streams"><a class="header" href="#using-streams">Using Streams</a></h2>
<h3 id="widget-configuration"><a class="header" href="#widget-configuration">Widget Configuration</a></h3>
<pre><code class="language-toml"># Main window - everything
[[widgets]]
type = "text"
name = "main"
streams = ["main", "room", "combat"]

# Chat window - communication only
[[widgets]]
type = "text"
name = "chat"
streams = ["speech", "whisper", "thoughts"]

# Combat window - combat only
[[widgets]]
type = "text"
name = "combat"
streams = ["combat"]
</code></pre>
<h3 id="empty-streams-all"><a class="header" href="#empty-streams-all">Empty Streams (All)</a></h3>
<pre><code class="language-toml"># Empty array = receive all streams
[[widgets]]
type = "text"
streams = []
</code></pre>
<h3 id="tabbed-text-1"><a class="header" href="#tabbed-text-1">Tabbed Text</a></h3>
<pre><code class="language-toml">[[widgets]]
type = "tabbed_text"
tabs = [
    { name = "All", streams = [] },
    { name = "Game", streams = ["main", "room"] },
    { name = "Combat", streams = ["combat"] },
    { name = "Chat", streams = ["speech", "thoughts", "whisper"] },
]
</code></pre>
<h3 id="triggers-1"><a class="header" href="#triggers-1">Triggers</a></h3>
<pre><code class="language-toml"># Trigger on specific stream
[[triggers]]
pattern = "whispers,"
command = ".notify Whisper!"
stream = "whisper"

# Trigger on combat stream
[[triggers]]
pattern = "falls dead"
command = "search"
stream = "combat"
</code></pre>
<h2 id="stream-colors"><a class="header" href="#stream-colors">Stream Colors</a></h2>
<p>Configure stream-specific colors in <code>colors.toml</code>:</p>
<pre><code class="language-toml">[theme]
# Stream colors
main = "#ffffff"
room = "#ffff00"
combat = "#ff4444"
speech = "#00ffff"
whisper = "#ff00ff"
thoughts = "#00ff00"
</code></pre>
<h2 id="stream-priority"><a class="header" href="#stream-priority">Stream Priority</a></h2>
<p>When streams overlap, content appears in all matching windows. Configure priority in layout:</p>
<pre><code class="language-toml">[[widgets]]
type = "text"
name = "combat"
streams = ["combat"]
priority = 100        # Higher = checked first
</code></pre>
<h2 id="common-configurations"><a class="header" href="#common-configurations">Common Configurations</a></h2>
<h3 id="single-window-all-content"><a class="header" href="#single-window-all-content">Single Window (All Content)</a></h3>
<pre><code class="language-toml">[[widgets]]
type = "text"
name = "main"
streams = []          # All streams
</code></pre>
<h3 id="two-windows-game--chat"><a class="header" href="#two-windows-game--chat">Two Windows (Game + Chat)</a></h3>
<pre><code class="language-toml">[[widgets]]
type = "text"
name = "game"
streams = ["main", "room", "combat"]

[[widgets]]
type = "text"
name = "chat"
streams = ["speech", "thoughts", "whisper"]
</code></pre>
<h3 id="three-windows-specialized"><a class="header" href="#three-windows-specialized">Three Windows (Specialized)</a></h3>
<pre><code class="language-toml">[[widgets]]
type = "text"
name = "story"
streams = ["main", "room"]

[[widgets]]
type = "text"
name = "combat"
streams = ["combat"]

[[widgets]]
type = "text"
name = "social"
streams = ["speech", "thoughts", "whisper"]
</code></pre>
<h3 id="rp-layout"><a class="header" href="#rp-layout">RP Layout</a></h3>
<pre><code class="language-toml">[[widgets]]
type = "text"
name = "story"
streams = ["main", "room"]        # Immersive content

[[widgets]]
type = "text"
name = "ic"
streams = ["speech", "whisper"]   # In-character

[[widgets]]
type = "text"
name = "ooc"
streams = ["thoughts"]            # Out-of-character
</code></pre>
<h2 id="stream-detection"><a class="header" href="#stream-detection">Stream Detection</a></h2>
<p>The parser assigns streams based on XML tags:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>XML Source</th><th>Stream</th></tr>
</thead>
<tbody>
<tr><td><code>&lt;pushStream id="X"/&gt;</code></td><td>Stream X</td></tr>
<tr><td><code>&lt;roomName&gt;</code></td><td>room</td></tr>
<tr><td><code>&lt;roomDesc&gt;</code></td><td>room</td></tr>
<tr><td>Combat XML</td><td>combat</td></tr>
<tr><td>Default text</td><td>main</td></tr>
</tbody>
</table>
</div>
<h2 id="see-also-78"><a class="header" href="#see-also-78">See Also</a></h2>
<ul>
<li><a href="#text-windows-1">Text Windows</a></li>
<li><a href="#tabbed-text-windows">Tabbed Text</a></li>
<li><a href="#parser-protocol">Parser Protocol</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="preset-colors"><a class="header" href="#preset-colors">Preset Colors</a></h1>
<p>Reference of all named color presets.</p>
<h2 id="basic-colors"><a class="header" href="#basic-colors">Basic Colors</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Name</th><th>Hex Code</th><th>Preview</th></tr>
</thead>
<tbody>
<tr><td><code>black</code></td><td><code>#000000</code></td><td>■ Black</td></tr>
<tr><td><code>red</code></td><td><code>#800000</code></td><td>■ Red</td></tr>
<tr><td><code>green</code></td><td><code>#008000</code></td><td>■ Green</td></tr>
<tr><td><code>yellow</code></td><td><code>#808000</code></td><td>■ Yellow</td></tr>
<tr><td><code>blue</code></td><td><code>#000080</code></td><td>■ Blue</td></tr>
<tr><td><code>magenta</code></td><td><code>#800080</code></td><td>■ Magenta</td></tr>
<tr><td><code>cyan</code></td><td><code>#008080</code></td><td>■ Cyan</td></tr>
<tr><td><code>white</code></td><td><code>#c0c0c0</code></td><td>■ White</td></tr>
</tbody>
</table>
</div>
<h2 id="bright-colors"><a class="header" href="#bright-colors">Bright Colors</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Name</th><th>Hex Code</th><th>Preview</th></tr>
</thead>
<tbody>
<tr><td><code>bright_black</code> / <code>gray</code></td><td><code>#808080</code></td><td>■ Gray</td></tr>
<tr><td><code>bright_red</code></td><td><code>#ff0000</code></td><td>■ Bright Red</td></tr>
<tr><td><code>bright_green</code></td><td><code>#00ff00</code></td><td>■ Bright Green</td></tr>
<tr><td><code>bright_yellow</code></td><td><code>#ffff00</code></td><td>■ Bright Yellow</td></tr>
<tr><td><code>bright_blue</code></td><td><code>#0000ff</code></td><td>■ Bright Blue</td></tr>
<tr><td><code>bright_magenta</code></td><td><code>#ff00ff</code></td><td>■ Bright Magenta</td></tr>
<tr><td><code>bright_cyan</code></td><td><code>#00ffff</code></td><td>■ Bright Cyan</td></tr>
<tr><td><code>bright_white</code></td><td><code>#ffffff</code></td><td>■ Bright White</td></tr>
</tbody>
</table>
</div>
<h2 id="alternative-names"><a class="header" href="#alternative-names">Alternative Names</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Alternative</th><th>Maps To</th></tr>
</thead>
<tbody>
<tr><td><code>grey</code></td><td><code>gray</code></td></tr>
<tr><td><code>dark_gray</code></td><td><code>bright_black</code></td></tr>
<tr><td><code>light_gray</code></td><td><code>white</code></td></tr>
</tbody>
</table>
</div>
<h2 id="semantic-colors"><a class="header" href="#semantic-colors">Semantic Colors</a></h2>
<h3 id="vitals-2"><a class="header" href="#vitals-2">Vitals</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Name</th><th>Default</th><th>Purpose</th></tr>
</thead>
<tbody>
<tr><td><code>health</code></td><td><code>#00ff00</code></td><td>Health bar</td></tr>
<tr><td><code>health_low</code></td><td><code>#ffff00</code></td><td>Low health warning</td></tr>
<tr><td><code>health_critical</code></td><td><code>#ff0000</code></td><td>Critical health</td></tr>
<tr><td><code>mana</code></td><td><code>#0080ff</code></td><td>Mana bar</td></tr>
<tr><td><code>stamina</code></td><td><code>#ff8000</code></td><td>Stamina bar</td></tr>
<tr><td><code>spirit</code></td><td><code>#ff00ff</code></td><td>Spirit bar</td></tr>
</tbody>
</table>
</div>
<h3 id="status-indicators-1"><a class="header" href="#status-indicators-1">Status Indicators</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Name</th><th>Default</th><th>Purpose</th></tr>
</thead>
<tbody>
<tr><td><code>hidden</code></td><td><code>#00ff00</code></td><td>Hidden status</td></tr>
<tr><td><code>invisible</code></td><td><code>#00ffff</code></td><td>Invisible status</td></tr>
<tr><td><code>stunned</code></td><td><code>#ffff00</code></td><td>Stunned status</td></tr>
<tr><td><code>webbed</code></td><td><code>#ff00ff</code></td><td>Webbed status</td></tr>
<tr><td><code>prone</code></td><td><code>#00ffff</code></td><td>Prone status</td></tr>
<tr><td><code>kneeling</code></td><td><code>#ff8000</code></td><td>Kneeling status</td></tr>
<tr><td><code>sitting</code></td><td><code>#808080</code></td><td>Sitting status</td></tr>
<tr><td><code>dead</code></td><td><code>#ff0000</code></td><td>Dead status</td></tr>
</tbody>
</table>
</div>
<h3 id="streams"><a class="header" href="#streams">Streams</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Name</th><th>Default</th><th>Purpose</th></tr>
</thead>
<tbody>
<tr><td><code>main</code></td><td><code>#ffffff</code></td><td>Main text</td></tr>
<tr><td><code>room</code></td><td><code>#ffff00</code></td><td>Room descriptions</td></tr>
<tr><td><code>combat</code></td><td><code>#ff4444</code></td><td>Combat messages</td></tr>
<tr><td><code>speech</code></td><td><code>#00ffff</code></td><td>Player speech</td></tr>
<tr><td><code>whisper</code></td><td><code>#ff00ff</code></td><td>Whispers</td></tr>
<tr><td><code>thoughts</code></td><td><code>#00ff00</code></td><td>ESP/thoughts</td></tr>
</tbody>
</table>
</div>
<h3 id="ui-elements"><a class="header" href="#ui-elements">UI Elements</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Name</th><th>Default</th><th>Purpose</th></tr>
</thead>
<tbody>
<tr><td><code>border</code></td><td><code>#404040</code></td><td>Widget borders</td></tr>
<tr><td><code>border_focused</code></td><td><code>#ffffff</code></td><td>Focused widget border</td></tr>
<tr><td><code>background</code></td><td><code>#000000</code></td><td>Background</td></tr>
<tr><td><code>text</code></td><td><code>#ffffff</code></td><td>Default text</td></tr>
<tr><td><code>text_dim</code></td><td><code>#808080</code></td><td>Dimmed text</td></tr>
</tbody>
</table>
</div>
<h2 id="game-presets"><a class="header" href="#game-presets">Game Presets</a></h2>
<p>Colors matching game highlight presets:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Preset ID</th><th>Name</th><th>Color</th></tr>
</thead>
<tbody>
<tr><td><code>speech</code></td><td>Speech</td><td><code>#00ffff</code></td></tr>
<tr><td><code>thought</code></td><td>Thoughts</td><td><code>#00ff00</code></td></tr>
<tr><td><code>whisper</code></td><td>Whispers</td><td><code>#ff00ff</code></td></tr>
<tr><td><code>bold</code></td><td>Bold text</td><td>Inherits + bold</td></tr>
<tr><td><code>roomName</code></td><td>Room name</td><td><code>#ffff00</code></td></tr>
<tr><td><code>roomDesc</code></td><td>Room description</td><td><code>#c0c0c0</code></td></tr>
</tbody>
</table>
</div>
<h2 id="using-colors"><a class="header" href="#using-colors">Using Colors</a></h2>
<h3 id="in-colorstoml"><a class="header" href="#in-colorstoml">In colors.toml</a></h3>
<pre><code class="language-toml">[theme]
# Use preset names
health = "bright_green"
mana = "bright_blue"

# Or hex codes
border = "#333333"
text = "#e0e0e0"
</code></pre>
<h3 id="in-highlightstoml"><a class="header" href="#in-highlightstoml">In highlights.toml</a></h3>
<pre><code class="language-toml">[[highlights]]
pattern = "something"
fg = "bright_red"        # Preset name
bg = "#000080"           # Hex code
</code></pre>
<h3 id="in-widgets"><a class="header" href="#in-widgets">In widgets</a></h3>
<pre><code class="language-toml">[[widgets]]
type = "progress"
color = "health"         # Semantic color
border_color = "cyan"    # Basic color
</code></pre>
<h2 id="hex-color-format"><a class="header" href="#hex-color-format">Hex Color Format</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Format</th><th>Example</th><th>Notes</th></tr>
</thead>
<tbody>
<tr><td>6-digit</td><td><code>#ff0000</code></td><td>Full RGB</td></tr>
<tr><td>3-digit</td><td><code>#f00</code></td><td>Shorthand (expands to <code>#ff0000</code>)</td></tr>
</tbody>
</table>
</div>
<h2 id="color-selection-tips"><a class="header" href="#color-selection-tips">Color Selection Tips</a></h2>
<h3 id="high-contrast-1"><a class="header" href="#high-contrast-1">High Contrast</a></h3>
<p>For accessibility, use high-contrast combinations:</p>
<pre><code class="language-toml"># Good contrast
text = "#ffffff"
background = "#000000"

# Also good
text = "#000000"
background = "#ffffff"
</code></pre>
<h3 id="colorblind-friendly"><a class="header" href="#colorblind-friendly">Colorblind-Friendly</a></h3>
<p>Avoid relying solely on red/green distinction:</p>
<pre><code class="language-toml"># Instead of red/green
health = "#00ff00"     # Green
danger = "#ff0000"     # Red

# Use additional cues
health = "#00ffff"     # Cyan
danger = "#ff00ff"     # Magenta
</code></pre>
<h3 id="thematic-palettes"><a class="header" href="#thematic-palettes">Thematic Palettes</a></h3>
<p><strong>Nord Theme</strong>:</p>
<pre><code class="language-toml">background = "#2e3440"
text = "#eceff4"
red = "#bf616a"
green = "#a3be8c"
blue = "#81a1c1"
</code></pre>
<p><strong>Solarized Dark</strong>:</p>
<pre><code class="language-toml">background = "#002b36"
text = "#839496"
red = "#dc322f"
green = "#859900"
blue = "#268bd2"
</code></pre>
<p><strong>Dracula</strong>:</p>
<pre><code class="language-toml">background = "#282a36"
text = "#f8f8f2"
red = "#ff5555"
green = "#50fa7b"
blue = "#8be9fd"
</code></pre>
<h2 id="color-inheritance"><a class="header" href="#color-inheritance">Color Inheritance</a></h2>
<p>Some colors inherit or derive from others:</p>
<pre><code class="language-toml"># Base color
text = "#ffffff"

# Derived (if not specified)
text_dim = text * 0.5    # Dimmer version
</code></pre>
<h2 id="see-also-79"><a class="header" href="#see-also-79">See Also</a></h2>
<ul>
<li><a href="#creating-themes">Creating Themes</a></li>
<li><a href="#colorstoml-reference">Colors Configuration</a></li>
<li><a href="#accessibility-setup-1">Accessibility Setup</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="environment-variables-1"><a class="header" href="#environment-variables-1">Environment Variables</a></h1>
<p>Reference of all environment variables used by VellumFE.</p>
<h2 id="connection-variables"><a class="header" href="#connection-variables">Connection Variables</a></h2>
<h3 id="direct-eaccess-mode-2"><a class="header" href="#direct-eaccess-mode-2">Direct eAccess Mode</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Variable</th><th>Description</th><th>Required</th></tr>
</thead>
<tbody>
<tr><td><code>TF_ACCOUNT</code></td><td>Simutronics account name</td><td>Yes (if <code>--account</code> not provided)</td></tr>
<tr><td><code>TF_PASSWORD</code></td><td>Account password</td><td>Yes (if <code>--password</code> not provided)</td></tr>
<tr><td><code>TF_GAME</code></td><td>Game instance</td><td>Yes (if <code>--game</code> not provided)</td></tr>
<tr><td><code>TF_CHARACTER</code></td><td>Character name</td><td>Yes (if <code>--character</code> not provided)</td></tr>
</tbody>
</table>
</div>
<pre><code class="language-bash"># Set credentials via environment
export TF_ACCOUNT="myaccount"
export TF_PASSWORD="mypassword"
export TF_GAME="prime"
export TF_CHARACTER="Warrior"

# Launch without command-line credentials
vellum-fe --direct
</code></pre>
<h3 id="lich-mode-2"><a class="header" href="#lich-mode-2">Lich Mode</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Variable</th><th>Description</th><th>Default</th></tr>
</thead>
<tbody>
<tr><td><code>TF_HOST</code></td><td>Lich proxy host</td><td><code>127.0.0.1</code></td></tr>
<tr><td><code>TF_PORT</code></td><td>Lich proxy port</td><td><code>8000</code></td></tr>
</tbody>
</table>
</div>
<pre><code class="language-bash">export TF_HOST="192.168.1.100"
export TF_PORT="8001"
vellum-fe  # Uses environment values
</code></pre>
<h2 id="configuration-variables"><a class="header" href="#configuration-variables">Configuration Variables</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Variable</th><th>Description</th><th>Default</th></tr>
</thead>
<tbody>
<tr><td><code>TF_CONFIG_DIR</code></td><td>Configuration directory</td><td><code>~/.vellum-fe</code></td></tr>
<tr><td><code>TF_CONFIG</code></td><td>Main config file path</td><td><code>$TF_CONFIG_DIR/config.toml</code></td></tr>
<tr><td><code>TF_LAYOUT</code></td><td>Layout config path</td><td><code>$TF_CONFIG_DIR/layout.toml</code></td></tr>
<tr><td><code>TF_COLORS</code></td><td>Colors config path</td><td><code>$TF_CONFIG_DIR/colors.toml</code></td></tr>
<tr><td><code>TF_KEYBINDS</code></td><td>Keybinds config path</td><td><code>$TF_CONFIG_DIR/keybinds.toml</code></td></tr>
</tbody>
</table>
</div>
<pre><code class="language-bash"># Custom config directory
export TF_CONFIG_DIR="/home/user/games/vellum-fe"

# Individual file overrides
export TF_LAYOUT="/home/user/layouts/hunting.toml"
</code></pre>
<h2 id="logging-variables"><a class="header" href="#logging-variables">Logging Variables</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Variable</th><th>Description</th><th>Default</th></tr>
</thead>
<tbody>
<tr><td><code>TF_LOG_LEVEL</code></td><td>Log verbosity</td><td><code>info</code></td></tr>
<tr><td><code>TF_LOG_FILE</code></td><td>Log file path</td><td><code>$TF_CONFIG_DIR/vellum-fe.log</code></td></tr>
<tr><td><code>RUST_LOG</code></td><td>Rust logging (alternative)</td><td>-</td></tr>
</tbody>
</table>
</div>
<pre><code class="language-bash"># Enable debug logging
export TF_LOG_LEVEL="debug"

# Custom log file
export TF_LOG_FILE="/tmp/vellum-fe.log"

# Or use Rust's standard logging
export RUST_LOG="vellum_fe=debug"
</code></pre>
<h3 id="log-levels-1"><a class="header" href="#log-levels-1">Log Levels</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Level</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>error</code></td><td>Errors only</td></tr>
<tr><td><code>warn</code></td><td>Warnings and above</td></tr>
<tr><td><code>info</code></td><td>General information</td></tr>
<tr><td><code>debug</code></td><td>Debug information</td></tr>
<tr><td><code>trace</code></td><td>Verbose tracing</td></tr>
</tbody>
</table>
</div>
<h2 id="display-variables"><a class="header" href="#display-variables">Display Variables</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Variable</th><th>Description</th><th>Default</th></tr>
</thead>
<tbody>
<tr><td><code>TF_NO_COLOR</code></td><td>Disable colors</td><td><code>false</code></td></tr>
<tr><td><code>TF_FORCE_COLOR</code></td><td>Force colors</td><td><code>false</code></td></tr>
<tr><td><code>TERM</code></td><td>Terminal type</td><td>System default</td></tr>
<tr><td><code>COLORTERM</code></td><td>Color support level</td><td>System default</td></tr>
</tbody>
</table>
</div>
<pre><code class="language-bash"># Disable colors (for logging/piping)
export TF_NO_COLOR=1

# Force colors (for terminals that don't advertise support)
export TF_FORCE_COLOR=1
</code></pre>
<h2 id="build-variables"><a class="header" href="#build-variables">Build Variables</a></h2>
<p>Used during compilation:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Variable</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>VCPKG_ROOT</code></td><td>vcpkg installation path (Windows)</td></tr>
<tr><td><code>OPENSSL_DIR</code></td><td>OpenSSL installation path</td></tr>
<tr><td><code>OPENSSL_LIB_DIR</code></td><td>OpenSSL library path</td></tr>
<tr><td><code>OPENSSL_INCLUDE_DIR</code></td><td>OpenSSL headers path</td></tr>
</tbody>
</table>
</div>
<pre><code class="language-bash"># Windows (vcpkg)
set VCPKG_ROOT=C:\tools\vcpkg

# macOS (Homebrew)
export OPENSSL_DIR=$(brew --prefix openssl)

# Linux (custom OpenSSL)
export OPENSSL_DIR=/opt/openssl
export OPENSSL_LIB_DIR=$OPENSSL_DIR/lib
export OPENSSL_INCLUDE_DIR=$OPENSSL_DIR/include
</code></pre>
<h2 id="tts-variables"><a class="header" href="#tts-variables">TTS Variables</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Variable</th><th>Description</th><th>Default</th></tr>
</thead>
<tbody>
<tr><td><code>TF_TTS_ENGINE</code></td><td>TTS engine override</td><td>System default</td></tr>
<tr><td><code>TF_TTS_VOICE</code></td><td>Voice override</td><td>System default</td></tr>
</tbody>
</table>
</div>
<pre><code class="language-bash"># Force specific TTS engine
export TF_TTS_ENGINE="espeak"
export TF_TTS_VOICE="en-us"
</code></pre>
<h2 id="precedence"><a class="header" href="#precedence">Precedence</a></h2>
<p>Environment variables are applied in this order:</p>
<ol>
<li>Default values (lowest)</li>
<li>Configuration files</li>
<li><strong>Environment variables</strong></li>
<li>Command-line arguments (highest)</li>
</ol>
<p>Example:</p>
<pre><code class="language-bash"># Config file says port = 8000
# Environment says TF_PORT=8001
# Command line says --port 8002

# Result: port 8002 is used
</code></pre>
<h2 id="security-notes"><a class="header" href="#security-notes">Security Notes</a></h2>
<h3 id="credentials-in-environment"><a class="header" href="#credentials-in-environment">Credentials in Environment</a></h3>
<p>Environment variables are visible to:</p>
<ul>
<li>The current process</li>
<li>Child processes</li>
<li>Process inspection tools</li>
</ul>
<p><strong>Recommendations</strong>:</p>
<ul>
<li>Don’t export credentials in shell profile files</li>
<li>Use temporary environment for session</li>
<li>Clear history after entering passwords</li>
</ul>
<pre><code class="language-bash"># Safer approach - prompt for password
read -sp "Password: " TF_PASSWORD
export TF_PASSWORD
</code></pre>
<h3 id="logging-redaction"><a class="header" href="#logging-redaction">Logging Redaction</a></h3>
<p>Logs may contain environment values. The log system attempts to redact:</p>
<ul>
<li><code>TF_PASSWORD</code></li>
<li><code>TF_ACCOUNT</code> (partially)</li>
</ul>
<p>But review logs before sharing publicly.</p>
<h2 id="shell-integration"><a class="header" href="#shell-integration">Shell Integration</a></h2>
<h3 id="bashzsh"><a class="header" href="#bashzsh">Bash/Zsh</a></h3>
<pre><code class="language-bash"># ~/.bashrc or ~/.zshrc

# VellumFE config
export TF_CONFIG_DIR="$HOME/.vellum-fe"
export TF_LOG_LEVEL="info"

# Alias with common options
alias gs4='vellum-fe --host 127.0.0.1 --port 8000'
</code></pre>
<h3 id="fish"><a class="header" href="#fish">Fish</a></h3>
<pre><code class="language-fish"># ~/.config/fish/config.fish

set -x TF_CONFIG_DIR "$HOME/.vellum-fe"
set -x TF_LOG_LEVEL "info"

alias gs4 'vellum-fe --host 127.0.0.1 --port 8000'
</code></pre>
<h3 id="powershell"><a class="header" href="#powershell">PowerShell</a></h3>
<pre><code class="language-powershell"># $PROFILE

$env:TF_CONFIG_DIR = "$env:USERPROFILE\.vellum-fe"
$env:TF_LOG_LEVEL = "info"

function gs4 { vellum-fe --host 127.0.0.1 --port 8000 $args }
</code></pre>
<h3 id="windows-command-prompt"><a class="header" href="#windows-command-prompt">Windows Command Prompt</a></h3>
<pre><code class="language-batch">:: Set for current session
set TF_CONFIG_DIR=%USERPROFILE%\.vellum-fe

:: Set permanently (requires admin)
setx TF_CONFIG_DIR "%USERPROFILE%\.vellum-fe"
</code></pre>
<h2 id="debugging-1"><a class="header" href="#debugging-1">Debugging</a></h2>
<p>Check current environment:</p>
<pre><code class="language-bash"># Show all TF_ variables
env | grep ^TF_

# Show specific variable
echo $TF_CONFIG_DIR
</code></pre>
<h2 id="see-also-80"><a class="header" href="#see-also-80">See Also</a></h2>
<ul>
<li><a href="#cli-options">CLI Options</a></li>
<li><a href="configuration/README.html">Configuration</a></li>
<li><a href="#building-from-source-2">Building</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="default-files-1"><a class="header" href="#default-files-1">Default Files</a></h1>
<p>Default configuration file contents for reference.</p>
<h2 id="configtoml-1"><a class="header" href="#configtoml-1">config.toml</a></h2>
<pre><code class="language-toml"># VellumFE Configuration
# Default settings

[connection]
mode = "lich"
host = "127.0.0.1"
port = 8000
auto_reconnect = true
reconnect_delay = 5

[tts]
enabled = false
engine = "default"
voice = "default"
rate = 1.0
volume = 1.0
speak_room_descriptions = true
speak_combat = false
speak_speech = true
speak_whispers = true
speak_thoughts = false

[logging]
level = "info"
file = "~/.vellum-fe/vellum-fe.log"

[performance]
render_rate = 60
batch_updates = true
lazy_render = true
</code></pre>
<h2 id="layouttoml-2"><a class="header" href="#layouttoml-2">layout.toml</a></h2>
<pre><code class="language-toml"># VellumFE Layout
# Default widget arrangement

# Main game text window
[[widgets]]
type = "text"
name = "main"
title = "Game"
x = 0
y = 0
width = 75
height = 85
streams = ["main", "room", "combat", "speech", "thoughts"]
scrollback = 5000
auto_scroll = true

# Health bar
[[widgets]]
type = "progress"
name = "health"
title = "HP"
x = 76
y = 0
width = 24
height = 3
data_source = "vitals.health"
color = "health"
show_text = true
show_percentage = true

# Mana bar
[[widgets]]
type = "progress"
name = "mana"
title = "MP"
x = 76
y = 4
width = 24
height = 3
data_source = "vitals.mana"
color = "mana"
show_text = true
show_percentage = true

# Stamina bar
[[widgets]]
type = "progress"
name = "stamina"
title = "ST"
x = 76
y = 8
width = 24
height = 3
data_source = "vitals.stamina"
color = "stamina"
show_text = true
show_percentage = true

# Spirit bar
[[widgets]]
type = "progress"
name = "spirit"
title = "SP"
x = 76
y = 12
width = 24
height = 3
data_source = "vitals.spirit"
color = "spirit"
show_text = true
show_percentage = true

# Compass
[[widgets]]
type = "compass"
name = "compass"
x = 76
y = 16
width = 24
height = 10
style = "unicode"
clickable = true

# Roundtime
[[widgets]]
type = "countdown"
name = "roundtime"
title = "RT"
x = 76
y = 27
width = 24
height = 3
data_source = "roundtime"

# Status indicators
[[widgets]]
type = "indicator"
name = "status"
x = 76
y = 31
width = 24
height = 10
indicators = ["hidden", "stunned", "webbed", "prone", "kneeling"]
columns = 2

# Command input
[[widgets]]
type = "command_input"
name = "input"
x = 0
y = 86
width = 100
height = 14
history_size = 500
prompt = "&gt; "
</code></pre>
<h2 id="colorstoml-1"><a class="header" href="#colorstoml-1">colors.toml</a></h2>
<pre><code class="language-toml"># VellumFE Colors
# Default theme

[theme]
name = "Default"

# Base colors
background = "#000000"
text = "#c0c0c0"
text_dim = "#808080"

# Borders
border = "#404040"
border_focused = "#ffffff"

# Vitals
health = "#00ff00"
health_low = "#ffff00"
health_critical = "#ff0000"
mana = "#0080ff"
stamina = "#ff8000"
spirit = "#ff00ff"

# Streams
main = "#ffffff"
room = "#ffff00"
combat = "#ff4444"
speech = "#00ffff"
whisper = "#ff00ff"
thoughts = "#00ff00"

# Status indicators
hidden = "#00ff00"
invisible = "#00ffff"
stunned = "#ffff00"
webbed = "#ff00ff"
prone = "#00ffff"
kneeling = "#ff8000"
sitting = "#808080"
dead = "#ff0000"
</code></pre>
<h2 id="keybindstoml-2"><a class="header" href="#keybindstoml-2">keybinds.toml</a></h2>
<pre><code class="language-toml"># VellumFE Keybinds
# Default key mappings

# Navigation - Numpad
[keybinds."numpad8"]
macro = "north"

[keybinds."numpad2"]
macro = "south"

[keybinds."numpad4"]
macro = "west"

[keybinds."numpad6"]
macro = "east"

[keybinds."numpad7"]
macro = "northwest"

[keybinds."numpad9"]
macro = "northeast"

[keybinds."numpad1"]
macro = "southwest"

[keybinds."numpad3"]
macro = "southeast"

[keybinds."numpad5"]
macro = "out"

# Widget navigation
[keybinds."tab"]
action = "next_widget"

[keybinds."shift+tab"]
action = "prev_widget"

[keybinds."escape"]
action = "focus_input"

# Scrolling
[keybinds."page_up"]
action = "scroll_up"

[keybinds."page_down"]
action = "scroll_down"

[keybinds."home"]
action = "scroll_top"

[keybinds."end"]
action = "scroll_bottom"

# Quick commands
[keybinds."f1"]
macro = "look"

[keybinds."f2"]
macro = "inventory"

[keybinds."f3"]
macro = "experience"

# Search
[keybinds."ctrl+f"]
action = "open_search"

# Quit
[keybinds."ctrl+q"]
action = "quit"
</code></pre>
<h2 id="highlightstoml-2"><a class="header" href="#highlightstoml-2">highlights.toml</a></h2>
<pre><code class="language-toml"># VellumFE Highlights
# Default text patterns

# Critical status
[[highlights]]
pattern = "(?i)you are stunned"
fg = "black"
bg = "yellow"
bold = true

[[highlights]]
pattern = "(?i)webs? (stick|entangle)"
fg = "black"
bg = "magenta"
bold = true

# Combat
[[highlights]]
pattern = "\\*\\* .+ \\*\\*"
fg = "bright_red"
bold = true

[[highlights]]
pattern = "falls dead"
fg = "bright_yellow"
bold = true

# Communication
[[highlights]]
pattern = "(\\w+) whispers,"
fg = "magenta"

[[highlights]]
pattern = "(\\w+) says?,"
fg = "cyan"

# Room elements
[[highlights]]
pattern = "^\\[.+\\]$"
fg = "bright_yellow"
bold = true

[[highlights]]
pattern = "Obvious (exits|paths):"
fg = "gray"
</code></pre>
<h2 id="triggerstoml-2"><a class="header" href="#triggerstoml-2">triggers.toml</a></h2>
<pre><code class="language-toml"># VellumFE Triggers
# Default automation (minimal)

# Whisper notification
[[triggers]]
name = "whisper_alert"
pattern = "(\\w+) whispers,"
command = ".notify Whisper from $1"
enabled = false

# Stun notification
[[triggers]]
name = "stun_alert"
pattern = "(?i)you are stunned"
command = ".notify Stunned!"
cooldown = 1000
enabled = false
</code></pre>
<h2 id="cmdlisttoml"><a class="header" href="#cmdlisttoml">cmdlist.toml</a></h2>
<pre><code class="language-toml"># VellumFE Command Lists
# Default context menus

# General items
[[cmdlist]]
noun = ".*"
match_mode = "regex"
commands = ["look", "get", "drop"]
priority = 1

# Creatures
[[cmdlist]]
category = "creature"
noun = ".*"
match_mode = "regex"
commands = ["attack", "look", "assess"]
priority = 10

# Containers
[[cmdlist]]
category = "container"
noun = "(?i)(backpack|bag|pouch|sack|cloak)"
match_mode = "regex"
commands = ["look in", "open", "close"]
priority = 20

# Players
[[cmdlist]]
category = "player"
noun = "^[A-Z][a-z]+$"
match_mode = "regex"
commands = ["look", "smile", "bow", "wave"]
priority = 30
</code></pre>
<h2 id="generating-defaults"><a class="header" href="#generating-defaults">Generating Defaults</a></h2>
<p>To generate default configuration files:</p>
<pre><code class="language-bash"># Dump defaults to stdout
vellum-fe --dump-config

# Create default files
vellum-fe --dump-config &gt; ~/.vellum-fe/config.toml
</code></pre>
<h2 id="restoring-defaults"><a class="header" href="#restoring-defaults">Restoring Defaults</a></h2>
<p>To restore a file to defaults:</p>
<pre><code class="language-bash"># Backup current config
cp ~/.vellum-fe/config.toml ~/.vellum-fe/config.toml.bak

# Generate fresh default
vellum-fe --dump-config &gt; ~/.vellum-fe/config.toml
</code></pre>
<p>Or delete the file - VellumFE will use built-in defaults.</p>
<h2 id="see-also-81"><a class="header" href="#see-also-81">See Also</a></h2>
<ul>
<li><a href="configuration/README.html">Configuration</a></li>
<li><a href="#config-schema">Config Schema</a></li>
<li><a href="#your-first-layout-1">Your First Layout</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="migration-guides"><a class="header" href="#migration-guides">Migration Guides</a></h1>
<p>Guides for transitioning to VellumFE from other clients.</p>
<h2 id="overview-36"><a class="header" href="#overview-36">Overview</a></h2>
<p>If you’re coming from another GemStone IV or DragonRealms client, these guides help you translate your existing setup to VellumFE.</p>
<h2 id="migration-guides-1"><a class="header" href="#migration-guides-1">Migration Guides</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Previous Client</th><th>Guide</th></tr>
</thead>
<tbody>
<tr><td>Profanity</td><td><a href="#migrating-from-profanity">From Profanity</a></td></tr>
<tr><td>Wizard Front End</td><td><a href="#migrating-from-wizard-front-end-wfe">From WFE</a></td></tr>
<tr><td>StormFront</td><td><a href="#migrating-from-stormfront">From StormFront</a></td></tr>
</tbody>
</table>
</div>
<h2 id="common-migration-tasks"><a class="header" href="#common-migration-tasks">Common Migration Tasks</a></h2>
<h3 id="configuration-translation"><a class="header" href="#configuration-translation">Configuration Translation</a></h3>
<p>Each client has different configuration formats. Common concepts to translate:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Concept</th><th>Profanity</th><th>WFE</th><th>VellumFE</th></tr>
</thead>
<tbody>
<tr><td>Layout</td><td>Window positions</td><td>Window setup</td><td><code>layout.toml</code></td></tr>
<tr><td>Colors</td><td>Theme files</td><td>Color settings</td><td><code>colors.toml</code></td></tr>
<tr><td>Macros</td><td>Scripts/aliases</td><td>Macros</td><td><code>keybinds.toml</code></td></tr>
<tr><td>Triggers</td><td>Triggers</td><td>Triggers</td><td><code>triggers.toml</code></td></tr>
<tr><td>Highlights</td><td>Highlights</td><td>Highlights</td><td><code>highlights.toml</code></td></tr>
</tbody>
</table>
</div>
<h3 id="feature-mapping"><a class="header" href="#feature-mapping">Feature Mapping</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Feature</th><th>Common In</th><th>VellumFE Equivalent</th></tr>
</thead>
<tbody>
<tr><td>Text windows</td><td>All clients</td><td><code>text</code> widgets</td></tr>
<tr><td>Health bars</td><td>All clients</td><td><code>progress</code> widgets</td></tr>
<tr><td>Compass</td><td>All clients</td><td><code>compass</code> widget</td></tr>
<tr><td>Macros</td><td>All clients</td><td>Keybind macros</td></tr>
<tr><td>Triggers</td><td>All clients</td><td><code>triggers.toml</code></td></tr>
<tr><td>Scripts</td><td>Profanity/Lich</td><td>Via Lich proxy</td></tr>
</tbody>
</table>
</div>
<h2 id="general-migration-steps"><a class="header" href="#general-migration-steps">General Migration Steps</a></h2>
<h3 id="1-install-vellum-fe"><a class="header" href="#1-install-vellum-fe">1. Install VellumFE</a></h3>
<p>Follow the <a href="#installation">installation guide</a>.</p>
<h3 id="2-connect-to-game"><a class="header" href="#2-connect-to-game">2. Connect to Game</a></h3>
<p>Test connection before migrating configuration:</p>
<pre><code class="language-bash"># Via Lich (existing setup)
vellum-fe --host 127.0.0.1 --port 8000
</code></pre>
<h3 id="3-create-basic-layout"><a class="header" href="#3-create-basic-layout">3. Create Basic Layout</a></h3>
<p>Start with default layout, then customize:</p>
<pre><code class="language-bash"># Use built-in defaults first
vellum-fe --dump-config &gt; ~/.vellum-fe/config.toml
</code></pre>
<h3 id="4-translate-configuration"><a class="header" href="#4-translate-configuration">4. Translate Configuration</a></h3>
<p>Migrate settings from your previous client:</p>
<ol>
<li>Layout/window positions</li>
<li>Colors/theme</li>
<li>Macros/keybinds</li>
<li>Triggers</li>
<li>Highlights</li>
</ol>
<h3 id="5-test-and-refine"><a class="header" href="#5-test-and-refine">5. Test and Refine</a></h3>
<ul>
<li>Test each migrated feature</li>
<li>Adjust as needed</li>
<li>Take advantage of new features</li>
</ul>
<h2 id="what-carries-over"><a class="header" href="#what-carries-over">What Carries Over</a></h2>
<h3 id="lich-scripts"><a class="header" href="#lich-scripts">Lich Scripts</a></h3>
<p>If you use Lich, your scripts continue to work. VellumFE connects through Lich just like other clients.</p>
<h3 id="game-settings"><a class="header" href="#game-settings">Game Settings</a></h3>
<p>In-game settings (character options, game preferences) are server-side and unaffected.</p>
<h3 id="account-information"><a class="header" href="#account-information">Account Information</a></h3>
<p>Your Simutronics account, characters, and subscriptions are unchanged.</p>
<h2 id="what-changes"><a class="header" href="#what-changes">What Changes</a></h2>
<h3 id="configuration-files-3"><a class="header" href="#configuration-files-3">Configuration Files</a></h3>
<p>Each client uses different file formats. Configuration must be recreated (not copied).</p>
<h3 id="keybinds-1"><a class="header" href="#keybinds-1">Keybinds</a></h3>
<p>Keybind syntax differs. Translate your macros to VellumFE format.</p>
<h3 id="visual-layout"><a class="header" href="#visual-layout">Visual Layout</a></h3>
<p>Screen arrangement uses different systems. Recreate your preferred layout.</p>
<h2 id="migration-tips"><a class="header" href="#migration-tips">Migration Tips</a></h2>
<h3 id="start-fresh-vs-replicate"><a class="header" href="#start-fresh-vs-replicate">Start Fresh vs. Replicate</a></h3>
<p><strong>Option A: Start Fresh</strong></p>
<ul>
<li>Use VellumFE defaults</li>
<li>Learn new features</li>
<li>Gradually customize</li>
</ul>
<p><strong>Option B: Replicate</strong></p>
<ul>
<li>Match previous client exactly</li>
<li>Familiar environment</li>
<li>Then explore new features</li>
</ul>
<h3 id="document-your-previous-setup"><a class="header" href="#document-your-previous-setup">Document Your Previous Setup</a></h3>
<p>Before migrating, note:</p>
<ul>
<li>Window positions and sizes</li>
<li>Important macros</li>
<li>Color preferences</li>
<li>Trigger patterns</li>
</ul>
<h3 id="take-your-time-1"><a class="header" href="#take-your-time-1">Take Your Time</a></h3>
<p>Migration doesn’t have to be immediate:</p>
<ul>
<li>Run VellumFE alongside previous client</li>
<li>Migrate incrementally</li>
<li>Test each feature</li>
</ul>
<h2 id="version-history"><a class="header" href="#version-history">Version History</a></h2>
<p>See <a href="#version-history-1">Version History</a> for:</p>
<ul>
<li>Release notes</li>
<li>Breaking changes</li>
<li>Upgrade instructions</li>
</ul>
<h2 id="getting-help-4"><a class="header" href="#getting-help-4">Getting Help</a></h2>
<p>If you encounter issues:</p>
<ul>
<li>Check <a href="troubleshooting/README.html">Troubleshooting</a></li>
<li>Search GitHub issues</li>
<li>Ask the community</li>
</ul>
<h2 id="see-also-82"><a class="header" href="#see-also-82">See Also</a></h2>
<ul>
<li><a href="getting-started/README.html">Getting Started</a></li>
<li><a href="configuration/README.html">Configuration</a></li>
<li><a href="tutorials/README.html">Tutorials</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="migrating-from-profanity"><a class="header" href="#migrating-from-profanity">Migrating from Profanity</a></h1>
<p>Guide for Profanity users transitioning to VellumFE.</p>
<h2 id="overview-37"><a class="header" href="#overview-37">Overview</a></h2>
<p>Profanity and VellumFE are both terminal-based clients. Many concepts translate directly, though configuration syntax differs.</p>
<h2 id="key-similarities"><a class="header" href="#key-similarities">Key Similarities</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Feature</th><th>Profanity</th><th>VellumFE</th></tr>
</thead>
<tbody>
<tr><td>Terminal-based</td><td>✓</td><td>✓</td></tr>
<tr><td>Lich support</td><td>✓</td><td>✓</td></tr>
<tr><td>Text windows</td><td>✓</td><td>✓</td></tr>
<tr><td>Macros</td><td>✓</td><td>✓</td></tr>
<tr><td>Triggers</td><td>✓</td><td>✓</td></tr>
<tr><td>Highlights</td><td>✓</td><td>✓</td></tr>
</tbody>
</table>
</div>
<h2 id="key-differences"><a class="header" href="#key-differences">Key Differences</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Aspect</th><th>Profanity</th><th>VellumFE</th></tr>
</thead>
<tbody>
<tr><td>Config format</td><td>Custom format</td><td>TOML</td></tr>
<tr><td>Language</td><td>Ruby</td><td>Rust</td></tr>
<tr><td>Widget system</td><td>Fixed types</td><td>Flexible types</td></tr>
<tr><td>Layout</td><td>Relative</td><td>Percentage-based</td></tr>
</tbody>
</table>
</div>
<h2 id="configuration-translation-1"><a class="header" href="#configuration-translation-1">Configuration Translation</a></h2>
<h3 id="window-layout"><a class="header" href="#window-layout">Window Layout</a></h3>
<p><strong>Profanity</strong> (in configuration):</p>
<pre><code>window main 0 0 80 20
window health 81 0 20 3
</code></pre>
<p><strong>VellumFE</strong> (<code>layout.toml</code>):</p>
<pre><code class="language-toml">[[widgets]]
type = "text"
name = "main"
x = 0
y = 0
width = 80
height = 75

[[widgets]]
type = "progress"
name = "health"
x = 81
y = 0
width = 19
height = 5
data_source = "vitals.health"
</code></pre>
<h3 id="highlights-2"><a class="header" href="#highlights-2">Highlights</a></h3>
<p><strong>Profanity</strong>:</p>
<pre><code>highlight "stunned" bold yellow
highlight /whispers,/ magenta
</code></pre>
<p><strong>VellumFE</strong> (<code>highlights.toml</code>):</p>
<pre><code class="language-toml">[[highlights]]
pattern = "stunned"
fg = "bright_yellow"
bold = true

[[highlights]]
pattern = "whispers,"
fg = "magenta"
</code></pre>
<h3 id="macros-2"><a class="header" href="#macros-2">Macros</a></h3>
<p><strong>Profanity</strong>:</p>
<pre><code>macro F1 attack target
macro ctrl-1 "prep 101;cast"
</code></pre>
<p><strong>VellumFE</strong> (<code>keybinds.toml</code>):</p>
<pre><code class="language-toml">[keybinds."f1"]
macro = "attack target"

[keybinds."ctrl+1"]
macro = "prep 101;cast"
</code></pre>
<h3 id="triggers-2"><a class="header" href="#triggers-2">Triggers</a></h3>
<p><strong>Profanity</strong>:</p>
<pre><code>trigger "You are stunned" echo "STUNNED!"
trigger /falls dead/ "search;loot"
</code></pre>
<p><strong>VellumFE</strong> (<code>triggers.toml</code>):</p>
<pre><code class="language-toml">[[triggers]]
pattern = "You are stunned"
command = ".notify STUNNED!"

[[triggers]]
pattern = "falls dead"
command = "search;loot"
</code></pre>
<h3 id="colors-1"><a class="header" href="#colors-1">Colors</a></h3>
<p><strong>Profanity</strong>:</p>
<pre><code>color health green
color mana blue
color background black
</code></pre>
<p><strong>VellumFE</strong> (<code>colors.toml</code>):</p>
<pre><code class="language-toml">[theme]
health = "#00ff00"
mana = "#0080ff"
background = "#000000"
</code></pre>
<h2 id="lich-integration"><a class="header" href="#lich-integration">Lich Integration</a></h2>
<p>Both clients connect through Lich the same way. Your Lich scripts continue to work:</p>
<pre><code class="language-bash"># Same connection method
vellum-fe --host 127.0.0.1 --port 8000
</code></pre>
<h2 id="feature-comparison"><a class="header" href="#feature-comparison">Feature Comparison</a></h2>
<h3 id="text-windows-2"><a class="header" href="#text-windows-2">Text Windows</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Profanity</th><th>VellumFE</th></tr>
</thead>
<tbody>
<tr><td><code>main</code> window</td><td><code>text</code> widget with <code>streams = ["main"]</code></td></tr>
<tr><td><code>thoughts</code> window</td><td><code>text</code> widget with <code>streams = ["thoughts"]</code></td></tr>
<tr><td>Multiple windows</td><td>Multiple <code>text</code> widgets</td></tr>
</tbody>
</table>
</div>
<h3 id="progress-bars-3"><a class="header" href="#progress-bars-3">Progress Bars</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Profanity</th><th>VellumFE</th></tr>
</thead>
<tbody>
<tr><td>Built-in health bar</td><td><code>progress</code> widget with <code>data_source = "vitals.health"</code></td></tr>
<tr><td>Fixed appearance</td><td>Customizable colors and style</td></tr>
</tbody>
</table>
</div>
<h3 id="compass-6"><a class="header" href="#compass-6">Compass</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Profanity</th><th>VellumFE</th></tr>
</thead>
<tbody>
<tr><td>ASCII compass</td><td><code>compass</code> widget with <code>style = "ascii"</code> or <code>"unicode"</code></td></tr>
<tr><td>Fixed location</td><td>Any position</td></tr>
</tbody>
</table>
</div>
<h2 id="step-by-step-migration"><a class="header" href="#step-by-step-migration">Step-by-Step Migration</a></h2>
<h3 id="1-document-your-profanity-setup"><a class="header" href="#1-document-your-profanity-setup">1. Document Your Profanity Setup</a></h3>
<p>List:</p>
<ul>
<li>Window positions</li>
<li>Macros</li>
<li>Triggers</li>
<li>Highlights</li>
<li>Color preferences</li>
</ul>
<h3 id="2-create-vellum-fe-config-directory"><a class="header" href="#2-create-vellum-fe-config-directory">2. Create VellumFE Config Directory</a></h3>
<pre><code class="language-bash">mkdir -p ~/.vellum-fe
</code></pre>
<h3 id="3-create-layout"><a class="header" href="#3-create-layout">3. Create Layout</a></h3>
<p>Translate window positions to <code>layout.toml</code>:</p>
<pre><code class="language-toml"># Approximate your Profanity layout

[[widgets]]
type = "text"
name = "main"
x = 0
y = 0
width = 80
height = 80
streams = ["main", "room"]

# Add other widgets...
</code></pre>
<h3 id="4-create-colors"><a class="header" href="#4-create-colors">4. Create Colors</a></h3>
<p>Translate color preferences:</p>
<pre><code class="language-toml">[theme]
background = "#000000"
text = "#c0c0c0"
health = "#00ff00"
# Add more...
</code></pre>
<h3 id="5-migrate-macros"><a class="header" href="#5-migrate-macros">5. Migrate Macros</a></h3>
<pre><code class="language-toml"># keybinds.toml

[keybinds."f1"]
macro = "attack target"

[keybinds."f2"]
macro = "hide"

# Add more...
</code></pre>
<h3 id="6-migrate-triggers"><a class="header" href="#6-migrate-triggers">6. Migrate Triggers</a></h3>
<pre><code class="language-toml"># triggers.toml

[[triggers]]
name = "stun_alert"
pattern = "You are stunned"
command = ".notify STUNNED!"

# Add more...
</code></pre>
<h3 id="7-migrate-highlights"><a class="header" href="#7-migrate-highlights">7. Migrate Highlights</a></h3>
<pre><code class="language-toml"># highlights.toml

[[highlights]]
pattern = "stunned"
fg = "bright_yellow"
bold = true

# Add more...
</code></pre>
<h2 id="common-adjustments"><a class="header" href="#common-adjustments">Common Adjustments</a></h2>
<h3 id="layout-units"><a class="header" href="#layout-units">Layout Units</a></h3>
<p>Profanity uses character columns/rows.
VellumFE uses percentages (0-100).</p>
<p><strong>Converting</strong>:</p>
<ul>
<li>Estimate percentage of screen</li>
<li>Or: <code>(columns / terminal_width) * 100</code></li>
</ul>
<h3 id="regex-patterns"><a class="header" href="#regex-patterns">Regex Patterns</a></h3>
<p>Both support regex, but syntax may vary:</p>
<ul>
<li>Test patterns in VellumFE</li>
<li>Adjust escaping as needed</li>
</ul>
<h3 id="macro-syntax"><a class="header" href="#macro-syntax">Macro Syntax</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Profanity</th><th>VellumFE</th></tr>
</thead>
<tbody>
<tr><td><code>;</code> separates commands</td><td><code>;</code> separates commands</td></tr>
<tr><td><code>$input</code> for prompt</td><td><code>$input</code> for prompt</td></tr>
<tr><td>Delays</td><td><code>{ms}</code> for delays</td></tr>
</tbody>
</table>
</div>
<h2 id="whats-new-in-vellum-fe"><a class="header" href="#whats-new-in-vellum-fe">What’s New in VellumFE</a></h2>
<p>Features you might not have in Profanity:</p>
<ul>
<li><strong>Tabbed windows</strong>: Multiple tabs in one widget</li>
<li><strong>Unicode compass</strong>: Modern arrow characters</li>
<li><strong>Percentage layout</strong>: Adapts to terminal size</li>
<li><strong>Active effects widget</strong>: Track spell durations</li>
<li><strong>Browser system</strong>: Popup editors</li>
</ul>
<h2 id="troubleshooting-31"><a class="header" href="#troubleshooting-31">Troubleshooting</a></h2>
<h3 id="macros-not-working"><a class="header" href="#macros-not-working">Macros Not Working</a></h3>
<ul>
<li>Check key name format (<code>"f1"</code> not <code>"F1"</code>)</li>
<li>Verify TOML syntax (quotes around keys with special chars)</li>
</ul>
<h3 id="colors-different"><a class="header" href="#colors-different">Colors Different</a></h3>
<ul>
<li>VellumFE uses hex colors or preset names</li>
<li>Verify color name mappings</li>
</ul>
<h3 id="layout-looks-wrong-1"><a class="header" href="#layout-looks-wrong-1">Layout Looks Wrong</a></h3>
<ul>
<li>Check percentage calculations</li>
<li>Widgets shouldn’t overlap (x + width ≤ 100)</li>
</ul>
<h2 id="see-also-83"><a class="header" href="#see-also-83">See Also</a></h2>
<ul>
<li><a href="#your-first-layout-1">Your First Layout</a></li>
<li><a href="configuration/README.html">Configuration Reference</a></li>
<li><a href="#keybindstoml-reference">Keybinds</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="migrating-from-wizard-front-end-wfe"><a class="header" href="#migrating-from-wizard-front-end-wfe">Migrating from Wizard Front End (WFE)</a></h1>
<p>Guide for WFE users transitioning to VellumFE.</p>
<h2 id="overview-38"><a class="header" href="#overview-38">Overview</a></h2>
<p>WFE (Wizard Front End) is a graphical Windows client. VellumFE is a terminal-based client, so the visual experience differs, but functionality translates.</p>
<h2 id="key-differences-1"><a class="header" href="#key-differences-1">Key Differences</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Aspect</th><th>WFE</th><th>VellumFE</th></tr>
</thead>
<tbody>
<tr><td>Platform</td><td>Windows GUI</td><td>Terminal (cross-platform)</td></tr>
<tr><td>Interface</td><td>Graphical windows</td><td>Text-based widgets</td></tr>
<tr><td>Scripting</td><td>Built-in</td><td>Via Lich</td></tr>
<tr><td>Configuration</td><td>GUI settings</td><td>TOML files</td></tr>
</tbody>
</table>
</div>
<h2 id="feature-mapping-1"><a class="header" href="#feature-mapping-1">Feature Mapping</a></h2>
<h3 id="windows-to-widgets"><a class="header" href="#windows-to-widgets">Windows to Widgets</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>WFE Window</th><th>VellumFE Widget</th></tr>
</thead>
<tbody>
<tr><td>Main Game Window</td><td><code>text</code> widget</td></tr>
<tr><td>Inventory Window</td><td><code>inventory</code> widget</td></tr>
<tr><td>Status Window</td><td><code>indicator</code> widget</td></tr>
<tr><td>Compass</td><td><code>compass</code> widget</td></tr>
<tr><td>Health/Mana Bars</td><td><code>progress</code> widgets</td></tr>
</tbody>
</table>
</div>
<h3 id="configuration-22"><a class="header" href="#configuration-22">Configuration</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>WFE</th><th>VellumFE</th></tr>
</thead>
<tbody>
<tr><td>Settings dialogs</td><td><code>config.toml</code></td></tr>
<tr><td>Window layout</td><td><code>layout.toml</code></td></tr>
<tr><td>Color settings</td><td><code>colors.toml</code></td></tr>
<tr><td>Macros</td><td><code>keybinds.toml</code></td></tr>
</tbody>
</table>
</div>
<h2 id="macros-translation"><a class="header" href="#macros-translation">Macros Translation</a></h2>
<h3 id="wfe-macro"><a class="header" href="#wfe-macro">WFE Macro</a></h3>
<pre><code>F1 = attack target
Ctrl+1 = prep 101;cast
</code></pre>
<h3 id="vellum-fe-keybind"><a class="header" href="#vellum-fe-keybind">VellumFE Keybind</a></h3>
<pre><code class="language-toml">[keybinds."f1"]
macro = "attack target"

[keybinds."ctrl+1"]
macro = "prep 101;cast"
</code></pre>
<h3 id="macro-variables-1"><a class="header" href="#macro-variables-1">Macro Variables</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>WFE</th><th>VellumFE</th></tr>
</thead>
<tbody>
<tr><td><code>%0</code> (input)</td><td><code>$input</code></td></tr>
<tr><td><code>%target</code></td><td><code>$target</code></td></tr>
<tr><td>Pause 500ms</td><td><code>{500}</code></td></tr>
</tbody>
</table>
</div>
<h2 id="highlights-translation"><a class="header" href="#highlights-translation">Highlights Translation</a></h2>
<h3 id="wfe-highlight"><a class="header" href="#wfe-highlight">WFE Highlight</a></h3>
<pre><code>Text: "stunned" - Color: Yellow, Bold
</code></pre>
<h3 id="vellum-fe-highlight"><a class="header" href="#vellum-fe-highlight">VellumFE Highlight</a></h3>
<pre><code class="language-toml">[[highlights]]
pattern = "stunned"
fg = "bright_yellow"
bold = true
</code></pre>
<h2 id="triggers-translation"><a class="header" href="#triggers-translation">Triggers Translation</a></h2>
<h3 id="wfe-trigger"><a class="header" href="#wfe-trigger">WFE Trigger</a></h3>
<pre><code>Pattern: "You are stunned"
Action: Play sound stun.wav
</code></pre>
<h3 id="vellum-fe-trigger"><a class="header" href="#vellum-fe-trigger">VellumFE Trigger</a></h3>
<pre><code class="language-toml">[[triggers]]
pattern = "You are stunned"
command = ".sound stun.wav"
</code></pre>
<h2 id="layout-translation"><a class="header" href="#layout-translation">Layout Translation</a></h2>
<p>WFE uses absolute pixel positions. VellumFE uses percentages.</p>
<h3 id="wfe-layout-concept"><a class="header" href="#wfe-layout-concept">WFE Layout Concept</a></h3>
<pre><code>Main Window: 0,0 - 600x400
Side Panel: 605,0 - 200x400
</code></pre>
<h3 id="vellum-fe-equivalent"><a class="header" href="#vellum-fe-equivalent">VellumFE Equivalent</a></h3>
<pre><code class="language-toml"># Estimate percentages

[[widgets]]
type = "text"
name = "main"
x = 0
y = 0
width = 75
height = 90

[[widgets]]
type = "indicator"
name = "status"
x = 76
y = 0
width = 24
height = 20
</code></pre>
<h2 id="step-by-step-migration-1"><a class="header" href="#step-by-step-migration-1">Step-by-Step Migration</a></h2>
<h3 id="1-document-wfe-settings"><a class="header" href="#1-document-wfe-settings">1. Document WFE Settings</a></h3>
<p>Note:</p>
<ul>
<li>Window sizes and positions</li>
<li>Macro assignments</li>
<li>Highlight patterns</li>
<li>Trigger patterns</li>
<li>Color preferences</li>
</ul>
<h3 id="2-install-vellum-fe"><a class="header" href="#2-install-vellum-fe">2. Install VellumFE</a></h3>
<p>Follow <a href="#installation">installation guide</a>.</p>
<h3 id="3-set-up-lich-connection"><a class="header" href="#3-set-up-lich-connection">3. Set Up Lich Connection</a></h3>
<p>If you weren’t using Lich with WFE, you’ll need to:</p>
<ol>
<li>Install Lich</li>
<li>Configure Lich with your credentials</li>
<li>Connect VellumFE through Lich</li>
</ol>
<pre><code class="language-bash">vellum-fe --host 127.0.0.1 --port 8000
</code></pre>
<p>Or use direct mode:</p>
<pre><code class="language-bash">vellum-fe --direct --account USER --password PASS --game prime --character CHAR
</code></pre>
<h3 id="4-create-basic-layout"><a class="header" href="#4-create-basic-layout">4. Create Basic Layout</a></h3>
<pre><code class="language-toml"># ~/.vellum-fe/layout.toml

# Main window
[[widgets]]
type = "text"
name = "main"
x = 0
y = 0
width = 70
height = 85
streams = ["main", "room", "combat"]

# Health bar
[[widgets]]
type = "progress"
name = "health"
title = "HP"
x = 71
y = 0
width = 29
height = 4
data_source = "vitals.health"
color = "health"

# Mana bar
[[widgets]]
type = "progress"
name = "mana"
title = "MP"
x = 71
y = 5
width = 29
height = 4
data_source = "vitals.mana"
color = "mana"

# Compass
[[widgets]]
type = "compass"
name = "compass"
x = 71
y = 10
width = 29
height = 12
style = "unicode"

# Command input
[[widgets]]
type = "command_input"
name = "input"
x = 0
y = 86
width = 100
height = 14
</code></pre>
<h3 id="5-migrate-macros-1"><a class="header" href="#5-migrate-macros-1">5. Migrate Macros</a></h3>
<pre><code class="language-toml"># ~/.vellum-fe/keybinds.toml

# Movement
[keybinds."numpad8"]
macro = "north"

[keybinds."numpad2"]
macro = "south"

# Combat
[keybinds."f1"]
macro = "attack target"

# Spells
[keybinds."ctrl+1"]
macro = "prep 101;cast"
</code></pre>
<h3 id="6-migrate-colors"><a class="header" href="#6-migrate-colors">6. Migrate Colors</a></h3>
<pre><code class="language-toml"># ~/.vellum-fe/colors.toml

[theme]
background = "#000000"
text = "#ffffff"

health = "#00ff00"
mana = "#0000ff"
stamina = "#ffff00"

combat = "#ff0000"
speech = "#00ffff"
</code></pre>
<h3 id="7-migrate-triggers"><a class="header" href="#7-migrate-triggers">7. Migrate Triggers</a></h3>
<pre><code class="language-toml"># ~/.vellum-fe/triggers.toml

[[triggers]]
name = "stun_alert"
pattern = "You are stunned"
command = ".notify STUNNED!"
cooldown = 1000

[[triggers]]
name = "death_search"
pattern = "falls dead"
command = "search"
enabled = false  # Enable when ready
</code></pre>
<h2 id="visual-differences"><a class="header" href="#visual-differences">Visual Differences</a></h2>
<h3 id="gui-vs-terminal"><a class="header" href="#gui-vs-terminal">GUI vs Terminal</a></h3>
<p>WFE’s graphical interface provides:</p>
<ul>
<li>Clickable buttons</li>
<li>Drag-and-drop</li>
<li>Visual menus</li>
</ul>
<p>VellumFE’s terminal interface provides:</p>
<ul>
<li>Keyboard-centric operation</li>
<li>Works over SSH</li>
<li>Lower resource usage</li>
</ul>
<h3 id="adapting-workflow"><a class="header" href="#adapting-workflow">Adapting Workflow</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>WFE Action</th><th>VellumFE Action</th></tr>
</thead>
<tbody>
<tr><td>Click compass direction</td><td>Numpad navigation</td></tr>
<tr><td>Right-click context menu</td><td><code>.cmdlist</code> system</td></tr>
<tr><td>Toolbar buttons</td><td>Function key macros</td></tr>
<tr><td>Settings dialog</td><td>Edit TOML files</td></tr>
</tbody>
</table>
</div>
<h2 id="scripting-differences"><a class="header" href="#scripting-differences">Scripting Differences</a></h2>
<h3 id="wfe-built-in-scripting"><a class="header" href="#wfe-built-in-scripting">WFE Built-in Scripting</a></h3>
<p>WFE has built-in scripting capabilities.</p>
<h3 id="vellum-fe--lich"><a class="header" href="#vellum-fe--lich">VellumFE + Lich</a></h3>
<p>VellumFE relies on Lich for scripting:</p>
<pre><code># In game with Lich
;script_name      # Run script
;kill script      # Stop script
;list             # List scripts
</code></pre>
<h2 id="what-you-gain"><a class="header" href="#what-you-gain">What You Gain</a></h2>
<p>Moving to VellumFE:</p>
<ul>
<li><strong>Cross-platform</strong>: Works on Windows, macOS, Linux</li>
<li><strong>SSH access</strong>: Play remotely via terminal</li>
<li><strong>Customizability</strong>: Deep configuration options</li>
<li><strong>Modern rendering</strong>: Unicode support</li>
<li><strong>Open source</strong>: Community improvements</li>
</ul>
<h2 id="what-you-lose"><a class="header" href="#what-you-lose">What You Lose</a></h2>
<ul>
<li><strong>Visual GUI</strong>: No graphical interface</li>
<li><strong>Built-in scripting</strong>: Must use Lich</li>
<li><strong>Click-based operation</strong>: Keyboard-focused</li>
</ul>
<h2 id="tips-for-gui-users"><a class="header" href="#tips-for-gui-users">Tips for GUI Users</a></h2>
<h3 id="learn-terminal-basics"><a class="header" href="#learn-terminal-basics">Learn Terminal Basics</a></h3>
<ul>
<li>Arrow keys navigate</li>
<li>Tab cycles widgets</li>
<li>Page Up/Down scrolls</li>
<li>Type commands directly</li>
</ul>
<h3 id="embrace-keyboard"><a class="header" href="#embrace-keyboard">Embrace Keyboard</a></h3>
<p>Most efficient VellumFE users:</p>
<ul>
<li>Memorize key macros</li>
<li>Use numpad for movement</li>
<li>Minimize mouse usage</li>
</ul>
<h3 id="gradual-transition"><a class="header" href="#gradual-transition">Gradual Transition</a></h3>
<p>Consider running both clients initially while learning VellumFE.</p>
<h2 id="see-also-84"><a class="header" href="#see-also-84">See Also</a></h2>
<ul>
<li><a href="#your-first-layout-1">Your First Layout</a></li>
<li><a href="#keybindstoml-reference">Keybinds Configuration</a></li>
<li><a href="#lich-proxy-connection">Lich Proxy</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="migrating-from-stormfront"><a class="header" href="#migrating-from-stormfront">Migrating from StormFront</a></h1>
<p>Guide for StormFront users transitioning to VellumFE.</p>
<h2 id="overview-39"><a class="header" href="#overview-39">Overview</a></h2>
<p>StormFront is Simutronics’ official graphical client. VellumFE is an alternative terminal-based client with different strengths.</p>
<h2 id="key-differences-2"><a class="header" href="#key-differences-2">Key Differences</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Aspect</th><th>StormFront</th><th>VellumFE</th></tr>
</thead>
<tbody>
<tr><td>Type</td><td>Official GUI client</td><td>Third-party terminal</td></tr>
<tr><td>Platform</td><td>Windows/macOS</td><td>Cross-platform terminal</td></tr>
<tr><td>Scripting</td><td>Limited</td><td>Via Lich</td></tr>
<tr><td>Customization</td><td>Limited</td><td>Extensive</td></tr>
<tr><td>Price</td><td>Free</td><td>Free</td></tr>
</tbody>
</table>
</div>
<h2 id="feature-comparison-1"><a class="header" href="#feature-comparison-1">Feature Comparison</a></h2>
<h3 id="windows-5"><a class="header" href="#windows-5">Windows</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>StormFront</th><th>VellumFE</th></tr>
</thead>
<tbody>
<tr><td>Game Window</td><td><code>text</code> widget</td></tr>
<tr><td>Thoughts Window</td><td><code>text</code> widget (thoughts stream)</td></tr>
<tr><td>Inventory Panel</td><td><code>inventory</code> widget</td></tr>
<tr><td>Status Bar</td><td><code>indicator</code> widget</td></tr>
</tbody>
</table>
</div>
<h3 id="visual-elements"><a class="header" href="#visual-elements">Visual Elements</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>StormFront</th><th>VellumFE</th></tr>
</thead>
<tbody>
<tr><td>Health/Mana bars</td><td><code>progress</code> widgets</td></tr>
<tr><td>Compass rose</td><td><code>compass</code> widget</td></tr>
<tr><td>Character portrait</td><td>Not supported</td></tr>
<tr><td>Spell icons</td><td><code>active_effects</code> widget</td></tr>
</tbody>
</table>
</div>
<h2 id="why-switch"><a class="header" href="#why-switch">Why Switch?</a></h2>
<h3 id="advantages-of-vellum-fe"><a class="header" href="#advantages-of-vellum-fe">Advantages of VellumFE</a></h3>
<ul>
<li><strong>Lich scripting</strong>: Full automation capability</li>
<li><strong>Deep customization</strong>: Complete control over appearance</li>
<li><strong>Terminal access</strong>: Play over SSH</li>
<li><strong>Cross-platform</strong>: Works everywhere</li>
<li><strong>Lightweight</strong>: Low resource usage</li>
</ul>
<h3 id="what-you-keep"><a class="header" href="#what-you-keep">What You Keep</a></h3>
<ul>
<li>Game experience</li>
<li>Character data</li>
<li>Account access</li>
<li>In-game settings</li>
</ul>
<h3 id="what-changes-1"><a class="header" href="#what-changes-1">What Changes</a></h3>
<ul>
<li>Visual appearance</li>
<li>Configuration method</li>
<li>Scripting approach</li>
</ul>
<h2 id="step-by-step-migration-2"><a class="header" href="#step-by-step-migration-2">Step-by-Step Migration</a></h2>
<h3 id="1-choose-connection-method"><a class="header" href="#1-choose-connection-method">1. Choose Connection Method</a></h3>
<p><strong>Option A: Lich Proxy (Recommended)</strong></p>
<p>Install Lich for scripting and automation:</p>
<ol>
<li>Install Lich and Ruby</li>
<li>Configure Lich with your account</li>
<li>Connect VellumFE through Lich</li>
</ol>
<p><strong>Option B: Direct Connection</strong></p>
<p>Connect without Lich (no scripts):</p>
<pre><code class="language-bash">vellum-fe --direct \
  --account YOUR_ACCOUNT \
  --password YOUR_PASSWORD \
  --game prime \
  --character CHARACTER
</code></pre>
<h3 id="2-install-vellum-fe-1"><a class="header" href="#2-install-vellum-fe-1">2. Install VellumFE</a></h3>
<p>Follow <a href="#installation">installation guide</a>.</p>
<h3 id="3-create-configuration"><a class="header" href="#3-create-configuration">3. Create Configuration</a></h3>
<p>Generate default configuration:</p>
<pre><code class="language-bash">mkdir -p ~/.vellum-fe
vellum-fe --dump-config &gt; ~/.vellum-fe/config.toml
</code></pre>
<h3 id="4-create-layout"><a class="header" href="#4-create-layout">4. Create Layout</a></h3>
<p>Approximate StormFront layout:</p>
<pre><code class="language-toml"># ~/.vellum-fe/layout.toml

# Room name at top
[[widgets]]
type = "room"
name = "room"
x = 0
y = 0
width = 100
height = 4
show_exits = true

# Main game text
[[widgets]]
type = "text"
name = "main"
x = 0
y = 4
width = 70
height = 55
streams = ["main", "room"]

# Thoughts/ESP window
[[widgets]]
type = "text"
name = "thoughts"
title = "Thoughts"
x = 0
y = 60
width = 70
height = 30
streams = ["thoughts"]

# Right sidebar - vitals
[[widgets]]
type = "progress"
name = "health"
title = "Health"
x = 71
y = 4
width = 29
height = 4
data_source = "vitals.health"
color = "health"
show_text = true

[[widgets]]
type = "progress"
name = "mana"
title = "Mana"
x = 71
y = 9
width = 29
height = 4
data_source = "vitals.mana"
color = "mana"
show_text = true

[[widgets]]
type = "progress"
name = "stamina"
title = "Stamina"
x = 71
y = 14
width = 29
height = 4
data_source = "vitals.stamina"
color = "stamina"
show_text = true

# Compass
[[widgets]]
type = "compass"
name = "compass"
x = 71
y = 19
width = 29
height = 12
style = "unicode"
clickable = true

# Status indicators
[[widgets]]
type = "indicator"
name = "status"
x = 71
y = 32
width = 29
height = 10
indicators = ["hidden", "stunned", "prone"]

# Active spells
[[widgets]]
type = "active_effects"
name = "spells"
title = "Spells"
x = 71
y = 43
width = 29
height = 20
show_duration = true

# Command input
[[widgets]]
type = "command_input"
name = "input"
x = 0
y = 91
width = 100
height = 9
prompt = "&gt; "
</code></pre>
<h3 id="5-set-up-keybinds"><a class="header" href="#5-set-up-keybinds">5. Set Up Keybinds</a></h3>
<p>StormFront uses basic keybinds. Expand with VellumFE:</p>
<pre><code class="language-toml"># ~/.vellum-fe/keybinds.toml

# Movement (numpad)
[keybinds."numpad8"]
macro = "north"

[keybinds."numpad2"]
macro = "south"

[keybinds."numpad4"]
macro = "west"

[keybinds."numpad6"]
macro = "east"

[keybinds."numpad7"]
macro = "northwest"

[keybinds."numpad9"]
macro = "northeast"

[keybinds."numpad1"]
macro = "southwest"

[keybinds."numpad3"]
macro = "southeast"

[keybinds."numpad5"]
macro = "out"

# Quick commands
[keybinds."f1"]
macro = "look"

[keybinds."f2"]
macro = "inventory"

[keybinds."f3"]
macro = "experience"

# Combat
[keybinds."f5"]
macro = "attack target"

[keybinds."f6"]
macro = "hide"

# Navigation
[keybinds."tab"]
action = "next_widget"

[keybinds."page_up"]
action = "scroll_up"

[keybinds."page_down"]
action = "scroll_down"
</code></pre>
<h3 id="6-configure-highlights"><a class="header" href="#6-configure-highlights">6. Configure Highlights</a></h3>
<pre><code class="language-toml"># ~/.vellum-fe/highlights.toml

# Critical status
[[highlights]]
pattern = "(?i)you are stunned"
fg = "black"
bg = "yellow"
bold = true

[[highlights]]
pattern = "(?i)webs? (stick|entangle)"
fg = "black"
bg = "magenta"
bold = true

# Combat
[[highlights]]
pattern = "\\*\\* .+ \\*\\*"
fg = "bright_red"
bold = true

# Social
[[highlights]]
pattern = "(\\w+) whispers,"
fg = "magenta"
</code></pre>
<h2 id="visual-adaptation"><a class="header" href="#visual-adaptation">Visual Adaptation</a></h2>
<h3 id="stormfront-visual-elements"><a class="header" href="#stormfront-visual-elements">StormFront Visual Elements</a></h3>
<p>StormFront provides:</p>
<ul>
<li>Graphical status bars</li>
<li>Clickable compass</li>
<li>Character portrait</li>
<li>Spell icons</li>
</ul>
<h3 id="vellum-fe-equivalents"><a class="header" href="#vellum-fe-equivalents">VellumFE Equivalents</a></h3>
<p>VellumFE provides text-based versions:</p>
<ul>
<li>ASCII/Unicode progress bars</li>
<li>Clickable text compass</li>
<li>Status text indicators</li>
<li>Spell name lists</li>
</ul>
<h3 id="missing-features"><a class="header" href="#missing-features">Missing Features</a></h3>
<p>Some StormFront features don’t have equivalents:</p>
<ul>
<li>Character portrait</li>
<li>Graphical inventory icons</li>
<li>Animated status effects</li>
</ul>
<h2 id="gaining-lich-scripts"><a class="header" href="#gaining-lich-scripts">Gaining Lich Scripts</a></h2>
<p>StormFront users often don’t use Lich. VellumFE + Lich provides:</p>
<h3 id="popular-scripts"><a class="header" href="#popular-scripts">Popular Scripts</a></h3>
<ul>
<li><code>go2</code> - Automatic navigation</li>
<li><code>bigshot</code> - Hunting automation</li>
<li><code>lnet</code> - Player network</li>
<li><code>repository</code> - Script management</li>
</ul>
<h3 id="installing-scripts"><a class="header" href="#installing-scripts">Installing Scripts</a></h3>
<pre><code># In-game with Lich
;repository download go2
;go2 bank
</code></pre>
<h2 id="what-you-gain-1"><a class="header" href="#what-you-gain-1">What You Gain</a></h2>
<ul>
<li><strong>Customizable interface</strong>: Complete layout control</li>
<li><strong>Powerful scripting</strong>: Full Lich ecosystem</li>
<li><strong>Terminal access</strong>: Play anywhere</li>
<li><strong>Lower resources</strong>: Faster, lighter</li>
<li><strong>Community support</strong>: Active development</li>
</ul>
<h2 id="tips-for-stormfront-users"><a class="header" href="#tips-for-stormfront-users">Tips for StormFront Users</a></h2>
<h3 id="terminal-navigation"><a class="header" href="#terminal-navigation">Terminal Navigation</a></h3>
<ul>
<li>Arrow keys and numpad work intuitively</li>
<li>Tab cycles between widgets</li>
<li>Type commands directly in input</li>
</ul>
<h3 id="learn-keyboard-shortcuts"><a class="header" href="#learn-keyboard-shortcuts">Learn Keyboard Shortcuts</a></h3>
<p>Memorize key bindings for efficiency:</p>
<ul>
<li>F-keys for common commands</li>
<li>Numpad for movement</li>
<li>Ctrl combinations for macros</li>
</ul>
<h3 id="explore-lich"><a class="header" href="#explore-lich">Explore Lich</a></h3>
<p>Lich transforms gameplay:</p>
<ol>
<li>Start with <code>go2</code> for navigation</li>
<li>Try utility scripts</li>
<li>Gradually automate routine tasks</li>
</ol>
<h2 id="see-also-85"><a class="header" href="#see-also-85">See Also</a></h2>
<ul>
<li><a href="getting-started/README.html">Getting Started</a></li>
<li><a href="#lich-proxy-connection">Lich Proxy</a></li>
<li><a href="#your-first-layout-1">Your First Layout</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="version-history-1"><a class="header" href="#version-history-1">Version History</a></h1>
<p>Release notes, breaking changes, and upgrade instructions.</p>
<h2 id="current-version"><a class="header" href="#current-version">Current Version</a></h2>
<p><strong>Version</strong>: 0.1.0 (Development)</p>
<h2 id="changelog-format"><a class="header" href="#changelog-format">Changelog Format</a></h2>
<p>Each release includes:</p>
<ul>
<li><strong>New Features</strong>: New functionality</li>
<li><strong>Improvements</strong>: Enhancements to existing features</li>
<li><strong>Bug Fixes</strong>: Resolved issues</li>
<li><strong>Breaking Changes</strong>: Changes requiring user action</li>
<li><strong>Known Issues</strong>: Outstanding problems</li>
</ul>
<hr>
<h2 id="version-010-planned"><a class="header" href="#version-010-planned">Version 0.1.0 (Planned)</a></h2>
<p>Initial public release.</p>
<h3 id="new-features"><a class="header" href="#new-features">New Features</a></h3>
<ul>
<li>Core application framework</li>
<li>Lich proxy connection mode</li>
<li>Direct eAccess authentication</li>
<li>Widget system with 15+ widget types</li>
<li>TOML-based configuration</li>
<li>Keybind and macro system</li>
<li>Trigger automation</li>
<li>Text highlighting</li>
<li>Color themes</li>
<li>TTS support</li>
</ul>
<h3 id="widget-types-2"><a class="header" href="#widget-types-2">Widget Types</a></h3>
<ul>
<li><code>text</code> - Scrollable text windows</li>
<li><code>tabbed_text</code> - Tabbed text windows</li>
<li><code>progress</code> - Vital bars</li>
<li><code>countdown</code> - Roundtime/casttime</li>
<li><code>compass</code> - Navigation compass</li>
<li><code>indicator</code> - Status indicators</li>
<li><code>room</code> - Room information</li>
<li><code>command_input</code> - Command entry</li>
<li><code>injury_doll</code> - Injury display</li>
<li><code>active_effects</code> - Active spells/effects</li>
<li><code>inventory</code> - Inventory view</li>
<li><code>spells</code> - Known spells</li>
<li><code>hand</code> - Hand contents</li>
<li><code>dashboard</code> - Composite status</li>
<li><code>performance</code> - Performance metrics</li>
</ul>
<h3 id="supported-platforms"><a class="header" href="#supported-platforms">Supported Platforms</a></h3>
<ul>
<li>Windows 10/11</li>
<li>macOS 12+</li>
<li>Linux (glibc 2.31+)</li>
</ul>
<h3 id="known-issues"><a class="header" href="#known-issues">Known Issues</a></h3>
<ul>
<li>Direct mode certificate handling edge cases</li>
<li>Some Unicode rendering issues on older terminals</li>
</ul>
<hr>
<h2 id="upgrading-1"><a class="header" href="#upgrading-1">Upgrading</a></h2>
<h3 id="general-upgrade-process"><a class="header" href="#general-upgrade-process">General Upgrade Process</a></h3>
<ol>
<li>
<p><strong>Backup configuration</strong>:</p>
<pre><code class="language-bash">cp -r ~/.vellum-fe ~/.vellum-fe.backup
</code></pre>
</li>
<li>
<p><strong>Download new version</strong></p>
</li>
<li>
<p><strong>Replace binary</strong></p>
</li>
<li>
<p><strong>Review release notes</strong> for breaking changes</p>
</li>
<li>
<p><strong>Update configuration</strong> if needed</p>
</li>
<li>
<p><strong>Test</strong> before deleting backup</p>
</li>
</ol>
<h3 id="checking-version"><a class="header" href="#checking-version">Checking Version</a></h3>
<pre><code class="language-bash">vellum-fe --version
</code></pre>
<h3 id="configuration-compatibility-1"><a class="header" href="#configuration-compatibility-1">Configuration Compatibility</a></h3>
<p>Configuration files are versioned. When format changes:</p>
<ol>
<li>VellumFE will warn about outdated config</li>
<li>Auto-migration may be attempted</li>
<li>Manual migration instructions provided if needed</li>
</ol>
<hr>
<h2 id="breaking-changes-guide"><a class="header" href="#breaking-changes-guide">Breaking Changes Guide</a></h2>
<h3 id="configuration-format-changes"><a class="header" href="#configuration-format-changes">Configuration Format Changes</a></h3>
<p>If a configuration key is renamed or restructured:</p>
<p><strong>Before</strong>:</p>
<pre><code class="language-toml">[old_section]
old_key = "value"
</code></pre>
<p><strong>After</strong>:</p>
<pre><code class="language-toml">[new_section]
new_key = "value"
</code></pre>
<p><strong>Migration</strong>: Update your config files manually or run:</p>
<pre><code class="language-bash">vellum-fe --migrate-config
</code></pre>
<h3 id="keybind-changes"><a class="header" href="#keybind-changes">Keybind Changes</a></h3>
<p>If keybind syntax changes:</p>
<p><strong>Before</strong>:</p>
<pre><code class="language-toml">[keybinds.F1]
command = "look"
</code></pre>
<p><strong>After</strong>:</p>
<pre><code class="language-toml">[keybinds."f1"]
macro = "look"
</code></pre>
<h3 id="widget-changes"><a class="header" href="#widget-changes">Widget Changes</a></h3>
<p>If widget types or properties change:</p>
<p><strong>Before</strong>:</p>
<pre><code class="language-toml">[[widgets]]
type = "old_type"
old_property = "value"
</code></pre>
<p><strong>After</strong>:</p>
<pre><code class="language-toml">[[widgets]]
type = "new_type"
new_property = "value"
</code></pre>
<hr>
<h2 id="deprecation-policy"><a class="header" href="#deprecation-policy">Deprecation Policy</a></h2>
<h3 id="deprecation-timeline"><a class="header" href="#deprecation-timeline">Deprecation Timeline</a></h3>
<ol>
<li><strong>Announcement</strong>: Feature marked deprecated in release notes</li>
<li><strong>Warning Period</strong>: Deprecated features log warnings</li>
<li><strong>Removal</strong>: Feature removed in future major version</li>
</ol>
<h3 id="deprecation-notices"><a class="header" href="#deprecation-notices">Deprecation Notices</a></h3>
<p>Deprecated features are logged:</p>
<pre><code>[WARN] 'old_feature' is deprecated, use 'new_feature' instead
</code></pre>
<hr>
<h2 id="development-versions"><a class="header" href="#development-versions">Development Versions</a></h2>
<h3 id="pre-release-tags"><a class="header" href="#pre-release-tags">Pre-release Tags</a></h3>
<ul>
<li><code>alpha</code> - Early testing, unstable</li>
<li><code>beta</code> - Feature complete, testing</li>
<li><code>rc</code> - Release candidate, final testing</li>
</ul>
<p>Example: <code>0.2.0-beta.1</code></p>
<h3 id="building-from-source-3"><a class="header" href="#building-from-source-3">Building from Source</a></h3>
<p>For development versions:</p>
<pre><code class="language-bash">git clone https://github.com/vellum-fe/vellum-fe
cd vellum-fe
git checkout develop
cargo build --release
</code></pre>
<hr>
<h2 id="reporting-issues"><a class="header" href="#reporting-issues">Reporting Issues</a></h2>
<h3 id="when-upgrading"><a class="header" href="#when-upgrading">When Upgrading</a></h3>
<p>If you encounter issues after upgrading:</p>
<ol>
<li>Check release notes for breaking changes</li>
<li>Verify configuration is valid</li>
<li>Try with default configuration</li>
<li>Check <a href="troubleshooting/README.html">Troubleshooting</a></li>
<li>Report on GitHub if unresolved</li>
</ol>
<h3 id="issue-template"><a class="header" href="#issue-template">Issue Template</a></h3>
<pre><code class="language-markdown">**Version**: [e.g., 0.1.0]
**Previous Version**: [if upgrade issue]
**Platform**: [Windows/macOS/Linux]

**Description**:
[What happened]

**Expected**:
[What should happen]

**Steps**:
1. [Step 1]
2. [Step 2]

**Configuration** (if relevant):
```toml
[relevant config]
</code></pre>
<pre><code>
---

## Future Roadmap

### Planned Features

- Advanced scripting integration
- Plugin system
- More widget types
- Enhanced accessibility
- Performance improvements

### Community Requests

Track feature requests on GitHub Issues.

---

## Version Support

### Support Matrix

| Version | Status | Support |
|---------|--------|---------|
| 0.1.x | Current | Full support |
| Pre-release | Development | Limited |

### End of Life

When a version reaches EOL:
- Security patches may cease
- No new features
- Upgrade recommended

---

## See Also

- [Installation](../getting-started/installation.md)
- [Configuration](../configuration/README.md)
- [Troubleshooting](../troubleshooting/README.md)

</code></pre>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="troubleshooting-32"><a class="header" href="#troubleshooting-32">Troubleshooting</a></h1>
<p>Diagnosis and solutions for common VellumFE issues.</p>
<h2 id="quick-diagnosis"><a class="header" href="#quick-diagnosis">Quick Diagnosis</a></h2>
<h3 id="issue-categories"><a class="header" href="#issue-categories">Issue Categories</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Symptom</th><th>Likely Cause</th><th>Go To</th></tr>
</thead>
<tbody>
<tr><td>Won’t start</td><td>Missing dependency, bad config</td><td><a href="#common-errors">Common Errors</a></td></tr>
<tr><td>Can’t connect</td><td>Network, firewall, credentials</td><td><a href="#connection-issues-1">Connection Issues</a></td></tr>
<tr><td>Slow/laggy</td><td>Performance settings, system load</td><td><a href="#performance-issues-3">Performance Issues</a></td></tr>
<tr><td>Colors wrong</td><td>Theme, terminal settings</td><td><a href="#display-issues-2">Display Issues</a></td></tr>
<tr><td>Platform-specific</td><td>OS configuration</td><td><a href="#platform-issues">Platform Issues</a></td></tr>
</tbody>
</table>
</div>
<h2 id="first-steps"><a class="header" href="#first-steps">First Steps</a></h2>
<p>Before diving into specific issues, try these general steps:</p>
<h3 id="1-check-logs"><a class="header" href="#1-check-logs">1. Check Logs</a></h3>
<pre><code class="language-bash"># View recent logs
tail -100 ~/.vellum-fe/vellum-fe.log

# Watch logs in real-time
tail -f ~/.vellum-fe/vellum-fe.log
</code></pre>
<h3 id="2-verify-configuration"><a class="header" href="#2-verify-configuration">2. Verify Configuration</a></h3>
<pre><code class="language-bash"># Validate config syntax
vellum-fe --check-config

# Start with defaults (bypass config issues)
vellum-fe --default-config
</code></pre>
<h3 id="3-update-vellum-fe"><a class="header" href="#3-update-vellum-fe">3. Update VellumFE</a></h3>
<pre><code class="language-bash"># Check current version
vellum-fe --version

# Download latest release from GitHub
</code></pre>
<h3 id="4-check-dependencies"><a class="header" href="#4-check-dependencies">4. Check Dependencies</a></h3>
<pre><code class="language-bash"># Linux - verify libraries
ldd $(which vellum-fe)

# macOS - check dylibs
otool -L $(which vellum-fe)
</code></pre>
<h2 id="log-levels-2"><a class="header" href="#log-levels-2">Log Levels</a></h2>
<p>Increase logging for diagnosis:</p>
<pre><code class="language-toml"># config.toml
[logging]
level = "debug"  # trace, debug, info, warn, error
file = "~/.vellum-fe/vellum-fe.log"
</code></pre>
<p>Log level details:</p>
<ul>
<li><code>error</code> - Only critical failures</li>
<li><code>warn</code> - Warnings and errors</li>
<li><code>info</code> - Normal operation (default)</li>
<li><code>debug</code> - Detailed operation</li>
<li><code>trace</code> - Very verbose (large files)</li>
</ul>
<h2 id="common-patterns-4"><a class="header" href="#common-patterns-4">Common Patterns</a></h2>
<h3 id="configuration-issues"><a class="header" href="#configuration-issues">Configuration Issues</a></h3>
<p><strong>Symptom</strong>: VellumFE exits immediately or shows “config error”</p>
<p><strong>Diagnosis</strong>:</p>
<pre><code class="language-bash"># Check for TOML syntax errors
vellum-fe --check-config 2&gt;&amp;1 | head -20
</code></pre>
<p><strong>Common causes</strong>:</p>
<ul>
<li>Missing quotes around strings with special characters</li>
<li>Unclosed brackets or braces</li>
<li>Invalid key names</li>
<li>Wrong data types</li>
</ul>
<h3 id="connection-issues"><a class="header" href="#connection-issues">Connection Issues</a></h3>
<p><strong>Symptom</strong>: “Connection refused” or timeout</p>
<p><strong>Diagnosis</strong>:</p>
<pre><code class="language-bash"># Test Lich connection
nc -zv 127.0.0.1 8000

# Test direct connection
nc -zv eaccess.play.net 7910
</code></pre>
<h3 id="display-issues-1"><a class="header" href="#display-issues-1">Display Issues</a></h3>
<p><strong>Symptom</strong>: Missing colors, garbled text, wrong symbols</p>
<p><strong>Diagnosis</strong>:</p>
<pre><code class="language-bash"># Check terminal capabilities
echo $TERM
tput colors

# Test Unicode support
echo "╔═══╗ ← Should show box drawing"
</code></pre>
<h2 id="getting-help-5"><a class="header" href="#getting-help-5">Getting Help</a></h2>
<h3 id="information-to-collect"><a class="header" href="#information-to-collect">Information to Collect</a></h3>
<p>When reporting issues, include:</p>
<ol>
<li><strong>Version</strong>: <code>vellum-fe --version</code></li>
<li><strong>Platform</strong>: Windows/macOS/Linux version</li>
<li><strong>Terminal</strong>: What terminal emulator</li>
<li><strong>Config</strong>: Relevant config sections (redact credentials!)</li>
<li><strong>Logs</strong>: Recent log entries</li>
<li><strong>Steps</strong>: How to reproduce</li>
</ol>
<h3 id="report-template"><a class="header" href="#report-template">Report Template</a></h3>
<pre><code class="language-markdown">**Version**: 0.1.0
**Platform**: Ubuntu 22.04
**Terminal**: Alacritty 0.12

**Description**:
What happened

**Expected**:
What should happen

**Steps to Reproduce**:
1. Start VellumFE with...
2. Do this...
3. See error

**Relevant Config**:
```toml
[connection]
mode = "lich"
</code></pre>
<p><strong>Log Output</strong>:</p>
<pre><code>[ERROR] relevant log lines
</code></pre>
<pre><code>
### Support Channels

1. **GitHub Issues**: Bug reports and feature requests
2. **GitHub Discussions**: Questions and help
3. **Documentation**: Check relevant sections first

## Troubleshooting Guides

### By Issue Type

- [Common Errors](./common-errors.md) - Error messages and solutions
- [Platform Issues](./platform-issues.md) - OS-specific problems
- [Performance Issues](./performance-issues.md) - Speed and responsiveness
- [Display Issues](./display-issues.md) - Visual problems
- [Connection Issues](./connection-issues.md) - Network problems

### By Symptom

| I see... | Check |
|----------|-------|
| "Config error" | [Common Errors](./common-errors.md#configuration-errors) |
| "Connection refused" | [Connection Issues](./connection-issues.md#connection-refused) |
| "Certificate error" | [Connection Issues](./connection-issues.md#certificate-issues) |
| Garbled text | [Display Issues](./display-issues.md#character-encoding) |
| Wrong colors | [Display Issues](./display-issues.md#color-problems) |
| Slow scrolling | [Performance Issues](./performance-issues.md#scroll-performance) |
| High CPU | [Performance Issues](./performance-issues.md#cpu-usage) |
| Crash on start | [Platform Issues](./platform-issues.md) |

## Quick Fixes

### Reset to Defaults

```bash
# Backup current config
mv ~/.vellum-fe ~/.vellum-fe.backup

# Start fresh - VellumFE creates defaults
vellum-fe
</code></pre>
<h3 id="force-reconnect"><a class="header" href="#force-reconnect">Force Reconnect</a></h3>
<p>In VellumFE:</p>
<pre><code>.reconnect
</code></pre>
<p>Or restart:</p>
<pre><code class="language-bash"># Kill existing process
pkill vellum-fe

# Start fresh
vellum-fe
</code></pre>
<h3 id="clear-cache"><a class="header" href="#clear-cache">Clear Cache</a></h3>
<pre><code class="language-bash"># Remove cached data
rm -rf ~/.vellum-fe/cache/

# Remove certificate (re-downloads)
rm ~/.vellum-fe/simu.pem
</code></pre>
<h2 id="diagnostic-mode"><a class="header" href="#diagnostic-mode">Diagnostic Mode</a></h2>
<p>Start with extra diagnostics:</p>
<pre><code class="language-bash"># Maximum verbosity
TF_LOG=trace vellum-fe --debug

# Log to specific file
TF_LOG_FILE=/tmp/tf-debug.log vellum-fe
</code></pre>
<h2 id="see-also-86"><a class="header" href="#see-also-86">See Also</a></h2>
<ul>
<li><a href="#installation">Installation</a> - Setup instructions</li>
<li><a href="configuration/README.html">Configuration</a> - Config reference</li>
<li><a href="network/README.html">Network</a> - Connection setup</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="common-errors"><a class="header" href="#common-errors">Common Errors</a></h1>
<p>Error messages, their meanings, and solutions.</p>
<h2 id="configuration-errors"><a class="header" href="#configuration-errors">Configuration Errors</a></h2>
<h3 id="failed-to-parse-config"><a class="header" href="#failed-to-parse-config">“Failed to parse config”</a></h3>
<p><strong>Message</strong>:</p>
<pre><code>Error: Failed to parse config.toml: expected `=` at line 15
</code></pre>
<p><strong>Cause</strong>: TOML syntax error</p>
<p><strong>Solution</strong>:</p>
<ol>
<li>Check the indicated line number</li>
<li>Look for:
<ul>
<li>Missing <code>=</code> in key-value pairs</li>
<li>Unclosed quotes</li>
<li>Missing brackets for sections/arrays</li>
</ul>
</li>
</ol>
<p><strong>Example fix</strong>:</p>
<pre><code class="language-toml"># Wrong
[connection]
mode lich          # Missing =

# Correct
[connection]
mode = "lich"
</code></pre>
<h3 id="unknown-key"><a class="header" href="#unknown-key">“Unknown key”</a></h3>
<p><strong>Message</strong>:</p>
<pre><code>Error: Unknown key 'colour' in config.toml at line 12
</code></pre>
<p><strong>Cause</strong>: Misspelled or deprecated key name</p>
<p><strong>Solution</strong>: Check the <a href="configuration/README.html">Configuration Reference</a> for correct key names</p>
<p><strong>Common misspellings</strong>:</p>
<ul>
<li><code>colour</code> → <code>color</code></li>
<li><code>colour_theme</code> → <code>color</code> (in theme context)</li>
<li><code>keybind</code> → <code>keybinds</code></li>
</ul>
<h3 id="invalid-value-type"><a class="header" href="#invalid-value-type">“Invalid value type”</a></h3>
<p><strong>Message</strong>:</p>
<pre><code>Error: Invalid type for 'port': expected integer, found string
</code></pre>
<p><strong>Cause</strong>: Wrong data type for configuration value</p>
<p><strong>Solution</strong>: Use correct types:</p>
<pre><code class="language-toml"># Wrong
port = "8000"      # String when integer expected
enabled = 1        # Integer when boolean expected

# Correct
port = 8000        # Integer
enabled = true     # Boolean
</code></pre>
<h3 id="missing-required-field"><a class="header" href="#missing-required-field">“Missing required field”</a></h3>
<p><strong>Message</strong>:</p>
<pre><code>Error: Missing required field 'type' in widget definition
</code></pre>
<p><strong>Cause</strong>: Required configuration field not specified</p>
<p><strong>Solution</strong>: Add the missing field</p>
<pre><code class="language-toml"># Wrong - missing type
[[widgets]]
name = "main"

# Correct
[[widgets]]
type = "text"
name = "main"
</code></pre>
<h2 id="startup-errors"><a class="header" href="#startup-errors">Startup Errors</a></h2>
<h3 id="failed-to-initialize-terminal"><a class="header" href="#failed-to-initialize-terminal">“Failed to initialize terminal”</a></h3>
<p><strong>Message</strong>:</p>
<pre><code>Error: Failed to initialize terminal: not a tty
</code></pre>
<p><strong>Cause</strong>: Running in non-interactive environment</p>
<p><strong>Solution</strong>:</p>
<ul>
<li>Run in a proper terminal emulator</li>
<li>Don’t pipe output: use <code>vellum-fe</code> not <code>vellum-fe | less</code></li>
<li>Ensure stdin is connected to a terminal</li>
</ul>
<h3 id="could-not-determine-terminal-size"><a class="header" href="#could-not-determine-terminal-size">“Could not determine terminal size”</a></h3>
<p><strong>Message</strong>:</p>
<pre><code>Error: Could not determine terminal size
</code></pre>
<p><strong>Cause</strong>: Terminal doesn’t report dimensions</p>
<p><strong>Solution</strong>:</p>
<ol>
<li>Try a different terminal emulator</li>
<li>Set size manually:
<pre><code class="language-bash">stty rows 50 cols 120
vellum-fe
</code></pre>
</li>
<li>Check <code>TERM</code> environment variable:
<pre><code class="language-bash">echo $TERM
# Should be something like xterm-256color
</code></pre>
</li>
</ol>
<h3 id="failed-to-load-font"><a class="header" href="#failed-to-load-font">“Failed to load font”</a></h3>
<p><strong>Message</strong>:</p>
<pre><code>Error: Failed to load font: font not found
</code></pre>
<p><strong>Cause</strong>: Terminal can’t render required characters</p>
<p><strong>Solution</strong>:</p>
<ul>
<li>Install a font with Unicode support (Nerd Font, JetBrains Mono)</li>
<li>Or disable Unicode in config:
<pre><code class="language-toml">[display]
unicode = false
</code></pre>
</li>
</ul>
<h2 id="connection-errors"><a class="header" href="#connection-errors">Connection Errors</a></h2>
<h3 id="connection-refused-3"><a class="header" href="#connection-refused-3">“Connection refused”</a></h3>
<p><strong>Message</strong>:</p>
<pre><code>Error: Connection refused (os error 111)
</code></pre>
<p><strong>Cause</strong>:</p>
<ul>
<li>Lich not running (Lich mode)</li>
<li>Wrong host/port</li>
<li>Firewall blocking</li>
</ul>
<p><strong>Solution</strong>:</p>
<p>For Lich mode:</p>
<pre><code class="language-bash"># Start Lich first
ruby lich.rb

# Then connect
vellum-fe --host 127.0.0.1 --port 8000
</code></pre>
<p>For Direct mode:</p>
<pre><code class="language-bash"># Check internet connectivity
ping eaccess.play.net

# Check port access
nc -zv eaccess.play.net 7910
</code></pre>
<h3 id="connection-timed-out"><a class="header" href="#connection-timed-out">“Connection timed out”</a></h3>
<p><strong>Message</strong>:</p>
<pre><code>Error: Connection timed out after 30 seconds
</code></pre>
<p><strong>Cause</strong>: Network issue preventing connection</p>
<p><strong>Solution</strong>:</p>
<ol>
<li>Check internet connectivity</li>
<li>Verify firewall settings</li>
<li>Try increasing timeout:
<pre><code class="language-toml">[connection]
timeout = 60
</code></pre>
</li>
</ol>
<h3 id="authentication-failed-2"><a class="header" href="#authentication-failed-2">“Authentication failed”</a></h3>
<p><strong>Message</strong>:</p>
<pre><code>Error: Authentication failed: invalid credentials
</code></pre>
<p><strong>Cause</strong>: Wrong account or password (Direct mode)</p>
<p><strong>Solution</strong>:</p>
<ul>
<li>Verify credentials work via Lich or web</li>
<li>Check for typos</li>
<li>Ensure account is active</li>
<li>Try password without special characters</li>
</ul>
<h3 id="certificate-verification-failed-1"><a class="header" href="#certificate-verification-failed-1">“Certificate verification failed”</a></h3>
<p><strong>Message</strong>:</p>
<pre><code>Error: Certificate verification failed: certificate has expired
</code></pre>
<p><strong>Cause</strong>: Cached certificate is outdated or corrupt</p>
<p><strong>Solution</strong>:</p>
<pre><code class="language-bash"># Remove cached certificate
rm ~/.vellum-fe/simu.pem

# Reconnect - will download fresh certificate
vellum-fe --direct ...
</code></pre>
<h2 id="runtime-errors"><a class="header" href="#runtime-errors">Runtime Errors</a></h2>
<h3 id="widget-not-found"><a class="header" href="#widget-not-found">“Widget not found”</a></h3>
<p><strong>Message</strong>:</p>
<pre><code>Error: Widget 'health' not found in layout
</code></pre>
<p><strong>Cause</strong>: Configuration references non-existent widget</p>
<p><strong>Solution</strong>: Ensure widget is defined in layout:</p>
<pre><code class="language-toml"># Make sure this exists
[[widgets]]
type = "progress"
name = "health"
</code></pre>
<h3 id="invalid-regex-pattern"><a class="header" href="#invalid-regex-pattern">“Invalid regex pattern”</a></h3>
<p><strong>Message</strong>:</p>
<pre><code>Error: Invalid regex in highlights.toml: unclosed group at position 5
</code></pre>
<p><strong>Cause</strong>: Malformed regular expression</p>
<p><strong>Solution</strong>:</p>
<ol>
<li>Check regex syntax</li>
<li>Escape special characters properly</li>
<li>Test pattern with regex tester</li>
</ol>
<p><strong>Common regex fixes</strong>:</p>
<pre><code class="language-toml"># Wrong - unescaped special chars
pattern = "You (get|take"    # Unclosed group

# Correct
pattern = "You (get|take)"   # Closed group

# Wrong - unescaped brackets
pattern = "[Player]"         # Character class

# Correct
pattern = "\\[Player\\]"     # Literal brackets
</code></pre>
<h3 id="stream-buffer-overflow"><a class="header" href="#stream-buffer-overflow">“Stream buffer overflow”</a></h3>
<p><strong>Message</strong>:</p>
<pre><code>Warning: Stream buffer overflow, dropping oldest entries
</code></pre>
<p><strong>Cause</strong>: Too much data incoming, buffer full</p>
<p><strong>Solution</strong>:</p>
<pre><code class="language-toml"># Increase buffer size
[performance]
stream_buffer_size = 100000

# Or reduce scrollback
[[widgets]]
type = "text"
scrollback = 1000  # Reduce from default
</code></pre>
<h3 id="render-timeout"><a class="header" href="#render-timeout">“Render timeout”</a></h3>
<p><strong>Message</strong>:</p>
<pre><code>Warning: Render timeout - frame dropped
</code></pre>
<p><strong>Cause</strong>: UI can’t keep up with updates</p>
<p><strong>Solution</strong>:</p>
<pre><code class="language-toml">[performance]
render_rate = 30      # Reduce from 60
batch_updates = true  # Combine updates
lazy_render = true    # Skip unchanged
</code></pre>
<h2 id="widget-errors"><a class="header" href="#widget-errors">Widget Errors</a></h2>
<h3 id="widget-overlap"><a class="header" href="#widget-overlap">“Widget overlap”</a></h3>
<p><strong>Message</strong>:</p>
<pre><code>Warning: Widget 'status' overlaps with 'health'
</code></pre>
<p><strong>Cause</strong>: Two widgets occupy same screen space</p>
<p><strong>Solution</strong>: Adjust widget positions:</p>
<pre><code class="language-toml"># Check x, y, width, height don't overlap
[[widgets]]
type = "progress"
name = "health"
x = 0
y = 0
width = 20
height = 3

[[widgets]]
type = "indicator"
name = "status"
x = 0
y = 3        # Start after health ends
width = 20
height = 5
</code></pre>
<h3 id="widget-outside-bounds"><a class="header" href="#widget-outside-bounds">“Widget outside bounds”</a></h3>
<p><strong>Message</strong>:</p>
<pre><code>Error: Widget 'compass' extends beyond terminal (x=90, width=20, terminal=100)
</code></pre>
<p><strong>Cause</strong>: Widget doesn’t fit in terminal</p>
<p><strong>Solution</strong>:</p>
<ul>
<li>Use percentage-based positioning</li>
<li>Make widget smaller</li>
<li>Check terminal size</li>
</ul>
<h3 id="invalid-data-source"><a class="header" href="#invalid-data-source">“Invalid data source”</a></h3>
<p><strong>Message</strong>:</p>
<pre><code>Error: Invalid data_source 'vital.health' for widget 'hp_bar'
</code></pre>
<p><strong>Cause</strong>: Data source path doesn’t exist</p>
<p><strong>Solution</strong>: Use valid data sources:</p>
<pre><code class="language-toml"># Wrong
data_source = "vital.health"

# Correct
data_source = "vitals.health"
</code></pre>
<p>Valid sources: <code>vitals.health</code>, <code>vitals.mana</code>, <code>vitals.stamina</code>, <code>vitals.spirit</code>, <code>roundtime</code>, <code>casttime</code></p>
<h2 id="keybind-errors"><a class="header" href="#keybind-errors">Keybind Errors</a></h2>
<h3 id="invalid-key-name"><a class="header" href="#invalid-key-name">“Invalid key name”</a></h3>
<p><strong>Message</strong>:</p>
<pre><code>Error: Invalid key name 'Control+F' in keybinds.toml
</code></pre>
<p><strong>Cause</strong>: Wrong key naming convention</p>
<p><strong>Solution</strong>: Use correct format:</p>
<pre><code class="language-toml"># Wrong
[keybinds."Control+F"]

# Correct
[keybinds."ctrl+f"]
</code></pre>
<p><strong>Key naming rules</strong>:</p>
<ul>
<li>Modifiers: <code>ctrl</code>, <code>alt</code>, <code>shift</code> (lowercase)</li>
<li>Separator: <code>+</code></li>
<li>Keys: lowercase (<code>f1</code>, <code>enter</code>, <code>space</code>)</li>
</ul>
<h3 id="duplicate-keybind"><a class="header" href="#duplicate-keybind">“Duplicate keybind”</a></h3>
<p><strong>Message</strong>:</p>
<pre><code>Warning: Duplicate keybind 'ctrl+f' - later definition wins
</code></pre>
<p><strong>Cause</strong>: Same key defined multiple times</p>
<p><strong>Solution</strong>: Remove duplicates or use different keys</p>
<h3 id="unknown-action"><a class="header" href="#unknown-action">“Unknown action”</a></h3>
<p><strong>Message</strong>:</p>
<pre><code>Error: Unknown action 'focusInput' in keybind
</code></pre>
<p><strong>Cause</strong>: Invalid action name</p>
<p><strong>Solution</strong>: Check <a href="#keybind-actions-1">Keybind Actions</a> for valid actions</p>
<pre><code class="language-toml"># Wrong
action = "focusInput"

# Correct
action = "focus_input"
</code></pre>
<h2 id="recovery-steps"><a class="header" href="#recovery-steps">Recovery Steps</a></h2>
<h3 id="general-recovery"><a class="header" href="#general-recovery">General Recovery</a></h3>
<ol>
<li>
<p><strong>Start with defaults</strong>:</p>
<pre><code class="language-bash">vellum-fe --default-config
</code></pre>
</li>
<li>
<p><strong>Isolate the problem</strong>:</p>
<pre><code class="language-bash"># Test each config file
vellum-fe --config ~/.vellum-fe/config.toml --no-layout
vellum-fe --config ~/.vellum-fe/config.toml --layout ~/.vellum-fe/layout.toml
</code></pre>
</li>
<li>
<p><strong>Binary search configs</strong>:</p>
<ul>
<li>Comment out half the config</li>
<li>If it works, problem is in commented half</li>
<li>Repeat until found</li>
</ul>
</li>
</ol>
<h3 id="reset-everything"><a class="header" href="#reset-everything">Reset Everything</a></h3>
<pre><code class="language-bash"># Backup
mv ~/.vellum-fe ~/.vellum-fe.backup

# Fresh start
vellum-fe

# Copy back configs one at a time
cp ~/.vellum-fe.backup/config.toml ~/.vellum-fe/
# Test
cp ~/.vellum-fe.backup/layout.toml ~/.vellum-fe/
# Test
# Continue until problem returns
</code></pre>
<h2 id="see-also-87"><a class="header" href="#see-also-87">See Also</a></h2>
<ul>
<li><a href="configuration/README.html">Configuration Reference</a></li>
<li><a href="#platform-issues">Platform Issues</a></li>
<li><a href="#connection-issues-1">Connection Issues</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="platform-issues"><a class="header" href="#platform-issues">Platform Issues</a></h1>
<p>Platform-specific problems and solutions for Windows, macOS, and Linux.</p>
<h2 id="windows-6"><a class="header" href="#windows-6">Windows</a></h2>
<h3 id="windows-terminal-issues"><a class="header" href="#windows-terminal-issues">Windows Terminal Issues</a></h3>
<h4 id="colors-look-wrong-1"><a class="header" href="#colors-look-wrong-1">Colors Look Wrong</a></h4>
<p><strong>Symptom</strong>: Colors appear washed out or wrong in Windows Terminal</p>
<p><strong>Solution</strong>:</p>
<ol>
<li>Enable true color in Windows Terminal settings</li>
<li>Set color scheme to “One Half Dark” or similar</li>
<li>Add to VellumFE config:
<pre><code class="language-toml">[display]
color_mode = "truecolor"
</code></pre>
</li>
</ol>
<h4 id="characters-display-as-boxes"><a class="header" href="#characters-display-as-boxes">Characters Display as Boxes</a></h4>
<p><strong>Symptom</strong>: Unicode characters show as □ or ?</p>
<p><strong>Solution</strong>:</p>
<ol>
<li>
<p>Install a font with full Unicode support:</p>
<ul>
<li>Cascadia Code</li>
<li>JetBrains Mono</li>
<li>Nerd Font variants</li>
</ul>
</li>
<li>
<p>Set the font in Windows Terminal settings</p>
</li>
<li>
<p>Or disable Unicode in VellumFE:</p>
<pre><code class="language-toml">[display]
unicode = false
</code></pre>
</li>
</ol>
<h4 id="slow-startup"><a class="header" href="#slow-startup">Slow Startup</a></h4>
<p><strong>Symptom</strong>: VellumFE takes several seconds to start</p>
<p><strong>Solution</strong>:</p>
<ol>
<li>Check antivirus exclusions - add VellumFE executable</li>
<li>Disable Windows Defender real-time scanning for config directory</li>
<li>Run from SSD rather than HDD</li>
</ol>
<h3 id="powershell-issues"><a class="header" href="#powershell-issues">PowerShell Issues</a></h3>
<h4 id="keybinds-not-working-1"><a class="header" href="#keybinds-not-working-1">Keybinds Not Working</a></h4>
<p><strong>Symptom</strong>: Certain key combinations don’t register</p>
<p><strong>Cause</strong>: PowerShell intercepts some keys</p>
<p><strong>Solution</strong>:</p>
<ol>
<li>Use Windows Terminal instead of PowerShell directly</li>
<li>Or disable PSReadLine:
<pre><code class="language-powershell">Remove-Module PSReadLine
</code></pre>
</li>
</ol>
<h4 id="copypaste-issues"><a class="header" href="#copypaste-issues">Copy/Paste Issues</a></h4>
<p><strong>Symptom</strong>: Can’t paste into VellumFE</p>
<p><strong>Solution</strong>:</p>
<ol>
<li>Use <code>Ctrl+Shift+V</code> instead of <code>Ctrl+V</code></li>
<li>Or enable “Use Ctrl+Shift+C/V as Copy/Paste” in terminal settings</li>
</ol>
<h3 id="wsl-issues"><a class="header" href="#wsl-issues">WSL Issues</a></h3>
<h4 id="connection-to-lich-fails"><a class="header" href="#connection-to-lich-fails">Connection to Lich Fails</a></h4>
<p><strong>Symptom</strong>: Can’t connect to Lich running in Windows from WSL</p>
<p><strong>Solution</strong>:</p>
<pre><code class="language-bash"># In WSL, use Windows host IP
vellum-fe --host $(cat /etc/resolv.conf | grep nameserver | awk '{print $2}') --port 8000

# Or use localhost forwarding
vellum-fe --host localhost --port 8000
</code></pre>
<h4 id="performance-issues-2"><a class="header" href="#performance-issues-2">Performance Issues</a></h4>
<p><strong>Symptom</strong>: Slow or laggy in WSL</p>
<p><strong>Solution</strong>:</p>
<ol>
<li>Use WSL2 (not WSL1)</li>
<li>Store files in Linux filesystem, not <code>/mnt/c/</code></li>
<li>Increase WSL memory allocation in <code>.wslconfig</code></li>
</ol>
<h3 id="openssl-on-windows"><a class="header" href="#openssl-on-windows">OpenSSL on Windows</a></h3>
<h4 id="cant-find-openssl"><a class="header" href="#cant-find-openssl">“Can’t find OpenSSL”</a></h4>
<p><strong>Symptom</strong>: Direct mode fails with OpenSSL errors</p>
<p><strong>Solution</strong>:</p>
<ol>
<li>
<p>Install via vcpkg:</p>
<pre><code class="language-cmd">vcpkg install openssl:x64-windows
</code></pre>
</li>
<li>
<p>Set environment variable:</p>
<pre><code class="language-cmd">set VCPKG_ROOT=C:\path\to\vcpkg
</code></pre>
</li>
<li>
<p>Rebuild VellumFE</p>
</li>
</ol>
<h2 id="macos-5"><a class="header" href="#macos-5">macOS</a></h2>
<h3 id="terminalapp-issues"><a class="header" href="#terminalapp-issues">Terminal.app Issues</a></h3>
<h4 id="limited-colors"><a class="header" href="#limited-colors">Limited Colors</a></h4>
<p><strong>Symptom</strong>: Only 256 colors, not full truecolor</p>
<p><strong>Solution</strong>:</p>
<ol>
<li>Use iTerm2 or Alacritty instead of Terminal.app</li>
<li>Or configure for 256 colors:
<pre><code class="language-toml">[display]
color_mode = "256"
</code></pre>
</li>
</ol>
<h4 id="function-keys-dont-work"><a class="header" href="#function-keys-dont-work">Function Keys Don’t Work</a></h4>
<p><strong>Symptom</strong>: F1-F12 keys trigger macOS features instead</p>
<p><strong>Solution</strong>:</p>
<ol>
<li>System Preferences → Keyboard → “Use F1, F2, etc. keys as standard function keys”</li>
<li>Or use modifier:
<pre><code class="language-toml">[keybinds."fn+f1"]
macro = "look"
</code></pre>
</li>
</ol>
<h3 id="iterm2-issues"><a class="header" href="#iterm2-issues">iTerm2 Issues</a></h3>
<h4 id="mouse-not-working"><a class="header" href="#mouse-not-working">Mouse Not Working</a></h4>
<p><strong>Symptom</strong>: Can’t click on widgets or compass</p>
<p><strong>Solution</strong>:</p>
<ol>
<li>iTerm2 → Preferences → Profiles → Terminal</li>
<li>Enable “Report mouse clicks”</li>
<li>Enable “Report mouse wheel events”</li>
</ol>
<h4 id="scrollback-conflict"><a class="header" href="#scrollback-conflict">Scrollback Conflict</a></h4>
<p><strong>Symptom</strong>: Page Up/Down scrolls iTerm instead of VellumFE</p>
<p><strong>Solution</strong>:</p>
<ol>
<li>iTerm2 → Preferences → Keys → Key Bindings</li>
<li>Remove or remap Page Up/Down</li>
<li>Or use VellumFE scrollback keys:
<pre><code class="language-toml">[keybinds."shift+up"]
action = "scroll_up"
</code></pre>
</li>
</ol>
<h3 id="security-issues"><a class="header" href="#security-issues">Security Issues</a></h3>
<h4 id="cannot-be-opened-because-the-developer-cannot-be-verified"><a class="header" href="#cannot-be-opened-because-the-developer-cannot-be-verified">“Cannot be opened because the developer cannot be verified”</a></h4>
<p><strong>Symptom</strong>: macOS Gatekeeper blocks VellumFE</p>
<p><strong>Solution</strong>:</p>
<pre><code class="language-bash"># Remove quarantine attribute
xattr -d com.apple.quarantine /path/to/vellum-fe

# Or allow in System Preferences → Security &amp; Privacy
</code></pre>
<h4 id="permission-denied-for-audio"><a class="header" href="#permission-denied-for-audio">“Permission denied” for Audio</a></h4>
<p><strong>Symptom</strong>: TTS features fail</p>
<p><strong>Solution</strong>:</p>
<ol>
<li>System Preferences → Security &amp; Privacy → Privacy → Microphone</li>
<li>Add Terminal/iTerm2</li>
<li>Also check Accessibility permissions</li>
</ol>
<h3 id="apple-silicon-m1m2"><a class="header" href="#apple-silicon-m1m2">Apple Silicon (M1/M2)</a></h3>
<h4 id="rosetta-performance"><a class="header" href="#rosetta-performance">Rosetta Performance</a></h4>
<p><strong>Symptom</strong>: VellumFE slow on Apple Silicon</p>
<p><strong>Cause</strong>: Running x86 binary through Rosetta</p>
<p><strong>Solution</strong>:</p>
<ul>
<li>Download ARM64/aarch64 build if available</li>
<li>Or build from source:
<pre><code class="language-bash">rustup target add aarch64-apple-darwin
cargo build --release --target aarch64-apple-darwin
</code></pre>
</li>
</ul>
<h2 id="linux-4"><a class="header" href="#linux-4">Linux</a></h2>
<h3 id="distribution-specific-issues"><a class="header" href="#distribution-specific-issues">Distribution-Specific Issues</a></h3>
<h4 id="ubuntudebian"><a class="header" href="#ubuntudebian">Ubuntu/Debian</a></h4>
<p><strong>Missing Libraries</strong>:</p>
<pre><code class="language-bash"># Install required libraries
sudo apt install libssl-dev pkg-config

# For audio (TTS)
sudo apt install libasound2-dev
</code></pre>
<p><strong>Wayland Issues</strong>:</p>
<pre><code class="language-bash"># If running Wayland, may need XWayland for some features
sudo apt install xwayland
</code></pre>
<h4 id="fedorarhel"><a class="header" href="#fedorarhel">Fedora/RHEL</a></h4>
<p><strong>Missing Libraries</strong>:</p>
<pre><code class="language-bash">sudo dnf install openssl-devel pkg-config

# For audio
sudo dnf install alsa-lib-devel
</code></pre>
<h4 id="arch-linux"><a class="header" href="#arch-linux">Arch Linux</a></h4>
<p><strong>Missing Libraries</strong>:</p>
<pre><code class="language-bash">sudo pacman -S openssl pkgconf

# For audio
sudo pacman -S alsa-lib
</code></pre>
<h3 id="terminal-emulator-issues"><a class="header" href="#terminal-emulator-issues">Terminal Emulator Issues</a></h3>
<h4 id="alacritty"><a class="header" href="#alacritty">Alacritty</a></h4>
<p><strong>Font Rendering</strong>:</p>
<pre><code class="language-yaml"># ~/.config/alacritty/alacritty.yml
font:
  normal:
    family: "JetBrains Mono"
  size: 11
</code></pre>
<p><strong>Key Bindings Conflict</strong>:</p>
<ul>
<li>Check <code>~/.config/alacritty/alacritty.yml</code> for conflicting bindings</li>
</ul>
<h4 id="kitty"><a class="header" href="#kitty">Kitty</a></h4>
<p><strong>Graphics Protocol</strong>:</p>
<pre><code class="language-conf"># ~/.config/kitty/kitty.conf
# Disable if causing issues
allow_remote_control no
</code></pre>
<p><strong>Unicode</strong>:</p>
<pre><code class="language-conf">symbol_map U+E000-U+F8FF Symbols Nerd Font
</code></pre>
<h4 id="gnome-terminal"><a class="header" href="#gnome-terminal">GNOME Terminal</a></h4>
<p><strong>True Color</strong>:</p>
<pre><code class="language-bash"># Verify support
echo $COLORTERM  # Should show "truecolor"

# If not, set in .bashrc
export COLORTERM=truecolor
</code></pre>
<h3 id="x11-vs-wayland"><a class="header" href="#x11-vs-wayland">X11 vs Wayland</a></h3>
<h4 id="clipboard-issues"><a class="header" href="#clipboard-issues">Clipboard Issues</a></h4>
<p><strong>Symptom</strong>: Copy/paste doesn’t work</p>
<p><strong>X11 Solution</strong>:</p>
<pre><code class="language-bash"># Install xclip
sudo apt install xclip
</code></pre>
<p><strong>Wayland Solution</strong>:</p>
<pre><code class="language-bash"># Install wl-clipboard
sudo apt install wl-clipboard

# Set in config
[clipboard]
backend = "wayland"  # or "x11"
</code></pre>
<h3 id="audio-issues-tts"><a class="header" href="#audio-issues-tts">Audio Issues (TTS)</a></h3>
<h4 id="pulseaudio"><a class="header" href="#pulseaudio">PulseAudio</a></h4>
<p><strong>Symptom</strong>: TTS doesn’t play sound</p>
<p><strong>Solution</strong>:</p>
<pre><code class="language-bash"># Check PulseAudio is running
pulseaudio --check

# Restart if needed
pulseaudio --kill
pulseaudio --start
</code></pre>
<h4 id="pipewire"><a class="header" href="#pipewire">PipeWire</a></h4>
<p><strong>Symptom</strong>: Audio issues on modern systems</p>
<p><strong>Solution</strong>:</p>
<pre><code class="language-bash"># Install PipeWire PulseAudio compatibility
sudo apt install pipewire-pulse

# Restart
systemctl --user restart pipewire pipewire-pulse
</code></pre>
<h3 id="permission-issues"><a class="header" href="#permission-issues">Permission Issues</a></h3>
<h4 id="operation-not-permitted"><a class="header" href="#operation-not-permitted">“Operation not permitted”</a></h4>
<p><strong>Symptom</strong>: Can’t write to config directory</p>
<p><strong>Solution</strong>:</p>
<pre><code class="language-bash"># Check ownership
ls -la ~/.vellum-fe

# Fix if needed
sudo chown -R $USER:$USER ~/.vellum-fe
chmod 755 ~/.vellum-fe
chmod 644 ~/.vellum-fe/*.toml
</code></pre>
<h4 id="selinux-blocking"><a class="header" href="#selinux-blocking">SELinux Blocking</a></h4>
<p><strong>Symptom</strong>: Works as root but not as user (Fedora/RHEL)</p>
<p><strong>Solution</strong>:</p>
<pre><code class="language-bash"># Check if SELinux is blocking
sudo ausearch -m avc -ts recent

# Create policy exception if needed
# (Consult SELinux documentation)
</code></pre>
<h2 id="cross-platform-issues"><a class="header" href="#cross-platform-issues">Cross-Platform Issues</a></h2>
<h3 id="localeencoding"><a class="header" href="#localeencoding">Locale/Encoding</a></h3>
<h4 id="invalid-utf-8"><a class="header" href="#invalid-utf-8">“Invalid UTF-8”</a></h4>
<p><strong>Symptom</strong>: Errors about encoding</p>
<p><strong>Solution</strong>:</p>
<pre><code class="language-bash"># Check locale
locale

# Set UTF-8 locale
export LC_ALL=en_US.UTF-8
export LANG=en_US.UTF-8
</code></pre>
<h3 id="time-zone-issues"><a class="header" href="#time-zone-issues">Time Zone Issues</a></h3>
<h4 id="timestamps-wrong"><a class="header" href="#timestamps-wrong">Timestamps Wrong</a></h4>
<p><strong>Symptom</strong>: Log timestamps incorrect</p>
<p><strong>Solution</strong>:</p>
<pre><code class="language-bash"># Check timezone
date

# Set if needed
export TZ="America/New_York"
</code></pre>
<p>Or configure:</p>
<pre><code class="language-toml">[logging]
use_local_time = true
</code></pre>
<h3 id="path-issues"><a class="header" href="#path-issues">Path Issues</a></h3>
<h4 id="file-not-found-for-config"><a class="header" href="#file-not-found-for-config">“File not found” for Config</a></h4>
<p><strong>Symptom</strong>: Can’t find config files</p>
<p><strong>Solution</strong>:</p>
<ul>
<li>Use explicit paths:
<pre><code class="language-bash">vellum-fe --config /full/path/to/config.toml
</code></pre>
</li>
<li>Check <code>$HOME</code> is set correctly</li>
<li>Verify <code>~</code> expansion works in your shell</li>
</ul>
<h2 id="see-also-88"><a class="header" href="#see-also-88">See Also</a></h2>
<ul>
<li><a href="#installation">Installation</a> - Setup by platform</li>
<li><a href="#common-errors">Common Errors</a> - Error messages</li>
<li><a href="#display-issues-2">Display Issues</a> - Visual problems</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="performance-issues-3"><a class="header" href="#performance-issues-3">Performance Issues</a></h1>
<p>Diagnosing and fixing slow, laggy, or resource-intensive behavior.</p>
<h2 id="symptoms"><a class="header" href="#symptoms">Symptoms</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Issue</th><th>Likely Cause</th><th>Quick Fix</th></tr>
</thead>
<tbody>
<tr><td>Slow scrolling</td><td>Large scrollback</td><td>Reduce <code>scrollback</code></td></tr>
<tr><td>Input delay</td><td>Render bottleneck</td><td>Lower <code>render_rate</code></td></tr>
<tr><td>High CPU</td><td>Busy loop, bad pattern</td><td>Check highlights</td></tr>
<tr><td>High memory</td><td>Scrollback accumulation</td><td>Limit buffer sizes</td></tr>
<tr><td>Startup slow</td><td>Config parsing</td><td>Simplify config</td></tr>
</tbody>
</table>
</div>
<h2 id="performance-configuration"><a class="header" href="#performance-configuration">Performance Configuration</a></h2>
<h3 id="optimal-settings"><a class="header" href="#optimal-settings">Optimal Settings</a></h3>
<pre><code class="language-toml">[performance]
render_rate = 60          # FPS target (30-120)
batch_updates = true      # Combine rapid updates
lazy_render = true        # Skip unchanged regions
stream_buffer_size = 50000

# Widget defaults
[defaults.text]
scrollback = 2000         # Lines to keep
auto_scroll = true
</code></pre>
<h3 id="low-resource-settings"><a class="header" href="#low-resource-settings">Low-Resource Settings</a></h3>
<p>For older systems or constrained environments:</p>
<pre><code class="language-toml">[performance]
render_rate = 30          # Lower FPS
batch_updates = true
lazy_render = true
stream_buffer_size = 20000

[defaults.text]
scrollback = 500          # Minimal scrollback
</code></pre>
<h2 id="scroll-performance"><a class="header" href="#scroll-performance">Scroll Performance</a></h2>
<h3 id="slow-scrolling"><a class="header" href="#slow-scrolling">Slow Scrolling</a></h3>
<p><strong>Symptom</strong>: Page Up/Down is sluggish, mouse scroll lags</p>
<p><strong>Causes</strong>:</p>
<ol>
<li>Too much scrollback content</li>
<li>Complex text styling</li>
<li>Pattern matching on scroll</li>
</ol>
<p><strong>Solutions</strong>:</p>
<ol>
<li>
<p><strong>Reduce scrollback</strong>:</p>
<pre><code class="language-toml">[[widgets]]
type = "text"
scrollback = 1000  # Down from 5000+
</code></pre>
</li>
<li>
<p><strong>Simplify highlights</strong>:</p>
<pre><code class="language-toml"># Avoid overly complex patterns
# Bad - matches everything
pattern = ".*"

# Better - specific pattern
pattern = "\\*\\* .+ \\*\\*"
</code></pre>
</li>
<li>
<p><strong>Use fast patterns</strong>:</p>
<pre><code class="language-toml">[[highlights]]
pattern = "stunned"
fast_parse = true  # Use Aho-Corasick
</code></pre>
</li>
</ol>
<h3 id="scroll-buffer-memory"><a class="header" href="#scroll-buffer-memory">Scroll Buffer Memory</a></h3>
<p><strong>Symptom</strong>: Memory usage grows over time</p>
<p><strong>Solution</strong>:</p>
<pre><code class="language-toml">[[widgets]]
type = "text"
scrollback = 2000
scrollback_limit_action = "trim"  # Remove old content
</code></pre>
<h2 id="input-latency"><a class="header" href="#input-latency">Input Latency</a></h2>
<h3 id="typing-delay"><a class="header" href="#typing-delay">Typing Delay</a></h3>
<p><strong>Symptom</strong>: Characters appear slowly after typing</p>
<p><strong>Causes</strong>:</p>
<ol>
<li>Render blocking input</li>
<li>Network latency</li>
<li>Pattern processing</li>
</ol>
<p><strong>Solutions</strong>:</p>
<ol>
<li>
<p><strong>Priority input processing</strong>:</p>
<pre><code class="language-toml">[input]
priority = "high"
buffer_size = 100
</code></pre>
</li>
<li>
<p><strong>Reduce render rate during input</strong>:</p>
<pre><code class="language-toml">[performance]
input_render_rate = 30  # Lower when typing
render_rate = 60        # Normal rate
</code></pre>
</li>
<li>
<p><strong>Check network</strong>:</p>
<pre><code class="language-bash"># Test latency to game server
ping -c 10 gs4.play.net
</code></pre>
</li>
</ol>
<h3 id="command-delay"><a class="header" href="#command-delay">Command Delay</a></h3>
<p><strong>Symptom</strong>: Commands take long to send</p>
<p><strong>Solution</strong>:</p>
<ol>
<li>Check Lich processing time</li>
<li>Disable unnecessary Lich scripts</li>
<li>Try direct mode for comparison</li>
</ol>
<h2 id="cpu-usage"><a class="header" href="#cpu-usage">CPU Usage</a></h2>
<h3 id="high-cpu-at-idle"><a class="header" href="#high-cpu-at-idle">High CPU at Idle</a></h3>
<p><strong>Symptom</strong>: CPU high even when nothing happening</p>
<p><strong>Causes</strong>:</p>
<ol>
<li>Busy render loop</li>
<li>Bad regex pattern</li>
<li>Timer spinning</li>
</ol>
<p><strong>Diagnosis</strong>:</p>
<pre><code class="language-bash"># Profile VellumFE
top -p $(pgrep vellum-fe)

# Check per-thread
htop -p $(pgrep vellum-fe)
</code></pre>
<p><strong>Solutions</strong>:</p>
<ol>
<li>
<p><strong>Enable lazy rendering</strong>:</p>
<pre><code class="language-toml">[performance]
lazy_render = true
idle_timeout = 100  # ms before sleep
</code></pre>
</li>
<li>
<p><strong>Check patterns</strong>:</p>
<pre><code class="language-toml"># Avoid catastrophic backtracking
# Bad
pattern = "(a+)+"

# Good
pattern = "a+"
</code></pre>
</li>
<li>
<p><strong>Reduce timers</strong>:</p>
<pre><code class="language-toml">[[widgets]]
type = "countdown"
update_rate = 100  # ms, not too fast
</code></pre>
</li>
</ol>
<h3 id="cpu-spikes-during-activity"><a class="header" href="#cpu-spikes-during-activity">CPU Spikes During Activity</a></h3>
<p><strong>Symptom</strong>: CPU spikes during combat/busy scenes</p>
<p><strong>Solutions</strong>:</p>
<ol>
<li>
<p><strong>Batch updates</strong>:</p>
<pre><code class="language-toml">[performance]
batch_updates = true
batch_threshold = 10  # Combine N updates
</code></pre>
</li>
<li>
<p><strong>Limit pattern matching</strong>:</p>
<pre><code class="language-toml">[[highlights]]
pattern = "complex pattern"
max_matches_per_line = 10
</code></pre>
</li>
<li>
<p><strong>Use simpler widgets</strong>:</p>
<pre><code class="language-toml"># Disable complex widgets during heavy activity
[widgets.effects]
auto_hide = true
hide_threshold = 50  # Updates/second
</code></pre>
</li>
</ol>
<h2 id="memory-usage"><a class="header" href="#memory-usage">Memory Usage</a></h2>
<h3 id="memory-growth"><a class="header" href="#memory-growth">Memory Growth</a></h3>
<p><strong>Symptom</strong>: Memory usage increases continuously</p>
<p><strong>Causes</strong>:</p>
<ol>
<li>Unlimited scrollback</li>
<li>Stream buffer growth</li>
<li>Memory leak (rare)</li>
</ol>
<p><strong>Solutions</strong>:</p>
<ol>
<li>
<p><strong>Limit all buffers</strong>:</p>
<pre><code class="language-toml">[performance]
max_total_memory = "500MB"

[[widgets]]
type = "text"
scrollback = 2000
</code></pre>
</li>
<li>
<p><strong>Enable periodic cleanup</strong>:</p>
<pre><code class="language-toml">[performance]
cleanup_interval = 300  # seconds
</code></pre>
</li>
<li>
<p><strong>Monitor memory</strong>:</p>
<pre><code class="language-bash">watch -n 5 'ps -o rss,vsz -p $(pgrep vellum-fe)'
</code></pre>
</li>
</ol>
<h3 id="large-scrollback"><a class="header" href="#large-scrollback">Large Scrollback</a></h3>
<p><strong>Problem</strong>: Each text window can accumulate megabytes</p>
<p><strong>Solution</strong>:</p>
<pre><code class="language-toml"># Global limit
[defaults.text]
scrollback = 1000

# Per-widget override only where needed
[[widgets]]
type = "text"
name = "main"
scrollback = 3000  # Main window can be larger
</code></pre>
<h2 id="startup-performance"><a class="header" href="#startup-performance">Startup Performance</a></h2>
<h3 id="slow-launch"><a class="header" href="#slow-launch">Slow Launch</a></h3>
<p><strong>Symptom</strong>: Takes several seconds to start</p>
<p><strong>Causes</strong>:</p>
<ol>
<li>Config file parsing</li>
<li>Font loading</li>
<li>Network checks</li>
</ol>
<p><strong>Solutions</strong>:</p>
<ol>
<li>
<p><strong>Simplify config</strong>:</p>
<ul>
<li>Split large configs into smaller files</li>
<li>Remove unused sections</li>
</ul>
</li>
<li>
<p><strong>Skip network check</strong>:</p>
<pre><code class="language-bash">vellum-fe --no-network-check
</code></pre>
</li>
<li>
<p><strong>Precompile patterns</strong>:</p>
<pre><code class="language-toml">[highlights]
precompile = true
cache_file = "~/.vellum-fe/pattern_cache"
</code></pre>
</li>
</ol>
<h3 id="slow-reconnect"><a class="header" href="#slow-reconnect">Slow Reconnect</a></h3>
<p><strong>Symptom</strong>: Reconnection takes long</p>
<p><strong>Solution</strong>:</p>
<pre><code class="language-toml">[connection]
reconnect_delay = 1       # Start at 1 second
reconnect_max_delay = 30  # Cap at 30 seconds
reconnect_backoff = 1.5   # Exponential backoff
</code></pre>
<h2 id="network-performance"><a class="header" href="#network-performance">Network Performance</a></h2>
<h3 id="high-latency-1"><a class="header" href="#high-latency-1">High Latency</a></h3>
<p><strong>Symptom</strong>: Actions feel delayed</p>
<p><strong>Diagnosis</strong>:</p>
<pre><code class="language-bash"># Check network latency
ping gs4.play.net
traceroute gs4.play.net
</code></pre>
<p><strong>Solutions</strong>:</p>
<ol>
<li>
<p><strong>Enable Nagle’s algorithm</strong> (if many small packets):</p>
<pre><code class="language-toml">[network]
tcp_nodelay = false
</code></pre>
</li>
<li>
<p><strong>Or disable for lower latency</strong>:</p>
<pre><code class="language-toml">[network]
tcp_nodelay = true
</code></pre>
</li>
<li>
<p><strong>Buffer commands</strong>:</p>
<pre><code class="language-toml">[input]
send_delay = 50  # ms between commands
</code></pre>
</li>
</ol>
<h3 id="bandwidth-issues"><a class="header" href="#bandwidth-issues">Bandwidth Issues</a></h3>
<p><strong>Symptom</strong>: Connection drops during heavy traffic</p>
<p><strong>Solution</strong>:</p>
<pre><code class="language-toml">[network]
receive_buffer = 65536
send_buffer = 32768
</code></pre>
<h2 id="profiling-1"><a class="header" href="#profiling-1">Profiling</a></h2>
<h3 id="built-in-performance-widget"><a class="header" href="#built-in-performance-widget">Built-in Performance Widget</a></h3>
<pre><code class="language-toml">[[widgets]]
type = "performance"
name = "perf"
x = 0
y = 95
width = 100
height = 5
show = ["fps", "memory", "cpu", "network"]
</code></pre>
<h3 id="enable-timing-logs"><a class="header" href="#enable-timing-logs">Enable Timing Logs</a></h3>
<pre><code class="language-toml">[logging]
level = "debug"

[debug]
log_render_time = true
log_parse_time = true
log_pattern_time = true
</code></pre>
<h3 id="external-profiling"><a class="header" href="#external-profiling">External Profiling</a></h3>
<pre><code class="language-bash"># Linux - perf
perf record -g vellum-fe
perf report

# macOS - Instruments
xcrun xctrace record --template "Time Profiler" --launch vellum-fe

# Cross-platform - flamegraph
cargo flamegraph --bin vellum-fe
</code></pre>
<h2 id="quick-reference-2"><a class="header" href="#quick-reference-2">Quick Reference</a></h2>
<h3 id="performance-checklist"><a class="header" href="#performance-checklist">Performance Checklist</a></h3>
<ul>
<li><input disabled="" type="checkbox"> Scrollback limited to reasonable size</li>
<li><input disabled="" type="checkbox"> Lazy rendering enabled</li>
<li><input disabled="" type="checkbox"> Batch updates enabled</li>
<li><input disabled="" type="checkbox"> No catastrophic regex patterns</li>
<li><input disabled="" type="checkbox"> Unused widgets disabled</li>
<li><input disabled="" type="checkbox"> Network connection stable</li>
<li><input disabled="" type="checkbox"> System resources adequate</li>
</ul>
<h3 id="key-settings-summary"><a class="header" href="#key-settings-summary">Key Settings Summary</a></h3>
<pre><code class="language-toml">[performance]
render_rate = 60
batch_updates = true
lazy_render = true
stream_buffer_size = 50000

[defaults.text]
scrollback = 2000

[logging]
level = "warn"  # Less logging = more performance
</code></pre>
<h2 id="see-also-89"><a class="header" href="#see-also-89">See Also</a></h2>
<ul>
<li><a href="configuration/README.html">Configuration</a> - All settings</li>
<li><a href="#performance-optimization">Architecture Performance</a> - Design details</li>
<li><a href="#common-errors">Common Errors</a> - Error messages</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="display-issues-2"><a class="header" href="#display-issues-2">Display Issues</a></h1>
<p>Solving color, rendering, and visual problems.</p>
<h2 id="color-problems"><a class="header" href="#color-problems">Color Problems</a></h2>
<h3 id="colors-dont-appear"><a class="header" href="#colors-dont-appear">Colors Don’t Appear</a></h3>
<p><strong>Symptom</strong>: Everything is monochrome</p>
<p><strong>Causes</strong>:</p>
<ol>
<li>Terminal doesn’t support colors</li>
<li><code>TERM</code> variable incorrect</li>
<li>Color disabled in config</li>
</ol>
<p><strong>Solutions</strong>:</p>
<ol>
<li>
<p><strong>Check terminal support</strong>:</p>
<pre><code class="language-bash"># Check TERM
echo $TERM
# Should be xterm-256color, screen-256color, etc.

# Check color count
tput colors
# Should be 256 or higher
</code></pre>
</li>
<li>
<p><strong>Set correct TERM</strong>:</p>
<pre><code class="language-bash">export TERM=xterm-256color
</code></pre>
</li>
<li>
<p><strong>Enable colors in config</strong>:</p>
<pre><code class="language-toml">[display]
colors = true
color_mode = "truecolor"  # or "256" or "16"
</code></pre>
</li>
</ol>
<h3 id="wrong-colors-2"><a class="header" href="#wrong-colors-2">Wrong Colors</a></h3>
<p><strong>Symptom</strong>: Colors look different than expected</p>
<p><strong>Causes</strong>:</p>
<ol>
<li>Terminal color scheme conflicts</li>
<li>True color vs 256-color mismatch</li>
<li>Theme file issues</li>
</ol>
<p><strong>Solutions</strong>:</p>
<ol>
<li>
<p><strong>Match color modes</strong>:</p>
<pre><code class="language-toml"># For terminals with true color (24-bit)
[display]
color_mode = "truecolor"

# For older terminals
[display]
color_mode = "256"
</code></pre>
</li>
<li>
<p><strong>Check terminal palette</strong>:</p>
<ul>
<li>Terminal color scheme affects named colors</li>
<li>Try built-in “Dark” or “Light” preset</li>
<li>Use hex colors for consistency:
<pre><code class="language-toml">[theme]
background = "#1a1a1a"  # Explicit hex
</code></pre>
</li>
</ul>
</li>
<li>
<p><strong>Test colors</strong>:</p>
<pre><code class="language-bash"># Print color test
for i in {0..255}; do
  printf "\e[48;5;${i}m %3d \e[0m" $i
  [ $((($i + 1) % 16)) -eq 0 ] &amp;&amp; echo
done
</code></pre>
</li>
</ol>
<h3 id="washed-out-colors"><a class="header" href="#washed-out-colors">Washed Out Colors</a></h3>
<p><strong>Symptom</strong>: Colors look pale or desaturated</p>
<p><strong>Causes</strong>:</p>
<ol>
<li>Terminal transparency</li>
<li>Bold-as-bright setting</li>
<li>Theme choices</li>
</ol>
<p><strong>Solutions</strong>:</p>
<ol>
<li>
<p><strong>Disable terminal transparency</strong> for accurate colors</p>
</li>
<li>
<p><strong>Adjust terminal settings</strong>:</p>
<ul>
<li>Disable “Bold as bright” if colors seem too bright</li>
<li>Enable “Bold as bright” if bold text is invisible</li>
</ul>
</li>
<li>
<p><strong>Increase color saturation in theme</strong>:</p>
<pre><code class="language-toml">[theme]
# Use more saturated colors
health = "#00ff00"    # Bright green
mana = "#0080ff"      # Bright blue
</code></pre>
</li>
</ol>
<h3 id="high-contrast--low-visibility"><a class="header" href="#high-contrast--low-visibility">High Contrast / Low Visibility</a></h3>
<p><strong>Symptom</strong>: Some text hard to read</p>
<p><strong>Solutions</strong>:</p>
<pre><code class="language-toml">[theme]
# Increase contrast
background = "#000000"
text = "#ffffff"
text_dim = "#b0b0b0"  # Brighter dim text

# Use accessible color combinations
# Background: #000000, Text: #ffffff (21:1 contrast)
# Background: #1a1a1a, Text: #e0e0e0 (13:1 contrast)
</code></pre>
<h2 id="character-rendering"><a class="header" href="#character-rendering">Character Rendering</a></h2>
<h3 id="missing-characters-boxes"><a class="header" href="#missing-characters-boxes">Missing Characters (Boxes)</a></h3>
<p><strong>Symptom</strong>: Characters display as □, ?, or empty boxes</p>
<p><strong>Cause</strong>: Font missing required glyphs</p>
<p><strong>Solutions</strong>:</p>
<ol>
<li>
<p><strong>Install complete font</strong>:</p>
<ul>
<li>JetBrains Mono</li>
<li>Fira Code</li>
<li>Cascadia Code</li>
<li>Nerd Font variants (include many symbols)</li>
</ul>
</li>
<li>
<p><strong>Set fallback font</strong> in terminal settings</p>
</li>
<li>
<p><strong>Disable Unicode</strong>:</p>
<pre><code class="language-toml">[display]
unicode = false
ascii_borders = true
</code></pre>
</li>
</ol>
<h3 id="wrong-box-drawing-characters"><a class="header" href="#wrong-box-drawing-characters">Wrong Box Drawing Characters</a></h3>
<p><strong>Symptom</strong>: Borders look wrong or misaligned</p>
<p><strong>Causes</strong>:</p>
<ol>
<li>Font substitution</li>
<li>Line height issues</li>
<li>Unicode normalization</li>
</ol>
<p><strong>Solutions</strong>:</p>
<ol>
<li>
<p><strong>Use monospace font</strong> designed for terminals</p>
</li>
<li>
<p><strong>Adjust line spacing</strong>:</p>
<pre><code class="language-yaml"># Alacritty example
font:
  offset:
    y: 0  # May need adjustment
</code></pre>
</li>
<li>
<p><strong>Use ASCII borders</strong>:</p>
<pre><code class="language-toml">[display]
border_style = "ascii"
# Uses +--+ instead of ╔══╗
</code></pre>
</li>
</ol>
<h3 id="emoji-display-issues"><a class="header" href="#emoji-display-issues">Emoji Display Issues</a></h3>
<p><strong>Symptom</strong>: Emoji not rendering or wrong width</p>
<p><strong>Solutions</strong>:</p>
<ol>
<li>
<p><strong>Ensure emoji font installed</strong>:</p>
<ul>
<li>Noto Color Emoji (Linux)</li>
<li>Apple Color Emoji (macOS)</li>
<li>Segoe UI Emoji (Windows)</li>
</ul>
</li>
<li>
<p><strong>Configure terminal</strong>:</p>
<pre><code class="language-yaml"># Alacritty
font:
  builtin_box_drawing: true
</code></pre>
</li>
<li>
<p><strong>Avoid emoji in critical areas</strong>:</p>
<pre><code class="language-toml">[display]
emoji_support = false  # Use text instead
</code></pre>
</li>
</ol>
<h2 id="layout-problems"><a class="header" href="#layout-problems">Layout Problems</a></h2>
<h3 id="widget-overlap-1"><a class="header" href="#widget-overlap-1">Widget Overlap</a></h3>
<p><strong>Symptom</strong>: Widgets draw over each other</p>
<p><strong>Diagnosis</strong>:</p>
<pre><code class="language-bash"># Start with layout debug
vellum-fe --debug-layout
</code></pre>
<p><strong>Solutions</strong>:</p>
<ol>
<li>
<p><strong>Check coordinates</strong>:</p>
<pre><code class="language-toml">[[widgets]]
type = "text"
name = "main"
x = 0
y = 0
width = 70
height = 85  # Ends at y=85

[[widgets]]
type = "progress"
name = "health"
x = 0
y = 86       # Start after main ends
</code></pre>
</li>
<li>
<p><strong>Use percentage positioning</strong>:</p>
<pre><code class="language-toml">[[widgets]]
type = "text"
x = "0%"
y = "0%"
width = "70%"
height = "85%"
</code></pre>
</li>
</ol>
<h3 id="widgets-outside-screen"><a class="header" href="#widgets-outside-screen">Widgets Outside Screen</a></h3>
<p><strong>Symptom</strong>: Widgets cut off or invisible</p>
<p><strong>Causes</strong>:</p>
<ol>
<li>Fixed positions larger than terminal</li>
<li>Percentage math errors</li>
</ol>
<p><strong>Solutions</strong>:</p>
<ol>
<li>
<p><strong>Use percentages for flexible layouts</strong>:</p>
<pre><code class="language-toml">[[widgets]]
width = "25%"   # Always fits
</code></pre>
</li>
<li>
<p><strong>Handle resize</strong>:</p>
<pre><code class="language-toml">[layout]
resize_behavior = "scale"  # Rescale widgets
</code></pre>
</li>
<li>
<p><strong>Check terminal size</strong>:</p>
<pre><code class="language-bash">echo "Columns: $(tput cols) Rows: $(tput lines)"
</code></pre>
</li>
</ol>
<h3 id="wrong-z-order"><a class="header" href="#wrong-z-order">Wrong Z-Order</a></h3>
<p><strong>Symptom</strong>: Popup appears behind other widgets</p>
<p><strong>Solution</strong>:</p>
<pre><code class="language-toml">[[widgets]]
type = "text"
name = "popup"
z_index = 100  # Higher = on top
</code></pre>
<h2 id="border-issues"><a class="header" href="#border-issues">Border Issues</a></h2>
<h3 id="borders-not-aligned"><a class="header" href="#borders-not-aligned">Borders Not Aligned</a></h3>
<p><strong>Symptom</strong>: Border corners don’t meet, gaps appear</p>
<p><strong>Causes</strong>:</p>
<ol>
<li>Font character width inconsistency</li>
<li>Terminal cell size</li>
<li>Unicode width calculation</li>
</ol>
<p><strong>Solutions</strong>:</p>
<ol>
<li>
<p><strong>Use consistent font</strong>:</p>
<ul>
<li>Pure monospace font</li>
<li>Same font for all text</li>
</ul>
</li>
<li>
<p><strong>ASCII fallback</strong>:</p>
<pre><code class="language-toml">[display]
border_style = "ascii"
</code></pre>
</li>
<li>
<p><strong>Adjust border characters</strong>:</p>
<pre><code class="language-toml">[theme.borders]
horizontal = "─"
vertical = "│"
top_left = "┌"
top_right = "┐"
bottom_left = "└"
bottom_right = "┘"
</code></pre>
</li>
</ol>
<h3 id="double-width-character-issues"><a class="header" href="#double-width-character-issues">Double-Width Character Issues</a></h3>
<p><strong>Symptom</strong>: CJK characters or emoji break alignment</p>
<p><strong>Solution</strong>:</p>
<pre><code class="language-toml">[display]
wide_character_support = true
wcwidth_version = "unicode_15"
</code></pre>
<h2 id="refresh-issues"><a class="header" href="#refresh-issues">Refresh Issues</a></h2>
<h3 id="partial-redraws"><a class="header" href="#partial-redraws">Partial Redraws</a></h3>
<p><strong>Symptom</strong>: Parts of screen don’t update</p>
<p><strong>Causes</strong>:</p>
<ol>
<li>Optimization too aggressive</li>
<li>Terminal damage tracking</li>
<li>SSH/tmux issues</li>
</ol>
<p><strong>Solutions</strong>:</p>
<ol>
<li>
<p><strong>Force full refresh</strong>:</p>
<pre><code># In VellumFE
.refresh
</code></pre>
<p>Or keybind:</p>
<pre><code class="language-toml">[keybinds."ctrl+l"]
action = "refresh_screen"
</code></pre>
</li>
<li>
<p><strong>Disable lazy rendering</strong>:</p>
<pre><code class="language-toml">[performance]
lazy_render = false
</code></pre>
</li>
<li>
<p><strong>tmux settings</strong>:</p>
<pre><code class="language-bash"># In .tmux.conf
set -g default-terminal "screen-256color"
set -ag terminal-overrides ",xterm-256color:RGB"
</code></pre>
</li>
</ol>
<h3 id="screen-flicker"><a class="header" href="#screen-flicker">Screen Flicker</a></h3>
<p><strong>Symptom</strong>: Screen flashes during updates</p>
<p><strong>Solutions</strong>:</p>
<ol>
<li>
<p><strong>Enable double buffering</strong>:</p>
<pre><code class="language-toml">[display]
double_buffer = true
</code></pre>
</li>
<li>
<p><strong>Batch updates</strong>:</p>
<pre><code class="language-toml">[performance]
batch_updates = true
</code></pre>
</li>
<li>
<p><strong>Check terminal</strong>:</p>
<ul>
<li>Some terminals handle rapid updates poorly</li>
<li>Try Alacritty, Kitty, or WezTerm</li>
</ul>
</li>
</ol>
<h3 id="ghost-characters"><a class="header" href="#ghost-characters">Ghost Characters</a></h3>
<p><strong>Symptom</strong>: Old characters remain after widget moves</p>
<p><strong>Solution</strong>:</p>
<pre><code class="language-toml">[display]
clear_on_move = true
full_redraw_on_resize = true
</code></pre>
<h2 id="terminal-specific-issues"><a class="header" href="#terminal-specific-issues">Terminal-Specific Issues</a></h2>
<h3 id="ssh-display-problems"><a class="header" href="#ssh-display-problems">SSH Display Problems</a></h3>
<p><strong>Symptom</strong>: Display corrupted over SSH</p>
<p><strong>Solutions</strong>:</p>
<ol>
<li>
<p><strong>Set TERM correctly</strong>:</p>
<pre><code class="language-bash">ssh -t user@host "TERM=xterm-256color vellum-fe"
</code></pre>
</li>
<li>
<p><strong>Enable compression</strong>:</p>
<pre><code class="language-bash">ssh -C user@host
</code></pre>
</li>
<li>
<p><strong>Reduce color depth</strong>:</p>
<pre><code class="language-toml">[display]
color_mode = "256"  # More compatible
</code></pre>
</li>
</ol>
<h3 id="tmux-display-problems"><a class="header" href="#tmux-display-problems">tmux Display Problems</a></h3>
<p><strong>Symptom</strong>: Colors or characters wrong in tmux</p>
<p><strong>Solutions</strong>:</p>
<ol>
<li>
<p><strong>Configure tmux</strong>:</p>
<pre><code class="language-bash"># .tmux.conf
set -g default-terminal "tmux-256color"
set -as terminal-features ",xterm-256color:RGB"
</code></pre>
</li>
<li>
<p><strong>Start VellumFE correctly</strong>:</p>
<pre><code class="language-bash">TERM=tmux-256color vellum-fe
</code></pre>
</li>
</ol>
<h3 id="screen-display-problems"><a class="header" href="#screen-display-problems">Screen Display Problems</a></h3>
<p><strong>Symptom</strong>: Issues in GNU Screen</p>
<p><strong>Solutions</strong>:</p>
<pre><code class="language-bash"># .screenrc
term screen-256color
defutf8 on
</code></pre>
<h2 id="accessibility"><a class="header" href="#accessibility">Accessibility</a></h2>
<h3 id="high-contrast-mode-1"><a class="header" href="#high-contrast-mode-1">High Contrast Mode</a></h3>
<pre><code class="language-toml">[theme]
name = "high_contrast"
background = "#000000"
text = "#ffffff"
border = "#ffffff"
border_focused = "#ffff00"

health = "#00ff00"
health_low = "#ffff00"
health_critical = "#ff0000"
</code></pre>
<h3 id="large-text"><a class="header" href="#large-text">Large Text</a></h3>
<p>Configure in terminal settings, not VellumFE:</p>
<ul>
<li>Increase font size to 14pt+</li>
<li>VellumFE will adapt to available space</li>
</ul>
<h3 id="screen-reader-hints"><a class="header" href="#screen-reader-hints">Screen Reader Hints</a></h3>
<pre><code class="language-toml">[accessibility]
screen_reader_hints = true
announce_focus_changes = true
</code></pre>
<h2 id="diagnostic-commands"><a class="header" href="#diagnostic-commands">Diagnostic Commands</a></h2>
<h3 id="test-display-capabilities"><a class="header" href="#test-display-capabilities">Test Display Capabilities</a></h3>
<pre><code class="language-bash"># Color test
printf "\e[38;2;255;0;0mTrue Color Red\e[0m\n"

# Unicode test
echo "╔═══════╗"
echo "║ Test  ║"
echo "╚═══════╝"

# Box drawing test
echo "┌─┬─┐"
echo "├─┼─┤"
echo "└─┴─┘"
</code></pre>
<h3 id="debug-mode-1"><a class="header" href="#debug-mode-1">Debug Mode</a></h3>
<pre><code class="language-bash"># Start with display debugging
vellum-fe --debug-display

# Log display operations
TF_LOG_DISPLAY=1 vellum-fe
</code></pre>
<h2 id="see-also-90"><a class="header" href="#see-also-90">See Also</a></h2>
<ul>
<li><a href="#colorstoml-reference">Colors Configuration</a></li>
<li><a href="#creating-themes">Themes</a></li>
<li><a href="#platform-issues">Platform Issues</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="connection-issues-1"><a class="header" href="#connection-issues-1">Connection Issues</a></h1>
<p>Solving network problems, authentication failures, and disconnections.</p>
<h2 id="connection-modes-3"><a class="header" href="#connection-modes-3">Connection Modes</a></h2>
<p>VellumFE supports two connection modes:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Mode</th><th>Use When</th><th>Port</th><th>Requires</th></tr>
</thead>
<tbody>
<tr><td>Lich</td><td>Using Lich scripts</td><td>8000 (default)</td><td>Lich running</td></tr>
<tr><td>Direct</td><td>Standalone</td><td>7910</td><td>Account credentials</td></tr>
</tbody>
</table>
</div>
<h2 id="quick-diagnosis-1"><a class="header" href="#quick-diagnosis-1">Quick Diagnosis</a></h2>
<pre><code class="language-bash"># Test Lich connection
nc -zv 127.0.0.1 8000

# Test direct connection
nc -zv eaccess.play.net 7910

# Check DNS
nslookup eaccess.play.net

# Full connectivity test
curl -v https://eaccess.play.net:7910 2&gt;&amp;1 | head -20
</code></pre>
<h2 id="lich-mode-issues"><a class="header" href="#lich-mode-issues">Lich Mode Issues</a></h2>
<h3 id="connection-refused-4"><a class="header" href="#connection-refused-4">“Connection Refused”</a></h3>
<p><strong>Symptom</strong>:</p>
<pre><code>Error: Connection refused to 127.0.0.1:8000
</code></pre>
<p><strong>Causes</strong>:</p>
<ol>
<li>Lich not running</li>
<li>Lich not listening on expected port</li>
<li>Firewall blocking localhost</li>
</ol>
<p><strong>Solutions</strong>:</p>
<ol>
<li>
<p><strong>Start Lich first</strong>:</p>
<pre><code class="language-bash"># Start Lich (method varies)
ruby lich.rb
# Or use your Lich launcher
</code></pre>
</li>
<li>
<p><strong>Check Lich is listening</strong>:</p>
<pre><code class="language-bash"># Linux/macOS
lsof -i :8000

# Windows
netstat -an | findstr 8000
</code></pre>
</li>
<li>
<p><strong>Verify port in Lich settings</strong>:</p>
<ul>
<li>Check Lich configuration for proxy port</li>
<li>Match in VellumFE:
<pre><code class="language-toml">[connection]
mode = "lich"
port = 8000  # Match Lich's setting
</code></pre>
</li>
</ul>
</li>
</ol>
<h3 id="cant-connect-after-lich-starts"><a class="header" href="#cant-connect-after-lich-starts">Can’t Connect After Lich Starts</a></h3>
<p><strong>Symptom</strong>: Lich running but VellumFE can’t connect</p>
<p><strong>Causes</strong>:</p>
<ol>
<li>Lich hasn’t initialized proxy yet</li>
<li>Wrong interface binding</li>
</ol>
<p><strong>Solutions</strong>:</p>
<ol>
<li>
<p><strong>Wait for Lich startup</strong>:</p>
<pre><code class="language-toml">[connection]
connect_delay = 3  # seconds to wait
</code></pre>
</li>
<li>
<p><strong>Check Lich’s listen address</strong>:</p>
<pre><code class="language-toml"># If Lich bound to specific interface
[connection]
host = "127.0.0.1"  # Must match Lich
</code></pre>
</li>
</ol>
<h3 id="disconnects-when-lich-reloads"><a class="header" href="#disconnects-when-lich-reloads">Disconnects When Lich Reloads</a></h3>
<p><strong>Symptom</strong>: Connection drops when Lich scripts reload</p>
<p><strong>Solution</strong>:</p>
<pre><code class="language-toml">[connection]
auto_reconnect = true
reconnect_delay = 2
</code></pre>
<h2 id="direct-mode-issues"><a class="header" href="#direct-mode-issues">Direct Mode Issues</a></h2>
<h3 id="authentication-failed-3"><a class="header" href="#authentication-failed-3">Authentication Failed</a></h3>
<p><strong>Symptom</strong>:</p>
<pre><code>Error: Authentication failed: invalid credentials
</code></pre>
<p><strong>Causes</strong>:</p>
<ol>
<li>Wrong account name</li>
<li>Wrong password</li>
<li>Special characters in password</li>
<li>Account locked/expired</li>
</ol>
<p><strong>Solutions</strong>:</p>
<ol>
<li>
<p><strong>Verify credentials</strong>:</p>
<ul>
<li>Test via web login first</li>
<li>Check account status</li>
</ul>
</li>
<li>
<p><strong>Handle special characters</strong>:</p>
<pre><code class="language-bash"># Quote password with special chars
vellum-fe --direct --account NAME --password 'P@ss!word'
</code></pre>
</li>
<li>
<p><strong>Use environment variables</strong> (more secure):</p>
<pre><code class="language-bash">export TF_ACCOUNT="myaccount"
export TF_PASSWORD="mypassword"
vellum-fe --direct
</code></pre>
</li>
<li>
<p><strong>Check for account issues</strong>:</p>
<ul>
<li>Verify subscription is active</li>
<li>Check for account locks</li>
</ul>
</li>
</ol>
<h3 id="certificate-verification-failed-2"><a class="header" href="#certificate-verification-failed-2">“Certificate Verification Failed”</a></h3>
<p><strong>Symptom</strong>:</p>
<pre><code>Error: Certificate verification failed
</code></pre>
<p><strong>Causes</strong>:</p>
<ol>
<li>Corrupted cached certificate</li>
<li>Man-in-the-middle (security concern!)</li>
<li>Server certificate changed</li>
</ol>
<p><strong>Solutions</strong>:</p>
<ol>
<li>
<p><strong>Remove and re-download certificate</strong>:</p>
<pre><code class="language-bash">rm ~/.vellum-fe/simu.pem
vellum-fe --direct ...  # Downloads fresh cert
</code></pre>
</li>
<li>
<p><strong>If error persists</strong>:</p>
<ul>
<li>Check if you’re behind a corporate proxy</li>
<li>Verify you’re on a trusted network</li>
<li>Certificate changes may indicate security issues</li>
</ul>
</li>
<li>
<p><strong>Manual certificate verification</strong>:</p>
<pre><code class="language-bash">openssl s_client -connect eaccess.play.net:7910 -servername eaccess.play.net
</code></pre>
</li>
</ol>
<h3 id="connection-timed-out-1"><a class="header" href="#connection-timed-out-1">“Connection Timed Out”</a></h3>
<p><strong>Symptom</strong>:</p>
<pre><code>Error: Connection to eaccess.play.net:7910 timed out
</code></pre>
<p><strong>Causes</strong>:</p>
<ol>
<li>Firewall blocking</li>
<li>Network issues</li>
<li>Server maintenance</li>
</ol>
<p><strong>Solutions</strong>:</p>
<ol>
<li>
<p><strong>Check basic connectivity</strong>:</p>
<pre><code class="language-bash">ping eaccess.play.net
traceroute eaccess.play.net
</code></pre>
</li>
<li>
<p><strong>Verify port access</strong>:</p>
<pre><code class="language-bash">nc -zv eaccess.play.net 7910
</code></pre>
</li>
<li>
<p><strong>Check firewall</strong>:</p>
<pre><code class="language-bash"># Linux - check if port 7910 is blocked
sudo iptables -L -n | grep 7910

# Windows - check firewall
netsh advfirewall firewall show rule name=all | findstr 7910
</code></pre>
</li>
<li>
<p><strong>Increase timeout</strong>:</p>
<pre><code class="language-toml">[connection]
timeout = 60  # seconds
</code></pre>
</li>
</ol>
<h3 id="character-not-found-1"><a class="header" href="#character-not-found-1">“Character Not Found”</a></h3>
<p><strong>Symptom</strong>:</p>
<pre><code>Error: Character 'Mychar' not found on account
</code></pre>
<p><strong>Solutions</strong>:</p>
<ol>
<li>
<p><strong>Check character name spelling</strong> (case-sensitive)</p>
</li>
<li>
<p><strong>Verify character exists on correct game</strong>:</p>
<pre><code class="language-bash">vellum-fe --direct --game prime ...  # GemStone IV Prime
vellum-fe --direct --game plat ...   # GemStone IV Platinum
vellum-fe --direct --game test ...   # Test server
</code></pre>
</li>
<li>
<p><strong>List available characters</strong>:</p>
<pre><code class="language-bash">vellum-fe --direct --list-characters
</code></pre>
</li>
</ol>
<h2 id="connection-drops"><a class="header" href="#connection-drops">Connection Drops</a></h2>
<h3 id="random-disconnects"><a class="header" href="#random-disconnects">Random Disconnects</a></h3>
<p><strong>Symptom</strong>: Connection drops unexpectedly during play</p>
<p><strong>Causes</strong>:</p>
<ol>
<li>Network instability</li>
<li>Idle timeout</li>
<li>Server-side disconnection</li>
</ol>
<p><strong>Solutions</strong>:</p>
<ol>
<li>
<p><strong>Enable auto-reconnect</strong>:</p>
<pre><code class="language-toml">[connection]
auto_reconnect = true
reconnect_delay = 2
reconnect_attempts = 5
</code></pre>
</li>
<li>
<p><strong>Send keepalives</strong>:</p>
<pre><code class="language-toml">[connection]
keepalive = true
keepalive_interval = 30  # seconds
</code></pre>
</li>
<li>
<p><strong>Check for network issues</strong>:</p>
<pre><code class="language-bash"># Monitor connection
ping -i 5 gs4.play.net
</code></pre>
</li>
</ol>
<h3 id="disconnects-during-high-activity"><a class="header" href="#disconnects-during-high-activity">Disconnects During High Activity</a></h3>
<p><strong>Symptom</strong>: Drops during combat or busy areas</p>
<p><strong>Causes</strong>:</p>
<ol>
<li>Buffer overflow</li>
<li>Processing can’t keep up</li>
<li>Network congestion</li>
</ol>
<p><strong>Solutions</strong>:</p>
<ol>
<li>
<p><strong>Increase buffers</strong>:</p>
<pre><code class="language-toml">[network]
receive_buffer = 65536
send_buffer = 32768
</code></pre>
</li>
<li>
<p><strong>Enable compression</strong> (if supported):</p>
<pre><code class="language-toml">[network]
compression = true
</code></pre>
</li>
</ol>
<h3 id="connection-reset-by-peer"><a class="header" href="#connection-reset-by-peer">“Connection Reset by Peer”</a></h3>
<p><strong>Symptom</strong>:</p>
<pre><code>Error: Connection reset by peer
</code></pre>
<p><strong>Causes</strong>:</p>
<ol>
<li>Server closed connection</li>
<li>Network equipment reset</li>
<li>Rate limiting</li>
</ol>
<p><strong>Solutions</strong>:</p>
<ol>
<li>
<p><strong>Check for rapid reconnects</strong> (may be rate limited):</p>
<pre><code class="language-toml">[connection]
reconnect_delay = 5  # Don't reconnect too fast
</code></pre>
</li>
<li>
<p><strong>Review recent actions</strong>:</p>
<ul>
<li>Excessive commands?</li>
<li>Script flooding?</li>
</ul>
</li>
</ol>
<h2 id="firewall-issues"><a class="header" href="#firewall-issues">Firewall Issues</a></h2>
<h3 id="corporateschool-network"><a class="header" href="#corporateschool-network">Corporate/School Network</a></h3>
<p><strong>Symptom</strong>: Works at home, fails at work/school</p>
<p><strong>Solutions</strong>:</p>
<ol>
<li>
<p><strong>Check if port 7910 allowed</strong>:</p>
<ul>
<li>Direct mode uses port 7910 (non-standard)</li>
<li>May be blocked by corporate firewalls</li>
</ul>
</li>
<li>
<p><strong>Use Lich as intermediary</strong>:</p>
<ul>
<li>If Lich works (different protocol), use Lich mode</li>
</ul>
</li>
<li>
<p><strong>Request firewall exception</strong>:</p>
<ul>
<li>Port 7910 TCP outbound to eaccess.play.net</li>
</ul>
</li>
</ol>
<h3 id="vpn-issues"><a class="header" href="#vpn-issues">VPN Issues</a></h3>
<p><strong>Symptom</strong>: Connection fails when VPN active</p>
<p><strong>Solutions</strong>:</p>
<ol>
<li>
<p><strong>Check VPN split tunneling</strong>:</p>
<ul>
<li>Gaming traffic might be routed through VPN</li>
<li>Configure VPN to exclude game servers</li>
</ul>
</li>
<li>
<p><strong>DNS through VPN</strong>:</p>
<pre><code class="language-bash"># Check DNS resolution
nslookup eaccess.play.net
</code></pre>
</li>
<li>
<p><strong>Try without VPN</strong> to confirm VPN is the issue</p>
</li>
</ol>
<h2 id="proxy-configuration-1"><a class="header" href="#proxy-configuration-1">Proxy Configuration</a></h2>
<h3 id="http-proxy"><a class="header" href="#http-proxy">HTTP Proxy</a></h3>
<pre><code class="language-toml">[network]
http_proxy = "http://proxy.example.com:8080"
</code></pre>
<h3 id="socks-proxy"><a class="header" href="#socks-proxy">SOCKS Proxy</a></h3>
<pre><code class="language-toml">[network]
socks_proxy = "socks5://localhost:1080"
</code></pre>
<h3 id="no-proxy-for-game-servers"><a class="header" href="#no-proxy-for-game-servers">No Proxy for Game Servers</a></h3>
<pre><code class="language-toml">[network]
no_proxy = "eaccess.play.net,gs4.play.net"
</code></pre>
<h2 id="ssltls-issues"><a class="header" href="#ssltls-issues">SSL/TLS Issues</a></h2>
<h3 id="ssl-handshake-failed"><a class="header" href="#ssl-handshake-failed">“SSL Handshake Failed”</a></h3>
<p><strong>Symptom</strong>:</p>
<pre><code>Error: SSL handshake failed
</code></pre>
<p><strong>Causes</strong>:</p>
<ol>
<li>TLS version mismatch</li>
<li>Cipher suite incompatibility</li>
<li>OpenSSL issues</li>
</ol>
<p><strong>Solutions</strong>:</p>
<ol>
<li>
<p><strong>Check OpenSSL version</strong>:</p>
<pre><code class="language-bash">openssl version
# Should be 1.1.x or higher
</code></pre>
</li>
<li>
<p><strong>Force TLS version</strong> (if needed):</p>
<pre><code class="language-toml">[network]
tls_min_version = "1.2"
</code></pre>
</li>
<li>
<p><strong>Rebuild with updated OpenSSL</strong>:</p>
<pre><code class="language-bash"># Ensure vcpkg OpenSSL is current
vcpkg update
vcpkg upgrade openssl
</code></pre>
</li>
</ol>
<h3 id="certificate-chain-errors"><a class="header" href="#certificate-chain-errors">“Certificate Chain” Errors</a></h3>
<p><strong>Symptom</strong>: Certificate chain validation errors</p>
<p><strong>Solution</strong>:</p>
<pre><code class="language-bash"># Reset certificate cache
rm ~/.vellum-fe/simu.pem
rm ~/.vellum-fe/cert_chain.pem

# Reconnect - will re-download
vellum-fe --direct ...
</code></pre>
<h2 id="debugging-connections"><a class="header" href="#debugging-connections">Debugging Connections</a></h2>
<h3 id="enable-network-logging"><a class="header" href="#enable-network-logging">Enable Network Logging</a></h3>
<pre><code class="language-toml">[logging]
level = "debug"

[debug]
log_network = true
log_network_data = false  # true for packet dumps (verbose!)
</code></pre>
<h3 id="view-network-debug-info"><a class="header" href="#view-network-debug-info">View Network Debug Info</a></h3>
<pre><code class="language-bash"># Start with network debugging
TF_DEBUG_NETWORK=1 vellum-fe

# Log to file for analysis
TF_LOG_FILE=/tmp/tf-network.log vellum-fe --debug
</code></pre>
<h3 id="test-connection-step-by-step"><a class="header" href="#test-connection-step-by-step">Test Connection Step by Step</a></h3>
<pre><code class="language-bash"># 1. DNS resolution
nslookup eaccess.play.net

# 2. Basic connectivity
ping eaccess.play.net

# 3. Port availability
nc -zv eaccess.play.net 7910

# 4. TLS connection
openssl s_client -connect eaccess.play.net:7910

# 5. Full connection test
vellum-fe --direct --test-connection
</code></pre>
<h2 id="quick-reference-3"><a class="header" href="#quick-reference-3">Quick Reference</a></h2>
<h3 id="connection-checklist"><a class="header" href="#connection-checklist">Connection Checklist</a></h3>
<ul>
<li><input disabled="" type="checkbox"> Correct mode (lich vs direct)</li>
<li><input disabled="" type="checkbox"> Lich running (if lich mode)</li>
<li><input disabled="" type="checkbox"> Credentials correct (if direct mode)</li>
<li><input disabled="" type="checkbox"> Port accessible (8000 for lich, 7910 for direct)</li>
<li><input disabled="" type="checkbox"> Firewall allows connection</li>
<li><input disabled="" type="checkbox"> Certificate valid</li>
<li><input disabled="" type="checkbox"> Network stable</li>
</ul>
<h3 id="emergency-recovery"><a class="header" href="#emergency-recovery">Emergency Recovery</a></h3>
<pre><code class="language-bash"># Reset all connection state
rm ~/.vellum-fe/simu.pem      # Certificate cache
rm ~/.vellum-fe/session.dat   # Session cache

# Test with minimal config
vellum-fe --default-config --direct --account NAME --password PASS
</code></pre>
<h2 id="see-also-91"><a class="header" href="#see-also-91">See Also</a></h2>
<ul>
<li><a href="network/README.html">Network Overview</a></li>
<li><a href="#lich-proxy-connection">Lich Proxy</a></li>
<li><a href="#direct-eaccess-connection">Direct eAccess</a></li>
<li><a href="#tls-certificates">TLS Certificates</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="appendices"><a class="header" href="#appendices">Appendices</a></h1>
<p>Supplementary reference material and additional resources.</p>
<h2 id="contents"><a class="header" href="#contents">Contents</a></h2>
<h3 id="glossary"><a class="header" href="#glossary"><a href="#glossary-1">Glossary</a></a></h3>
<p>Terms and definitions used throughout VellumFE documentation. Covers technical terms, abbreviations, and concepts from A to Z.</p>
<h3 id="xml-protocol-reference"><a class="header" href="#xml-protocol-reference"><a href="#xml-protocol-reference-1">XML Protocol Reference</a></a></h3>
<p>Complete reference for GemStone IV’s XML game protocol. Documents all tags, attributes, and data structures sent by the game server.</p>
<h3 id="color-codes"><a class="header" href="#color-codes"><a href="#color-codes-reference">Color Codes</a></a></h3>
<p>Comprehensive color reference including:</p>
<ul>
<li>Hex color format</li>
<li>Named colors</li>
<li>RGB values</li>
<li>VellumFE presets</li>
<li>256-color palette</li>
<li>Terminal compatibility</li>
</ul>
<h3 id="unicode-symbols"><a class="header" href="#unicode-symbols"><a href="#unicode-symbols-reference">Unicode Symbols</a></a></h3>
<p>Useful Unicode characters for layouts:</p>
<ul>
<li>Box drawing characters</li>
<li>Progress bar elements</li>
<li>Directional arrows</li>
<li>Status indicators</li>
<li>Decorative symbols</li>
</ul>
<h3 id="acknowledgments"><a class="header" href="#acknowledgments"><a href="#acknowledgments-1">Acknowledgments</a></a></h3>
<p>Recognition of:</p>
<ul>
<li>Projects that inspired VellumFE</li>
<li>Open source libraries used</li>
<li>Community contributors</li>
<li>Standards and references</li>
</ul>
<h2 id="purpose"><a class="header" href="#purpose">Purpose</a></h2>
<p>These appendices provide:</p>
<ol>
<li><strong>Quick Lookup</strong> - Find definitions and codes fast</li>
<li><strong>Deep Reference</strong> - Detailed technical specifications</li>
<li><strong>Design Resources</strong> - Characters and colors for customization</li>
<li><strong>Attribution</strong> - Credit to those who made VellumFE possible</li>
</ol>
<h2 id="using-the-appendices"><a class="header" href="#using-the-appendices">Using the Appendices</a></h2>
<h3 id="for-users-1"><a class="header" href="#for-users-1">For Users</a></h3>
<ul>
<li><strong>Glossary</strong>: When you encounter unfamiliar terms</li>
<li><strong>Color Codes</strong>: When creating custom themes</li>
<li><strong>Unicode Symbols</strong>: When designing layouts</li>
</ul>
<h3 id="for-developers-1"><a class="header" href="#for-developers-1">For Developers</a></h3>
<ul>
<li><strong>XML Protocol</strong>: When extending the parser</li>
<li><strong>Glossary</strong>: For consistent terminology</li>
<li><strong>Acknowledgments</strong>: Understanding dependencies</li>
</ul>
<h2 id="see-also-92"><a class="header" href="#see-also-92">See Also</a></h2>
<ul>
<li><a href="reference/README.html">Reference Guide</a> - Configuration reference</li>
<li><a href="troubleshooting/README.html">Troubleshooting</a> - Problem solving</li>
<li><a href="api/README.html">API Documentation</a> - Programmatic interface</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="glossary-1"><a class="header" href="#glossary-1">Glossary</a></h1>
<p>Terms and definitions used throughout VellumFE documentation.</p>
<h2 id="a"><a class="header" href="#a">A</a></h2>
<h3 id="aho-corasick"><a class="header" href="#aho-corasick">Aho-Corasick</a></h3>
<p>A string-matching algorithm that can match multiple patterns simultaneously. Used by VellumFE for efficient highlight pattern matching when <code>fast_parse = true</code>.</p>
<h3 id="ascii"><a class="header" href="#ascii">ASCII</a></h3>
<p>American Standard Code for Information Interchange. A character encoding standard. VellumFE can use ASCII-only mode for maximum terminal compatibility.</p>
<h3 id="auto-reconnect"><a class="header" href="#auto-reconnect">Auto-reconnect</a></h3>
<p>Feature that automatically reconnects to the game server if the connection is lost.</p>
<h3 id="auto-scroll"><a class="header" href="#auto-scroll">Auto-scroll</a></h3>
<p>Widget behavior that automatically scrolls to show the newest content as it arrives.</p>
<h2 id="b"><a class="header" href="#b">B</a></h2>
<h3 id="browser"><a class="header" href="#browser">Browser</a></h3>
<p>In VellumFE, a popup window that can be opened for detailed interaction with game data. Examples: highlight editor, spell list browser.</p>
<h3 id="buffer"><a class="header" href="#buffer">Buffer</a></h3>
<p>Memory area for temporarily storing data. VellumFE uses buffers for incoming game data, scrollback history, and command history.</p>
<h2 id="c"><a class="header" href="#c">C</a></h2>
<h3 id="casttime-1"><a class="header" href="#casttime-1">Casttime</a></h3>
<p>Delay after casting a spell before you can act again. Displayed by countdown widgets.</p>
<h3 id="character-code"><a class="header" href="#character-code">Character Code</a></h3>
<p>Unique identifier for a character in the game’s authentication system.</p>
<h3 id="command-input-4"><a class="header" href="#command-input-4">Command Input</a></h3>
<p>Widget type for entering commands to send to the game.</p>
<h3 id="command-list-cmdlist"><a class="header" href="#command-list-cmdlist">Command List (cmdlist)</a></h3>
<p>Configuration that maps context menu options to game objects based on noun matching.</p>
<h3 id="compass-7"><a class="header" href="#compass-7">Compass</a></h3>
<p>Widget displaying available movement directions in the current room.</p>
<h3 id="config"><a class="header" href="#config">Config</a></h3>
<p>Short for configuration. TOML files controlling VellumFE behavior.</p>
<h3 id="core-layer-1"><a class="header" href="#core-layer-1">Core Layer</a></h3>
<p>The middle layer of VellumFE architecture, containing business logic and widget management.</p>
<h2 id="d"><a class="header" href="#d">D</a></h2>
<h3 id="dashboard"><a class="header" href="#dashboard">Dashboard</a></h3>
<p>Widget type that combines multiple status elements into a single display.</p>
<h3 id="data-layer-1"><a class="header" href="#data-layer-1">Data Layer</a></h3>
<p>The foundation layer of VellumFE architecture, containing game state and parsing.</p>
<h3 id="data-source-10"><a class="header" href="#data-source-10">Data Source</a></h3>
<p>Configuration path identifying where a widget gets its data (e.g., <code>vitals.health</code>).</p>
<h3 id="direct-mode-3"><a class="header" href="#direct-mode-3">Direct Mode</a></h3>
<p>Connection method that authenticates directly with eAccess servers, bypassing Lich.</p>
<h2 id="e"><a class="header" href="#e">E</a></h2>
<h3 id="eaccess"><a class="header" href="#eaccess">eAccess</a></h3>
<p>Simutronics authentication server for GemStone IV and DragonRealms.</p>
<h3 id="effect"><a class="header" href="#effect">Effect</a></h3>
<p>Active spell, buff, or debuff affecting your character. Tracked by active_effects widget.</p>
<h2 id="f"><a class="header" href="#f">F</a></h2>
<h3 id="fast-parse"><a class="header" href="#fast-parse">Fast Parse</a></h3>
<p>Optimization mode using Aho-Corasick algorithm for pattern matching instead of regex.</p>
<h3 id="focus-1"><a class="header" href="#focus-1">Focus</a></h3>
<p>The currently selected/active widget. Input goes to the focused widget.</p>
<h3 id="frontend-layer-1"><a class="header" href="#frontend-layer-1">Frontend Layer</a></h3>
<p>The presentation layer of VellumFE architecture, handling rendering and input.</p>
<h2 id="g"><a class="header" href="#g">G</a></h2>
<h3 id="game-state"><a class="header" href="#game-state">Game State</a></h3>
<p>Central data structure containing all parsed game information.</p>
<h3 id="generation"><a class="header" href="#generation">Generation</a></h3>
<p>Version number that increments when data changes. Used for efficient change detection.</p>
<h3 id="gemstone-iv"><a class="header" href="#gemstone-iv">GemStone IV</a></h3>
<p>Text-based MMORPG that VellumFE is designed for.</p>
<h3 id="glob"><a class="header" href="#glob">Glob</a></h3>
<p>Pattern matching syntax using wildcards (* and ?).</p>
<h3 id="glyph"><a class="header" href="#glyph">Glyph</a></h3>
<p>Visual representation of a character in a font.</p>
<h2 id="h"><a class="header" href="#h">H</a></h2>
<h3 id="hash-key"><a class="header" href="#hash-key">Hash Key</a></h3>
<p>In eAccess authentication, a 32-byte key used to obfuscate the password.</p>
<h3 id="hex-color"><a class="header" href="#hex-color">Hex Color</a></h3>
<p>Color specified using hexadecimal notation (e.g., <code>#FF0000</code> for red).</p>
<h3 id="highlight"><a class="header" href="#highlight">Highlight</a></h3>
<p>Pattern-based text styling that colors matching text in game output.</p>
<h3 id="hook"><a class="header" href="#hook">Hook</a></h3>
<p>In some contexts, a callback function. Not currently used in VellumFE.</p>
<h2 id="i"><a class="header" href="#i">I</a></h2>
<h3 id="indicator-3"><a class="header" href="#indicator-3">Indicator</a></h3>
<p>Widget showing boolean status (on/off states like hidden, stunned, prone).</p>
<h3 id="injury-doll-2"><a class="header" href="#injury-doll-2">Injury Doll</a></h3>
<p>Widget displaying injuries to different body parts.</p>
<h3 id="input-widget"><a class="header" href="#input-widget">Input Widget</a></h3>
<p>Widget that accepts text input from the user.</p>
<h2 id="k"><a class="header" href="#k">K</a></h2>
<h3 id="keybind"><a class="header" href="#keybind">Keybind</a></h3>
<p>Association between a key combination and an action or macro.</p>
<h3 id="keepalive"><a class="header" href="#keepalive">Keepalive</a></h3>
<p>Network message sent periodically to prevent connection timeout.</p>
<h2 id="l"><a class="header" href="#l">L</a></h2>
<h3 id="layout-3"><a class="header" href="#layout-3">Layout</a></h3>
<p>Configuration defining widget positions, sizes, and arrangement.</p>
<h3 id="lazy-render"><a class="header" href="#lazy-render">Lazy Render</a></h3>
<p>Optimization that only redraws changed portions of the screen.</p>
<h3 id="lich"><a class="header" href="#lich">Lich</a></h3>
<p>Ruby-based proxy and scripting platform for GemStone IV.</p>
<h3 id="lich-mode-3"><a class="header" href="#lich-mode-3">Lich Mode</a></h3>
<p>Connection method that connects through Lich proxy.</p>
<h2 id="m"><a class="header" href="#m">M</a></h2>
<h3 id="macro"><a class="header" href="#macro">Macro</a></h3>
<p>Command or sequence of commands triggered by a keybind.</p>
<h3 id="mana"><a class="header" href="#mana">Mana</a></h3>
<p>Magical energy resource. Tracked by vitals.mana.</p>
<h3 id="monospace"><a class="header" href="#monospace">Monospace</a></h3>
<p>Font where every character has the same width. Required for terminal UI.</p>
<h3 id="mud"><a class="header" href="#mud">MUD</a></h3>
<p>Multi-User Dungeon. Text-based multiplayer games. GemStone IV is technically a MUD.</p>
<h2 id="n"><a class="header" href="#n">N</a></h2>
<h3 id="nerd-font"><a class="header" href="#nerd-font">Nerd Font</a></h3>
<p>Font family including many additional symbols and icons.</p>
<h3 id="node"><a class="header" href="#node">Node</a></h3>
<p>Individual XML element in the game protocol.</p>
<h2 id="o"><a class="header" href="#o">O</a></h2>
<h3 id="owasp"><a class="header" href="#owasp">OWASP</a></h3>
<p>Open Web Application Security Project. Security standards referenced in development.</p>
<h3 id="overlay"><a class="header" href="#overlay">Overlay</a></h3>
<p>Widget that draws on top of other widgets.</p>
<h2 id="p"><a class="header" href="#p">P</a></h2>
<h3 id="palette"><a class="header" href="#palette">Palette</a></h3>
<p>Set of colors available for use in themes.</p>
<h3 id="parsedelement"><a class="header" href="#parsedelement">ParsedElement</a></h3>
<p>Internal representation of processed game data.</p>
<h3 id="parser"><a class="header" href="#parser">Parser</a></h3>
<p>Component that interprets XML game protocol into structured data.</p>
<h3 id="pattern"><a class="header" href="#pattern">Pattern</a></h3>
<p>Regular expression or literal string for matching text.</p>
<h3 id="percentage-positioning"><a class="header" href="#percentage-positioning">Percentage Positioning</a></h3>
<p>Widget placement using percentages instead of fixed coordinates.</p>
<h3 id="pem"><a class="header" href="#pem">PEM</a></h3>
<p>Privacy-Enhanced Mail. Certificate file format used for TLS.</p>
<h3 id="popup"><a class="header" href="#popup">Popup</a></h3>
<p>See Browser.</p>
<h3 id="preset"><a class="header" href="#preset">Preset</a></h3>
<p>Named color with associated hex value (e.g., “health” → “#00ff00”).</p>
<h3 id="progress-bar-1"><a class="header" href="#progress-bar-1">Progress Bar</a></h3>
<p>Widget showing a value as a filled bar (health, mana, etc.).</p>
<h3 id="protocol"><a class="header" href="#protocol">Protocol</a></h3>
<p>Rules for communication between client and server.</p>
<h3 id="proxy"><a class="header" href="#proxy">Proxy</a></h3>
<p>Intermediary that relays connections (Lich acts as a proxy).</p>
<h2 id="r"><a class="header" href="#r">R</a></h2>
<h3 id="reconnect"><a class="header" href="#reconnect">Reconnect</a></h3>
<p>Re-establishing connection after disconnection.</p>
<h3 id="regex"><a class="header" href="#regex">Regex</a></h3>
<p>Regular expression. Pattern matching syntax for text.</p>
<h3 id="render"><a class="header" href="#render">Render</a></h3>
<p>Drawing the UI to the screen.</p>
<h3 id="render-rate"><a class="header" href="#render-rate">Render Rate</a></h3>
<p>How many times per second the UI updates (FPS).</p>
<h3 id="room-1"><a class="header" href="#room-1">Room</a></h3>
<p>In-game location. Room data includes name, description, exits.</p>
<h3 id="roundtime-2"><a class="header" href="#roundtime-2">Roundtime</a></h3>
<p>Delay after an action before you can act again.</p>
<h3 id="rt"><a class="header" href="#rt">RT</a></h3>
<p>Short for Roundtime.</p>
<h2 id="s"><a class="header" href="#s">S</a></h2>
<h3 id="scrollback"><a class="header" href="#scrollback">Scrollback</a></h3>
<p>History of text that can be scrolled back to view.</p>
<h3 id="session"><a class="header" href="#session">Session</a></h3>
<p>Connection session with the game server.</p>
<h3 id="sni"><a class="header" href="#sni">SNI</a></h3>
<p>Server Name Indication. TLS extension disabled for eAccess compatibility.</p>
<h3 id="spirit"><a class="header" href="#spirit">Spirit</a></h3>
<p>Spiritual energy resource. Tracked by vitals.spirit.</p>
<h3 id="ssl"><a class="header" href="#ssl">SSL</a></h3>
<p>Secure Sockets Layer. Legacy term, now TLS.</p>
<h3 id="stamina"><a class="header" href="#stamina">Stamina</a></h3>
<p>Physical energy resource. Tracked by vitals.stamina.</p>
<h3 id="stream-1"><a class="header" href="#stream-1">Stream</a></h3>
<p>Category of game output (main, room, combat, speech, etc.).</p>
<h3 id="sync"><a class="header" href="#sync">Sync</a></h3>
<p>Process of updating widgets to match current game state.</p>
<h2 id="t"><a class="header" href="#t">T</a></h2>
<h3 id="tab"><a class="header" href="#tab">Tab</a></h3>
<p>In tabbed_text widget, a separate pane within the widget.</p>
<h3 id="tabbed-text-2"><a class="header" href="#tabbed-text-2">Tabbed Text</a></h3>
<p>Widget type with multiple tabs, each showing different content.</p>
<h3 id="terminal"><a class="header" href="#terminal">Terminal</a></h3>
<p>Text-based interface environment.</p>
<h3 id="theme"><a class="header" href="#theme">Theme</a></h3>
<p>Collection of color definitions for consistent appearance.</p>
<h3 id="ticket"><a class="header" href="#ticket">Ticket</a></h3>
<p>Authentication token for game server connection.</p>
<h3 id="tls"><a class="header" href="#tls">TLS</a></h3>
<p>Transport Layer Security. Encryption for network connections.</p>
<h3 id="toml"><a class="header" href="#toml">TOML</a></h3>
<p>Tom’s Obvious, Minimal Language. Configuration file format.</p>
<h3 id="trigger-1"><a class="header" href="#trigger-1">Trigger</a></h3>
<p>Automation that executes commands based on game output patterns.</p>
<h3 id="true-color"><a class="header" href="#true-color">True Color</a></h3>
<p>24-bit color (16.7 million colors). Also called “truecolor”.</p>
<h3 id="tts-1"><a class="header" href="#tts-1">TTS</a></h3>
<p>Text-to-Speech. Audio output of game text.</p>
<h2 id="u"><a class="header" href="#u">U</a></h2>
<h3 id="unicode"><a class="header" href="#unicode">Unicode</a></h3>
<p>Character encoding standard supporting international characters and symbols.</p>
<h3 id="update"><a class="header" href="#update">Update</a></h3>
<p>Change to game state that triggers widget refresh.</p>
<h2 id="v"><a class="header" href="#v">V</a></h2>
<h3 id="vitals-3"><a class="header" href="#vitals-3">Vitals</a></h3>
<p>Character health statistics (health, mana, stamina, spirit).</p>
<h3 id="viewport"><a class="header" href="#viewport">Viewport</a></h3>
<p>Visible portion of scrollable content.</p>
<h2 id="w"><a class="header" href="#w">W</a></h2>
<h3 id="widget"><a class="header" href="#widget">Widget</a></h3>
<p>UI component displaying game information or accepting input.</p>
<h3 id="widget-manager-1"><a class="header" href="#widget-manager-1">Widget Manager</a></h3>
<p>Core component managing widget lifecycle and updates.</p>
<h2 id="x"><a class="header" href="#x">X</a></h2>
<h3 id="xml"><a class="header" href="#xml">XML</a></h3>
<p>eXtensible Markup Language. Format of game protocol.</p>
<h2 id="z"><a class="header" href="#z">Z</a></h2>
<h3 id="z-index"><a class="header" href="#z-index">Z-Index</a></h3>
<p>Layer order for overlapping widgets. Higher values display on top.</p>
<h2 id="see-also-93"><a class="header" href="#see-also-93">See Also</a></h2>
<ul>
<li><a href="architecture/README.html">Architecture</a> - System design</li>
<li><a href="configuration/README.html">Configuration</a> - Settings reference</li>
<li><a href="widgets/README.html">Widgets</a> - Widget types</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="xml-protocol-reference-1"><a class="header" href="#xml-protocol-reference-1">XML Protocol Reference</a></h1>
<p>Complete reference for GemStone IV’s XML game protocol.</p>
<h2 id="protocol-overview"><a class="header" href="#protocol-overview">Protocol Overview</a></h2>
<p>GemStone IV sends game data as a mix of plain text and XML tags. The XML tags provide structured information about game state, while plain text contains narrative content.</p>
<h3 id="example-stream"><a class="header" href="#example-stream">Example Stream</a></h3>
<pre><code class="language-xml">&lt;prompt time="1699900000"&gt;&amp;gt;&lt;/prompt&gt;
&lt;pushStream id="room"/&gt;
&lt;compDef id='room desc'/&gt;
[Town Square Central]
&lt;popStream/&gt;
This is the center of town.
&lt;compass&gt;
&lt;dir value="n"/&gt;
&lt;dir value="e"/&gt;
&lt;dir value="s"/&gt;
&lt;dir value="w"/&gt;
&lt;/compass&gt;
</code></pre>
<h2 id="core-tags"><a class="header" href="#core-tags">Core Tags</a></h2>
<h3 id="prompt-2"><a class="header" href="#prompt-2"><code>&lt;prompt&gt;</code></a></h3>
<p>Indicates command prompt, includes server timestamp.</p>
<pre><code class="language-xml">&lt;prompt time="1699900000"&gt;&amp;gt;&lt;/prompt&gt;
</code></pre>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Attribute</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>time</code></td><td>Unix timestamp from server</td></tr>
</tbody>
</table>
</div>
<h3 id="pushstream--popstream"><a class="header" href="#pushstream--popstream"><code>&lt;pushStream&gt;</code> / <code>&lt;popStream&gt;</code></a></h3>
<p>Redirects content to a named stream.</p>
<pre><code class="language-xml">&lt;pushStream id="combat"/&gt;
You attack the troll!
&lt;popStream/&gt;
</code></pre>
<p>Common stream IDs:</p>
<ul>
<li><code>main</code> - Primary game output</li>
<li><code>room</code> - Room descriptions</li>
<li><code>combat</code> - Combat messages</li>
<li><code>speech</code> - Character speech</li>
<li><code>whisper</code> - Private messages</li>
<li><code>thoughts</code> - Mental communications</li>
<li><code>death</code> - Death messages</li>
<li><code>experience</code> - Experience gains</li>
<li><code>logons</code> - Login/logout notices</li>
<li><code>atmosphere</code> - Ambient messages</li>
</ul>
<h3 id="clearstream-1"><a class="header" href="#clearstream-1"><code>&lt;clearStream&gt;</code></a></h3>
<p>Clears a stream’s content.</p>
<pre><code class="language-xml">&lt;clearStream id="room"/&gt;
</code></pre>
<h3 id="component"><a class="header" href="#component"><code>&lt;component&gt;</code></a></h3>
<p>Named data component for widgets.</p>
<pre><code class="language-xml">&lt;component id="room objs"&gt;a troll&lt;/component&gt;
&lt;component id="room players"&gt;Playername&lt;/component&gt;
&lt;component id="room exits"&gt;Obvious paths: north, south&lt;/component&gt;
</code></pre>
<p>Common component IDs:</p>
<ul>
<li><code>room objs</code> - Objects in room</li>
<li><code>room players</code> - Players in room</li>
<li><code>room exits</code> - Exits description</li>
<li><code>room desc</code> - Room description</li>
<li><code>room name</code> - Room title</li>
</ul>
<h3 id="compdef"><a class="header" href="#compdef"><code>&lt;compDef&gt;</code></a></h3>
<p>Component definition (marks component location).</p>
<pre><code class="language-xml">&lt;compDef id='room desc'/&gt;
</code></pre>
<h2 id="vitals-tags"><a class="header" href="#vitals-tags">Vitals Tags</a></h2>
<h3 id="healthmanastaminaspirit"><a class="header" href="#healthmanastaminaspirit">Health/Mana/Stamina/Spirit</a></h3>
<pre><code class="language-xml">&lt;progressBar id="health" value="95"/&gt;
&lt;progressBar id="mana" value="100"/&gt;
&lt;progressBar id="stamina" value="87"/&gt;
&lt;progressBar id="spirit" value="100"/&gt;
</code></pre>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Attribute</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>id</code></td><td>Vital type</td></tr>
<tr><td><code>value</code></td><td>0-100 percentage</td></tr>
</tbody>
</table>
</div>
<h3 id="experience-1"><a class="header" href="#experience-1">Experience</a></h3>
<pre><code class="language-xml">&lt;progressBar id="encumbrance" value="50"/&gt;
&lt;progressBar id="mindState" value="5"/&gt;
</code></pre>
<h3 id="encumbrance-levels"><a class="header" href="#encumbrance-levels">Encumbrance Levels</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Value</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>0</td><td>None</td></tr>
<tr><td>1-20</td><td>Light</td></tr>
<tr><td>21-40</td><td>Moderate</td></tr>
<tr><td>41-60</td><td>Heavy</td></tr>
<tr><td>61-80</td><td>Very Heavy</td></tr>
<tr><td>81-100</td><td>Encumbered</td></tr>
</tbody>
</table>
</div>
<h2 id="timing-tags"><a class="header" href="#timing-tags">Timing Tags</a></h2>
<h3 id="roundtime-3"><a class="header" href="#roundtime-3"><code>&lt;roundTime&gt;</code></a></h3>
<p>Sets roundtime value.</p>
<pre><code class="language-xml">&lt;roundTime value="1699900005"/&gt;
</code></pre>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Attribute</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>value</code></td><td>Unix timestamp when RT ends</td></tr>
</tbody>
</table>
</div>
<h3 id="casttime-2"><a class="header" href="#casttime-2"><code>&lt;castTime&gt;</code></a></h3>
<p>Sets casttime value.</p>
<pre><code class="language-xml">&lt;castTime value="1699900003"/&gt;
</code></pre>
<h2 id="navigation-tags"><a class="header" href="#navigation-tags">Navigation Tags</a></h2>
<h3 id="compass-8"><a class="header" href="#compass-8"><code>&lt;compass&gt;</code></a></h3>
<p>Navigation directions available.</p>
<pre><code class="language-xml">&lt;compass&gt;
&lt;dir value="n"/&gt;
&lt;dir value="ne"/&gt;
&lt;dir value="e"/&gt;
&lt;dir value="se"/&gt;
&lt;dir value="s"/&gt;
&lt;dir value="sw"/&gt;
&lt;dir value="w"/&gt;
&lt;dir value="nw"/&gt;
&lt;dir value="up"/&gt;
&lt;dir value="down"/&gt;
&lt;dir value="out"/&gt;
&lt;/compass&gt;
</code></pre>
<p>Direction values:</p>
<ul>
<li><code>n</code>, <code>ne</code>, <code>e</code>, <code>se</code>, <code>s</code>, <code>sw</code>, <code>w</code>, <code>nw</code> - Cardinal/ordinal</li>
<li><code>up</code>, <code>down</code>, <code>out</code> - Vertical/exit</li>
</ul>
<h2 id="status-tags"><a class="header" href="#status-tags">Status Tags</a></h2>
<h3 id="indicator-4"><a class="header" href="#indicator-4"><code>&lt;indicator&gt;</code></a></h3>
<p>Boolean status indicator.</p>
<pre><code class="language-xml">&lt;indicator id="IconHIDDEN" visible="y"/&gt;
&lt;indicator id="IconSTUNNED" visible="n"/&gt;
</code></pre>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Attribute</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>id</code></td><td>Indicator identifier</td></tr>
<tr><td><code>visible</code></td><td>“y” or “n”</td></tr>
</tbody>
</table>
</div>
<p>Common indicators:</p>
<ul>
<li><code>IconHIDDEN</code> - Hidden status</li>
<li><code>IconSTUNNED</code> - Stunned</li>
<li><code>IconBLEEDING</code> - Bleeding</li>
<li><code>IconPOISONED</code> - Poisoned</li>
<li><code>IconDISEASED</code> - Diseased</li>
<li><code>IconKNEELING</code> - Kneeling</li>
<li><code>IconPRONE</code> - Lying down</li>
<li><code>IconSITTING</code> - Sitting</li>
<li><code>IconSTANDING</code> - Standing</li>
<li><code>IconJOINED</code> - In a group</li>
<li><code>IconDEAD</code> - Dead</li>
</ul>
<h3 id="left--right"><a class="header" href="#left--right"><code>&lt;left&gt;</code> / <code>&lt;right&gt;</code></a></h3>
<p>Hand contents.</p>
<pre><code class="language-xml">&lt;left&gt;a steel sword&lt;/left&gt;
&lt;right&gt;a wooden shield&lt;/right&gt;
</code></pre>
<p>Empty hands show as:</p>
<pre><code class="language-xml">&lt;left&gt;Empty&lt;/left&gt;
</code></pre>
<h3 id="spell-1"><a class="header" href="#spell-1"><code>&lt;spell&gt;</code></a></h3>
<p>Currently prepared spell.</p>
<pre><code class="language-xml">&lt;spell&gt;Fire Spirit&lt;/spell&gt;
</code></pre>
<h2 id="combat-tags"><a class="header" href="#combat-tags">Combat Tags</a></h2>
<h3 id="a-anchorlink"><a class="header" href="#a-anchorlink"><code>&lt;a&gt;</code> (Anchor/Link)</a></h3>
<p>Clickable links in game text.</p>
<pre><code class="language-xml">&lt;a exist="123456" noun="troll"&gt;troll&lt;/a&gt;
</code></pre>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Attribute</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><code>exist</code></td><td>Object existence ID</td></tr>
<tr><td><code>noun</code></td><td>Base noun for commands</td></tr>
</tbody>
</table>
</div>
<h3 id="target-information"><a class="header" href="#target-information">Target Information</a></h3>
<pre><code class="language-xml">&lt;component id="target"&gt;a massive troll&lt;/component&gt;
</code></pre>
<h2 id="spelleffect-tags"><a class="header" href="#spelleffect-tags">Spell/Effect Tags</a></h2>
<h3 id="active-spells"><a class="header" href="#active-spells">Active Spells</a></h3>
<p>Spell list updates:</p>
<pre><code class="language-xml">&lt;pushStream id="spells"/&gt;
&lt;clearStream id="spells"/&gt;
&lt;spell&gt;Spirit Warding I (101)&lt;/spell&gt; - 30 min remaining
&lt;spell&gt;Spirit Defense (103)&lt;/spell&gt; - 25 min remaining
&lt;popStream/&gt;
</code></pre>
<h3 id="active-effects-1"><a class="header" href="#active-effects-1">Active Effects</a></h3>
<pre><code class="language-xml">&lt;dialogData id="ActiveSpells"&gt;
&lt;progressBar id="spell_101" value="90" text="Spirit Warding I"/&gt;
&lt;/dialogData&gt;
</code></pre>
<h2 id="inventory-tags"><a class="header" href="#inventory-tags">Inventory Tags</a></h2>
<h3 id="container-contents"><a class="header" href="#container-contents">Container Contents</a></h3>
<pre><code class="language-xml">&lt;inv id="1234"&gt;
&lt;item&gt;a steel sword&lt;/item&gt;
&lt;item&gt;3 silver coins&lt;/item&gt;
&lt;/inv&gt;
</code></pre>
<h3 id="equipment"><a class="header" href="#equipment">Equipment</a></h3>
<pre><code class="language-xml">&lt;pushStream id="inv"/&gt;
Equipment:
  armor: some full leather
  weapon: a steel broadsword
&lt;popStream/&gt;
</code></pre>
<h2 id="injury-tags"><a class="header" href="#injury-tags">Injury Tags</a></h2>
<h3 id="body-part-injuries"><a class="header" href="#body-part-injuries">Body Part Injuries</a></h3>
<pre><code class="language-xml">&lt;component id="injury_head"&gt;0&lt;/component&gt;
&lt;component id="injury_neck"&gt;0&lt;/component&gt;
&lt;component id="injury_chest"&gt;1&lt;/component&gt;
&lt;component id="injury_back"&gt;0&lt;/component&gt;
&lt;component id="injury_leftArm"&gt;2&lt;/component&gt;
&lt;component id="injury_rightArm"&gt;0&lt;/component&gt;
&lt;component id="injury_leftHand"&gt;0&lt;/component&gt;
&lt;component id="injury_rightHand"&gt;0&lt;/component&gt;
&lt;component id="injury_abdomen"&gt;0&lt;/component&gt;
&lt;component id="injury_leftLeg"&gt;0&lt;/component&gt;
&lt;component id="injury_rightLeg"&gt;0&lt;/component&gt;
&lt;component id="injury_leftFoot"&gt;0&lt;/component&gt;
&lt;component id="injury_rightFoot"&gt;0&lt;/component&gt;
&lt;component id="injury_leftEye"&gt;0&lt;/component&gt;
&lt;component id="injury_rightEye"&gt;0&lt;/component&gt;
&lt;component id="injury_nsys"&gt;0&lt;/component&gt;
</code></pre>
<p>Injury values:</p>
<ul>
<li><code>0</code> - No injury</li>
<li><code>1</code> - Minor injury</li>
<li><code>2</code> - Moderate injury</li>
<li><code>3</code> - Severe injury</li>
</ul>
<h2 id="style-tags"><a class="header" href="#style-tags">Style Tags</a></h2>
<h3 id="preset-1"><a class="header" href="#preset-1"><code>&lt;preset&gt;</code></a></h3>
<p>Applies named color preset.</p>
<pre><code class="language-xml">&lt;preset id="speech"&gt;Someone says, "Hello"&lt;/preset&gt;
&lt;preset id="whisper"&gt;Someone whispers, "Hello"&lt;/preset&gt;
</code></pre>
<p>Common presets:</p>
<ul>
<li><code>speech</code> - Character speech</li>
<li><code>whisper</code> - Whispers</li>
<li><code>thought</code> - Mental communication</li>
<li><code>roomName</code> - Room title</li>
<li><code>roomDesc</code> - Room description</li>
<li><code>bold</code> - Bold text</li>
</ul>
<h3 id="b--i--u"><a class="header" href="#b--i--u"><code>&lt;b&gt;</code> / <code>&lt;i&gt;</code> / <code>&lt;u&gt;</code></a></h3>
<p>Basic text formatting.</p>
<pre><code class="language-xml">&lt;b&gt;Bold text&lt;/b&gt;
&lt;i&gt;Italic text&lt;/i&gt;
&lt;u&gt;Underlined text&lt;/u&gt;
</code></pre>
<h3 id="d-cmd"><a class="header" href="#d-cmd"><code>&lt;d cmd="...&gt;</code></a></h3>
<p>Command suggestion (clickable).</p>
<pre><code class="language-xml">&lt;d cmd="look troll"&gt;look at the troll&lt;/d&gt;
</code></pre>
<h2 id="control-tags"><a class="header" href="#control-tags">Control Tags</a></h2>
<h3 id="mode-1"><a class="header" href="#mode-1"><code>&lt;mode&gt;</code></a></h3>
<p>Client mode setting.</p>
<pre><code class="language-xml">&lt;mode id="GAME"/&gt;
</code></pre>
<h3 id="app"><a class="header" href="#app"><code>&lt;app&gt;</code></a></h3>
<p>Application character information.</p>
<pre><code class="language-xml">&lt;app char="Charactername" game="GS4" /&gt;
</code></pre>
<h3 id="output-1"><a class="header" href="#output-1"><code>&lt;output&gt;</code></a></h3>
<p>Output control.</p>
<pre><code class="language-xml">&lt;output class="mono"/&gt;
</code></pre>
<h2 id="special-tags"><a class="header" href="#special-tags">Special Tags</a></h2>
<h3 id="resource"><a class="header" href="#resource"><code>&lt;resource&gt;</code></a></h3>
<p>External resource reference.</p>
<pre><code class="language-xml">&lt;resource picture="12345"/&gt;
</code></pre>
<h3 id="style-3"><a class="header" href="#style-3"><code>&lt;style&gt;</code></a></h3>
<p>Inline style application.</p>
<pre><code class="language-xml">&lt;style id="roomName"/&gt;
</code></pre>
<h3 id="nav"><a class="header" href="#nav"><code>&lt;nav&gt;</code></a></h3>
<p>Navigation region.</p>
<pre><code class="language-xml">&lt;nav rm="12345"/&gt;
</code></pre>
<h2 id="parsing-considerations"><a class="header" href="#parsing-considerations">Parsing Considerations</a></h2>
<h3 id="entity-encoding"><a class="header" href="#entity-encoding">Entity Encoding</a></h3>
<p>Special characters are XML-encoded:</p>
<ul>
<li><code>&amp;gt;</code> → <code>&gt;</code></li>
<li><code>&amp;lt;</code> → <code>&lt;</code></li>
<li><code>&amp;amp;</code> → <code>&amp;</code></li>
<li><code>&amp;quot;</code> → <code>"</code></li>
<li><code>&amp;#39;</code> → <code>'</code></li>
</ul>
<h3 id="nested-tags"><a class="header" href="#nested-tags">Nested Tags</a></h3>
<p>Tags can nest:</p>
<pre><code class="language-xml">&lt;pushStream id="combat"&gt;
&lt;preset id="thought"&gt;You sense &lt;a exist="123" noun="creature"&gt;the creature&lt;/a&gt;&lt;/preset&gt;
&lt;popStream/&gt;
</code></pre>
<h3 id="unclosed-tags"><a class="header" href="#unclosed-tags">Unclosed Tags</a></h3>
<p>Some tags are self-closing or have implicit closure:</p>
<pre><code class="language-xml">&lt;prompt time="123"&gt;&amp;gt;&lt;/prompt&gt;
&lt;dir value="n"/&gt;
&lt;progressBar id="health" value="95"/&gt;
</code></pre>
<h2 id="implementation-notes"><a class="header" href="#implementation-notes">Implementation Notes</a></h2>
<h3 id="stream-management"><a class="header" href="#stream-management">Stream Management</a></h3>
<ul>
<li>Push/pop streams form a stack</li>
<li>Multiple streams can be active</li>
<li>Text goes to all active streams</li>
<li>Clear affects only named stream</li>
</ul>
<h3 id="component-updates"><a class="header" href="#component-updates">Component Updates</a></h3>
<ul>
<li>Components update atomically</li>
<li>Same ID replaces previous value</li>
<li>Clear stream clears related components</li>
</ul>
<h3 id="timing-precision"><a class="header" href="#timing-precision">Timing Precision</a></h3>
<ul>
<li>Timestamps are Unix seconds</li>
<li>Client should convert to local time</li>
<li>Roundtime countdown based on server time</li>
</ul>
<h2 id="see-also-94"><a class="header" href="#see-also-94">See Also</a></h2>
<ul>
<li><a href="#parser-protocol">Parser Protocol</a> - Parsing implementation</li>
<li><a href="#parsed-elements">Parsed Elements</a> - Internal representation</li>
<li><a href="#stream-ids">Stream IDs</a> - Stream reference</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="color-codes-reference"><a class="header" href="#color-codes-reference">Color Codes Reference</a></h1>
<p>Complete reference for colors in VellumFE.</p>
<h2 id="color-formats-2"><a class="header" href="#color-formats-2">Color Formats</a></h2>
<p>VellumFE supports multiple color format specifications:</p>
<h3 id="hex-colors"><a class="header" href="#hex-colors">Hex Colors</a></h3>
<p>6-digit or 3-digit hexadecimal:</p>
<pre><code class="language-toml">color = "#ff0000"   # Red (6-digit)
color = "#f00"      # Red (3-digit shorthand)
color = "#FF0000"   # Case insensitive
</code></pre>
<h3 id="rgb-values"><a class="header" href="#rgb-values">RGB Values</a></h3>
<pre><code class="language-toml">color = "rgb(255, 0, 0)"    # Red
color = "rgb(0, 128, 255)"  # Blue
</code></pre>
<h3 id="named-colors-1"><a class="header" href="#named-colors-1">Named Colors</a></h3>
<p>Standard web colors:</p>
<pre><code class="language-toml">color = "red"
color = "darkblue"
color = "forestgreen"
</code></pre>
<h3 id="preset-names"><a class="header" href="#preset-names">Preset Names</a></h3>
<p>VellumFE specific presets:</p>
<pre><code class="language-toml">color = "health"        # Health bar color
color = "mana"          # Mana bar color
color = "speech"        # Speech text color
</code></pre>
<h2 id="standard-named-colors"><a class="header" href="#standard-named-colors">Standard Named Colors</a></h2>
<h3 id="basic-colors-1"><a class="header" href="#basic-colors-1">Basic Colors</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Name</th><th>Hex</th><th>Preview</th></tr>
</thead>
<tbody>
<tr><td><code>black</code></td><td><code>#000000</code></td><td>████</td></tr>
<tr><td><code>white</code></td><td><code>#ffffff</code></td><td>████</td></tr>
<tr><td><code>red</code></td><td><code>#ff0000</code></td><td>████</td></tr>
<tr><td><code>green</code></td><td><code>#00ff00</code></td><td>████</td></tr>
<tr><td><code>blue</code></td><td><code>#0000ff</code></td><td>████</td></tr>
<tr><td><code>yellow</code></td><td><code>#ffff00</code></td><td>████</td></tr>
<tr><td><code>cyan</code></td><td><code>#00ffff</code></td><td>████</td></tr>
<tr><td><code>magenta</code></td><td><code>#ff00ff</code></td><td>████</td></tr>
</tbody>
</table>
</div>
<h3 id="extended-colors"><a class="header" href="#extended-colors">Extended Colors</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Name</th><th>Hex</th><th>Preview</th></tr>
</thead>
<tbody>
<tr><td><code>orange</code></td><td><code>#ffa500</code></td><td>████</td></tr>
<tr><td><code>pink</code></td><td><code>#ffc0cb</code></td><td>████</td></tr>
<tr><td><code>purple</code></td><td><code>#800080</code></td><td>████</td></tr>
<tr><td><code>brown</code></td><td><code>#a52a2a</code></td><td>████</td></tr>
<tr><td><code>gray</code> / <code>grey</code></td><td><code>#808080</code></td><td>████</td></tr>
<tr><td><code>gold</code></td><td><code>#ffd700</code></td><td>████</td></tr>
<tr><td><code>silver</code></td><td><code>#c0c0c0</code></td><td>████</td></tr>
<tr><td><code>navy</code></td><td><code>#000080</code></td><td>████</td></tr>
<tr><td><code>teal</code></td><td><code>#008080</code></td><td>████</td></tr>
<tr><td><code>olive</code></td><td><code>#808000</code></td><td>████</td></tr>
<tr><td><code>maroon</code></td><td><code>#800000</code></td><td>████</td></tr>
<tr><td><code>lime</code></td><td><code>#00ff00</code></td><td>████</td></tr>
<tr><td><code>aqua</code></td><td><code>#00ffff</code></td><td>████</td></tr>
<tr><td><code>fuchsia</code></td><td><code>#ff00ff</code></td><td>████</td></tr>
</tbody>
</table>
</div>
<h3 id="dark-variants"><a class="header" href="#dark-variants">Dark Variants</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Name</th><th>Hex</th></tr>
</thead>
<tbody>
<tr><td><code>darkred</code></td><td><code>#8b0000</code></td></tr>
<tr><td><code>darkgreen</code></td><td><code>#006400</code></td></tr>
<tr><td><code>darkblue</code></td><td><code>#00008b</code></td></tr>
<tr><td><code>darkcyan</code></td><td><code>#008b8b</code></td></tr>
<tr><td><code>darkmagenta</code></td><td><code>#8b008b</code></td></tr>
<tr><td><code>darkyellow</code> / <code>darkgoldenrod</code></td><td><code>#b8860b</code></td></tr>
<tr><td><code>darkgray</code> / <code>darkgrey</code></td><td><code>#a9a9a9</code></td></tr>
<tr><td><code>darkorange</code></td><td><code>#ff8c00</code></td></tr>
<tr><td><code>darkviolet</code></td><td><code>#9400d3</code></td></tr>
</tbody>
</table>
</div>
<h3 id="light-variants"><a class="header" href="#light-variants">Light Variants</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Name</th><th>Hex</th></tr>
</thead>
<tbody>
<tr><td><code>lightred</code> / <code>lightcoral</code></td><td><code>#f08080</code></td></tr>
<tr><td><code>lightgreen</code></td><td><code>#90ee90</code></td></tr>
<tr><td><code>lightblue</code></td><td><code>#add8e6</code></td></tr>
<tr><td><code>lightcyan</code></td><td><code>#e0ffff</code></td></tr>
<tr><td><code>lightpink</code></td><td><code>#ffb6c1</code></td></tr>
<tr><td><code>lightyellow</code></td><td><code>#ffffe0</code></td></tr>
<tr><td><code>lightgray</code> / <code>lightgrey</code></td><td><code>#d3d3d3</code></td></tr>
<tr><td><code>lightsalmon</code></td><td><code>#ffa07a</code></td></tr>
<tr><td><code>lightseagreen</code></td><td><code>#20b2aa</code></td></tr>
</tbody>
</table>
</div>
<h3 id="bright-variants-terminal"><a class="header" href="#bright-variants-terminal">Bright Variants (Terminal)</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Name</th><th>Hex</th></tr>
</thead>
<tbody>
<tr><td><code>bright_black</code></td><td><code>#555555</code></td></tr>
<tr><td><code>bright_red</code></td><td><code>#ff5555</code></td></tr>
<tr><td><code>bright_green</code></td><td><code>#55ff55</code></td></tr>
<tr><td><code>bright_yellow</code></td><td><code>#ffff55</code></td></tr>
<tr><td><code>bright_blue</code></td><td><code>#5555ff</code></td></tr>
<tr><td><code>bright_magenta</code></td><td><code>#ff55ff</code></td></tr>
<tr><td><code>bright_cyan</code></td><td><code>#55ffff</code></td></tr>
<tr><td><code>bright_white</code></td><td><code>#ffffff</code></td></tr>
</tbody>
</table>
</div>
<h2 id="256-color-palette"><a class="header" href="#256-color-palette">256-Color Palette</a></h2>
<h3 id="standard-colors-0-15"><a class="header" href="#standard-colors-0-15">Standard Colors (0-15)</a></h3>
<pre><code> 0 Black       8 Bright Black
 1 Red         9 Bright Red
 2 Green      10 Bright Green
 3 Yellow     11 Bright Yellow
 4 Blue       12 Bright Blue
 5 Magenta    13 Bright Magenta
 6 Cyan       14 Bright Cyan
 7 White      15 Bright White
</code></pre>
<h3 id="color-cube-16-231"><a class="header" href="#color-cube-16-231">Color Cube (16-231)</a></h3>
<p>6x6x6 color cube:</p>
<ul>
<li>R: 0, 95, 135, 175, 215, 255</li>
<li>G: 0, 95, 135, 175, 215, 255</li>
<li>B: 0, 95, 135, 175, 215, 255</li>
</ul>
<p>Index = 16 + 36×r + 6×g + b (where r,g,b are 0-5)</p>
<h3 id="grayscale-232-255"><a class="header" href="#grayscale-232-255">Grayscale (232-255)</a></h3>
<p>24 shades from dark to light:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Range</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>232-235</td><td>Near black</td></tr>
<tr><td>236-243</td><td>Dark gray</td></tr>
<tr><td>244-251</td><td>Light gray</td></tr>
<tr><td>252-255</td><td>Near white</td></tr>
</tbody>
</table>
</div>
<h2 id="vellum-fe-presets"><a class="header" href="#vellum-fe-presets">VellumFE Presets</a></h2>
<h3 id="vitals-presets"><a class="header" href="#vitals-presets">Vitals Presets</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Preset</th><th>Default</th><th>Usage</th></tr>
</thead>
<tbody>
<tr><td><code>health</code></td><td><code>#00ff00</code></td><td>Health bar (full)</td></tr>
<tr><td><code>health_low</code></td><td><code>#ffff00</code></td><td>Health bar (low)</td></tr>
<tr><td><code>health_critical</code></td><td><code>#ff0000</code></td><td>Health bar (critical)</td></tr>
<tr><td><code>mana</code></td><td><code>#0080ff</code></td><td>Mana bar</td></tr>
<tr><td><code>stamina</code></td><td><code>#ff8000</code></td><td>Stamina bar</td></tr>
<tr><td><code>spirit</code></td><td><code>#ff00ff</code></td><td>Spirit bar</td></tr>
</tbody>
</table>
</div>
<h3 id="stream-presets"><a class="header" href="#stream-presets">Stream Presets</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Preset</th><th>Default</th><th>Usage</th></tr>
</thead>
<tbody>
<tr><td><code>main</code></td><td><code>#ffffff</code></td><td>Main game text</td></tr>
<tr><td><code>room</code></td><td><code>#ffff00</code></td><td>Room descriptions</td></tr>
<tr><td><code>combat</code></td><td><code>#ff4444</code></td><td>Combat messages</td></tr>
<tr><td><code>speech</code></td><td><code>#00ffff</code></td><td>Character speech</td></tr>
<tr><td><code>whisper</code></td><td><code>#ff00ff</code></td><td>Private messages</td></tr>
<tr><td><code>thoughts</code></td><td><code>#00ff00</code></td><td>Mental communication</td></tr>
</tbody>
</table>
</div>
<h3 id="ui-presets"><a class="header" href="#ui-presets">UI Presets</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Preset</th><th>Default</th><th>Usage</th></tr>
</thead>
<tbody>
<tr><td><code>background</code></td><td><code>#000000</code></td><td>Window background</td></tr>
<tr><td><code>text</code></td><td><code>#c0c0c0</code></td><td>Default text</td></tr>
<tr><td><code>text_dim</code></td><td><code>#808080</code></td><td>Dimmed text</td></tr>
<tr><td><code>border</code></td><td><code>#404040</code></td><td>Widget borders</td></tr>
<tr><td><code>border_focused</code></td><td><code>#ffffff</code></td><td>Focused widget border</td></tr>
</tbody>
</table>
</div>
<h3 id="status-presets"><a class="header" href="#status-presets">Status Presets</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Preset</th><th>Default</th><th>Usage</th></tr>
</thead>
<tbody>
<tr><td><code>hidden</code></td><td><code>#00ff00</code></td><td>Hidden indicator</td></tr>
<tr><td><code>invisible</code></td><td><code>#00ffff</code></td><td>Invisible indicator</td></tr>
<tr><td><code>stunned</code></td><td><code>#ffff00</code></td><td>Stunned indicator</td></tr>
<tr><td><code>webbed</code></td><td><code>#ff00ff</code></td><td>Webbed indicator</td></tr>
<tr><td><code>prone</code></td><td><code>#00ffff</code></td><td>Prone indicator</td></tr>
<tr><td><code>kneeling</code></td><td><code>#ff8000</code></td><td>Kneeling indicator</td></tr>
<tr><td><code>sitting</code></td><td><code>#808080</code></td><td>Sitting indicator</td></tr>
<tr><td><code>dead</code></td><td><code>#ff0000</code></td><td>Dead indicator</td></tr>
</tbody>
</table>
</div>
<h2 id="color-modes"><a class="header" href="#color-modes">Color Modes</a></h2>
<h3 id="true-color-24-bit"><a class="header" href="#true-color-24-bit">True Color (24-bit)</a></h3>
<p>16.7 million colors:</p>
<pre><code class="language-toml">[display]
color_mode = "truecolor"
</code></pre>
<h3 id="256-colors"><a class="header" href="#256-colors">256 Colors</a></h3>
<p>256-color palette:</p>
<pre><code class="language-toml">[display]
color_mode = "256"
</code></pre>
<p>Colors are mapped to nearest palette entry.</p>
<h3 id="16-colors"><a class="header" href="#16-colors">16 Colors</a></h3>
<p>Basic terminal colors:</p>
<pre><code class="language-toml">[display]
color_mode = "16"
</code></pre>
<h3 id="no-color"><a class="header" href="#no-color">No Color</a></h3>
<p>Monochrome:</p>
<pre><code class="language-toml">[display]
color_mode = "none"
</code></pre>
<h2 id="color-math"><a class="header" href="#color-math">Color Math</a></h2>
<h3 id="brightnessluminance"><a class="header" href="#brightnessluminance">Brightness/Luminance</a></h3>
<p>Calculate perceived brightness:</p>
<pre><code>L = 0.299×R + 0.587×G + 0.114×B
</code></pre>
<h3 id="contrast-ratio"><a class="header" href="#contrast-ratio">Contrast Ratio</a></h3>
<p>For accessibility:</p>
<pre><code>Ratio = (L1 + 0.05) / (L2 + 0.05)
</code></pre>
<p>WCAG guidelines:</p>
<ul>
<li>4.5:1 minimum for normal text</li>
<li>3:1 minimum for large text</li>
<li>7:1 enhanced contrast</li>
</ul>
<h3 id="color-mixing"><a class="header" href="#color-mixing">Color Mixing</a></h3>
<p>Linear interpolation:</p>
<pre><code>mixed = color1 × (1-t) + color2 × t
</code></pre>
<h2 id="accessibility-colors"><a class="header" href="#accessibility-colors">Accessibility Colors</a></h2>
<h3 id="high-contrast-pairs"><a class="header" href="#high-contrast-pairs">High Contrast Pairs</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Background</th><th>Foreground</th><th>Ratio</th></tr>
</thead>
<tbody>
<tr><td><code>#000000</code></td><td><code>#ffffff</code></td><td>21:1</td></tr>
<tr><td><code>#000000</code></td><td><code>#ffff00</code></td><td>19.6:1</td></tr>
<tr><td><code>#000000</code></td><td><code>#00ffff</code></td><td>16.7:1</td></tr>
<tr><td><code>#000000</code></td><td><code>#00ff00</code></td><td>15.3:1</td></tr>
<tr><td><code>#1a1a1a</code></td><td><code>#ffffff</code></td><td>16.9:1</td></tr>
<tr><td><code>#1a1a1a</code></td><td><code>#e0e0e0</code></td><td>12.6:1</td></tr>
</tbody>
</table>
</div>
<h3 id="color-blindness-friendly"><a class="header" href="#color-blindness-friendly">Color Blindness Friendly</a></h3>
<p>Avoid relying solely on red/green distinction:</p>
<pre><code class="language-toml"># Instead of red/green for health
[theme]
health = "#00ff00"
health_critical = "#ff00ff"  # Magenta instead of red

# Or use brightness difference
health = "#80ff80"           # Bright green
health_critical = "#800000"  # Dark red (brightness contrast)
</code></pre>
<h2 id="terminal-compatibility"><a class="header" href="#terminal-compatibility">Terminal Compatibility</a></h2>
<h3 id="ansi-escape-sequences"><a class="header" href="#ansi-escape-sequences">ANSI Escape Sequences</a></h3>
<p>16 colors:</p>
<pre><code>\e[30m - \e[37m   # Foreground colors
\e[40m - \e[47m   # Background colors
\e[90m - \e[97m   # Bright foreground
\e[100m - \e[107m # Bright background
</code></pre>
<p>256 colors:</p>
<pre><code>\e[38;5;Nm  # Foreground (N = 0-255)
\e[48;5;Nm  # Background
</code></pre>
<p>True color:</p>
<pre><code>\e[38;2;R;G;Bm  # Foreground (R,G,B = 0-255)
\e[48;2;R;G;Bm  # Background
</code></pre>
<h3 id="terminal-detection"><a class="header" href="#terminal-detection">Terminal Detection</a></h3>
<pre><code class="language-bash"># Check color support
echo $TERM
echo $COLORTERM
tput colors
</code></pre>
<h2 id="see-also-95"><a class="header" href="#see-also-95">See Also</a></h2>
<ul>
<li><a href="#colorstoml-reference">Colors Configuration</a></li>
<li><a href="#creating-themes">Creating Themes</a></li>
<li><a href="#preset-colors">Preset Colors</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="unicode-symbols-reference"><a class="header" href="#unicode-symbols-reference">Unicode Symbols Reference</a></h1>
<p>Useful Unicode characters for VellumFE layouts and customization.</p>
<h2 id="box-drawing-characters"><a class="header" href="#box-drawing-characters">Box Drawing Characters</a></h2>
<h3 id="light-box-drawing"><a class="header" href="#light-box-drawing">Light Box Drawing</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Char</th><th>Code</th><th>Name</th></tr>
</thead>
<tbody>
<tr><td>─</td><td>U+2500</td><td>Light horizontal</td></tr>
<tr><td>│</td><td>U+2502</td><td>Light vertical</td></tr>
<tr><td>┌</td><td>U+250C</td><td>Light down and right</td></tr>
<tr><td>┐</td><td>U+2510</td><td>Light down and left</td></tr>
<tr><td>└</td><td>U+2514</td><td>Light up and right</td></tr>
<tr><td>┘</td><td>U+2518</td><td>Light up and left</td></tr>
<tr><td>├</td><td>U+251C</td><td>Light vertical and right</td></tr>
<tr><td>┤</td><td>U+2524</td><td>Light vertical and left</td></tr>
<tr><td>┬</td><td>U+252C</td><td>Light down and horizontal</td></tr>
<tr><td>┴</td><td>U+2534</td><td>Light up and horizontal</td></tr>
<tr><td>┼</td><td>U+253C</td><td>Light vertical and horizontal</td></tr>
</tbody>
</table>
</div>
<h3 id="heavy-box-drawing"><a class="header" href="#heavy-box-drawing">Heavy Box Drawing</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Char</th><th>Code</th><th>Name</th></tr>
</thead>
<tbody>
<tr><td>━</td><td>U+2501</td><td>Heavy horizontal</td></tr>
<tr><td>┃</td><td>U+2503</td><td>Heavy vertical</td></tr>
<tr><td>┏</td><td>U+250F</td><td>Heavy down and right</td></tr>
<tr><td>┓</td><td>U+2513</td><td>Heavy down and left</td></tr>
<tr><td>┗</td><td>U+2517</td><td>Heavy up and right</td></tr>
<tr><td>┛</td><td>U+251B</td><td>Heavy up and left</td></tr>
<tr><td>┣</td><td>U+2523</td><td>Heavy vertical and right</td></tr>
<tr><td>┫</td><td>U+252B</td><td>Heavy vertical and left</td></tr>
<tr><td>┳</td><td>U+2533</td><td>Heavy down and horizontal</td></tr>
<tr><td>┻</td><td>U+253B</td><td>Heavy up and horizontal</td></tr>
<tr><td>╋</td><td>U+254B</td><td>Heavy vertical and horizontal</td></tr>
</tbody>
</table>
</div>
<h3 id="double-box-drawing"><a class="header" href="#double-box-drawing">Double Box Drawing</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Char</th><th>Code</th><th>Name</th></tr>
</thead>
<tbody>
<tr><td>═</td><td>U+2550</td><td>Double horizontal</td></tr>
<tr><td>║</td><td>U+2551</td><td>Double vertical</td></tr>
<tr><td>╔</td><td>U+2554</td><td>Double down and right</td></tr>
<tr><td>╗</td><td>U+2557</td><td>Double down and left</td></tr>
<tr><td>╚</td><td>U+255A</td><td>Double up and right</td></tr>
<tr><td>╝</td><td>U+255D</td><td>Double up and left</td></tr>
<tr><td>╠</td><td>U+2560</td><td>Double vertical and right</td></tr>
<tr><td>╣</td><td>U+2563</td><td>Double vertical and left</td></tr>
<tr><td>╦</td><td>U+2566</td><td>Double down and horizontal</td></tr>
<tr><td>╩</td><td>U+2569</td><td>Double up and horizontal</td></tr>
<tr><td>╬</td><td>U+256C</td><td>Double vertical and horizontal</td></tr>
</tbody>
</table>
</div>
<h3 id="rounded-corners"><a class="header" href="#rounded-corners">Rounded Corners</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Char</th><th>Code</th><th>Name</th></tr>
</thead>
<tbody>
<tr><td>╭</td><td>U+256D</td><td>Light arc down and right</td></tr>
<tr><td>╮</td><td>U+256E</td><td>Light arc down and left</td></tr>
<tr><td>╯</td><td>U+256F</td><td>Light arc up and left</td></tr>
<tr><td>╰</td><td>U+2570</td><td>Light arc up and right</td></tr>
</tbody>
</table>
</div>
<h2 id="progress-bar-characters"><a class="header" href="#progress-bar-characters">Progress Bar Characters</a></h2>
<h3 id="block-elements"><a class="header" href="#block-elements">Block Elements</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Char</th><th>Code</th><th>Name</th><th>Use</th></tr>
</thead>
<tbody>
<tr><td>█</td><td>U+2588</td><td>Full block</td><td>100% filled</td></tr>
<tr><td>▉</td><td>U+2589</td><td>7/8 block</td><td>~87%</td></tr>
<tr><td>▊</td><td>U+258A</td><td>3/4 block</td><td>75%</td></tr>
<tr><td>▋</td><td>U+258B</td><td>5/8 block</td><td>~62%</td></tr>
<tr><td>▌</td><td>U+258C</td><td>1/2 block</td><td>50%</td></tr>
<tr><td>▍</td><td>U+258D</td><td>3/8 block</td><td>~37%</td></tr>
<tr><td>▎</td><td>U+258E</td><td>1/4 block</td><td>25%</td></tr>
<tr><td>▏</td><td>U+258F</td><td>1/8 block</td><td>~12%</td></tr>
<tr><td>░</td><td>U+2591</td><td>Light shade</td><td>Empty</td></tr>
<tr><td>▒</td><td>U+2592</td><td>Medium shade</td><td>Partial</td></tr>
<tr><td>▓</td><td>U+2593</td><td>Dark shade</td><td>Mostly filled</td></tr>
</tbody>
</table>
</div>
<h3 id="vertical-bars"><a class="header" href="#vertical-bars">Vertical Bars</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Char</th><th>Code</th><th>Name</th></tr>
</thead>
<tbody>
<tr><td>▁</td><td>U+2581</td><td>Lower 1/8</td></tr>
<tr><td>▂</td><td>U+2582</td><td>Lower 1/4</td></tr>
<tr><td>▃</td><td>U+2583</td><td>Lower 3/8</td></tr>
<tr><td>▄</td><td>U+2584</td><td>Lower half</td></tr>
<tr><td>▅</td><td>U+2585</td><td>Lower 5/8</td></tr>
<tr><td>▆</td><td>U+2586</td><td>Lower 3/4</td></tr>
<tr><td>▇</td><td>U+2587</td><td>Lower 7/8</td></tr>
</tbody>
</table>
</div>
<h2 id="directional-symbols"><a class="header" href="#directional-symbols">Directional Symbols</a></h2>
<h3 id="arrows"><a class="header" href="#arrows">Arrows</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Char</th><th>Code</th><th>Name</th><th>Direction</th></tr>
</thead>
<tbody>
<tr><td>↑</td><td>U+2191</td><td>Upwards arrow</td><td>North</td></tr>
<tr><td>↗</td><td>U+2197</td><td>North east arrow</td><td>Northeast</td></tr>
<tr><td>→</td><td>U+2192</td><td>Rightwards arrow</td><td>East</td></tr>
<tr><td>↘</td><td>U+2198</td><td>South east arrow</td><td>Southeast</td></tr>
<tr><td>↓</td><td>U+2193</td><td>Downwards arrow</td><td>South</td></tr>
<tr><td>↙</td><td>U+2199</td><td>South west arrow</td><td>Southwest</td></tr>
<tr><td>←</td><td>U+2190</td><td>Leftwards arrow</td><td>West</td></tr>
<tr><td>↖</td><td>U+2196</td><td>North west arrow</td><td>Northwest</td></tr>
<tr><td>↕</td><td>U+2195</td><td>Up down arrow</td><td>Up/Down</td></tr>
<tr><td>↔</td><td>U+2194</td><td>Left right arrow</td><td>In/Out</td></tr>
</tbody>
</table>
</div>
<h3 id="triangle-arrows"><a class="header" href="#triangle-arrows">Triangle Arrows</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Char</th><th>Code</th><th>Name</th></tr>
</thead>
<tbody>
<tr><td>▲</td><td>U+25B2</td><td>Black up-pointing triangle</td></tr>
<tr><td>▶</td><td>U+25B6</td><td>Black right-pointing triangle</td></tr>
<tr><td>▼</td><td>U+25BC</td><td>Black down-pointing triangle</td></tr>
<tr><td>◀</td><td>U+25C0</td><td>Black left-pointing triangle</td></tr>
<tr><td>△</td><td>U+25B3</td><td>White up-pointing triangle</td></tr>
<tr><td>▷</td><td>U+25B7</td><td>White right-pointing triangle</td></tr>
<tr><td>▽</td><td>U+25BD</td><td>White down-pointing triangle</td></tr>
<tr><td>◁</td><td>U+25C1</td><td>White left-pointing triangle</td></tr>
</tbody>
</table>
</div>
<h3 id="compass-rose"><a class="header" href="#compass-rose">Compass Rose</a></h3>
<pre><code>    N
  NW↑NE
W ←•→ E
  SW↓SE
    S
</code></pre>
<p>Using Unicode:</p>
<pre><code>    ↑
  ↖ ↗
← ● →
  ↙ ↘
    ↓
</code></pre>
<h2 id="status-indicators-2"><a class="header" href="#status-indicators-2">Status Indicators</a></h2>
<h3 id="circles"><a class="header" href="#circles">Circles</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Char</th><th>Code</th><th>Name</th><th>Use</th></tr>
</thead>
<tbody>
<tr><td>●</td><td>U+25CF</td><td>Black circle</td><td>Active/On</td></tr>
<tr><td>○</td><td>U+25CB</td><td>White circle</td><td>Inactive/Off</td></tr>
<tr><td>◉</td><td>U+25C9</td><td>Fisheye</td><td>Selected</td></tr>
<tr><td>◎</td><td>U+25CE</td><td>Bullseye</td><td>Target</td></tr>
<tr><td>◌</td><td>U+25CC</td><td>Dotted circle</td><td>Empty</td></tr>
<tr><td>⦿</td><td>U+29BF</td><td>Circled bullet</td><td>Available</td></tr>
</tbody>
</table>
</div>
<h3 id="squares"><a class="header" href="#squares">Squares</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Char</th><th>Code</th><th>Name</th><th>Use</th></tr>
</thead>
<tbody>
<tr><td>■</td><td>U+25A0</td><td>Black square</td><td>Filled</td></tr>
<tr><td>□</td><td>U+25A1</td><td>White square</td><td>Empty</td></tr>
<tr><td>▪</td><td>U+25AA</td><td>Black small square</td><td>Bullet</td></tr>
<tr><td>▫</td><td>U+25AB</td><td>White small square</td><td>Placeholder</td></tr>
</tbody>
</table>
</div>
<h3 id="check-marks"><a class="header" href="#check-marks">Check Marks</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Char</th><th>Code</th><th>Name</th><th>Use</th></tr>
</thead>
<tbody>
<tr><td>✓</td><td>U+2713</td><td>Check mark</td><td>Success</td></tr>
<tr><td>✗</td><td>U+2717</td><td>Ballot X</td><td>Failure</td></tr>
<tr><td>✔</td><td>U+2714</td><td>Heavy check mark</td><td>Confirmed</td></tr>
<tr><td>✘</td><td>U+2718</td><td>Heavy ballot X</td><td>Denied</td></tr>
<tr><td>☑</td><td>U+2611</td><td>Checkbox checked</td><td>Option on</td></tr>
<tr><td>☐</td><td>U+2610</td><td>Checkbox unchecked</td><td>Option off</td></tr>
</tbody>
</table>
</div>
<h2 id="stars-and-decorations"><a class="header" href="#stars-and-decorations">Stars and Decorations</a></h2>
<h3 id="stars"><a class="header" href="#stars">Stars</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Char</th><th>Code</th><th>Name</th></tr>
</thead>
<tbody>
<tr><td>★</td><td>U+2605</td><td>Black star</td></tr>
<tr><td>☆</td><td>U+2606</td><td>White star</td></tr>
<tr><td>✦</td><td>U+2726</td><td>Black four pointed star</td></tr>
<tr><td>✧</td><td>U+2727</td><td>White four pointed star</td></tr>
<tr><td>⁂</td><td>U+2042</td><td>Asterism</td></tr>
</tbody>
</table>
</div>
<h3 id="bullets-and-points"><a class="header" href="#bullets-and-points">Bullets and Points</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Char</th><th>Code</th><th>Name</th></tr>
</thead>
<tbody>
<tr><td>•</td><td>U+2022</td><td>Bullet</td></tr>
<tr><td>◦</td><td>U+25E6</td><td>White bullet</td></tr>
<tr><td>‣</td><td>U+2023</td><td>Triangular bullet</td></tr>
<tr><td>⁃</td><td>U+2043</td><td>Hyphen bullet</td></tr>
<tr><td>⁌</td><td>U+204C</td><td>Black leftwards bullet</td></tr>
<tr><td>⁍</td><td>U+204D</td><td>Black rightwards bullet</td></tr>
</tbody>
</table>
</div>
<h3 id="decorative-lines"><a class="header" href="#decorative-lines">Decorative Lines</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Char</th><th>Code</th><th>Name</th></tr>
</thead>
<tbody>
<tr><td>─</td><td>U+2500</td><td>Horizontal line</td></tr>
<tr><td>═</td><td>U+2550</td><td>Double horizontal</td></tr>
<tr><td>━</td><td>U+2501</td><td>Heavy horizontal</td></tr>
<tr><td>┄</td><td>U+2504</td><td>Triple dash horizontal</td></tr>
<tr><td>┅</td><td>U+2505</td><td>Heavy triple dash</td></tr>
<tr><td>┈</td><td>U+2508</td><td>Quadruple dash</td></tr>
<tr><td>⋯</td><td>U+22EF</td><td>Midline horizontal ellipsis</td></tr>
</tbody>
</table>
</div>
<h2 id="game-related-symbols"><a class="header" href="#game-related-symbols">Game-Related Symbols</a></h2>
<h3 id="combat-1"><a class="header" href="#combat-1">Combat</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Char</th><th>Code</th><th>Name</th><th>Use</th></tr>
</thead>
<tbody>
<tr><td>⚔</td><td>U+2694</td><td>Crossed swords</td><td>Combat</td></tr>
<tr><td>🗡</td><td>U+1F5E1</td><td>Dagger</td><td>Weapon</td></tr>
<tr><td>⛨</td><td>U+26E8</td><td>Shield</td><td>Defense</td></tr>
<tr><td>☠</td><td>U+2620</td><td>Skull and crossbones</td><td>Death</td></tr>
<tr><td>⚡</td><td>U+26A1</td><td>High voltage</td><td>Spell/Magic</td></tr>
</tbody>
</table>
</div>
<h3 id="status-1"><a class="header" href="#status-1">Status</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Char</th><th>Code</th><th>Name</th><th>Use</th></tr>
</thead>
<tbody>
<tr><td>♥</td><td>U+2665</td><td>Heart</td><td>Health</td></tr>
<tr><td>♦</td><td>U+2666</td><td>Diamond</td><td>Mana</td></tr>
<tr><td>⚗</td><td>U+2697</td><td>Alembic</td><td>Alchemy</td></tr>
<tr><td>☀</td><td>U+2600</td><td>Sun</td><td>Day</td></tr>
<tr><td>☾</td><td>U+263E</td><td>Last quarter moon</td><td>Night</td></tr>
</tbody>
</table>
</div>
<h3 id="navigation-7"><a class="header" href="#navigation-7">Navigation</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Char</th><th>Code</th><th>Name</th><th>Use</th></tr>
</thead>
<tbody>
<tr><td>🏠</td><td>U+1F3E0</td><td>House</td><td>Home</td></tr>
<tr><td>🚪</td><td>U+1F6AA</td><td>Door</td><td>Exit</td></tr>
<tr><td>⬆</td><td>U+2B06</td><td>Upward arrow</td><td>Up</td></tr>
<tr><td>⬇</td><td>U+2B07</td><td>Downward arrow</td><td>Down</td></tr>
<tr><td>🧭</td><td>U+1F9ED</td><td>Compass</td><td>Navigation</td></tr>
</tbody>
</table>
</div>
<h2 id="typography"><a class="header" href="#typography">Typography</a></h2>
<h3 id="quotation-marks"><a class="header" href="#quotation-marks">Quotation Marks</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Char</th><th>Code</th><th>Name</th></tr>
</thead>
<tbody>
<tr><td>“ “</td><td>U+201C/D</td><td>Curly double quotes</td></tr>
<tr><td>’ ’</td><td>U+2018/9</td><td>Curly single quotes</td></tr>
<tr><td>„</td><td>U+201E</td><td>Double low-9 quote</td></tr>
<tr><td>« »</td><td>U+00AB/BB</td><td>Guillemets</td></tr>
</tbody>
</table>
</div>
<h3 id="punctuation"><a class="header" href="#punctuation">Punctuation</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Char</th><th>Code</th><th>Name</th></tr>
</thead>
<tbody>
<tr><td>…</td><td>U+2026</td><td>Ellipsis</td></tr>
<tr><td>—</td><td>U+2014</td><td>Em dash</td></tr>
<tr><td>–</td><td>U+2013</td><td>En dash</td></tr>
<tr><td>·</td><td>U+00B7</td><td>Middle dot</td></tr>
<tr><td>†</td><td>U+2020</td><td>Dagger</td></tr>
<tr><td>‡</td><td>U+2021</td><td>Double dagger</td></tr>
</tbody>
</table>
</div>
<h2 id="mathematical-symbols"><a class="header" href="#mathematical-symbols">Mathematical Symbols</a></h2>
<h3 id="common"><a class="header" href="#common">Common</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Char</th><th>Code</th><th>Name</th></tr>
</thead>
<tbody>
<tr><td>×</td><td>U+00D7</td><td>Multiplication</td></tr>
<tr><td>÷</td><td>U+00F7</td><td>Division</td></tr>
<tr><td>±</td><td>U+00B1</td><td>Plus-minus</td></tr>
<tr><td>≈</td><td>U+2248</td><td>Almost equal</td></tr>
<tr><td>≠</td><td>U+2260</td><td>Not equal</td></tr>
<tr><td>≤</td><td>U+2264</td><td>Less or equal</td></tr>
<tr><td>≥</td><td>U+2265</td><td>Greater or equal</td></tr>
<tr><td>∞</td><td>U+221E</td><td>Infinity</td></tr>
</tbody>
</table>
</div>
<h2 id="usage-examples"><a class="header" href="#usage-examples">Usage Examples</a></h2>
<h3 id="progress-bar-2"><a class="header" href="#progress-bar-2">Progress Bar</a></h3>
<pre><code class="language-toml">[theme.progress]
filled = "█"
empty = "░"
partial = ["▏", "▎", "▍", "▌", "▋", "▊", "▉"]
</code></pre>
<h3 id="widget-borders"><a class="header" href="#widget-borders">Widget Borders</a></h3>
<pre><code class="language-toml">[theme.borders]
style = "rounded"
chars = "╭─╮│ │╰─╯"
</code></pre>
<h3 id="status-line"><a class="header" href="#status-line">Status Line</a></h3>
<pre><code>♥ 95/100 ♦ 100/100 ⚡ Ready
</code></pre>
<h3 id="compass-display"><a class="header" href="#compass-display">Compass Display</a></h3>
<pre><code>    ↑
  ↖ • ↗
← N →
  ↙ • ↘
    ↓
</code></pre>
<h2 id="font-requirements"><a class="header" href="#font-requirements">Font Requirements</a></h2>
<p>To display all Unicode symbols:</p>
<h3 id="recommended-fonts-1"><a class="header" href="#recommended-fonts-1">Recommended Fonts</a></h3>
<ul>
<li><strong>JetBrains Mono</strong> - Excellent coverage</li>
<li><strong>Cascadia Code</strong> - Good coverage</li>
<li><strong>Fira Code</strong> - Good coverage</li>
<li><strong>Nerd Fonts</strong> - Best coverage (patched fonts)</li>
</ul>
<h3 id="checking-font-coverage"><a class="header" href="#checking-font-coverage">Checking Font Coverage</a></h3>
<pre><code class="language-bash"># List available characters in font (Linux)
fc-match --format='%{family}\n' :charset=2500

# Check specific character
printf '\u2500' &amp;&amp; echo " - Should show horizontal line"
</code></pre>
<h2 id="see-also-96"><a class="header" href="#see-also-96">See Also</a></h2>
<ul>
<li><a href="#display-issues-2">Display Issues</a> - Character problems</li>
<li><a href="#creating-themes">Creating Themes</a> - Using symbols</li>
<li><a href="#platform-issues">Platform Issues</a> - Font setup</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="acknowledgments-1"><a class="header" href="#acknowledgments-1">Acknowledgments</a></h1>
<p>Recognition of projects, people, and resources that made VellumFE possible.</p>
<h2 id="inspiration"><a class="header" href="#inspiration">Inspiration</a></h2>
<h3 id="profanity"><a class="header" href="#profanity">Profanity</a></h3>
<p>VellumFE draws significant inspiration from <a href="https://github.com/rspeicher/profanity">Profanity</a>, the pioneering terminal-based client for GemStone IV. Profanity demonstrated that a modern, efficient terminal interface was not only possible but could provide a superior gameplay experience.</p>
<h3 id="lich-1"><a class="header" href="#lich-1">Lich</a></h3>
<p><a href="https://lichproject.org/">Lich</a> has been instrumental to the GemStone IV community, providing scripting capabilities and serving as an excellent proxy for frontend development. VellumFE’s Lich mode exists thanks to Lich’s well-designed proxy interface.</p>
<h3 id="stormfront-and-wizard"><a class="header" href="#stormfront-and-wizard">StormFront and Wizard</a></h3>
<p>The official Simutronics clients (StormFront, Wizard Front End) established the standard for GemStone IV interfaces and defined the XML protocol that VellumFE parses.</p>
<h2 id="open-source-libraries"><a class="header" href="#open-source-libraries">Open Source Libraries</a></h2>
<p>VellumFE is built on excellent open source foundations:</p>
<h3 id="core"><a class="header" href="#core">Core</a></h3>
<ul>
<li><strong><a href="https://www.rust-lang.org/">Rust</a></strong> - The programming language providing safety and performance</li>
<li><strong><a href="https://tokio.rs/">Tokio</a></strong> - Asynchronous runtime for non-blocking I/O</li>
<li><strong><a href="https://ratatui.rs/">Ratatui</a></strong> - Terminal user interface library</li>
</ul>
<h3 id="parsing"><a class="header" href="#parsing">Parsing</a></h3>
<ul>
<li><strong><a href="https://github.com/tafia/quick-xml">quick-xml</a></strong> - Fast XML parser</li>
<li><strong><a href="https://github.com/rust-lang/regex">regex</a></strong> - Regular expression engine</li>
<li><strong><a href="https://github.com/BurntSushi/aho-corasick">aho-corasick</a></strong> - Multi-pattern string matching</li>
</ul>
<h3 id="configuration-23"><a class="header" href="#configuration-23">Configuration</a></h3>
<ul>
<li><strong><a href="https://github.com/toml-rs/toml">toml</a></strong> - TOML parser and serializer</li>
<li><strong><a href="https://serde.rs/">serde</a></strong> - Serialization framework</li>
<li><strong><a href="https://github.com/soc/dirs-rs">dirs</a></strong> - Platform-specific directories</li>
</ul>
<h3 id="network-1"><a class="header" href="#network-1">Network</a></h3>
<ul>
<li><strong><a href="https://github.com/sfackler/rust-openssl">openssl</a></strong> - TLS/SSL implementation</li>
<li><strong><a href="https://github.com/rustls/rustls">rustls</a></strong> - Pure Rust TLS (alternative)</li>
</ul>
<h3 id="audio"><a class="header" href="#audio">Audio</a></h3>
<ul>
<li><strong><a href="https://github.com/RustAudio/cpal">cpal</a></strong> - Cross-platform audio</li>
<li><strong><a href="https://github.com/ndarilek/tts-rs">tts</a></strong> - Text-to-speech bindings</li>
</ul>
<h2 id="documentation-3"><a class="header" href="#documentation-3">Documentation</a></h2>
<p>This documentation is built with:</p>
<ul>
<li><strong><a href="https://rust-lang.github.io/mdBook/">mdBook</a></strong> - The book-from-markdown tool</li>
<li><strong>GitHub Pages</strong> - Hosting</li>
</ul>
<h2 id="community-1"><a class="header" href="#community-1">Community</a></h2>
<h3 id="gemstone-iv-players"><a class="header" href="#gemstone-iv-players">GemStone IV Players</a></h3>
<p>The GemStone IV community has been invaluable for:</p>
<ul>
<li>Feature suggestions</li>
<li>Bug reports</li>
<li>Beta testing</li>
<li>Protocol documentation</li>
<li>General encouragement</li>
</ul>
<h3 id="contributors"><a class="header" href="#contributors">Contributors</a></h3>
<p>Thank you to everyone who has contributed code, documentation, bug reports, or feedback. See the <a href="https://github.com/your-repo/contributors">Contributors</a> page for a complete list.</p>
<h2 id="simutronics"><a class="header" href="#simutronics">Simutronics</a></h2>
<p>GemStone IV is developed and operated by <a href="https://www.simutronics.com/">Simutronics Corporation</a>. VellumFE is an unofficial third-party client developed by fans.</p>
<p><strong>Disclaimer</strong>: VellumFE is not affiliated with, endorsed by, or connected to Simutronics Corporation. GemStone IV and all related trademarks are property of Simutronics.</p>
<h2 id="standards-and-references"><a class="header" href="#standards-and-references">Standards and References</a></h2>
<p>VellumFE implementation references:</p>
<ul>
<li><strong><a href="https://en.wikipedia.org/wiki/ANSI_escape_code">ANSI Escape Codes</a></strong> - Terminal control sequences</li>
<li><strong><a href="https://vt100.net/">VT100</a></strong> - Terminal emulation reference</li>
<li><strong><a href="https://unicode.org/">Unicode</a></strong> - Character encoding standards</li>
<li><strong><a href="https://www.w3.org/WAI/standards-guidelines/wcag/">WCAG</a></strong> - Web Content Accessibility Guidelines</li>
</ul>
<h2 id="special-thanks"><a class="header" href="#special-thanks">Special Thanks</a></h2>
<ul>
<li>The Rust community for excellent tooling and documentation</li>
<li>Terminal emulator developers for maintaining standards</li>
<li>Everyone who plays GemStone IV and keeps the community alive</li>
<li>Open source maintainers everywhere</li>
</ul>
<h2 id="license-1"><a class="header" href="#license-1">License</a></h2>
<p>VellumFE is open source software. See the <a href="https://github.com/your-repo/LICENSE">LICENSE</a> file for details.</p>
<hr>
<p><em>“Standing on the shoulders of giants.”</em></p>
<h2 id="contributing-2"><a class="header" href="#contributing-2">Contributing</a></h2>
<p>Want to be acknowledged? <a href="#contributing-guide">Contribute</a> to VellumFE! All contributions, from code to documentation to bug reports, are valued.</p>
<h2 id="see-also-97"><a class="header" href="#see-also-97">See Also</a></h2>
<ul>
<li><a href="#contributing-guide">Contributing Guide</a></li>
<li><a href="#building-from-source-2">Building from Source</a></li>
<li><a href="#project-structure-1">Project Structure</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="api-documentation"><a class="header" href="#api-documentation">API Documentation</a></h1>
<p>Programmatic interface documentation for VellumFE.</p>
<h2 id="rust-api-documentation"><a class="header" href="#rust-api-documentation">Rust API Documentation</a></h2>
<p>VellumFE’s internal API is documented using Rust’s built-in documentation system.</p>
<h3 id="viewing-rustdoc"><a class="header" href="#viewing-rustdoc">Viewing Rustdoc</a></h3>
<p>Generate and view the API documentation:</p>
<pre><code class="language-bash"># Generate documentation
cargo doc --no-deps

# Open in browser
cargo doc --no-deps --open

# Include private items
cargo doc --no-deps --document-private-items
</code></pre>
<h3 id="online-documentation"><a class="header" href="#online-documentation">Online Documentation</a></h3>
<p>When available, API documentation is hosted at:</p>
<ul>
<li><strong>Stable</strong>: <a href="https://docs.rs/vellum-fe">docs.rs/vellum-fe</a> (when published)</li>
<li><strong>Development</strong>: Generated from source</li>
</ul>
<h2 id="module-overview"><a class="header" href="#module-overview">Module Overview</a></h2>
<p>VellumFE is organized into three main layers:</p>
<h3 id="data-layer-srcdata"><a class="header" href="#data-layer-srcdata">Data Layer (<code>src/data/</code>)</a></h3>
<p>Core data structures and game state.</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Key types
pub struct GameState { ... }
pub struct ParsedElement { ... }
pub enum StreamId { ... }
pub struct Vitals { ... }
<span class="boring">}</span></code></pre>
<p><strong>Key modules</strong>:</p>
<ul>
<li><code>data::game_state</code> - Central state management</li>
<li><code>data::parsed</code> - Parser output types</li>
<li><code>data::vitals</code> - Health/mana/stamina</li>
<li><code>data::room</code> - Room information</li>
</ul>
<h3 id="core-layer-srccore"><a class="header" href="#core-layer-srccore">Core Layer (<code>src/core/</code>)</a></h3>
<p>Business logic and widget management.</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Key types
pub struct WidgetManager { ... }
pub struct AppState { ... }
pub trait Widget { ... }
<span class="boring">}</span></code></pre>
<p><strong>Key modules</strong>:</p>
<ul>
<li><code>core::widget_manager</code> - Widget lifecycle</li>
<li><code>core::app_state</code> - Application state</li>
<li><code>core::sync</code> - State synchronization</li>
<li><code>core::layout</code> - Layout management</li>
</ul>
<h3 id="frontend-layer-srcfrontend"><a class="header" href="#frontend-layer-srcfrontend">Frontend Layer (<code>src/frontend/</code>)</a></h3>
<p>User interface and rendering.</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Key types
pub struct TuiApp { ... }
pub struct InputHandler { ... }
<span class="boring">}</span></code></pre>
<p><strong>Key modules</strong>:</p>
<ul>
<li><code>frontend::tui</code> - Terminal UI</li>
<li><code>frontend::tui::input</code> - Input handling</li>
<li><code>frontend::tui::render</code> - Rendering</li>
</ul>
<h2 id="key-traits-1"><a class="header" href="#key-traits-1">Key Traits</a></h2>
<h3 id="widget-trait"><a class="header" href="#widget-trait">Widget Trait</a></h3>
<p>All widgets implement the core widget trait:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub trait Widget {
    /// Widget name/identifier
    fn name(&amp;self) -&gt; &amp;str;

    /// Widget type
    fn widget_type(&amp;self) -&gt; WidgetType;

    /// Render the widget to a frame region
    fn render(&amp;self, frame: &amp;mut Frame, area: Rect);

    /// Handle input events
    fn handle_input(&amp;mut self, event: KeyEvent) -&gt; Option&lt;WidgetAction&gt;;

    /// Update from game state
    fn update(&amp;mut self, state: &amp;GameState) -&gt; bool;
}
<span class="boring">}</span></code></pre>
<h3 id="browser-trait"><a class="header" href="#browser-trait">Browser Trait</a></h3>
<p>Popup windows implement:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub trait Browser {
    /// Browser title
    fn title(&amp;self) -&gt; &amp;str;

    /// Render browser content
    fn render(&amp;self, frame: &amp;mut Frame, area: Rect);

    /// Handle input
    fn handle_input(&amp;mut self, event: KeyEvent) -&gt; BrowserAction;

    /// Initialize with game state
    fn init(&amp;mut self, state: &amp;GameState);
}
<span class="boring">}</span></code></pre>
<h2 id="configuration-api"><a class="header" href="#configuration-api">Configuration API</a></h2>
<h3 id="loading-configuration"><a class="header" href="#loading-configuration">Loading Configuration</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use vellum_fe::config::{Config, Layout, Theme};

// Load from default location
let config = Config::load()?;

// Load from specific path
let config = Config::from_file("path/to/config.toml")?;

// Access settings
let port = config.connection.port;
let render_rate = config.performance.render_rate;
<span class="boring">}</span></code></pre>
<h3 id="layout-configuration"><a class="header" href="#layout-configuration">Layout Configuration</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use vellum_fe::config::Layout;

let layout = Layout::load("layout.toml")?;

for widget_config in layout.widgets {
    println!("Widget: {} at ({}, {})",
             widget_config.name,
             widget_config.x,
             widget_config.y);
}
<span class="boring">}</span></code></pre>
<h2 id="parser-api"><a class="header" href="#parser-api">Parser API</a></h2>
<h3 id="parsing-game-data"><a class="header" href="#parsing-game-data">Parsing Game Data</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use vellum_fe::parser::Parser;

let mut parser = Parser::new();

// Feed data from game
let elements = parser.parse(raw_data)?;

// Process parsed elements
for element in elements {
    match element {
        ParsedElement::Text(text) =&gt; { /* ... */ }
        ParsedElement::Prompt(time) =&gt; { /* ... */ }
        ParsedElement::Vitals(vitals) =&gt; { /* ... */ }
        // ... other variants
    }
}
<span class="boring">}</span></code></pre>
<h3 id="parsedelement-variants-1"><a class="header" href="#parsedelement-variants-1">ParsedElement Variants</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub enum ParsedElement {
    Text(String),
    Prompt(u64),
    StreamPush(StreamId),
    StreamPop,
    StreamClear(StreamId),
    Vitals(VitalUpdate),
    Roundtime(u64),
    Casttime(u64),
    Compass(Vec&lt;Direction&gt;),
    Indicator(String, bool),
    Component(String, String),
    // ... and more
}
<span class="boring">}</span></code></pre>
<h2 id="network-api"><a class="header" href="#network-api">Network API</a></h2>
<h3 id="lich-connection"><a class="header" href="#lich-connection">Lich Connection</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use vellum_fe::network::LichConnection;

let conn = LichConnection::new("127.0.0.1", 8000)?;
conn.connect()?;

// Send command
conn.send("look")?;

// Receive data
let data = conn.receive()?;
<span class="boring">}</span></code></pre>
<h3 id="direct-connection"><a class="header" href="#direct-connection">Direct Connection</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use vellum_fe::network::DirectConnection;

let conn = DirectConnection::new(
    "account",
    "password",
    "prime",
    "character_name"
)?;

conn.authenticate()?;
conn.connect()?;
<span class="boring">}</span></code></pre>
<h2 id="event-system"><a class="header" href="#event-system">Event System</a></h2>
<h3 id="input-events"><a class="header" href="#input-events">Input Events</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use vellum_fe::events::{Event, KeyEvent};

loop {
    match event_receiver.recv()? {
        Event::Key(key_event) =&gt; {
            // Handle keyboard input
        }
        Event::Mouse(mouse_event) =&gt; {
            // Handle mouse input
        }
        Event::Resize(w, h) =&gt; {
            // Handle terminal resize
        }
        Event::GameData(data) =&gt; {
            // Handle incoming game data
        }
    }
}
<span class="boring">}</span></code></pre>
<h3 id="widget-actions-1"><a class="header" href="#widget-actions-1">Widget Actions</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub enum WidgetAction {
    None,
    SendCommand(String),
    OpenBrowser(BrowserType),
    CloseBrowser,
    FocusWidget(String),
    Scroll(ScrollDirection),
    Quit,
}
<span class="boring">}</span></code></pre>
<h2 id="building-extensions"><a class="header" href="#building-extensions">Building Extensions</a></h2>
<h3 id="adding-a-widget-type"><a class="header" href="#adding-a-widget-type">Adding a Widget Type</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use vellum_fe::widgets::{Widget, WidgetType};

pub struct CustomWidget {
    name: String,
    // Custom fields
}

impl Widget for CustomWidget {
    fn name(&amp;self) -&gt; &amp;str {
        &amp;self.name
    }

    fn widget_type(&amp;self) -&gt; WidgetType {
        WidgetType::Custom
    }

    fn render(&amp;self, frame: &amp;mut Frame, area: Rect) {
        // Render implementation
    }

    fn handle_input(&amp;mut self, event: KeyEvent) -&gt; Option&lt;WidgetAction&gt; {
        // Input handling
        None
    }

    fn update(&amp;mut self, state: &amp;GameState) -&gt; bool {
        // Update from state, return true if changed
        false
    }
}
<span class="boring">}</span></code></pre>
<h3 id="adding-a-parser-extension"><a class="header" href="#adding-a-parser-extension">Adding a Parser Extension</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use vellum_fe::parser::{Parser, ParsedElement};

impl Parser {
    pub fn handle_custom_tag(&amp;mut self, tag: &amp;str, attrs: &amp;[Attribute])
        -&gt; Option&lt;ParsedElement&gt;
    {
        if tag == "customtag" {
            // Parse custom tag
            Some(ParsedElement::Custom(/* ... */))
        } else {
            None
        }
    }
}
<span class="boring">}</span></code></pre>
<h2 id="error-handling-3"><a class="header" href="#error-handling-3">Error Handling</a></h2>
<p>VellumFE uses the <code>anyhow</code> crate for error handling:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use anyhow::{Result, Context};

fn load_config() -&gt; Result&lt;Config&gt; {
    let content = std::fs::read_to_string("config.toml")
        .context("Failed to read config file")?;

    let config: Config = toml::from_str(&amp;content)
        .context("Failed to parse config")?;

    Ok(config)
}
<span class="boring">}</span></code></pre>
<h2 id="testing-4"><a class="header" href="#testing-4">Testing</a></h2>
<h3 id="unit-tests-2"><a class="header" href="#unit-tests-2">Unit Tests</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[cfg(test)]
mod tests {
    use super::*;

    #[test]
    fn test_parser_basic() {
        let mut parser = Parser::new();
        let result = parser.parse(b"&lt;prompt&gt;&amp;gt;&lt;/prompt&gt;").unwrap();
        assert!(matches!(result[0], ParsedElement::Prompt(_)));
    }
}
<span class="boring">}</span></code></pre>
<h3 id="integration-tests-1"><a class="header" href="#integration-tests-1">Integration Tests</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// tests/integration_test.rs
use vellum_fe::*;

#[test]
fn test_full_workflow() {
    // Setup
    let config = Config::default();
    let mut app = App::new(config);

    // Simulate game data
    app.process_data(test_data());

    // Verify state
    assert!(app.game_state().vitals().health &gt; 0);
}
<span class="boring">}</span></code></pre>
<h2 id="version-compatibility"><a class="header" href="#version-compatibility">Version Compatibility</a></h2>
<p>API stability follows semantic versioning:</p>
<ul>
<li><strong>0.x.y</strong>: API may change between minor versions</li>
<li><strong>1.x.y</strong>: Breaking changes only in major versions</li>
</ul>
<h2 id="see-also-98"><a class="header" href="#see-also-98">See Also</a></h2>
<ul>
<li><a href="#project-structure-1">Project Structure</a> - Code organization</li>
<li><a href="#adding-widgets-1">Adding Widgets</a> - Widget development</li>
<li><a href="#parser-extensions-1">Parser Extensions</a> - Parser development</li>
<li><a href="#contributing-guide">Contributing</a> - Contribution guide</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>

        <template id=fa-eye><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM432 256c0 79.5-64.5 144-144 144s-144-64.5-144-144s64.5-144 144-144s144 64.5 144 144zM288 192c0 35.3-28.7 64-64 64c-11.5 0-22.3-3-31.6-8.4c-.2 2.8-.4 5.5-.4 8.4c0 53 43 96 96 96s96-43 96-96s-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6z"/></svg></span></template>
        <template id=fa-eye-slash><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L525.6 386.7c39.6-40.6 66.4-86.1 79.9-118.4c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C465.5 68.8 400.8 32 320 32c-68.2 0-125 26.3-169.3 60.8L38.8 5.1zM223.1 149.5C248.6 126.2 282.7 112 320 112c79.5 0 144 64.5 144 144c0 24.9-6.3 48.3-17.4 68.7L408 294.5c5.2-11.8 8-24.8 8-38.5c0-53-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6c0 10.2-2.4 19.8-6.6 28.3l-90.3-70.8zm223.1 298L373 389.9c-16.4 6.5-34.3 10.1-53 10.1c-79.5 0-144-64.5-144-144c0-6.9 .5-13.6 1.4-20.2L83.1 161.5C60.3 191.2 44 220.8 34.5 243.7c-3.3 7.9-3.3 16.7 0 24.6c14.9 35.7 46.2 87.7 93 131.1C174.5 443.2 239.2 480 320 480c47.8 0 89.9-12.9 126.2-32.5z"/></svg></span></template>
        <template id=fa-copy><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M502.6 70.63l-61.25-61.25C435.4 3.371 427.2 0 418.7 0H255.1c-35.35 0-64 28.66-64 64l.0195 256C192 355.4 220.7 384 256 384h192c35.2 0 64-28.8 64-64V93.25C512 84.77 508.6 76.63 502.6 70.63zM464 320c0 8.836-7.164 16-16 16H255.1c-8.838 0-16-7.164-16-16L239.1 64.13c0-8.836 7.164-16 16-16h128L384 96c0 17.67 14.33 32 32 32h47.1V320zM272 448c0 8.836-7.164 16-16 16H63.1c-8.838 0-16-7.164-16-16L47.98 192.1c0-8.836 7.164-16 16-16H160V128H63.99c-35.35 0-64 28.65-64 64l.0098 256C.002 483.3 28.66 512 64 512h192c35.2 0 64-28.8 64-64v-32h-47.1L272 448z"/></svg></span></template>
        <template id=fa-play><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80V432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"/></svg></span></template>
        <template id=fa-clock-rotate-left><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M75 75L41 41C25.9 25.9 0 36.6 0 57.9V168c0 13.3 10.7 24 24 24H134.1c21.4 0 32.1-25.9 17-41l-30.8-30.8C155 85.5 203 64 256 64c106 0 192 86 192 192s-86 192-192 192c-40.8 0-78.6-12.7-109.7-34.4c-14.5-10.1-34.4-6.6-44.6 7.9s-6.6 34.4 7.9 44.6C151.2 495 201.7 512 256 512c141.4 0 256-114.6 256-256S397.4 0 256 0C185.3 0 121.3 28.7 75 75zm181 53c-13.3 0-24 10.7-24 24V256c0 6.4 2.5 12.5 7 17l72 72c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-65-65V152c0-13.3-10.7-24-24-24z"/></svg></span></template>

        <!-- Livereload script (if served using the cli tool) -->
        <script>
            const wsProtocol = location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsAddress = wsProtocol + "//" + location.host + "/" + "__livereload";
            const socket = new WebSocket(wsAddress);
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>


        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr-ef4e11c1.min.js"></script>
        <script src="mark-09e88c2c.min.js"></script>
        <script src="searcher-c2a407aa.js"></script>

        <script src="clipboard-1626706a.min.js"></script>
        <script src="highlight-abc7f01d.js"></script>
        <script src="book-a0b12cfe.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>


    </div>
    </body>
</html>
